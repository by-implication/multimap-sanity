var shadow$provide = {};
if(typeof Math.imul == "undefined" || (Math.imul(0xffffffff,5) == 0)) {
    Math.imul = function (a, b) {
        var ah  = (a >>> 16) & 0xffff;
        var al = a & 0xffff;
        var bh  = (b >>> 16) & 0xffff;
        var bl = b & 0xffff;
        // the shift by 0 fixes the sign on the high part
        // the final |0 converts the unsigned value into a signed value
        return ((al * bl) + (((ah * bl + al * bh) << 16) >>> 0)|0);
    }
}
(function(){
shadow$provide.module$node_modules$mapbox_gl$dist$mapbox_gl=function(Ai,Bi,Ci,Sd,le,Di){(function(Cb,Wa){"object"===typeof le&&"undefined"!==typeof Sd?Sd.exports=Wa():"function"===typeof define&&define.amd?define(Wa):Cb.mapboxgl=Wa()})(this,function(){function Cb(d,gc){if(Wa)if(Nc){d="var sharedChunk \x3d {}; ("+Wa+")(sharedChunk); ("+Nc+")(sharedChunk);";var cb={};Wa(cb);od=gc(cb);od.workerUrl=window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))}else Nc=gc;else Wa=gc}var Wa,Nc,od;Cb(["exports"],
function(d){function gc(b,e){return b(e={exports:{}},e.exports),e.exports}function cb(b,e,k,a){this.cx=3*b;this.bx=3*(k-b)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*e;this.by=3*(a-e)-this.cy;this.ay=1-this.cy-this.by;this.p1x=b;this.p1y=a;this.p2x=k;this.p2y=a}function Db(b,e){this.x=b;this.y=e}function me(b,e){if(Array.isArray(b)){if(!Array.isArray(e)||b.length!==e.length)return!1;for(var k=0;k<b.length;k++)if(!me(b[k],e[k]))return!1;return!0}if("object"==typeof b&&null!==b&&null!==e){if("object"!=
typeof e||Object.keys(b).length!==Object.keys(e).length)return!1;for(k in b)if(!me(b[k],e[k]))return!1;return!0}return b===e}function Wa(b,e,k,a){var c=new Xe(b,e,k,a);return function(b){return c.solve(b)}}function Sa(b,e,k){return Math.min(k,Math.max(e,b))}function pd(b,e,k){var a=k-e;b=((b-e)%a+a)%a+e;return b===e?k:b}function Qa(b){for(var e=[],k=arguments.length-1;0<k--;)e[k]=arguments[k+1];for(k=0;k<e.length;k+=1){var a=e[k],c;for(c in a)b[c]=a[c]}return b}function qd(){return function k(e){return e?
(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,k)}()}function Rb(b){return!!b&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(b)}function Td(b,e){b.forEach(function(b){e[b]&&(e[b]=e[b].bind(e))})}function Oc(b,e){return-1!==b.indexOf(e,b.length-e.length)}function hc(b,e,k){var a={},c;for(c in b)a[c]=e.call(k||this,b[c],c,b);return a}function rd(b,e,k){var a={},c;for(c in b)e.call(k||this,b[c],c,b)&&(a[c]=b[c]);return a}
function Xa(b){return Array.isArray(b)?b.map(Xa):"object"==typeof b&&b?hc(b,Xa):b}function ic(b){Ma[b]||("undefined"!=typeof console&&console.warn(b),Ma[b]=!0)}function Sb(b,e,k){return(k.y-b.y)*(e.x-b.x)>(e.y-b.y)*(k.x-b.x)}function db(b){try{var e=self[b];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(k){return!1}}function Pc(b){var e=b.createTexture();b.bindTexture(b.TEXTURE_2D,e);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,xa),b.isContextLost())return;
ne.supported=!0}catch(k){}b.deleteTexture(e);qb=!0}function Tb(b,e){var k=eb(Ka.API_URL);if(b.protocol=k.protocol,b.authority=k.authority,"/"!==k.path&&(b.path=""+k.path+b.path),!Ka.REQUIRE_ACCESS_TOKEN)return jb(b);if(!(e=e||Ka.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens");if("s"===e[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens");
return b.params.push("access_token\x3d"+e),jb(b)}function rb(b){return 0===b.indexOf("mapbox:")}function eb(b){b=b.match(Kf);if(!b)throw Error("Unable to parse URL object");return{protocol:b[1],authority:b[2],path:b[3]||"/",params:b[4]?b[4].split("\x26"):[]}}function jb(b){var e=b.params.length?"?"+b.params.join("\x26"):"";return b.protocol+"://"+b.authority+b.path+e}function jc(b,e,k){k[b]&&-1!==k[b].indexOf(e)||(k[b]=k[b]||[],k[b].push(e))}function kc(b,e,k){k&&k[b]&&(e=k[b].indexOf(e),-1!==e&&
k[b].splice(e,1))}function fa(b){var e=b.key;return(b=b.value)?[new l(e,b,"constants have been deprecated as of v8")]:[]}function Eb(b){for(var e=[],k=arguments.length-1;0<k--;)e[k]=arguments[k+1];for(k=0;k<e.length;k+=1){var a=e[k],c;for(c in a)b[c]=a[c]}return b}function V(b){return b instanceof Number||b instanceof String||b instanceof Boolean?b.valueOf():b}function L(b){return Array.isArray(b)?b.map(L):V(b)}function ea(b,e){return{kind:"array",itemType:b,N:e}}function Y(b){if("array"===b.kind){var e=
Y(b.itemType);return"number"==typeof b.N?"array\x3c"+e+", "+b.N+"\x3e":"value"===b.itemType.kind?"array":"array\x3c"+e+"\x3e"}return b.kind}function Ub(b,e){if("error"===e.kind)return null;if("array"===b.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ub(b.itemType,e.itemType))&&("number"!=typeof b.N||b.N===e.N))return null}else{if(b.kind===e.kind)return null;if("value"===b.kind)for(var k=0,a=yh;k<a.length;k+=1)if(!Ub(a[k],e))return null}return"Expected "+Y(b)+" but found "+Y(e)+
" instead."}function sd(b,e,k,a){return"number"==typeof b&&0<=b&&255>=b&&"number"==typeof e&&0<=e&&255>=e&&"number"==typeof k&&0<=k&&255>=k?void 0===a||"number"==typeof a&&0<=a&&1>=a?null:"Invalid rgba value ["+[b,e,k,a].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof a?[b,e,k,a]:[b,e,k]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Na(b){if(null===b)return u;if("string"==typeof b)return K;if("boolean"==typeof b)return N;if("number"==
typeof b)return D;if(b instanceof oa)return kb;if(b instanceof oe)return lc;if(b instanceof sb)return ya;if(Array.isArray(b)){for(var e,k=b.length,a=0;a<b.length;a+=1){var c=Na(b[a]);if(e){if(e===c)continue;e=ja;break}e=c}return ea(e||ja,k)}return Fb}function mc(b){var e=typeof b;return null===b?"":"string"===e||"number"===e||"boolean"===e?String(b):b instanceof oa||b instanceof sb?b.toString():JSON.stringify(b)}function nc(b){if(b instanceof Ta&&("get"===b.name&&1===b.args.length||"feature-state"===
b.name||"has"===b.name&&1===b.args.length||"properties"===b.name||"geometry-type"===b.name||"id"===b.name||/^filter-/.test(b.name)))return!1;var e=!0;return b.eachChild(function(b){e&&!nc(b)&&(e=!1)}),e}function Gb(b){if(b instanceof Ta&&"feature-state"===b.name)return!1;var e=!0;return b.eachChild(function(b){e&&!Gb(b)&&(e=!1)}),e}function Ac(b,e){if(b instanceof Ta&&0<=e.indexOf(b.name))return!1;var k=!0;return b.eachChild(function(b){k&&!Ac(b,e)&&(k=!1)}),k}function Qc(b,e){for(var k,a,c=0,f=b.length-
1,g=0;c<=f;){if(k=b[g=Math.floor((c+f)/2)],a=b[g+1],e===k||e>k&&e<a)return g;if(k<e)c=g+1;else{if(!(k>e))throw new tb("Input is not a number.");f=g-1}}return Math.max(g-1,0)}function ha(b,e,k){return b*(1-k)+e*k}function oc(b){return b>zh?Math.pow(b,1/3):b/Ig+Jg}function Vb(b){return b>Ud?b*b*b:Ig*(b-Jg)}function Rc(b){return 255*(.0031308>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055)}function Wb(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Bc(b){var e=Wb(b.r),k=Wb(b.g),a=Wb(b.b),
c=oc((.4124564*e+.3575761*k+.1804375*a)/.95047),f=oc(.2126729*e+.7151522*k+.072175*a);return{l:116*f-16,a:500*(c-f),b:200*(f-oc((.0193339*e+.119192*k+.9503041*a)/1.08883)),alpha:b.a}}function Sc(b){var e=(b.l+16)/116,k=isNaN(b.a)?e:e+b.a/500,a=isNaN(b.b)?e:e-b.b/200;return e=1*Vb(e),k=.95047*Vb(k),a=1.08883*Vb(a),new oa(Rc(3.2404542*k-1.5371385*e-.4985314*a),Rc(-.969266*k+1.8760108*e+.041556*a),Rc(.0556434*k-.2040259*e+1.0572252*a),b.alpha)}function Ya(b,e,k,a){a-=k;b-=k;return 0===a?0:1===e?b/a:
(Math.pow(e,b)-1)/(Math.pow(e,a)-1)}function pc(b,e){return"\x3d\x3d"===b||"!\x3d"===b?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Tc(b,e,k,a){return 0===a.compare(e,k)}function A(b,e,k){var a="\x3d\x3d"!==b&&"!\x3d"!==b;return function(){function c(b,e,k){this.type=N;this.lhs=b;this.rhs=e;this.collator=k;this.hasUntypedArgument="value"===b.type.kind||"value"===e.type.kind}return c.parse=
function(b,e){if(3!==b.length&&4!==b.length)return e.error("Expected two or three arguments.");var k=b[0],f=e.parse(b[1],1,ja);if(!f)return null;if(!pc(k,f.type))return e.concat(1).error('"'+k+"\" comparisons are not supported for type '"+Y(f.type)+"'.");var g=e.parse(b[2],2,ja);if(!g)return null;if(!pc(k,g.type))return e.concat(2).error('"'+k+"\" comparisons are not supported for type '"+Y(g.type)+"'.");if(f.type.kind!==g.type.kind&&"value"!==f.type.kind&&"value"!==g.type.kind)return e.error("Cannot compare types '"+
Y(f.type)+"' and '"+Y(g.type)+"'.");a&&("value"===f.type.kind&&"value"!==g.type.kind?f=new Ua(g.type,[f]):"value"!==f.type.kind&&"value"===g.type.kind&&(g=new Ua(f.type,[g])));k=null;if(4===b.length){if("string"!==f.type.kind&&"string"!==g.type.kind&&"value"!==f.type.kind&&"value"!==g.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(k=e.parse(b[3],3,lc)))return null}return new c(f,g,k)},c.prototype.evaluate=function(c){var f=this.lhs.evaluate(c),g=this.rhs.evaluate(c);
if(a&&this.hasUntypedArgument){var J=Na(f),d=Na(g);if(J.kind!==d.kind||"string"!==J.kind&&"number"!==J.kind)throw new tb('Expected arguments for "'+b+'" to be (string, string) or (number, number), but found ('+J.kind+", "+d.kind+") instead.");}return this.collator&&!a&&this.hasUntypedArgument&&(J=Na(f),d=Na(g),"string"!==J.kind||"string"!==d.kind)?e(c,f,g):this.collator?k(c,f,g,this.collator.evaluate(c)):e(c,f,g)},c.prototype.eachChild=function(b){b(this.lhs);b(this.rhs);this.collator&&b(this.collator)},
c.prototype.possibleOutputs=function(){return[!0,!1]},c.prototype.serialize=function(){var e=[b];return this.eachChild(function(b){e.push(b.serialize())}),e},c}()}function Hb(b,e){var k=e[0],a=e[1],c=e[2];e=e[3];k=k.evaluate(b);a=a.evaluate(b);c=c.evaluate(b);b=e?e.evaluate(b):1;if(e=sd(k,a,c,b))throw new tb(e);return new oa(k/255*b,a/255*b,c/255*b,b)}function Uc(b,e){b=e[b];return void 0===b?null:b}function fb(b){return{result:"error",value:b}}function Ib(b){return"data-driven"===b["property-type"]||
"cross-faded-data-driven"===b["property-type"]}function qc(b){return!!b.expression&&-1<b.expression.parameters.indexOf("zoom")}function Jb(b){return!!b.expression&&b.expression.interpolated}function G(b){return b instanceof Number?"number":b instanceof String?"string":b instanceof Boolean?"boolean":Array.isArray(b)?"array":null===b?"null":typeof b}function pa(b){return"object"==typeof b&&null!==b&&!Array.isArray(b)}function lb(b){return b}function ub(b,e,k){return void 0!==b?b:void 0!==e?e:void 0!==
k?k:void 0}function Wd(b,e,k,a,c){return ub(typeof k===c?a[k]:void 0,b.default,e.default)}function W(b,e,k){if("number"!==G(k))return ub(b.default,e.default);e=b.stops.length;if(1===e||k<=b.stops[0][0])return b.stops[0][1];if(k>=b.stops[e-1][0])return b.stops[e-1][1];k=mb(b.stops,k);return b.stops[k][1]}function Cc(b,e,k){var a=void 0!==b.base?b.base:1;if("number"!==G(k))return ub(b.default,e.default);var c=b.stops.length;if(1===c||k<=b.stops[0][0])return b.stops[0][1];if(k>=b.stops[c-1][0])return b.stops[c-
1][1];c=mb(b.stops,k);var f=function(b,e,k,a){a-=k;b-=k;return 0===a?0:1===e?b/a:(Math.pow(e,b)-1)/(Math.pow(e,a)-1)}(k,a,b.stops[c][0],b.stops[c+1][0]),g=b.stops[c][1],d=b.stops[c+1][1],l=Ye[e.type]||lb;if(b.colorSpace&&"rgb"!==b.colorSpace){var n=Kg[b.colorSpace];l=function(b,e){return n.reverse(n.interpolate(n.forward(b),n.forward(e),f))}}return"function"==typeof g.evaluate?{evaluate:function(){for(var b=[],e=arguments.length;e--;)b[e]=arguments[e];e=g.evaluate.apply(void 0,b);b=d.evaluate.apply(void 0,
b);if(void 0!==e&&void 0!==b)return l(e,b,f)}}:l(g,d,f)}function Xb(b,e,k){return"color"===e.type?k=oa.parse(k):"formatted"===e.type?k=sb.fromString(k.toString()):G(k)===e.type||"enum"===e.type&&e.values[k]||(k=void 0),ub(k,b.default,e.default)}function mb(b,e){for(var k,a,c=0,f=b.length-1,g=0;c<=f;){if(k=b[g=Math.floor((c+f)/2)][0],a=b[g+1][0],e===k||e>k&&e<a)return g;k<e?c=g+1:k>e&&(f=g-1)}return Math.max(g-1,0)}function Dc(b){return Array.isArray(b)&&0<b.length&&"string"==typeof b[0]&&b[0]in Xd}
function Ec(b,e){var k=Vc;var a={color:kb,string:K,number:D,enum:K,boolean:N,formatted:ya};a="array"===e.type?ea(a[e.value]||ja,e.length):a[e.type];k=new k(Xd,[],a);return(b=k.parse(b,void 0,void 0,void 0,"string"===e.type?{typeAnnotation:"coerce"}:void 0))?{result:"success",value:new Ze(b,e)}:fb(k.errors)}function rc(b,e){if("error"===(b=Ec(b,e)).result)return b;var k=b.value.expression,a=nc(k);if(!a&&!Ib(e))return fb([new n("","data expressions not supported")]);var c=Ac(k,["zoom"]);return c||qc(e)?
(k=function Vd(b){var e=null;if(b instanceof Wc)e=Vd(b.result);else if(b instanceof Xc)for(var k=0,a=b.args;k<a.length&&!(e=Vd(a[k]));k+=1);else(b instanceof Yc||b instanceof qa)&&b.input instanceof Ta&&"zoom"===b.input.name&&(e=b);if(e instanceof n)return e;b.eachChild(function(b){b=Vd(b);b instanceof n?e=b:!e&&b?e=new n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&b&&e!==b&&(e=new n("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))});
return e}(k))||c?k instanceof n?fb([k]):k instanceof qa&&!Jb(e)?fb([new n("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:k?new pe(a?"camera":"composite",b.value,k):new $e(a?"constant":"source",b.value)}:fb([new n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):fb([new n("","zoom expressions not supported")])}function Va(b,e){if(pa(b))return new qe(b,e);if(Dc(b)){b=rc(b,e);if("error"===b.result)throw Error(b.value.map(function(b){return b.key+
": "+b.message}).join(", "));return b.value}var k=b;return"string"==typeof b&&"color"===e.type&&(k=oa.parse(b)),{kind:"constant",evaluate:function(){return k}}}function ka(b){var e=b.key,k=b.value,a=b.valueSpec||{},c=b.objectElementValidators||{},f=b.style;b=b.styleSpec;var g=[],d=G(k);if("object"!==d)return[new l(e,k,"object expected, "+d+" found")];for(var n in k){var t=n.split(".")[0];d=a[t]||a["*"];if(c[t])t=c[t];else if(a[t])t=v;else if(c["*"])t=c["*"];else{if(!a["*"]){g.push(new l(e,k[n],'unknown property "'+
n+'"'));continue}t=v}g=g.concat(t({key:(e?e+".":e)+n,value:k[n],valueSpec:d,style:f,styleSpec:b,object:k,objectKey:n},k))}for(var u in a)c[u]||a[u].required&&void 0===a[u].default&&void 0===k[u]&&g.push(new l(e,k,'missing required property "'+u+'"'));return g}function Zc(b){var e=b.value,k=b.valueSpec,a=b.style,c=b.styleSpec,f=b.key;b=b.arrayElementValidator||v;if("array"!==G(e))return[new l(f,e,"array expected, "+G(e)+" found")];if(k.length&&e.length!==k.length)return[new l(f,e,"array length "+k.length+
" expected, length "+e.length+" found")];if(k["min-length"]&&e.length<k["min-length"])return[new l(f,e,"array length at least "+k["min-length"]+" expected, length "+e.length+" found")];var g={type:k.value};7>c.$version&&(g.function=k.function);"object"===G(k.value)&&(g=k.value);k=[];for(var d=0;d<e.length;d++)k=k.concat(b({array:e,arrayIndex:d,value:e[d],valueSpec:g,style:a,styleSpec:c,key:f+"["+d+"]"}));return k}function td(b){var e=b.key,k=b.value;b=b.valueSpec;var a=G(k);return"number"!==a?[new l(e,
k,"number expected, "+a+" found")]:"minimum"in b&&k<b.minimum?[new l(e,k,k+" is less than the minimum value "+b.minimum)]:"maximum"in b&&k>b.maximum?[new l(e,k,k+" is greater than the maximum value "+b.maximum)]:[]}function $c(b){function e(b){var e=[],a=b.value,J=b.key;if("array"!==G(a))return[new l(J,a,"array expected, "+G(a)+" found")];if(2!==a.length)return[new l(J,a,"array length 2 expected, length "+a.length+" found")];if(h){if("object"!==G(a[0]))return[new l(J,a,"object expected, "+G(a[0])+
" found")];if(void 0===a[0].zoom)return[new l(J,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new l(J,a,"object stop key must have value")];if(f&&f>V(a[0].zoom))return[new l(J,a[0].zoom,"stop zoom values must appear in ascending order")];V(a[0].zoom)!==f&&(f=V(a[0].zoom),c=void 0,n={});e=e.concat(ka({key:J+"[0]",value:a[0],valueSpec:{zoom:{}},style:b.style,styleSpec:b.styleSpec,objectElementValidators:{zoom:td,value:k}}))}else e=e.concat(k({key:J+"[0]",value:a[0],valueSpec:{},
style:b.style,styleSpec:b.styleSpec},a));return Dc(L(a[1]))?e.concat([new l(J+"[1]",a[1],"expressions are not allowed in function stops.")]):e.concat(v({key:J+"[1]",value:a[1],valueSpec:g,style:b.style,styleSpec:b.styleSpec}))}function k(b,e){var k=G(b.value),f=V(b.value);e=null!==b.value?b.value:e;if(a){if(k!==a)return[new l(b.key,e,k+" stop domain type must match previous stop domain type "+a)]}else a=k;return"number"!==k&&"string"!==k&&"boolean"!==k?[new l(b.key,e,"stop domain value must be a number, string, or boolean")]:
"number"!==k&&"categorical"!==d?(k="number expected, "+k+" found",Ib(g)&&void 0===d&&(k+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new l(b.key,e,k)]):"categorical"!==d||"number"!==k||isFinite(f)&&Math.floor(f)===f?"categorical"!==d&&"number"===k&&void 0!==c&&f<c?[new l(b.key,e,"stop domain values must appear in ascending order")]:(c=f,"categorical"===d&&f in n?[new l(b.key,e,"stop domain values must be unique")]:(n[f]=!0,[])):[new l(b.key,e,"integer expected, found "+
f)]}var a,c,f,g=b.valueSpec,d=V(b.value.type),n={},t="categorical"!==d&&void 0===b.value.property,u=!t,h="array"===G(b.value.stops)&&"array"===G(b.value.stops[0])&&"object"===G(b.value.stops[0][0]),C=ka({key:b.key,value:b.value,valueSpec:b.styleSpec.function,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{stops:function(b){if("identity"===d)return[new l(b.key,b.value,'identity function may not have a "stops" property')];var k=[],a=b.value;k=k.concat(Zc({key:b.key,value:a,valueSpec:b.valueSpec,
style:b.style,styleSpec:b.styleSpec,arrayElementValidator:e}));"array"===G(a)&&0===a.length&&k.push(new l(b.key,a,"array must have at least one stop"));return k},default:function(b){return v({key:b.key,value:b.value,valueSpec:g,style:b.style,styleSpec:b.styleSpec})}}});return"identity"===d&&t&&C.push(new l(b.key,b.value,'missing required property "property"')),"identity"===d||b.value.stops||C.push(new l(b.key,b.value,'missing required property "stops"')),"exponential"===d&&b.valueSpec.expression&&
!Jb(b.valueSpec)&&C.push(new l(b.key,b.value,"exponential functions not supported")),8<=b.styleSpec.$version&&(u&&!Ib(b.valueSpec)?C.push(new l(b.key,b.value,"property functions not supported")):t&&!qc(b.valueSpec)&&C.push(new l(b.key,b.value,"zoom functions not supported"))),"categorical"!==d&&!h||void 0!==b.value.property||C.push(new l(b.key,b.value,'"property" property is required')),C}function ud(b){var e=("property"===b.expressionContext?rc:Ec)(L(b.value),b.valueSpec);return"error"===e.result?
e.value.map(function(e){return new l(""+b.key+e.key,b.value,e.message)}):"property"===b.expressionContext&&"text-font"===b.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new l(b.key,b.value,'Invalid data expression for "'+b.propertyKey+'". Output values must be contained as literals within the expression.')]:"property"!==b.expressionContext||"layout"!==b.propertyType||Gb(e.value._styleExpression.expression)?"filter"!==b.expressionContext||Gb(e.value.expression)?
[]:[new l(b.key,b.value,'"feature-state" data expressions are not supported with filters.')]:[new l(b.key,b.value,'"feature-state" data expressions are not supported with layout properties.')]}function Za(b){var e=b.key,k=b.value;b=b.valueSpec;var a=[];return Array.isArray(b.values)?-1===b.values.indexOf(V(k))&&a.push(new l(e,k,"expected one of ["+b.values.join(", ")+"], "+JSON.stringify(k)+" found")):-1===Object.keys(b.values).indexOf(V(k))&&a.push(new l(e,k,"expected one of ["+Object.keys(b.values).join(", ")+
"], "+JSON.stringify(k)+" found")),a}function Kb(b){if(!0===b||!1===b)return!0;if(!Array.isArray(b)||0===b.length)return!1;switch(b[0]){case "has":return 2<=b.length&&"$id"!==b[1]&&"$type"!==b[1];case "in":case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==b.length||Array.isArray(b[1])||Array.isArray(b[2]);case "any":case "all":var e=0;for(b=b.slice(1);e<b.length;e+=1){var k=b[e];if(!Kb(k)&&"boolean"!=typeof k)return!1}return!0;
default:return!0}}function Fc(b){if(null==b)return function(){return!0};Kb(b)||(b=H(b));var e=Ec(b,Ch);if("error"===e.result)throw Error(e.value.map(function(b){return b.key+": "+b.message}).join(", "));return function(b,a){return e.value.evaluate(b,a)}}function vb(b,e){return b<e?-1:b>e?1:0}function H(b){if(!b)return!0;var e,k=b[0];return 1>=b.length?"any"!==k:"\x3d\x3d"===k?vd(b[1],b[2],"\x3d\x3d"):"!\x3d"===k?Oa(vd(b[1],b[2],"\x3d\x3d")):"\x3c"===k||"\x3e"===k||"\x3c\x3d"===k||"\x3e\x3d"===k?vd(b[1],
b[2],k):"any"===k?(e=b.slice(1),["any"].concat(e.map(H))):"all"===k?["all"].concat(b.slice(1).map(H)):"none"===k?["all"].concat(b.slice(1).map(H).map(Oa)):"in"===k?Gc(b[1],b.slice(2)):"!in"===k?Oa(Gc(b[1],b.slice(2))):"has"===k?Yd(b[1]):"!has"!==k||Oa(Yd(b[1]))}function vd(b,e,k){switch(b){case "$type":return["filter-type-"+k,e];case "$id":return["filter-id-"+k,e];default:return["filter-"+k,b,e]}}function Gc(b,e){if(0===e.length)return!1;switch(b){case "$type":return["filter-type-in",["literal",e]];
case "$id":return["filter-id-in",["literal",e]];default:return 200<e.length&&!e.some(function(b){return typeof b!=typeof e[0]})?["filter-in-large",b,["literal",e.sort(vb)]]:["filter-in-small",b,["literal",e]]}}function Yd(b){switch(b){case "$type":return!0;case "$id":return["filter-has-id"];default:return["filter-has",b]}}function Oa(b){return["!",b]}function wd(b){return Kb(L(b.value))?ud(Eb({},b,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function J(b){var k=b.value,a=b.key;if("array"!==
G(k))return[new l(a,k,"array expected, "+G(k)+" found")];var c=b.styleSpec,f,g=[];if(1>k.length)return[new l(a,k,"filter array must have at least 1 element")];g=g.concat(Za({key:a+"[0]",value:k[0],valueSpec:c.filter_operator,style:b.style,styleSpec:b.styleSpec}));switch(V(k[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=k.length&&"$type"===V(k[1])&&g.push(new l(a,k,'"$type" cannot be use with operator "'+k[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==k.length&&g.push(new l(a,k,'filter array for operator "'+
k[0]+'" must have 3 elements'));case "in":case "!in":2<=k.length&&"string"!==(f=G(k[1]))&&g.push(new l(a+"[1]",k[1],"string expected, "+f+" found"));for(var d=2;d<k.length;d++)f=G(k[d]),"$type"===V(k[1])?g=g.concat(Za({key:a+"["+d+"]",value:k[d],valueSpec:c.geometry_type,style:b.style,styleSpec:b.styleSpec})):"string"!==f&&"number"!==f&&"boolean"!==f&&g.push(new l(a+"["+d+"]",k[d],"string, number, or boolean expected, "+f+" found"));break;case "any":case "all":case "none":for(c=1;c<k.length;c++)g=
g.concat(J({key:a+"["+c+"]",value:k[c],style:b.style,styleSpec:b.styleSpec}));break;case "has":case "!has":f=G(k[1]),2!==k.length?g.push(new l(a,k,'filter array for "'+k[0]+'" operator must have 2 elements')):"string"!==f&&g.push(new l(a+"[1]",k[1],"string expected, "+f+" found"))}return g}(b)}function p(b,e){var k=b.key,a=b.style,c=b.styleSpec,f=b.value,g=b.objectKey,d=c[e+"_"+b.layerType];if(!d)return[];var n=g.match(/^(.*)-transition$/);if("paint"===e&&n&&d[n[1]]&&d[n[1]].transition)return v({key:k,
value:f,valueSpec:c.transition,style:a,styleSpec:c});var t;d=b.valueSpec||d[g];if(!d)return[new l(k,f,'unknown property "'+g+'"')];if("string"===G(f)&&Ib(d)&&!d.tokens&&(t=/^{([^}]+)}$/.exec(f)))return[new l(k,f,'"'+g+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(t[1])+" }`.")];t=[];return"symbol"===b.layerType&&("text-field"===g&&a&&!a.glyphs&&t.push(new l(k,f,'use of "text-field" requires a style "glyphs" property')),
"text-font"===g&&pa(L(f))&&"identity"===V(f.type)&&t.push(new l(k,f,'"text-font" does not support identity functions'))),t.concat(v({key:b.key,value:f,valueSpec:d,style:a,styleSpec:c,expressionContext:"property",propertyType:e,propertyKey:g}))}function q(b){return p(b,"paint")}function h(b){return p(b,"layout")}function m(b){var e=[],k=b.value,a=b.key,c=b.style,f=b.styleSpec;k.type||k.ref||e.push(new l(a,k,'either "type" or "ref" is required'));var g,d=V(k.type),n=V(k.ref);if(k.id)for(var t=V(k.id),
u=0;u<b.arrayIndex;u++){var C=c.layers[u];V(C.id)===t&&e.push(new l(a,k.id,'duplicate layer id "'+k.id+'", previously used at line '+C.id.__line__))}"ref"in k?(["type","source","source-layer","filter","layout"].forEach(function(b){b in k&&e.push(new l(a,k[b],'"'+b+'" is prohibited for ref layers'))}),c.layers.forEach(function(b){V(b.id)===n&&(g=b)}),g?g.ref?e.push(new l(a,k.ref,"ref cannot reference another ref layer")):d=V(g.type):e.push(new l(a,k.ref,'ref layer "'+n+'" not found'))):"background"!==
d&&(k.source?(t=(c=c.sources&&c.sources[k.source])&&V(c.type),c?"vector"===t&&"raster"===d?e.push(new l(a,k.source,'layer "'+k.id+'" requires a raster source')):"raster"===t&&"raster"!==d?e.push(new l(a,k.source,'layer "'+k.id+'" requires a vector source')):"vector"!==t||k["source-layer"]?"raster-dem"===t&&"hillshade"!==d?e.push(new l(a,k.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==d||!k.paint||!k.paint["line-gradient"]||"geojson"===t&&c.lineMetrics||e.push(new l(a,
k,'layer "'+k.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new l(a,k,'layer "'+k.id+'" must specify a "source-layer"')):e.push(new l(a,k.source,'source "'+k.source+'" not found'))):e.push(new l(a,k,'missing required property "source"')));return e=e.concat(ka({key:a,value:k,valueSpec:f.layer,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return v({key:a+".type",value:k.type,valueSpec:f.layer.type,
style:b.style,styleSpec:b.styleSpec,object:k,objectKey:"type"})},filter:wd,layout:function(b){return ka({layer:k,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(b){return h(Eb({layerType:d},b))}}})},paint:function(b){return ka({layer:k,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(b){return q(Eb({layerType:d},b))}}})}}}))}function x(b){var e=b.value,k=b.key,a=b.styleSpec,c=b.style;if(!e.type)return[new l(k,
e,'"type" is required')];var f=V(e.type),g=[];switch(f){case "vector":case "raster":case "raster-dem":if(g=g.concat(ka({key:k,value:e,valueSpec:a["source_"+f.replace("-","_")],style:b.style,styleSpec:a})),"url"in e)for(var d in e)0>["type","url","tileSize"].indexOf(d)&&g.push(new l(k+"."+d,e[d],'a source with a "url" property may not include a "'+d+'" property'));return g;case "geojson":return ka({key:k,value:e,valueSpec:a.source_geojson,style:c,styleSpec:a});case "video":return ka({key:k,value:e,
valueSpec:a.source_video,style:c,styleSpec:a});case "image":return ka({key:k,value:e,valueSpec:a.source_image,style:c,styleSpec:a});case "canvas":return g.push(new l(k,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),g;default:return Za({key:k+".type",value:e.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:c,styleSpec:a})}}function r(b){var e=b.value,k=b.styleSpec,a=k.light;b=b.style;var c=[],
f=G(e);if(void 0===e)return c;if("object"!==f)return c.concat([new l("light",e,"object expected, "+f+" found")]);for(var g in e)c=(f=g.match(/^(.*)-transition$/))&&a[f[1]]&&a[f[1]].transition?c.concat(v({key:g,value:e[g],valueSpec:k.transition,style:b,styleSpec:k})):a[g]?c.concat(v({key:g,value:e[g],valueSpec:a[g],style:b,styleSpec:k})):c.concat([new l(g,e[g],'unknown property "'+g+'"')]);return c}function w(b){var e=b.value;b=b.key;var k=G(e);return"string"!==k?[new l(b,e,"string expected, "+k+" found")]:
[]}function v(b){var e=b.value,k=b.valueSpec,a=b.styleSpec;return k.expression&&pa(V(e))?$c(b):k.expression&&Dc(L(e))?ud(b):k.type&&Lg[k.type]?Lg[k.type](b):ka(Eb({},b,{valueSpec:k.type?a[k.type]:k}))}function z(b){var e=b.value,k=b.key;b=w(b);return b.length?b:(-1===e.indexOf("{fontstack}")&&b.push(new l(k,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&b.push(new l(k,e,'"glyphs" url must include a "{range}" token')),b)}function y(b,e){e=e||g;var k=[];return k=k.concat(v({key:"",
value:b,valueSpec:e.$root,styleSpec:e,style:b,objectElementValidators:{glyphs:z,"*":function(){return[]}}})),b.constants&&(k=k.concat(fa({key:"constants",value:b.constants,style:b,styleSpec:e}))),F(k)}function F(b){return[].concat(b).sort(function(b,k){return b.line-k.line})}function M(b){return function(){for(var e=[],k=arguments.length;k--;)e[k]=arguments[k];return F(b.apply(this,e))}}function S(b,e){var k=!1;if(e&&e.length)for(var a=0;a<e.length;a+=1)b.fire(new c(Error(e[a].message))),k=!0;return k}
function E(b,e,k){var a=this.cells=[];if(b instanceof ArrayBuffer){this.arrayBuffer=b;var c=new Int32Array(this.arrayBuffer);b=c[0];e=c[1];k=c[2];this.d=e+2*k;for(var f=0;f<this.d*this.d;f++){var g=c[ad+f],d=c[ad+f+1];a.push(g===d?null:c.subarray(g,d))}f=c[ad+a.length+1];this.keys=c.subarray(c[ad+a.length],f);this.bboxes=c.subarray(f);this.insert=this._insertReadonly}else{this.d=e+2*k;for(c=0;c<this.d*this.d;c++)a.push([]);this.keys=[];this.bboxes=[]}this.n=e;this.extent=b;this.padding=k;this.scale=
e/b;this.uid=0;e=k/e*b;this.min=-e;this.max=b+e}function B(b,e,k){void 0===k&&(k={});Object.defineProperty(e,"_classRegistryKey",{value:b,writeable:!1});re[b]={klass:e,omit:k.omit||[],shallow:k.shallow||[]}}function I(b,e){if(null==b||"boolean"==typeof b||"number"==typeof b||"string"==typeof b||b instanceof Boolean||b instanceof Number||b instanceof String||b instanceof Date||b instanceof RegExp)return b;if(b instanceof ArrayBuffer)return e&&e.push(b),b;if(ArrayBuffer.isView(b))return e&&e.push(b.buffer),
b;if(b instanceof Mg)return e&&e.push(b.data.buffer),b;if(Array.isArray(b)){for(var k=[],a=0;a<b.length;a+=1)k.push(I(b[a],e));return k}if("object"==typeof b){var c=b.constructor;k=c._classRegistryKey;if(!k)throw Error("can't serialize object of unregistered class");a=c.serialize?c.serialize(b,e):{};if(!c.serialize){for(var f in b)!b.hasOwnProperty(f)||0<=re[k].omit.indexOf(f)||(c=b[f],a[f]=0<=re[k].shallow.indexOf(f)?c:I(c,e));b instanceof Error&&(a.message=b.message)}if(a.$name)throw Error("$name property is reserved for worker serialization logic.");
return"Object"!==k&&(a.$name=k),a}throw Error("can't serialize object of type "+typeof b);}function ma(b){if(null==b||"boolean"==typeof b||"number"==typeof b||"string"==typeof b||b instanceof Boolean||b instanceof Number||b instanceof String||b instanceof Date||b instanceof RegExp||b instanceof ArrayBuffer||ArrayBuffer.isView(b)||b instanceof Mg)return b;if(Array.isArray(b))return b.map(ma);if("object"==typeof b){var e=b.$name||"Object",k=re[e].klass;if(!k)throw Error("can't deserialize unregistered class "+
e);if(k.deserialize)return k.deserialize(b);k=Object.create(k.prototype);for(var a=0,c=Object.keys(b);a<c.length;a+=1){var f=c[a];if("$name"!==f){var g=b[f];k[f]=0<=re[e].shallow.indexOf(f)?g:ma(g)}}return k}throw Error("can't deserialize object of type "+typeof b);}function Ba(b){for(var e=0;e<b.length;e+=1)if(O(b[e].charCodeAt(0)))return!0;return!1}function O(b){return 746===b||747===b||!(4352>b)&&(!!T["Bopomofo Extended"](b)||!!T.Bopomofo(b)||!(!T["CJK Compatibility Forms"](b)||65097<=b&&65103>=
b)||!!T["CJK Compatibility Ideographs"](b)||!!T["CJK Compatibility"](b)||!!T["CJK Radicals Supplement"](b)||!!T["CJK Strokes"](b)||!(!T["CJK Symbols and Punctuation"](b)||12296<=b&&12305>=b||12308<=b&&12319>=b||12336===b)||!!T["CJK Unified Ideographs Extension A"](b)||!!T["CJK Unified Ideographs"](b)||!!T["Enclosed CJK Letters and Months"](b)||!!T["Hangul Compatibility Jamo"](b)||!!T["Hangul Jamo Extended-A"](b)||!!T["Hangul Jamo Extended-B"](b)||!!T["Hangul Jamo"](b)||!!T["Hangul Syllables"](b)||
!!T.Hiragana(b)||!!T["Ideographic Description Characters"](b)||!!T.Kanbun(b)||!!T["Kangxi Radicals"](b)||!!T["Katakana Phonetic Extensions"](b)||!(!T.Katakana(b)||12540===b)||!(!T["Halfwidth and Fullwidth Forms"](b)||65288===b||65289===b||65293===b||65306<=b&&65310>=b||65339===b||65341===b||65343===b||65371<=b&&65503>=b||65507===b||65512<=b&&65519>=b)||!(!T["Small Form Variants"](b)||65112<=b&&65118>=b||65123<=b&&65126>=b)||!!T["Unified Canadian Aboriginal Syllabics"](b)||!!T["Unified Canadian Aboriginal Syllabics Extended"](b)||
!!T["Vertical Forms"](b)||!!T["Yijing Hexagram Symbols"](b)||!!T["Yi Syllables"](b)||!!T["Yi Radicals"](b))}function R(b){var e;(e=O(b))||(e=!!(T["Latin-1 Supplement"](b)&&(167===b||169===b||174===b||177===b||188===b||189===b||190===b||215===b||247===b)||T["General Punctuation"](b)&&(8214===b||8224===b||8225===b||8240===b||8241===b||8251===b||8252===b||8258===b||8263===b||8264===b||8265===b||8273===b)||T["Letterlike Symbols"](b)||T["Number Forms"](b)||T["Miscellaneous Technical"](b)&&(8960<=b&&8967>=
b||8972<=b&&8991>=b||8996<=b&&9E3>=b||9003===b||9085<=b&&9114>=b||9150<=b&&9165>=b||9167===b||9169<=b&&9179>=b||9186<=b&&9215>=b)||T["Control Pictures"](b)&&9251!==b||T["Optical Character Recognition"](b)||T["Enclosed Alphanumerics"](b)||T["Geometric Shapes"](b)||T["Miscellaneous Symbols"](b)&&!(9754<=b&&9759>=b)||T["Miscellaneous Symbols and Arrows"](b)&&(11026<=b&&11055>=b||11088<=b&&11097>=b||11192<=b&&11243>=b)||T["CJK Symbols and Punctuation"](b)||T.Katakana(b)||T["Private Use Area"](b)||T["CJK Compatibility Forms"](b)||
T["Small Form Variants"](b)||T["Halfwidth and Fullwidth Forms"](b)||8734===b||8756===b||8757===b||9984<=b&&10087>=b||10102<=b&&10131>=b||65532===b||65533===b));return!e}function P(b,e){void 0===e&&(e=1);var k=0,a=0;return{members:b.map(function(b){var c,f=(c=b.type,Dh[c].BYTES_PER_ELEMENT);c=k=gb(k,Math.max(e,f));var g=b.components||1;return a=Math.max(a,f),k+=f*g,{name:b.name,type:b.type,components:g,offset:c}}),size:gb(k,Math.max(a,e)),alignment:e}}function gb(b,e){return Math.ceil(b/e)*e}function wb(b,
e){return 256*Sa(Math.floor(b),0,255)+Sa(Math.floor(e),0,255)}function da(b,e,k){var a=b[e];b[e]=b[k];b[k]=a}function Ra(b){return[wb(255*b.r,255*b.g),wb(255*b.b,255*b.a)]}function Lb(b,e,k){var a={color:{source:af,composite:Mf},number:{source:bf,composite:af}};return(b={"line-pattern":{source:bd,composite:bd},"fill-pattern":{source:bd,composite:bd},"fill-extrusion-pattern":{source:bd,composite:bd}}[b])&&b[k]||a[e][k]}function ia(b){var e=8192/b.extent;b=b.loadGeometry();for(var k=0;k<b.length;k++)for(var a=
b[k],c=0;c<a.length;c++){var f=a[c];f.x=Math.round(f.x*e);f.y=Math.round(f.y*e);(f.x<cf.min||f.x>cf.max||f.y<cf.min||f.y>cf.max)&&ic("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return b}function xb(b,e,k,a,c){b.emplaceBack(2*e+(a+1)/2,2*k+(c+1)/2)}function Ng(b,e,k){for(var a=0;a<b.length;a++){var c=b[a];if(sc(c,e)||Ha(e,c,k))return!0}return!1}function Zd(b,e){if(1===b.length&&1===b[0].length)return $a(e,b[0][0]);for(var k=0;k<e.length;k++)for(var a=e[k],c=0;c<a.length;c++)if($a(b,
a[c]))return!0;for(k=0;k<b.length;k++){a=b[k];for(c=0;c<a.length;c++)if($a(e,a[c]))return!0;for(c=0;c<e.length;c++)if(Ca(a,e[c]))return!0}return!1}function la(b,e,k){for(var a=0;a<e.length;a++)for(var c=e[a],f=0;f<b.length;f++){var g=b[f];if(3<=g.length)for(var d=0;d<c.length;d++)if(sc(g,c[d]))return!0;a:{d=c;var l=k;if(1<g.length){if(Ca(g,d)){g=!0;break a}for(var n=0;n<d.length;n++)if(Ha(d[n],g,l)){g=!0;break a}}for(n=0;n<g.length;n++)if(Ha(g[n],d,l)){g=!0;break a}g=!1}if(g)return!0}return!1}function Ca(b,
e){if(0===b.length||0===e.length)return!1;for(var k=0;k<b.length-1;k++)for(var a=b[k],c=b[k+1],f=0;f<e.length-1;f++){var g=a,d=c,l=e[f],n=e[f+1];if(Sb(g,l,n)!==Sb(d,l,n)&&Sb(g,d,l)!==Sb(g,d,n))return!0}return!1}function Ha(b,e,k){k*=k;if(1===e.length)return b.distSqr(e[0])<k;for(var a=1;a<e.length;a++)if(na(b,e[a-1],e[a])<k)return!0;return!1}function na(b,e,k){var a=e.distSqr(k);if(0===a)return b.distSqr(e);a=((b.x-e.x)*(k.x-e.x)+(b.y-e.y)*(k.y-e.y))/a;return 0>a?b.distSqr(e):1<a?b.distSqr(k):b.distSqr(k.sub(e)._mult(a)._add(e))}
function $a(b,e){for(var k,a,c,f=!1,g=0;g<b.length;g++){var d=0;for(c=(k=b[g]).length-1;d<k.length;c=d++)a=k[d],c=k[c],a.y>e.y!=c.y>e.y&&e.x<(c.x-a.x)*(e.y-a.y)/(c.y-a.y)+a.x&&(f=!f)}return f}function sc(b,e){for(var k=!1,a=0,c=b.length-1;a<b.length;c=a++){var f=b[a];c=b[c];f.y>e.y!=c.y>e.y&&e.x<(c.x-f.x)*(e.y-f.y)/(c.y-f.y)+f.x&&(k=!k)}return k}function ab(b,e,k){var a=e.paint.get(b).value;return"constant"===a.kind?a.value:k.programConfigurations.get(e.id).binders[b].maxValue}function cd(b){return Math.sqrt(b[0]*
b[0]+b[1]*b[1])}function Z(b,e,k,a,c){if(!e[0]&&!e[1])return b;e=sa.convert(e);"viewport"===k&&e._rotate(-a);k=[];for(a=0;a<b.length;a++){for(var f=b[a],g=[],J=0;J<f.length;J++)g.push(f[J].sub(e._mult(c)));k.push(g)}return k}function Da(){var b=new dd(9);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function se(){var b=new dd(3);return b[0]=0,b[1]=0,b[2]=0,b}function Og(b){var e=b[0],k=b[1];b=b[2];return Math.sqrt(e*e+k*k+b*b)}function ba(b,e,k){var a=new dd(3);return a[0]=
b,a[1]=e,a[2]=k,a}function $d(){var b=new dd(4);return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b}function tc(b,e,k){var a=e[0],c=e[1],f=e[2];e=e[3];return b[0]=k[0]*a+k[4]*c+k[8]*f+k[12]*e,b[1]=k[1]*a+k[5]*c+k[9]*f+k[13]*e,b[2]=k[2]*a+k[6]*c+k[10]*f+k[14]*e,b[3]=k[3]*a+k[7]*c+k[11]*f+k[15]*e,b}function te(){var b=new dd(4);return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b}function df(b,e,k){b=tc([],[b.x,b.y,0,1],e);return new sa((b[0]/b[3]+1)*k.width*.5,(b[1]/b[3]+1)*k.height*.5)}function ae(b,e,k,a){var c=e.width;e=e.height;
if(a){if(a.length!==c*e*k)throw new RangeError("mismatched image size");}else a=new Uint8Array(c*e*k);return b.width=c,b.height=e,b.data=a,b}function yb(b,e,k){var a=e.width;e=e.height;if(a!==b.width||e!==b.height){var c=ae({},{width:a,height:e},k);ue(b,c,{x:0,y:0},{x:0,y:0},{width:Math.min(b.width,a),height:Math.min(b.height,e)},k);b.width=a;b.height=e;b.data=c.data}}function ue(b,e,k,a,c,f){if(0===c.width||0===c.height)return e;if(c.width>b.width||c.height>b.height||k.x>b.width-c.width||k.y>b.height-
c.height)throw new RangeError("out of range source coordinates for image copy");if(c.width>e.width||c.height>e.height||a.x>e.width-c.width||a.y>e.height-c.height)throw new RangeError("out of range destination coordinates for image copy");for(var g=b.data,J=e.data,d=0;d<c.height;d++)for(var l=((k.y+d)*b.width+k.x)*f,aa=((a.y+d)*e.width+a.x)*f,n=0;n<c.width*f;n++)J[aa+n]=g[l+n];return e}function ef(b,e){for(var k=new Uint8Array(1024),a={},c=0,f=0;256>c;c++,f+=4){a[e]=c/255;var g=b.evaluate(a);k[f+0]=
Math.floor(255*g.r/g.a);k[f+1]=Math.floor(255*g.g/g.a);k[f+2]=Math.floor(255*g.b/g.a);k[f+3]=Math.floor(255*g.a)}return new hb({width:256,height:1},k)}function be(b,e,k){k=k||2;var a,c,f,g=e&&e.length,d=g?e[0]*k:b.length,l=ff(b,0,d,k,!0),n=[];if(!l)return n;if(g){g=k;var t,u=[];var h=0;for(t=e.length;h<t;h++){var C=e[h]*g;var p=h<t-1?e[h+1]*g:b.length;(a=ff(b,C,p,g,!1))===a.next&&(a.steiner=!0);u.push(Nc(a))}u.sort(Cb);for(h=0;h<u.length;h++)gf(u[h],l),l=xd(l,l.next)}if(b.length>80*k){var m=e=b[0];
var D=a=b[1];for(g=k;g<d;g+=k)(c=b[g])<m&&(m=c),(f=b[g+1])<D&&(D=f),c>e&&(e=c),f>a&&(a=f);var K=0!==(K=Math.max(e-m,a-D))?1/K:0}return yd(l,n,k,m,D,K),n}function ff(b,e,k,a,c){if(c===0<ve(b,e,k,a))for(c=e;c<k;c+=a)var f=ed(c,b[c],b[c+1],f);else for(c=k-a;c>=e;c-=a)f=ed(c,b[c],b[c+1],f);return f&&Mb(f,f.next)&&(uc(f),f=f.next),f}function xd(b,e){if(!b)return b;e||(e=b);var k=b;do if(b=!1,k.steiner||!Mb(k,k.next)&&0!==Aa(k.prev,k,k.next))k=k.next;else{if(uc(k),(k=e=k.prev)===k.next)break;b=!0}while(b||
k!==e);return e}function yd(b,e,k,a,c,f,g){if(b){if(!g&&f){var J=b,d=J;do null===d.z&&(d.z=fd(d.x,d.y,a,c,f)),d.prevZ=d.prev,d=d.nextZ=d.next;while(d!==J);d.prevZ.nextZ=null;d.prevZ=null;J=d;var l,aa,n,t,wa=1;do{d=J;var u=J=null;for(n=0;d;){n++;var Q=d;for(l=t=0;l<wa&&(t++,Q=Q.nextZ);l++);for(l=wa;0<t||0<l&&Q;)0!==t&&(0===l||!Q||d.z<=Q.z)?(aa=d,d=d.nextZ,t--):(aa=Q,Q=Q.nextZ,l--),u?u.nextZ=aa:J=aa,aa.prevZ=u,u=aa;d=Q}u.nextZ=null;wa*=2}while(1<n)}for(d=b;b.prev!==b.next;){aa=b.prev;J=b.next;if(f)a:{Q=
b;wa=a;l=c;var h=f;u=Q.prev;n=Q.next;if(0<=Aa(u,Q,n))Q=!1;else{var C=u.x>Q.x?u.x>n.x?u.x:n.x:Q.x>n.x?Q.x:n.x,p=u.y>Q.y?u.y>n.y?u.y:n.y:Q.y>n.y?Q.y:n.y;t=fd(u.x<Q.x?u.x<n.x?u.x:n.x:Q.x<n.x?Q.x:n.x,u.y<Q.y?u.y<n.y?u.y:n.y:Q.y<n.y?Q.y:n.y,wa,l,h);wa=fd(C,p,wa,l,h);l=Q.prevZ;for(h=Q.nextZ;l&&l.z>=t&&h&&h.z<=wa;){if(l!==Q.prev&&l!==Q.next&&vc(u.x,u.y,Q.x,Q.y,n.x,n.y,l.x,l.y)&&0<=Aa(l.prev,l,l.next)||(l=l.prevZ,h!==Q.prev&&h!==Q.next&&vc(u.x,u.y,Q.x,Q.y,n.x,n.y,h.x,h.y)&&0<=Aa(h.prev,h,h.next))){Q=!1;break a}h=
h.nextZ}for(;l&&l.z>=t;){if(l!==Q.prev&&l!==Q.next&&vc(u.x,u.y,Q.x,Q.y,n.x,n.y,l.x,l.y)&&0<=Aa(l.prev,l,l.next)){Q=!1;break a}l=l.prevZ}for(;h&&h.z<=wa;){if(h!==Q.prev&&h!==Q.next&&vc(u.x,u.y,Q.x,Q.y,n.x,n.y,h.x,h.y)&&0<=Aa(h.prev,h,h.next)){Q=!1;break a}h=h.nextZ}Q=!0}}else a:if(Q=b,u=Q.prev,n=Q.next,0<=Aa(u,Q,n))Q=!1;else{for(t=Q.next.next;t!==Q.prev;){if(vc(u.x,u.y,Q.x,Q.y,n.x,n.y,t.x,t.y)&&0<=Aa(t.prev,t,t.next)){Q=!1;break a}t=t.next}Q=!0}if(Q)e.push(aa.i/k),e.push(b.i/k),e.push(J.i/k),uc(b),
d=b=J.next;else if((b=J)===d){if(g)if(1===g){g=yd;aa=e;J=k;d=b;do Q=d.prev,u=d.next.next,!Mb(Q,u)&&zd(Q,d,d.next,u)&&Ad(Q,u)&&Ad(u,Q)&&(aa.push(Q.i/J),aa.push(d.i/J),aa.push(u.i/J),uc(d),uc(d.next),d=b=u),d=d.next;while(d!==b);g(d,e,k,a,c,f,2)}else{if(2===g)a:{g=b;do{for(aa=g.next.next;aa!==g.prev;){if(g.i!==aa.i&&hf(g,aa)){b=jf(g,aa);g=xd(g,g.next);b=xd(b,b.next);yd(g,e,k,a,c,f);yd(b,e,k,a,c,f);break a}aa=aa.next}g=g.next}while(g!==b)}}else yd(xd(b),e,k,a,c,f,1);break}}}}function Cb(b,e){return b.x-
e.x}function gf(b,e){if(e=function(b,e){var k=e,a=b.x,c=b.y,f=-1/0;do{if(c<=k.y&&c>=k.next.y&&k.next.y!==k.y){var g=k.x+(c-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(g<=a&&g>f){if(f=g,g===a){if(c===k.y)return k;if(c===k.next.y)return k.next}var d=k.x<k.next.x?k:k.next}}k=k.next}while(k!==e);if(!d)return null;if(a===f)return d.prev;var J;e=d;g=d.x;var l=d.y,n=1/0;for(k=d.next;k!==e;)a>=k.x&&k.x>=g&&a!==k.x&&vc(c<l?a:f,c,g,l,c<l?f:a,c,k.x,k.y)&&((J=Math.abs(c-k.y)/(a-k.x))<n||J===n&&k.x>d.x)&&Ad(k,b)&&(d=
k,n=J),k=k.next;return d}(b,e))b=jf(e,b),xd(b,b.next)}function fd(b,e,k,a,c){return 1431655765&((b=858993459&((b=252645135&((b=16711935&((b=32767*(b-k)*c)|b<<8))|b<<4))|b<<2))|b<<1)|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-a)*c)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Nc(b){var e=b,k=b;do e.x<k.x&&(k=e),e=e.next;while(e!==b);return k}function vc(b,e,k,a,c,f,g,d){return 0<=(c-g)*(e-d)-(b-g)*(f-d)&&0<=(b-g)*(a-d)-(k-g)*(e-d)&&0<=(k-g)*(f-d)-(c-g)*(a-d)}function hf(b,e){return b.next.i!==
e.i&&b.prev.i!==e.i&&!function(b,e){var k=b;do{if(k.i!==b.i&&k.next.i!==b.i&&k.i!==e.i&&k.next.i!==e.i&&zd(k,k.next,b,e))return!0;k=k.next}while(k!==b);return!1}(b,e)&&Ad(b,e)&&Ad(e,b)&&function(b,e){var k=b,a=!1,c=(b.x+e.x)/2;e=(b.y+e.y)/2;do k.y>e!=k.next.y>e&&k.next.y!==k.y&&c<(k.next.x-k.x)*(e-k.y)/(k.next.y-k.y)+k.x&&(a=!a),k=k.next;while(k!==b);return a}(b,e)}function Aa(b,e,k){return(e.y-b.y)*(k.x-e.x)-(e.x-b.x)*(k.y-e.y)}function Mb(b,e){return b.x===e.x&&b.y===e.y}function zd(b,e,k,a){return!!(Mb(b,
e)&&Mb(k,a)||Mb(b,a)&&Mb(k,e))||0<Aa(b,e,k)!=0<Aa(b,e,a)&&0<Aa(k,a,b)!=0<Aa(k,a,e)}function Ad(b,e){return 0>Aa(b.prev,b,b.next)?0<=Aa(b,e,b.next)&&0<=Aa(b,b.prev,e):0>Aa(b,e,b.prev)||0>Aa(b,b.next,e)}function jf(b,e){var k=new Bd(b.i,b.x,b.y),a=new Bd(e.i,e.x,e.y),c=b.next,f=e.prev;return b.next=e,e.prev=b,k.next=c,c.prev=k,a.next=k,k.prev=a,f.next=a,a.prev=f,a}function ed(b,e,k,a){b=new Bd(b,e,k);return a?(b.next=a.next,b.prev=a,a.next.prev=b,a.next=b):(b.prev=b,b.next=b),b}function uc(b){b.next.prev=
b.prev;b.prev.next=b.next;b.prevZ&&(b.prevZ.nextZ=b.nextZ);b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function Bd(b,e,k){this.i=b;this.x=e;this.y=k;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function ve(b,e,k,a){for(var c=0,f=k-a;e<k;e+=a)c+=(b[f]-b[e])*(b[e+1]+b[f+1]),f=e;return c}function kf(b,e,k,a,c){!function Ah(b,e,k,a,c){for(;a>k;){if(600<a-k){var f=a-k+1,g=e-k+1,d=Math.log(f),J=.5*Math.exp(2*d/3);d=.5*Math.sqrt(d*J*(f-J)/f)*(0>g-f/2?-1:1);Ah(b,e,Math.max(k,Math.floor(e-g*
J/f+d)),Math.min(a,Math.floor(e+(f-g)*J/f+d)),c)}f=b[e];g=k;J=a;Cd(b,k,e);for(0<c(b[a],f)&&Cd(b,k,a);g<J;){Cd(b,g,J);g++;for(J--;0>c(b[g],f);)g++;for(;0<c(b[J],f);)J--}0===c(b[k],f)?Cd(b,k,J):Cd(b,++J,a);J<=e&&(k=J+1);e<=J&&(a=J-1)}}(b,e,k||0,a||b.length-1,c||od)}function Cd(b,e,k){var a=b[e];b[e]=b[k];b[k]=a}function od(b,e){return b<e?-1:b>e?1:0}function we(b,e){var k=b.length;if(1>=k)return[b];for(var a,c,f=[],g=0;g<k;g++){var d=b[g];for(var l=0,n=0,t=d.length,u=t-1,h,C=void 0;n<t;u=n++)h=d[n],
l+=((C=d[u]).x-h.x)*(h.y+C.y);d=l;0!==d&&(b[g].area=Math.abs(d),void 0===c&&(c=0>d),c===0>d?(a&&f.push(a),a=[b[g]]):a.push(b[g]))}if(a&&f.push(a),1<e)for(b=0;b<f.length;b++)f[b].length<=e||(Pg(f[b],e,1,f[b].length-1,Nf),f[b]=f[b].slice(0,e));return f}function Nf(b,e){return e.area-b.area}function xe(b,e,k){k=k.patternDependencies;for(var a=!1,c=0;c<e.length;c+=1){var f=e[c].paint.get(b+"-pattern");f.isConstant()||(a=!0);(f=f.constantOr(null))&&(a=!0,k[f.to]=!0,k[f.from]=!0)}return a}function ye(b,
e,k,a,c){c=c.patternDependencies;for(var f=0;f<e.length;f+=1){var g=e[f],d=g.paint.get(b+"-pattern").value;if("constant"!==d.kind){var J=d.evaluate({zoom:a-1},k,{}),l=d.evaluate({zoom:a},k,{});d=d.evaluate({zoom:a+1},k,{});c[J]=!0;c[l]=!0;c[d]=!0;k.patterns[g.id]={min:J,mid:l,max:d}}}return k}function Dd(b,e,k,a,c,f,g,d){b.emplaceBack(e,k,2*Math.floor(a*Of)+g,c*Of*2,f*Of*2,Math.round(d))}function Pf(b){return b.every(function(b){return 0>b.x})||b.every(function(b){return 8192<b.x})||b.every(function(b){return 0>
b.y})||b.every(function(b){return 8192<b.y})}function gd(b,e,k,a,c){this.properties={};this.extent=k;this.type=0;this._pbf=b;this._geometry=-1;this._keys=a;this._values=c;b.readFields(Qf,this,e)}function Qf(b,e,k){if(1==b)e.id=k.readVarint();else if(2==b)for(b=k.readVarint()+k.pos;k.pos<b;){var a=e._keys[k.readVarint()],c=e._values[k.readVarint()];e.properties[a]=c}else 3==b?e.type=k.readVarint():4==b&&(e._geometry=k.pos)}function lf(b,e){this.version=1;this.name=null;this.extent=4096;this.length=
0;this._pbf=b;this._keys=[];this._values=[];this._features=[];b.readFields(Rf,this,e);this.length=this._features.length}function Rf(b,e,k){15===b?e.version=k.readVarint():1===b?e.name=k.readString():5===b?e.extent=k.readVarint():2===b?e._features.push(k.pos):3===b?e._keys.push(k.readString()):4===b&&e._values.push(function(b){for(var e=null,k=b.readVarint()+b.pos;b.pos<k;)e=b.readVarint()>>3,e=1===e?b.readString():2===e?b.readFloat():3===e?b.readDouble():4===e?b.readVarint64():5===e?b.readVarint():
6===e?b.readSVarint():7===e?b.readBoolean():null;return e}(k))}function Sf(b,e,k){3===b&&(b=new Qg(k,k.readVarint()+k.pos),b.length&&(e[b.name]=b))}function ze(b,e,k,a,c,f,g){b.emplaceBack(e.x,e.y,a?1:0,c?1:-1,Math.round(63*k.x)+128,Math.round(63*k.y)+128,1+(0===f?0:0>f?-1:1)|(.5*g&63)<<2,.5*g>>6)}function Tf(b,e,k){return b.sections.forEach(function(b){var a=b.text;var c=e.layout.get("text-transform").evaluate(k,{});c=("uppercase"===c?a=a.toLocaleUpperCase():"lowercase"===c&&(a=a.toLocaleLowerCase()),
Ed.applyArabicShaping&&(a=Ed.applyArabicShaping(a)),a);b.text=c}),b}function Ae(b,e){var k=e.expression;if("constant"===k.kind)return{functionType:"constant",layoutSize:k.evaluate(new Ea(b+1))};if("source"===k.kind)return{functionType:"source"};for(var a=k.zoomStops,c=0;c<a.length&&a[c]<=b;)c++;for(var f=c=Math.max(0,c-1);f<a.length&&a[f]<b+1;)f++;f=Math.min(a.length-1,f);a={min:a[c],max:a[f]};return"composite"===k.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",
layoutSize:k.evaluate(new Ea(b+1)),zoomRange:a,sizeRange:{min:k.evaluate(new Ea(a.min)),max:k.evaluate(new Ea(a.max))},propertyValue:e.value}}function ce(b,e,a,c,f,g,d,l){b.emplaceBack(e,a,Math.round(32*c),Math.round(32*f),g,d,l?l[0]:0,l?l[1]:0)}function Be(b,e,a){b.emplaceBack(e.x,e.y,a);b.emplaceBack(e.x,e.y,a);b.emplaceBack(e.x,e.y,a);b.emplaceBack(e.x,e.y,a)}function mf(b){for(var e=0,a=0,c=0;c<b.length;c+=1){var f=b[c];e+=f.w*f.h;a=Math.max(a,f.w)}b.sort(function(b,e){return e.h-b.h});a=[{x:0,
y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),a),h:1/0}];for(var g=f=c=0;g<b.length;g+=1)for(var d=b[g],l=a.length-1;0<=l;l--){var n=a[l];if(!(d.w>n.w||d.h>n.h)){(d.x=n.x,d.y=n.y,f=Math.max(f,d.y+d.h),c=Math.max(c,d.x+d.w),d.w===n.w&&d.h===n.h)?(d=a.pop(),l<a.length&&(a[l]=d)):d.h===n.h?(n.x+=d.w,n.w-=d.w):d.w===n.w?(n.y+=d.h,n.h-=d.h):(a.push({x:n.x+d.w,y:n.y,w:n.w-d.w,h:d.h}),n.y+=d.h,n.h-=d.h);break}}return{w:c,h:f,fill:e/(c*f)||0}}function ra(b){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(b)?
b:new Uint8Array(b||0);this.type=this.pos=0;this.length=this.buf.length}function Yb(b){return b.type===ra.Bytes?b.readVarint()+b.pos:b.pos+1}function nf(b,e,a){e=16383>=e?1:2097151>=e?2:268435455>=e?3:Math.ceil(Math.log(e)/(7*Math.LN2));a.realloc(e);for(var k=a.pos-1;k>=b;k--)a.buf[k+e]=a.buf[k]}function Uf(b,e){for(var a=0;a<b.length;a++)e.writeVarint(b[a])}function Vf(b,e){for(var a=0;a<b.length;a++)e.writeSVarint(b[a])}function de(b,e){for(var a=0;a<b.length;a++)e.writeFloat(b[a])}function of(b,
e){for(var a=0;a<b.length;a++)e.writeDouble(b[a])}function pf(b,e){for(var a=0;a<b.length;a++)e.writeBoolean(b[a])}function Wf(b,e){for(var a=0;a<b.length;a++)e.writeFixed32(b[a])}function Xf(b,e){for(var a=0;a<b.length;a++)e.writeSFixed32(b[a])}function qf(b,e){for(var a=0;a<b.length;a++)e.writeFixed64(b[a])}function Yf(b,e){for(var a=0;a<b.length;a++)e.writeSFixed64(b[a])}function hd(b,e){return(b[e]|b[e+1]<<8|b[e+2]<<16)+16777216*b[e+3]}function id(b,e,a){b[a]=e;b[a+1]=e>>>8;b[a+2]=e>>>16;b[a+
3]=e>>>24}function rf(b,e){return(b[e]|b[e+1]<<8|b[e+2]<<16)+(b[e+3]<<24)}function Zf(b,e,a){1===b&&a.readMessage(Ce,e)}function Ce(b,e,a){if(3===b){b=a.readMessage(sf,{});a=b.width;var k=b.height,c=b.left,f=b.top,g=b.advance;e.push({id:b.id,bitmap:new Fd({width:a+6,height:k+6},b.bitmap),metrics:{width:a,height:k,left:c,top:f,advance:g}})}}function sf(b,e,a){1===b?e.id=a.readVarint():2===b?e.bitmap=a.readBytes():3===b?e.width=a.readVarint():4===b?e.height=a.readVarint():5===b?e.left=a.readSVarint():
6===b?e.top=a.readSVarint():7===b&&(e.advance=a.readVarint())}function tf(b,e,a){a=12756274*Math.PI/256/Math.pow(2,a);return[b*a-12756274*Math.PI/2,e*a-12756274*Math.PI/2]}function De(b){return 12756274*Math.PI*Math.cos(b*Math.PI/180)}function uf(b){return(180+b)/360}function vf(b){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+b*Math.PI/360)))/360}function wf(b){return 360/Math.PI*Math.atan(Math.exp((180-360*b)*Math.PI/180))-90}function ee(b,e,a,c){0>(b*=2)&&(b=-1*b-1);var k=1<<e;return 32*(k*
k*b+k*c+a)+e}function La(b,e){return e-b}function ca(b,e,a,c){var k=Math.pow(b-e,2);return c?b<e?k/2:2*k:k+Math.abs(a)*a}function za(b,e){var a=0;return 10===b&&(a-=1E4),40!==b&&65288!==b||(a+=50),41!==e&&65289!==e||(a+=50),a}function Hc(b,e,a,c,f,g){for(var k=null,d=ca(e,a,f,g),J=0;J<c.length;J+=1){var l=c[J],aa=ca(e-l.x,a,f,g)+l.badness;aa<=d&&(k=l,d=aa)}return{index:b,x:e,priorBreak:k,badness:d}}function bb(b,e,a,c){if(!a||!b)return[];var k,f=[];a=function(b,e,a,k){for(var c=0,f=0;f<b.length();f++){var g=
b.getSection(f),d=k[g.fontStack];(d=d&&d[b.getCharCode(f)])&&(c+=d.metrics.advance*g.scale+e)}return c/Math.max(1,Math.ceil(c/a))}(b,e,a,c);for(var g=0,d=0;d<b.length();d++){var J=b.getSection(d),l=b.getCharCode(d),n=c[J.fontStack];(n=n&&n[l])&&!$f[l]&&(g+=n.metrics.advance*J.scale+e);d<b.length()-1&&(Gh[l]||!(11904>(k=l))&&(T["Bopomofo Extended"](k)||T.Bopomofo(k)||T["CJK Compatibility Forms"](k)||T["CJK Compatibility Ideographs"](k)||T["CJK Compatibility"](k)||T["CJK Radicals Supplement"](k)||T["CJK Strokes"](k)||
T["CJK Symbols and Punctuation"](k)||T["CJK Unified Ideographs Extension A"](k)||T["CJK Unified Ideographs"](k)||T["Enclosed CJK Letters and Months"](k)||T["Halfwidth and Fullwidth Forms"](k)||T.Hiragana(k)||T["Ideographic Description Characters"](k)||T["Kangxi Radicals"](k)||T["Katakana Phonetic Extensions"](k)||T.Katakana(k)||T["Vertical Forms"](k)||T["Yi Radicals"](k)||T["Yi Syllables"](k)))&&f.push(Hc(d+1,g,a,f,za(l,b.getCharCode(d+1)),!1))}return function Bh(b){return b?Bh(b.priorBreak).concat(b.index):
[]}(Hc(b.length(),g,a,f,0,!0))}function Gd(b){var e=.5,a=.5;switch(b){case "right":case "top-right":case "bottom-right":e=1;break;case "left":case "top-left":case "bottom-left":e=0}switch(b){case "bottom":case "bottom-right":case "bottom-left":a=1;break;case "top":case "top-right":case "top-left":a=0}return{horizontalAlign:e,verticalAlign:a}}var Xe=cb;cb.prototype.sampleCurveX=function(b){return((this.ax*b+this.bx)*b+this.cx)*b};cb.prototype.sampleCurveY=function(b){return((this.ay*b+this.by)*b+this.cy)*
b};cb.prototype.sampleCurveDerivativeX=function(b){return(3*this.ax*b+2*this.bx)*b+this.cx};cb.prototype.solveCurveX=function(b,e){var a,c;void 0===e&&(e=1E-6);var f=b;for(a=0;8>a;a++){if(c=this.sampleCurveX(f)-b,Math.abs(c)<e)return f;var g=this.sampleCurveDerivativeX(f);if(1E-6>Math.abs(g))break;f-=c/g}if((f=b)<(a=0))return a;if(f>(g=1))return g;for(;a<g&&!(c=this.sampleCurveX(f),Math.abs(c-b)<e);)b>c?a=f:g=f,f=.5*(g-a)+a;return f};cb.prototype.solve=function(b,e){return this.sampleCurveY(this.solveCurveX(b,
e))};var sa=Db;Db.prototype={clone:function(){return new Db(this.x,this.y)},add:function(b){return this.clone()._add(b)},sub:function(b){return this.clone()._sub(b)},multByPoint:function(b){return this.clone()._multByPoint(b)},divByPoint:function(b){return this.clone()._divByPoint(b)},mult:function(b){return this.clone()._mult(b)},div:function(b){return this.clone()._div(b)},rotate:function(b){return this.clone()._rotate(b)},rotateAround:function(b,e){return this.clone()._rotateAround(b,e)},matMult:function(b){return this.clone()._matMult(b)},
unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(b){return this.x===b.x&&this.y===b.y},dist:function(b){return Math.sqrt(this.distSqr(b))},distSqr:function(b){var e=b.x-this.x;b=b.y-this.y;return e*e+b*b},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(b){return Math.atan2(this.y-b.y,this.x-b.x)},angleWith:function(b){return this.angleWithSep(b.x,
b.y)},angleWithSep:function(b,e){return Math.atan2(this.x*e-this.y*b,this.x*b+this.y*e)},_matMult:function(b){var e=b[2]*this.x+b[3]*this.y;return this.x=b[0]*this.x+b[1]*this.y,this.y=e,this},_add:function(b){return this.x+=b.x,this.y+=b.y,this},_sub:function(b){return this.x-=b.x,this.y-=b.y,this},_mult:function(b){return this.x*=b,this.y*=b,this},_div:function(b){return this.x/=b,this.y/=b,this},_multByPoint:function(b){return this.x*=b.x,this.y*=b.y,this},_divByPoint:function(b){return this.x/=
b.x,this.y/=b.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var b=this.y;return this.y=this.x,this.x=-b,this},_rotate:function(b){var e=Math.cos(b);b=Math.sin(b);var a=b*this.x+e*this.y;return this.x=e*this.x-b*this.y,this.y=a,this},_rotateAround:function(b,e){var a=Math.cos(b);b=Math.sin(b);var c=e.y+b*(this.x-e.x)+a*(this.y-e.y);return this.x=e.x+a*(this.x-e.x)-b*(this.y-e.y),this.y=c,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),
this}};Db.convert=function(b){return b instanceof Db?b:Array.isArray(b)?new Db(b[0],b[1]):b};var zb=Wa(.25,.1,.25,1),xf=1,Ma={},Hd,xa,Id=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Zb=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ag=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Pa={now:Id,frame:function(b){var e=
Zb(b);return{cancel:function(){return ag(e)}}},getImageData:function(b){var e=self.document.createElement("canvas"),a=e.getContext("2d");if(!a)throw Error("failed to create canvas 2d context");return e.width=b.width,e.height=b.height,a.drawImage(b,0,0,b.width,b.height),a.getImageData(0,0,b.width,b.height)},resolveURL:function(b){var e=self.document.createElement("a");return e.href=b,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},
Ka={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return 0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":"https://events.mapbox.com/events/v2"},REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ne={supported:!1,testSupport:function(b){if(!qb&&xa){if(!xa.complete)return void(Hd=b);Pc(b)}}},qb=!1;self.document&&((xa=self.document.createElement("img")).onload=function(){Hd&&Pc(Hd);Hd=null},xa.onerror=function(){qb=!0;Hd=null},xa.src=
"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d");var $b=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Jd=/(\.(png|jpg)\d*)(?=$)/,bg=/\.[\w]+$/,cg=function(b){var e=eb(b);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(bg))return b;b="mapbox://tiles/"+e.path.replace("/v4/","");e=e.params.filter(function(b){return!b.match(/^access_token=/)});return e.length&&(b+="?"+e.join("\x26")),b},Kf=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/,Ic=function(b){this.type=b;this.anonId=
null;this.eventData={lastSuccess:null,accessToken:Ka.ACCESS_TOKEN};this.queue=[];this.pendingRequest=null};Ic.prototype.fetchEventData=function(){var b=db("localStorage"),e="mapbox.eventData:"+(Ka.ACCESS_TOKEN||""),a="mapbox.eventData.uuid:"+(Ka.ACCESS_TOKEN||"");if(b)try{var c=self.localStorage.getItem(e);c&&(this.eventData=JSON.parse(c));var f=self.localStorage.getItem(a);f&&(this.anonId=f)}catch(wa){ic("Unable to read from LocalStorage")}};Ic.prototype.saveEventData=function(){var b=db("localStorage"),
e="mapbox.eventData:"+(Ka.ACCESS_TOKEN||""),a="mapbox.eventData.uuid:"+(Ka.ACCESS_TOKEN||"");if(b)try{self.localStorage.setItem(a,this.anonId),this.eventData.lastSuccess&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(J){ic("Unable to write to LocalStorage")}};Ic.prototype.processRequests=function(){};Ic.prototype.postEvent=function(b,e,a){var k=this,c=eb(Ka.EVENTS_URL);c.params.push("access_token\x3d"+(Ka.ACCESS_TOKEN||""));b={event:this.type,created:(new Date(b)).toISOString(),
sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.52.0",userId:this.anonId};e=e?Qa(b,e):b;c={url:jb(c),headers:{"Content-Type":"text/plain"},body:JSON.stringify([e])};this.pendingRequest=dg(c,function(b){k.pendingRequest=null;a(b);k.saveEventData();k.processRequests()})};Ic.prototype.queueRequest=function(b){this.queue.push(b);this.processRequests()};var eg=function(b){function e(){b.call(this,"map.load");this.success={}}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=
e,e.prototype.postMapLoadEvent=function(b,e){Ka.ACCESS_TOKEN&&Array.isArray(b)&&b.some(function(b){return $b.test(b)})&&this.queueRequest({id:e,timestamp:Date.now()})},e.prototype.processRequests=function(){var b=this;if(!this.pendingRequest&&0!==this.queue.length){var e=this.queue.shift(),a=e.id;e=e.timestamp;a&&this.success[a]||(this.anonId||this.fetchEventData(),Rb(this.anonId)||(this.anonId=qd()),this.postEvent(e,{},function(e){e||a&&(b.success[a]=!0)}))}},e}(Ic),jd=new (function(b){function e(){b.call(this,
"appUserTurnstile")}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(b){Ka.ACCESS_TOKEN&&Array.isArray(b)&&b.some(function(b){return $b.test(b)})&&this.queueRequest(Date.now())},e.prototype.processRequests=function(){var b=this;if(!this.pendingRequest&&0!==this.queue.length){var e=!!this.eventData.accessToken&&this.eventData.accessToken!==Ka.ACCESS_TOKEN;e&&(this.anonId=this.eventData.lastSuccess=null);this.anonId&&
this.eventData.lastSuccess||this.fetchEventData();Rb(this.anonId)||(this.anonId=qd(),e=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var c=new Date(this.eventData.lastSuccess),f=new Date(a),g=(a-this.eventData.lastSuccess)/864E5;e=e||1<=g||-1>g||c.getDate()!==f.getDate()}else e=!0;if(!e)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},function(e){e||(b.eventData.lastSuccess=a,b.eventData.accessToken=Ka.ACCESS_TOKEN)})}},e}(Ic)),Ee=jd.postTurnstileEvent.bind(jd),
Jc=new eg,yf=Jc.postMapLoadEvent.bind(Jc),zf={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(zf);var Af=function(b){function e(e,a,c){401===a&&$b.test(c)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens");b.call(this,e);this.status=a;this.url=c;this.name=this.constructor.name;this.message=
e}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),Bf="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope?function(){return self.worker&&self.worker.referrer}:function(){var b=self.location.origin;if(b&&"null"!==b&&"file://"!==b)return b+self.location.pathname},wc=self.fetch&&self.Request&&self.AbortController?
function(b,e){var a=new self.AbortController,c=new self.Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,referrer:Bf(),signal:a.signal});return"json"===b.type&&c.headers.set("Accept","application/json"),self.fetch(c).then(function(a){a.ok?a[b.type||"text"]().then(function(b){e(null,b,a.headers.get("Cache-Control"),a.headers.get("Expires"))}).catch(function(b){return e(Error(b.message))}):e(new Af(a.statusText,a.status,b.url))}).catch(function(b){20!==b.code&&
e(Error(b.message))}),{cancel:function(){return a.abort()}}}:function(b,e){var a=new self.XMLHttpRequest,c;for(c in a.open(b.method||"GET",b.url,!0),"arrayBuffer"===b.type&&(a.responseType="arraybuffer"),b.headers)a.setRequestHeader(c,b.headers[c]);return"json"===b.type&&a.setRequestHeader("Accept","application/json"),a.withCredentials="include"===b.credentials,a.onerror=function(){e(Error(a.statusText))},a.onload=function(){if((200<=a.status&&300>a.status||0===a.status)&&null!==a.response){var k=
a.response;if("json"===b.type)try{k=JSON.parse(a.response)}catch(wa){return e(wa)}e(null,k,a.getResponseHeader("Cache-Control"),a.getResponseHeader("Expires"))}else e(new Af(a.statusText,a.status,b.url))},a.send(b.body),{cancel:function(){return a.abort()}}},ac=function(b,e){return wc(Qa(b,{type:"arrayBuffer"}),e)},dg=function(b,e){return wc(Qa(b,{method:"POST"}),e)};var Fe=[];var Kd=0;var C=function(b,e){if(Kd>=Ka.MAX_PARALLEL_IMAGE_REQUESTS){var a={requestParameters:b,callback:e,cancelled:!1};return Fe.push(a),
{cancel:function(){a.cancelled=!0}}}Kd++;var c=!1,f=function(){if(!c)for(c=!0,Kd--;Fe.length&&Kd<Ka.MAX_PARALLEL_IMAGE_REQUESTS;){var b=Fe.shift(),e=b.requestParameters,a=b.callback;b.cancelled||C(e,a)}},g=ac(b,function(b,a,k,c){if(f(),b)e(b);else if(a){var g=new self.Image,d=self.URL||self.webkitURL;g.onload=function(){e(null,g);d.revokeObjectURL(g.src)};g.onerror=function(){return e(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};
b=new self.Blob([new Uint8Array(a)],{type:"image/png"});g.cacheControl=k;g.expires=c;g.src=a.byteLength?d.createObjectURL(b):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}});return{cancel:function(){g.cancel();f()}}},a=function(b,e){void 0===e&&(e={});Qa(this,e);this.type=b},c=function(b){function e(e,a){void 0===a&&(a={});b.call(this,"error",Qa({error:e},a))}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),
e.prototype.constructor=e,e}(a),f=function(){};f.prototype.on=function(b,e){return this._listeners=this._listeners||{},jc(b,e,this._listeners),this};f.prototype.off=function(b,e){return kc(b,e,this._listeners),kc(b,e,this._oneTimeListeners),this};f.prototype.once=function(b,e){return this._oneTimeListeners=this._oneTimeListeners||{},jc(b,e,this._oneTimeListeners),this};f.prototype.fire=function(b,e){"string"==typeof b&&(b=new a(b,e||{}));e=b.type;if(this.listens(e)){b.target=this;for(var k=0,f=this._listeners&&
this._listeners[e]?this._listeners[e].slice():[];k<f.length;k+=1)f[k].call(this,b);k=0;for(f=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[];k<f.length;k+=1){var g=f[k];kc(e,g,this._oneTimeListeners);g.call(this,b)}(e=this._eventedParent)&&(Qa(b,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),e.fire(b))}else b instanceof c&&console.error(b.error);return this};f.prototype.listens=function(b){return this._listeners&&
this._listeners[b]&&0<this._listeners[b].length||this._oneTimeListeners&&this._oneTimeListeners[b]&&0<this._oneTimeListeners[b].length||this._eventedParent&&this._eventedParent.listens(b)};f.prototype.setEventedParent=function(b,e){return this._eventedParent=b,this._eventedParentData=e,this};var g={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,
units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},
bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",
default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},
attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",
default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",
values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),
layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},
round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-z-order":{type:"enum",values:{"viewport-y":{},source:{}},default:"viewport-y",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",
requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",
default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},
"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,
parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],
expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},
{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},
"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},
none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",
values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},
"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},
properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},
acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},
"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},
intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,
expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},
paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",
expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",
minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},
paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,
parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],
["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",
default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",
default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",
values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",
default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",
default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",
default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,
requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",
default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},
default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,
default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",
default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},l=function(b,e,a,c){this.message=(b?b+": ":"")+a;c&&(this.identifier=c);null!=e&&e.__line__&&(this.line=e.__line__)},n=function(b){function e(e,a){b.call(this,a);this.message=a;this.key=e}return b&&(e.__proto__=b),e.prototype=
Object.create(b&&b.prototype),e.prototype.constructor=e,e}(Error),t=function(b,e){void 0===e&&(e=[]);this.parent=b;this.bindings={};for(b=0;b<e.length;b+=1){var a=e[b];this.bindings[a[0]]=a[1]}};t.prototype.concat=function(b){return new t(this,b)};t.prototype.get=function(b){if(this.bindings[b])return this.bindings[b];if(this.parent)return this.parent.get(b);throw Error(b+" not found in scope.");};t.prototype.has=function(b){return!!this.bindings[b]||!!this.parent&&this.parent.has(b)};var u={kind:"null"},
D={kind:"number"},K={kind:"string"},N={kind:"boolean"},kb={kind:"color"},Fb={kind:"object"},ja={kind:"value"},lc={kind:"collator"},ya={kind:"formatted"},yh=[u,D,K,N,kb,ya,Fb,ea(ja)],Rg=gc(function(b,e){function a(b){return 0>(b=Math.round(b))?0:255<b?255:b}function c(b){return 0>b?0:1<b?1:b}function f(b){return"%"===b[b.length-1]?a(parseFloat(b)/100*255):a(parseInt(b))}function g(b){return"%"===b[b.length-1]?c(parseFloat(b)/100):c(parseFloat(b))}function d(b,e,a){return 0>a?a+=1:1<a&&--a,1>6*a?b+
(e-b)*a*6:1>2*a?e:2>3*a?b+(e-b)*(2/3-a)*6:b}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,
1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,
1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,
105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,
206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,
1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,
160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,
180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=function(b){var e;b=b.replace(/ /g,"").toLowerCase();if(b in l)return l[b].slice();if("#"===b[0])return 4===b.length?0<=(e=parseInt(b.substr(1),16))&&4095>=e?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===b.length&&0<=
(e=parseInt(b.substr(1),16))&&16777215>=e?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var k=b.indexOf("("),c=b.indexOf(")");if(-1!==k&&c+1===b.length)switch(e=b.substr(0,k),k=b.substr(k+1,c-(k+1)).split(","),b=1,e){case "rgba":if(4!==k.length)break;b=g(k.pop());case "rgb":return 3!==k.length?null:[f(k[0]),f(k[1]),f(k[2]),b];case "hsla":if(4!==k.length)break;b=g(k.pop());case "hsl":if(3===k.length)return e=(parseFloat(k[0])%360+360)%360/360,c=g(k[1]),k=g(k[2]),c=.5>=k?k*(c+1):k+c-k*c,k=2*k-c,[a(255*
d(k,c,e+1/3)),a(255*d(k,c,e)),a(255*d(k,c,e-1/3)),b]}return null}}catch(Lf){}}).parseCSSColor,oa=function(b,e,a,c){void 0===c&&(c=1);this.r=b;this.g=e;this.b=a;this.a=c};oa.parse=function(b){if(b){if(b instanceof oa)return b;if("string"==typeof b&&(b=Rg(b)))return new oa(b[0]/255*b[3],b[1]/255*b[3],b[2]/255*b[3],b[3])}};oa.prototype.toString=function(){var b=this.toArray();return"rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+","+b[3]+")"};oa.prototype.toArray=function(){var b=
this.r,e=this.g,a=this.b,c=this.a;return 0===c?[0,0,0,0]:[255*b/c,255*e/c,255*a/c,c]};oa.black=new oa(0,0,0,1);oa.white=new oa(1,1,1,1);oa.transparent=new oa(0,0,0,0);oa.red=new oa(1,0,0,1);var oe=function(b,e,a){this.sensitivity=b?e?"variant":"case":e?"accent":"base";this.locale=a;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};oe.prototype.compare=function(b,e){return this.collator.compare(b,e)};oe.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?
this.locale:[])).resolvedOptions().locale};var Sg=function(b,e,a){this.text=b;this.scale=e;this.fontStack=a},sb=function(b){this.sections=b};sb.fromString=function(b){return new sb([new Sg(b,null,null)])};sb.prototype.toString=function(){return this.sections.map(function(b){return b.text}).join("")};sb.prototype.serialize=function(){for(var b=["format"],e=0,a=this.sections;e<a.length;e+=1){var c=a[e];b.push(c.text);var f={};c.fontStack&&(f["text-font"]=["literal",c.fontStack.split(",")]);c.scale&&
(f["font-scale"]=c.scale);b.push(f)}return b};var xc=function(b,e){this.type=b;this.value=e};xc.parse=function(b,e){if(2!==b.length)return e.error("'literal' expression requires exactly one argument, but found "+(b.length-1)+" instead.");if(!function wa(b){if(null===b||"string"==typeof b||"boolean"==typeof b||"number"==typeof b||b instanceof oa||b instanceof oe||b instanceof sb)return!0;if(Array.isArray(b)){for(var e=0;e<b.length;e+=1)if(!wa(b[e]))return!1;return!0}if("object"==typeof b){for(e in b)if(!wa(b[e]))return!1;
return!0}return!1}(b[1]))return e.error("invalid value");b=b[1];var a=Na(b);e=e.expectedType;return"array"!==a.kind||0!==a.N||!e||"array"!==e.kind||"number"==typeof e.N&&0!==e.N||(a=e),new xc(a,b)};xc.prototype.evaluate=function(){return this.value};xc.prototype.eachChild=function(){};xc.prototype.possibleOutputs=function(){return[this.value]};xc.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof oa?["rgba"].concat(this.value.toArray()):
this.value instanceof sb?this.value.serialize():this.value};var tb=function(b){this.name="ExpressionEvaluationError";this.message=b};tb.prototype.toJSON=function(){return this.message};var fg={string:K,number:D,boolean:N,object:Fb},Ua=function(b,e){this.type=b;this.args=e};Ua.parse=function(b,e){if(2>b.length)return e.error("Expected at least one argument.");var a=1,c=b[0];if("array"===c){if(2<b.length){c=b[1];if("string"!=typeof c||!(c in fg)||"object"===c)return e.error('The item type argument of "array" must be one of string, number, boolean',
1);c=fg[c];a++}else c=ja;if(3<b.length){if(null!==b[2]&&("number"!=typeof b[2]||0>b[2]||b[2]!==Math.floor(b[2])))return e.error('The length argument to "array" must be a positive integer literal',2);var f=b[2];a++}f=ea(c,f)}else f=fg[c];for(c=[];a<b.length;a++){var g=e.parse(b[a],a,ja);if(!g)return null;c.push(g)}return new Ua(f,c)};Ua.prototype.evaluate=function(b){for(var e=0;e<this.args.length;e++){var a=this.args[e].evaluate(b);if(!Ub(this.type,Na(a)))return a;if(e===this.args.length-1)throw new tb("Expected value to be of type "+
Y(this.type)+", but found "+Y(Na(a))+" instead.");}return null};Ua.prototype.eachChild=function(b){this.args.forEach(b)};Ua.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.args.map(function(b){return b.possibleOutputs()}));var b};Ua.prototype.serialize=function(){var b=this.type,e=[b.kind];if("array"===b.kind){var a=b.itemType;if("string"===a.kind||"number"===a.kind||"boolean"===a.kind)e.push(a.kind),b=b.N,("number"==typeof b||1<this.args.length)&&e.push(b)}return e.concat(this.args.map(function(b){return b.serialize()}))};
var kd=function(b){this.type=ya;this.sections=b};kd.parse=function(b,e){if(3>b.length)return e.error("Expected at least two arguments.");if(0!=(b.length-1)%2)return e.error("Expected an even number of arguments.");for(var a=[],c=1;c<b.length-1;c+=2){var f=e.parse(b[c],1,ja);if(!f)return null;var g=f.type.kind;if("string"!==g&&"value"!==g&&"null"!==g)return e.error("Formatted text type must be 'string', 'value', or 'null'.");g=b[c+1];if("object"!=typeof g||Array.isArray(g))return e.error("Format options argument must be an object.");
var d=null;if(g["font-scale"]&&!(d=e.parse(g["font-scale"],1,D)))return null;var l=null;if(g["text-font"]&&!(l=e.parse(g["text-font"],1,ea(K))))return null;a.push({text:f,scale:d,font:l})}return new kd(a)};kd.prototype.evaluate=function(b){return new sb(this.sections.map(function(e){return new Sg(mc(e.text.evaluate(b)),e.scale?e.scale.evaluate(b):null,e.font?e.font.evaluate(b).join(","):null)}))};kd.prototype.eachChild=function(b){for(var e=0,a=this.sections;e<a.length;e+=1){var c=a[e];b(c.text);
c.scale&&b(c.scale);c.font&&b(c.font)}};kd.prototype.possibleOutputs=function(){return[void 0]};kd.prototype.serialize=function(){for(var b=["format"],e=0,a=this.sections;e<a.length;e+=1){var c=a[e];b.push(c.text.serialize());var f={};c.scale&&(f["font-scale"]=c.scale.serialize());c.font&&(f["text-font"]=c.font.serialize());b.push(f)}return b};var Hh={"to-boolean":N,"to-color":kb,"to-number":D,"to-string":K},Nb=function(b,e){this.type=b;this.args=e};Nb.parse=function(b,e){if(2>b.length)return e.error("Expected at least one argument.");
var a=b[0];if(("to-boolean"===a||"to-string"===a)&&2!==b.length)return e.error("Expected one argument.");a=Hh[a];for(var c=[],f=1;f<b.length;f++){var g=e.parse(b[f],f,ja);if(!g)return null;c.push(g)}return new Nb(a,c)};Nb.prototype.evaluate=function(b){if("boolean"===this.type.kind)return!!this.args[0].evaluate(b);if("color"===this.type.kind){for(var e,a,c=0,f=this.args;c<f.length;c+=1){if(a=null,(e=f[c].evaluate(b))instanceof oa)return e;if("string"==typeof e){var g=b.parseColor(e);if(g)return g}else if(Array.isArray(e)&&
!(a=3>e.length||4<e.length?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":sd(e[0],e[1],e[2],e[3])))return new oa(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new tb(a||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'");}if("number"===this.type.kind){e=null;a=0;for(c=this.args;a<c.length;a+=1){if(null===(e=c[a].evaluate(b)))return 0;f=Number(e);if(!isNaN(f))return f}throw new tb("Could not convert "+JSON.stringify(e)+
" to number.");}return"formatted"===this.type.kind?sb.fromString(mc(this.args[0].evaluate(b))):mc(this.args[0].evaluate(b))};Nb.prototype.eachChild=function(b){this.args.forEach(b)};Nb.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.args.map(function(b){return b.possibleOutputs()}));var b};Nb.prototype.serialize=function(){if("formatted"===this.type.kind)return(new kd([{text:this.args[0],scale:null,font:null}])).serialize();var b=["to-"+this.type.kind];return this.eachChild(function(e){b.push(e.serialize())}),
b};var Ih=["Unknown","Point","LineString","Polygon"],fe=function(){this.featureState=this.feature=this.globals=null;this._parseColorCache={}};fe.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};fe.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ih[this.feature.type]:this.feature.type:null};fe.prototype.properties=function(){return this.feature&&this.feature.properties||{}};fe.prototype.parseColor=function(b){var e=this._parseColorCache[b];
return e||(e=this._parseColorCache[b]=oa.parse(b)),e};var Ta=function(b,e,a,c){this.name=b;this.type=e;this._evaluate=a;this.args=c};Ta.prototype.evaluate=function(b){return this._evaluate(b,this.args)};Ta.prototype.eachChild=function(b){this.args.forEach(b)};Ta.prototype.possibleOutputs=function(){return[void 0]};Ta.prototype.serialize=function(){return[this.name].concat(this.args.map(function(b){return b.serialize()}))};Ta.parse=function(b,e){var a=b[0],c=Ta.definitions[a];if(!c)return e.error('Unknown expression "'+
a+'". If you wanted a literal array, use ["literal", [...]].',0);var f,g=Array.isArray(c)?c[0]:c.type;c=Array.isArray(c)?[[c[1],c[2]]]:c.overloads;for(var d=c.filter(function(e){e=e[0];return!Array.isArray(e)||e.length===b.length-1}),l=null,n=0;n<d.length;n+=1){l=d[n];var t=l[0],u=l[1];l=new Vc(e.registry,e.path,null,e.scope);for(var h=[],C=!1,p=1;p<b.length;p++){var m=b[p],D=Array.isArray(t)?t[p-1]:t.type;m=l.parse(m,1+h.length,D);if(!m){C=!0;break}h.push(m)}if(!C)if(Array.isArray(t)&&t.length!==
h.length)l.error("Expected "+t.length+" arguments, but found "+h.length+" instead.");else{for(C=0;C<h.length;C++)p=Array.isArray(t)?t[C]:t.type,m=h[C],l.concat(C+1).checkSubtype(p,m.type);if(0===l.errors.length)return new Ta(a,g,u,h)}}if(1===d.length)(f=e.errors).push.apply(f,l.errors);else{a=(d.length?d:c).map(function(b){var e;return e=b[0],Array.isArray(e)?"("+e.map(Y).join(", ")+")":"("+Y(e.type)+"...)"}).join(" | ");f=[];for(g=1;g<b.length;g++){c=e.parse(b[g],1+f.length);if(!c)return null;f.push(Y(c.type))}e.error("Expected arguments of type "+
a+", but found ("+f.join(", ")+") instead.")}return null};Ta.register=function(b,e){for(var a in Ta.definitions=e,e)b[a]=Ta};var ld=function(b,e,a){this.type=lc;this.locale=a;this.caseSensitive=b;this.diacriticSensitive=e};ld.parse=function(b,e){if(2!==b.length)return e.error("Expected one argument.");b=b[1];if("object"!=typeof b||Array.isArray(b))return e.error("Collator options argument must be an object.");var a=e.parse(void 0!==b["case-sensitive"]&&b["case-sensitive"],1,N);if(!a)return null;var c=
e.parse(void 0!==b["diacritic-sensitive"]&&b["diacritic-sensitive"],1,N);if(!c)return null;var f=null;return b.locale&&!(f=e.parse(b.locale,1,K))?null:new ld(a,c,f)};ld.prototype.evaluate=function(b){return new oe(this.caseSensitive.evaluate(b),this.diacriticSensitive.evaluate(b),this.locale?this.locale.evaluate(b):null)};ld.prototype.eachChild=function(b){b(this.caseSensitive);b(this.diacriticSensitive);this.locale&&b(this.locale)};ld.prototype.possibleOutputs=function(){return[void 0]};ld.prototype.serialize=
function(){var b={};return b["case-sensitive"]=this.caseSensitive.serialize(),b["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(b.locale=this.locale.serialize()),["collator",b]};var md=function(b,e){this.type=e.type;this.name=b;this.boundExpression=e};md.parse=function(b,e){if(2!==b.length||"string"!=typeof b[1])return e.error("'var' expression requires exactly one string literal argument.");b=b[1];return e.scope.has(b)?new md(b,e.scope.get(b)):e.error('Unknown variable "'+
b+'". Make sure "'+b+'" has been bound in an enclosing "let" expression before using it.',1)};md.prototype.evaluate=function(b){return this.boundExpression.evaluate(b)};md.prototype.eachChild=function(){};md.prototype.possibleOutputs=function(){return[void 0]};md.prototype.serialize=function(){return["var",this.name]};var Vc=function(b,e,a,c,f){void 0===e&&(e=[]);void 0===c&&(c=new t);void 0===f&&(f=[]);this.registry=b;this.path=e;this.key=e.map(function(b){return"["+b+"]"}).join("");this.scope=c;
this.errors=f;this.expectedType=a};Vc.prototype.parse=function(b,e,a,c,f){return void 0===f&&(f={}),e?this.concat(e,a,c)._parse(b,f):this._parse(b,f)};Vc.prototype._parse=function(b,e){function a(b,e,a){return"assert"===a?new Ua(e,[b]):"coerce"===a?new Nb(e,[b]):b}if(null!==b&&"string"!=typeof b&&"boolean"!=typeof b&&"number"!=typeof b||(b=["literal",b]),Array.isArray(b)){if(0===b.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
var c=b[0];if("string"!=typeof c)return this.error("Expression name must be a string, but found "+typeof c+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var f=this.registry[c];if(f){b=f.parse(b,this);if(!b)return null;if(this.expectedType)if(c=this.expectedType,f=b.type,"string"!==c.kind&&"number"!==c.kind&&"boolean"!==c.kind&&"object"!==c.kind&&"array"!==c.kind||"value"!==f.kind)if("color"!==c.kind&&"formatted"!==c.kind||"value"!==f.kind&&"string"!==f.kind){if(this.checkSubtype(c,
f))return null}else b=a(b,c,e.typeAnnotation||"coerce");else b=a(b,c,e.typeAnnotation||"assert");if(!(b instanceof xc)&&function Vd(b){if(b instanceof md)return Vd(b.boundExpression);if(b instanceof Ta&&"error"===b.name||b instanceof ld)return!1;var e=b instanceof Nb||b instanceof Ua,a=!0;b.eachChild(function(b){a=e?a&&Vd(b):a&&b instanceof xc});return a?nc(b)&&Ac(b,["zoom","heatmap-density","line-progress","is-supported-script"]):!1}(b)){e=new fe;try{b=new xc(b.type,b.evaluate(e))}catch(Q){return this.error(Q.message),
null}}return b}return this.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===b?this.error("'undefined' value invalid. Use null instead."):"object"==typeof b?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof b+" instead.")};Vc.prototype.concat=function(b,e,a){b="number"==typeof b?this.path.concat(b):this.path;a=a?this.scope.concat(a):this.scope;return new Vc(this.registry,
b,e||null,a,this.errors)};Vc.prototype.error=function(b){for(var e=[],a=arguments.length-1;0<a--;)e[a]=arguments[a+1];e=""+this.key+e.map(function(b){return"["+b+"]"}).join("");this.errors.push(new n(e,b))};Vc.prototype.checkSubtype=function(b,e){b=Ub(b,e);return b&&this.error(b),b};var Yc=function(b,e,a){this.type=b;this.input=e;this.labels=[];this.outputs=[];for(b=0;b<a.length;b+=1){e=a[b];var c=e[1];this.labels.push(e[0]);this.outputs.push(c)}};Yc.parse=function(b,e){var a=b[1],c=b.slice(2);if(4>
b.length-1)return e.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if(0!=(b.length-1)%2)return e.error("Expected an even number of arguments.");if(!(a=e.parse(a,1,D)))return null;b=[];var f=null;e.expectedType&&"value"!==e.expectedType.kind&&(f=e.expectedType);c.unshift(-1/0);for(var g=0;g<c.length;g+=2){var d=c[g],l=c[g+1],n=g+1,t=g+2;if("number"!=typeof d)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
n);if(b.length&&b[b.length-1][0]>=d)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',n);l=e.parse(l,t,f);if(!l)return null;f=f||l.type;b.push([d,l])}return new Yc(f,a,b)};Yc.prototype.evaluate=function(b){var e=this.labels,a=this.outputs;if(1===e.length)return a[0].evaluate(b);var c=this.input.evaluate(b);if(c<=e[0])return a[0].evaluate(b);var f=e.length;return c>=e[f-1]?a[f-1].evaluate(b):a[Qc(e,c)].evaluate(b)};Yc.prototype.eachChild=
function(b){b(this.input);for(var e=0,a=this.outputs;e<a.length;e+=1)b(a[e])};Yc.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.outputs.map(function(b){return b.possibleOutputs()}));var b};Yc.prototype.serialize=function(){for(var b=["step",this.input.serialize()],e=0;e<this.labels.length;e++)0<e&&b.push(this.labels[e]),b.push(this.outputs[e].serialize());return b};var Ye=Object.freeze({number:ha,color:function(b,e,a){return new oa(ha(b.r,e.r,a),ha(b.g,e.g,a),ha(b.b,e.b,a),
ha(b.a,e.a,a))},array:function(b,e,a){return b.map(function(b,c){return ha(b,e[c],a)})}}),Jg=4/29,Ud=6/29,Ig=3*Ud*Ud,zh=Ud*Ud*Ud,Jh=Math.PI/180,Kh=180/Math.PI,Ge={forward:Bc,reverse:Sc,interpolate:function(b,e,a){return{l:ha(b.l,e.l,a),a:ha(b.a,e.a,a),b:ha(b.b,e.b,a),alpha:ha(b.alpha,e.alpha,a)}}},He={forward:function(b){var e=Bc(b),a=e.a,c=e.b,f=Math.atan2(c,a)*Kh;return{h:0>f?f+360:f,c:Math.sqrt(a*a+c*c),l:e.l,alpha:b.a}},reverse:function(b){var e=b.h*Jh,a=b.c;return Sc({l:b.l,a:Math.cos(e)*a,b:Math.sin(e)*
a,alpha:b.alpha})},interpolate:function(b,e,a){var c=b.h,k=e.h-c;return{h:c+a*(180<k||-180>k?k-360*Math.round(k/360):k),c:ha(b.c,e.c,a),l:ha(b.l,e.l,a),alpha:ha(b.alpha,e.alpha,a)}}},Kg=Object.freeze({lab:Ge,hcl:He}),qa=function(b,e,a,c,f){this.type=b;this.operator=e;this.interpolation=a;this.input=c;this.labels=[];this.outputs=[];for(b=0;b<f.length;b+=1)e=f[b],a=e[1],this.labels.push(e[0]),this.outputs.push(a)};qa.interpolationFactor=function(b,e,a,c){var k=0;"exponential"===b.name?k=Ya(e,b.base,
a,c):"linear"===b.name?k=Ya(e,1,a,c):"cubic-bezier"===b.name&&(b=b.controlPoints,k=(new Xe(b[0],b[1],b[2],b[3])).solve(Ya(e,1,a,c)));return k};qa.parse=function(b,e){var a=b[0],c=b[1],f=b[2],g=b.slice(3);if(!Array.isArray(c)||0===c.length)return e.error("Expected an interpolation type expression.",1);if("linear"===c[0])c={name:"linear"};else if("exponential"===c[0]){c=c[1];if("number"!=typeof c)return e.error("Exponential interpolation requires a numeric base.",1,1);c={name:"exponential",base:c}}else{if("cubic-bezier"!==
c[0])return e.error("Unknown interpolation type "+String(c[0]),1,0);c=c.slice(1);if(4!==c.length||c.some(function(b){return"number"!=typeof b||0>b||1<b}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);c={name:"cubic-bezier",controlPoints:c}}if(4>b.length-1)return e.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if(0!=(b.length-1)%2)return e.error("Expected an even number of arguments.");if(!(f=e.parse(f,2,D)))return null;
b=[];var d=null;"interpolate-hcl"===a||"interpolate-lab"===a?d=kb:e.expectedType&&"value"!==e.expectedType.kind&&(d=e.expectedType);for(var l=0;l<g.length;l+=2){var n=g[l],t=g[l+1],u=l+3,h=l+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(b.length&&b[b.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',
u);t=e.parse(t,h,d);if(!t)return null;d=d||t.type;b.push([n,t])}return"number"===d.kind||"color"===d.kind||"array"===d.kind&&"number"===d.itemType.kind&&"number"==typeof d.N?new qa(d,a,c,f,b):e.error("Type "+Y(d)+" is not interpolatable.")};qa.prototype.evaluate=function(b){var e=this.labels,a=this.outputs;if(1===e.length)return a[0].evaluate(b);var c=this.input.evaluate(b);if(c<=e[0])return a[0].evaluate(b);var f=e.length;if(c>=e[f-1])return a[f-1].evaluate(b);f=Qc(e,c);e=qa.interpolationFactor(this.interpolation,
c,e[f],e[f+1]);c=a[f].evaluate(b);b=a[f+1].evaluate(b);return"interpolate"===this.operator?Ye[this.type.kind.toLowerCase()](c,b,e):"interpolate-hcl"===this.operator?He.reverse(He.interpolate(He.forward(c),He.forward(b),e)):Ge.reverse(Ge.interpolate(Ge.forward(c),Ge.forward(b),e))};qa.prototype.eachChild=function(b){b(this.input);for(var e=0,a=this.outputs;e<a.length;e+=1)b(a[e])};qa.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.outputs.map(function(b){return b.possibleOutputs()}));
var b};qa.prototype.serialize=function(){var b="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);b=[this.operator,b,this.input.serialize()];for(var e=0;e<this.labels.length;e++)b.push(this.labels[e],this.outputs[e].serialize());return b};var Xc=function(b,e){this.type=b;this.args=e};Xc.parse=function(b,e){if(2>b.length)return e.error("Expectected at least one argument.");
var a=null,c=e.expectedType;c&&"value"!==c.kind&&(a=c);var f=[],g=0;for(b=b.slice(1);g<b.length;g+=1){var d=e.parse(b[g],1+f.length,a,void 0,{typeAnnotation:"omit"});if(!d)return null;a=a||d.type;f.push(d)}e=c&&f.some(function(b){return Ub(c,b.type)});return new Xc(e?ja:a,f)};Xc.prototype.evaluate=function(b){for(var e=null,a=0,c=this.args;a<c.length&&null===(e=c[a].evaluate(b));a+=1);return e};Xc.prototype.eachChild=function(b){this.args.forEach(b)};Xc.prototype.possibleOutputs=function(){return(b=
[]).concat.apply(b,this.args.map(function(b){return b.possibleOutputs()}));var b};Xc.prototype.serialize=function(){var b=["coalesce"];return this.eachChild(function(e){b.push(e.serialize())}),b};var Wc=function(b,e){this.type=e.type;this.bindings=[].concat(b);this.result=e};Wc.prototype.evaluate=function(b){return this.result.evaluate(b)};Wc.prototype.eachChild=function(b){for(var e=0,a=this.bindings;e<a.length;e+=1)b(a[e][1]);b(this.result)};Wc.parse=function(b,e){if(4>b.length)return e.error("Expected at least 3 arguments, but found "+
(b.length-1)+" instead.");for(var a=[],c=1;c<b.length-1;c+=2){var f=b[c];if("string"!=typeof f)return e.error("Expected string, but found "+typeof f+" instead.",c);if(/[^a-zA-Z0-9_]/.test(f))return e.error("Variable names must contain only alphanumeric characters or '_'.",c);var g=e.parse(b[c+1],c+1);if(!g)return null;a.push([f,g])}return(b=e.parse(b[b.length-1],b.length-1,e.expectedType,a))?new Wc(a,b):null};Wc.prototype.possibleOutputs=function(){return this.result.possibleOutputs()};Wc.prototype.serialize=
function(){for(var b=["let"],e=0,a=this.bindings;e<a.length;e+=1){var c=a[e];b.push(c[0],c[1].serialize())}return b.push(this.result.serialize()),b};var Ld=function(b,e,a){this.type=b;this.index=e;this.input=a};Ld.parse=function(b,e){if(3!==b.length)return e.error("Expected 2 arguments, but found "+(b.length-1)+" instead.");var a=e.parse(b[1],1,D);b=e.parse(b[2],2,ea(e.expectedType||ja));return a&&b?new Ld(b.type.itemType,a,b):null};Ld.prototype.evaluate=function(b){var e=this.index.evaluate(b);b=
this.input.evaluate(b);if(0>e)throw new tb("Array index out of bounds: "+e+" \x3c 0.");if(e>=b.length)throw new tb("Array index out of bounds: "+e+" \x3e "+(b.length-1)+".");if(e!==Math.floor(e))throw new tb("Array index must be an integer, but found "+e+" instead.");return b[e]};Ld.prototype.eachChild=function(b){b(this.index);b(this.input)};Ld.prototype.possibleOutputs=function(){return[void 0]};Ld.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Md=
function(b,e,a,c,f,g){this.inputType=b;this.type=e;this.input=a;this.cases=c;this.outputs=f;this.otherwise=g};Md.parse=function(b,e){if(5>b.length)return e.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if(1!=b.length%2)return e.error("Expected an even number of arguments.");var a;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(var c={},f=[],g=2;g<b.length-1;g+=2){var d=b[g],l=b[g+1];Array.isArray(d)||(d=[d]);var n=e.concat(g);if(0===d.length)return n.error("Expected at least one branch label.");
for(var t=0;t<d.length;t+=1){var u=d[t];if("number"!=typeof u&&"string"!=typeof u)return n.error("Branch labels must be numbers or strings.");if("number"==typeof u&&Math.abs(u)>Number.MAX_SAFE_INTEGER)return n.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof u&&Math.floor(u)!==u)return n.error("Numeric branch labels must be integer values.");if(h){if(n.checkSubtype(h,Na(u)))return null}else var h=Na(u);if(void 0!==c[String(u)])return n.error("Branch labels must be unique.");
c[String(u)]=f.length}l=e.parse(l,g,a);if(!l)return null;a=a||l.type;f.push(l)}g=e.parse(b[1],1,ja);return g?(b=e.parse(b[b.length-1],b.length-1,a))?"value"!==g.type.kind&&e.concat(1).checkSubtype(h,g.type)?null:new Md(h,a,g,c,f,b):null:null};Md.prototype.evaluate=function(b){var e=this.input.evaluate(b);return(Na(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(b)};Md.prototype.eachChild=function(b){b(this.input);this.outputs.forEach(b);b(this.otherwise)};Md.prototype.possibleOutputs=
function(){return(b=[]).concat.apply(b,this.outputs.map(function(b){return b.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var b};Md.prototype.serialize=function(){for(var b=this,e=["match",this.input.serialize()],a=[],c={},f=0,g=Object.keys(this.cases).sort();f<g.length;f+=1){var d=g[f],l=c[b.cases[d]];void 0===l?(c[b.cases[d]]=a.length,a.push([b.cases[d],[d]])):a[l][1].push(d)}c=function(e){return"number"===b.inputType.kind?Number(e):e};for(f=0;f<a.length;f+=1)d=a[f],g=d[0],d=d[1],
1===d.length?e.push(c(d[0])):e.push(d.map(c)),e.push(b.outputs[g].serialize());return e.push(this.otherwise.serialize()),e};var Nd=function(b,e,a){this.type=b;this.branches=e;this.otherwise=a};Nd.parse=function(b,e){if(4>b.length)return e.error("Expected at least 3 arguments, but found only "+(b.length-1)+".");if(0!=b.length%2)return e.error("Expected an odd number of arguments.");var a;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(var c=[],f=1;f<b.length-1;f+=2){var g=e.parse(b[f],
f,N);if(!g)return null;var d=e.parse(b[f+1],f+1,a);if(!d)return null;c.push([g,d]);a=a||d.type}return(b=e.parse(b[b.length-1],b.length-1,a))?new Nd(a,c,b):null};Nd.prototype.evaluate=function(b){for(var e=0,a=this.branches;e<a.length;e+=1){var c=a[e],f=c[1];if(c[0].evaluate(b))return f.evaluate(b)}return this.otherwise.evaluate(b)};Nd.prototype.eachChild=function(b){for(var e=0,a=this.branches;e<a.length;e+=1){var c=a[e],f=c[1];b(c[0]);b(f)}b(this.otherwise)};Nd.prototype.possibleOutputs=function(){return(b=
[]).concat.apply(b,this.branches.map(function(b){b[0];return b[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var b};Nd.prototype.serialize=function(){var b=["case"];return this.eachChild(function(e){b.push(e.serialize())}),b};var Sd=A("\x3d\x3d",function(b,e,a){return e===a},Tc),le=A("!\x3d",function(b,e,a){return e!==a},function(b,e,a,c){return!Tc(0,e,a,c)}),Lh=A("\x3c",function(b,e,a){return e<a},function(b,e,a,c){return 0>c.compare(e,a)}),Mh=A("\x3e",function(b,e,a){return e>
a},function(b,e,a,c){return 0<c.compare(e,a)}),Nh=A("\x3c\x3d",function(b,e,a){return e<=a},function(b,e,a,c){return 0>=c.compare(e,a)}),Oh=A("\x3e\x3d",function(b,e,a){return e>=a},function(b,e,a,c){return 0<=c.compare(e,a)}),Od=function(b){this.type=D;this.input=b};Od.parse=function(b,e){return 2!==b.length?e.error("Expected 1 argument, but found "+(b.length-1)+" instead."):(b=e.parse(b[1],1))?"array"!==b.type.kind&&"string"!==b.type.kind&&"value"!==b.type.kind?e.error("Expected argument of type string or array, but found "+
Y(b.type)+" instead."):new Od(b):null};Od.prototype.evaluate=function(b){b=this.input.evaluate(b);if("string"==typeof b||Array.isArray(b))return b.length;throw new tb("Expected value to be of type string or array, but found "+Y(Na(b))+" instead.");};Od.prototype.eachChild=function(b){b(this.input)};Od.prototype.possibleOutputs=function(){return[void 0]};Od.prototype.serialize=function(){var b=["length"];return this.eachChild(function(e){b.push(e.serialize())}),b};var Xd={"\x3d\x3d":Sd,"!\x3d":le,
"\x3e":Mh,"\x3c":Lh,"\x3e\x3d":Oh,"\x3c\x3d":Nh,array:Ua,at:Ld,boolean:Ua,case:Nd,coalesce:Xc,collator:ld,format:kd,interpolate:qa,"interpolate-hcl":qa,"interpolate-lab":qa,length:Od,let:Wc,literal:xc,match:Md,number:Ua,object:Ua,step:Yc,string:Ua,"to-boolean":Nb,"to-color":Nb,"to-number":Nb,"to-string":Nb,var:md};Ta.register(Xd,{error:[{kind:"error"},[K],function(b,e){throw new tb(e[0].evaluate(b));}],typeof:[K,[ja],function(b,e){return Y(Na(e[0].evaluate(b)))}],"to-rgba":[ea(D,4),[kb],function(b,
e){return e[0].evaluate(b).toArray()}],rgb:[kb,[D,D,D],Hb],rgba:[kb,[D,D,D,D],Hb],has:{type:N,overloads:[[[K],function(b,e){e=e[0].evaluate(b);b=b.properties();return e in b}],[[K,Fb],function(b,e){var a=e[1];e=e[0].evaluate(b);b=a.evaluate(b);return e in b}]]},get:{type:ja,overloads:[[[K],function(b,e){return Uc(e[0].evaluate(b),b.properties())}],[[K,Fb],function(b,e){var a=e[1];return Uc(e[0].evaluate(b),a.evaluate(b))}]]},"feature-state":[ja,[K],function(b,e){return Uc(e[0].evaluate(b),b.featureState||
{})}],properties:[Fb,[],function(b){return b.properties()}],"geometry-type":[K,[],function(b){return b.geometryType()}],id:[ja,[],function(b){return b.id()}],zoom:[D,[],function(b){return b.globals.zoom}],"heatmap-density":[D,[],function(b){return b.globals.heatmapDensity||0}],"line-progress":[D,[],function(b){return b.globals.lineProgress||0}],"+":[D,{type:D},function(b,e){for(var a=0,c=0;c<e.length;c+=1)a+=e[c].evaluate(b);return a}],"*":[D,{type:D},function(b,e){for(var a=1,c=0;c<e.length;c+=1)a*=
e[c].evaluate(b);return a}],"-":{type:D,overloads:[[[D,D],function(b,e){var a=e[1];return e[0].evaluate(b)-a.evaluate(b)}],[[D],function(b,e){return-e[0].evaluate(b)}]]},"/":[D,[D,D],function(b,e){var a=e[1];return e[0].evaluate(b)/a.evaluate(b)}],"%":[D,[D,D],function(b,e){var a=e[1];return e[0].evaluate(b)%a.evaluate(b)}],ln2:[D,[],function(){return Math.LN2}],pi:[D,[],function(){return Math.PI}],e:[D,[],function(){return Math.E}],"^":[D,[D,D],function(b,e){var a=e[1];return Math.pow(e[0].evaluate(b),
a.evaluate(b))}],sqrt:[D,[D],function(b,e){return Math.sqrt(e[0].evaluate(b))}],log10:[D,[D],function(b,e){return Math.log(e[0].evaluate(b))/Math.LN10}],ln:[D,[D],function(b,e){return Math.log(e[0].evaluate(b))}],log2:[D,[D],function(b,e){return Math.log(e[0].evaluate(b))/Math.LN2}],sin:[D,[D],function(b,e){return Math.sin(e[0].evaluate(b))}],cos:[D,[D],function(b,e){return Math.cos(e[0].evaluate(b))}],tan:[D,[D],function(b,e){return Math.tan(e[0].evaluate(b))}],asin:[D,[D],function(b,e){return Math.asin(e[0].evaluate(b))}],
acos:[D,[D],function(b,e){return Math.acos(e[0].evaluate(b))}],atan:[D,[D],function(b,e){return Math.atan(e[0].evaluate(b))}],min:[D,{type:D},function(b,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(b)}))}],max:[D,{type:D},function(b,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(b)}))}],abs:[D,[D],function(b,e){return Math.abs(e[0].evaluate(b))}],round:[D,[D],function(b,e){b=e[0].evaluate(b);return 0>b?-Math.round(-b):Math.round(b)}],floor:[D,[D],function(b,
e){return Math.floor(e[0].evaluate(b))}],ceil:[D,[D],function(b,e){return Math.ceil(e[0].evaluate(b))}],"filter-\x3d\x3d":[N,[K,ja],function(b,e){var a=e[0];e=e[1];return b.properties()[a.value]===e.value}],"filter-id-\x3d\x3d":[N,[ja],function(b,e){e=e[0];return b.id()===e.value}],"filter-type-\x3d\x3d":[N,[K],function(b,e){e=e[0];return b.geometryType()===e.value}],"filter-\x3c":[N,[K,ja],function(b,e){var a=e[0];e=e[1];b=b.properties()[a.value];a=e.value;return typeof b==typeof a&&b<a}],"filter-id-\x3c":[N,
[ja],function(b,e){e=e[0];b=b.id();e=e.value;return typeof b==typeof e&&b<e}],"filter-\x3e":[N,[K,ja],function(b,e){var a=e[0];e=e[1];b=b.properties()[a.value];a=e.value;return typeof b==typeof a&&b>a}],"filter-id-\x3e":[N,[ja],function(b,e){e=e[0];b=b.id();e=e.value;return typeof b==typeof e&&b>e}],"filter-\x3c\x3d":[N,[K,ja],function(b,e){var a=e[0];e=e[1];b=b.properties()[a.value];a=e.value;return typeof b==typeof a&&b<=a}],"filter-id-\x3c\x3d":[N,[ja],function(b,e){e=e[0];b=b.id();e=e.value;return typeof b==
typeof e&&b<=e}],"filter-\x3e\x3d":[N,[K,ja],function(b,e){var a=e[0];e=e[1];b=b.properties()[a.value];a=e.value;return typeof b==typeof a&&b>=a}],"filter-id-\x3e\x3d":[N,[ja],function(b,e){e=e[0];b=b.id();e=e.value;return typeof b==typeof e&&b>=e}],"filter-has":[N,[ja],function(b,e){return e[0].value in b.properties()}],"filter-has-id":[N,[],function(b){return null!==b.id()}],"filter-type-in":[N,[ea(K)],function(b,e){return 0<=e[0].value.indexOf(b.geometryType())}],"filter-id-in":[N,[ea(ja)],function(b,
e){return 0<=e[0].value.indexOf(b.id())}],"filter-in-small":[N,[K,ea(ja)],function(b,e){var a=e[0];return 0<=e[1].value.indexOf(b.properties()[a.value])}],"filter-in-large":[N,[K,ea(ja)],function(b,e){var a=e[0];e=e[1];a:{b=b.properties()[a.value];a=e.value;var c=0;for(e=e.value.length-1;c<=e;){var f=c+e>>1;if(a[f]===b){e=!0;break a}a[f]>b?e=f-1:c=f+1}e=!1}return e}],all:{type:N,overloads:[[[N,N],function(b,e){var a=e[1];return e[0].evaluate(b)&&a.evaluate(b)}],[{type:N},function(b,e){for(var a=0;a<
e.length;a+=1)if(!e[a].evaluate(b))return!1;return!0}]]},any:{type:N,overloads:[[[N,N],function(b,e){var a=e[1];return e[0].evaluate(b)||a.evaluate(b)}],[{type:N},function(b,e){for(var a=0;a<e.length;a+=1)if(e[a].evaluate(b))return!0;return!1}]]},"!":[N,[N],function(b,e){return!e[0].evaluate(b)}],"is-supported-script":[N,[K],function(b,e){e=e[0];var a=b.globals&&b.globals.isSupportedScript;return!a||a(e.evaluate(b))}],upcase:[K,[K],function(b,e){return e[0].evaluate(b).toUpperCase()}],downcase:[K,
[K],function(b,e){return e[0].evaluate(b).toLowerCase()}],concat:[K,{type:ja},function(b,e){return e.map(function(e){return mc(e.evaluate(b))}).join("")}],"resolved-locale":[K,[lc],function(b,e){return e[0].evaluate(b).resolvedLocale()}]});var Ze=function(b,e){this.expression=b;this._warningHistory={};this._evaluator=new fe;this._defaultValue="color"===e.type&&pa(e.default)?new oa(0,0,0,0):"color"===e.type?oa.parse(e.default)||null:void 0===e.default?null:e.default;this._enumValues="enum"===e.type?
e.values:null};Ze.prototype.evaluateWithoutErrorHandling=function(b,e,a){return this._evaluator.globals=b,this._evaluator.feature=e,this._evaluator.featureState=a,this.expression.evaluate(this._evaluator)};Ze.prototype.evaluate=function(b,e,a){this._evaluator.globals=b;this._evaluator.feature=e||null;this._evaluator.featureState=a||null;try{var c=this.expression.evaluate(this._evaluator);if(null==c)return this._defaultValue;if(this._enumValues&&!(c in this._enumValues))throw new tb("Expected value to be one of "+
Object.keys(this._enumValues).map(function(b){return JSON.stringify(b)}).join(", ")+", but found "+JSON.stringify(c)+" instead.");return c}catch(aa){return this._warningHistory[aa.message]||(this._warningHistory[aa.message]=!0,"undefined"!=typeof console&&console.warn(aa.message)),this._defaultValue}};var $e=function(b,e){this.kind=b;this._styleExpression=e;this.isStateDependent="constant"!==b&&!Gb(e.expression)};$e.prototype.evaluateWithoutErrorHandling=function(b,e,a){return this._styleExpression.evaluateWithoutErrorHandling(b,
e,a)};$e.prototype.evaluate=function(b,e,a){return this._styleExpression.evaluate(b,e,a)};var pe=function(b,e,a){this.kind=b;this.zoomStops=a.labels;this._styleExpression=e;this.isStateDependent="camera"!==b&&!Gb(e.expression);a instanceof qa&&(this._interpolationType=a.interpolation)};pe.prototype.evaluateWithoutErrorHandling=function(b,e,a){return this._styleExpression.evaluateWithoutErrorHandling(b,e,a)};pe.prototype.evaluate=function(b,e,a){return this._styleExpression.evaluate(b,e,a)};pe.prototype.interpolationFactor=
function(b,e,a){return this._interpolationType?qa.interpolationFactor(this._interpolationType,b,e,a):0};var qe=function(b,e){this._parameters=b;this._specification=e;Eb(this,function wa(b,e){var a="color"===e.type,c=b.stops&&"object"==typeof b.stops[0][0],f=c||void 0!==b.property;f=c||!f;var g=b.type||(Jb(e)?"exponential":"interval");if(a&&((b=Eb({},b)).stops&&(b.stops=b.stops.map(function(b){return[b[0],oa.parse(b[1])]})),b.default?b.default=oa.parse(b.default):b.default=oa.parse(e.default)),b.colorSpace&&
"rgb"!==b.colorSpace&&!Kg[b.colorSpace])throw Error("Unknown color space: "+b.colorSpace);if("exponential"===g)var d=Cc;else if("interval"===g)d=W;else if("categorical"===g){d=Wd;var l=Object.create(null);a=0;for(var J=b.stops;a<J.length;a+=1){var n=J[a];l[n[0]]=n[1]}var t=typeof b.stops[0][0]}else{if("identity"!==g)throw Error('Unknown function type "'+g+'"');d=Xb}if(c){c={};f=[];for(g=0;g<b.stops.length;g++)a=b.stops[g],J=a[0].zoom,void 0===c[J]&&(c[J]={zoom:J,type:b.type,property:b.property,default:b.default,
stops:[]},f.push(J)),c[J].stops.push([a[0].value,a[1]]);var aa=[];for(g=0;g<f.length;g+=1)a=f[g],aa.push([c[a].zoom,wa(c[a],e)]);return{kind:"composite",interpolationFactor:qa.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:aa.map(function(b){return b[0]}),evaluate:function(a,c){a=a.zoom;return Cc({stops:aa,base:b.base},e,a).evaluate(a,c)}}}return f?{kind:"camera",interpolationFactor:"exponential"===g?qa.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==b.base?b.base:1}):
function(){return 0},zoomStops:b.stops.map(function(b){return b[0]}),evaluate:function(a){return d(b,e,a.zoom,l,t)}}:{kind:"source",evaluate:function(a,c){a=c&&c.properties?c.properties[b.property]:void 0;return void 0===a?ub(b.default,e.default):d(b,e,a,l,t)}}}(this._parameters,this._specification))};qe.deserialize=function(b){return new qe(b._parameters,b._specification)};qe.serialize=function(b){return{_parameters:b._parameters,_specification:b._specification}};var Ch={type:"boolean",default:!1,
transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Lg={"*":function(){return[]},array:Zc,boolean:function(b){var e=b.value;b=b.key;var a=G(e);return"boolean"!==a?[new l(b,e,"boolean expected, "+a+" found")]:[]},number:td,color:function(b){var e=b.key;b=b.value;var a=G(b);return"string"!==a?[new l(e,b,"color expected, "+a+" found")]:null===Rg(b)?[new l(e,b,'color expected, "'+b+'" found')]:[]},constants:fa,enum:Za,filter:wd,function:$c,layer:m,object:ka,
source:x,light:r,string:w,formatted:function(b){return 0===w(b).length?[]:ud(b)}};y.source=M(x);y.light=M(r);y.layer=M(m);y.filter=M(wd);y.paintProperty=M(q);y.layoutProperty=M(h);var Ph=y.light,Qh=y.paintProperty,Rh=y.layoutProperty,ad=3;E.prototype.insert=function(b,e,a,c,f){this._forEachCell(e,a,c,f,this._insertCell,this.uid++);this.keys.push(b);this.bboxes.push(e);this.bboxes.push(a);this.bboxes.push(c);this.bboxes.push(f)};E.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";
};E.prototype._insertCell=function(b,e,a,c,f,g){this.cells[f].push(g)};E.prototype.query=function(b,e,a,c){var f=this.min,k=this.max;if(b<=f&&e<=f&&k<=a&&k<=c)return Array.prototype.slice.call(this.keys);f=[];return this._forEachCell(b,e,a,c,this._queryCell,f,{}),f};E.prototype._queryCell=function(b,e,a,c,f,g,d){f=this.cells[f];if(null!==f)for(var k=this.keys,l=this.bboxes,J=0;J<f.length;J++){var n=f[J];if(void 0===d[n]){var t=4*n;b<=l[t+2]&&e<=l[t+3]&&a>=l[t+0]&&c>=l[t+1]?(d[n]=!0,g.push(k[n])):
d[n]=!1}}};E.prototype._forEachCell=function(b,e,a,c,f,g,d){for(var k=this._convertToCellCoord(b),l=this._convertToCellCoord(e),J=this._convertToCellCoord(a),n=this._convertToCellCoord(c);k<=J;k++)for(var t=l;t<=n;t++)if(f.call(this,b,e,a,c,this.d*t+k,g,d))return};E.prototype._convertToCellCoord=function(b){return Math.max(0,Math.min(this.d-1,Math.floor(b*this.scale)+this.padding))};E.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var b=this.cells,e=ad+this.cells.length+
1+1,a=0,c=0;c<this.cells.length;c++)a+=this.cells[c].length;a=new Int32Array(e+a+this.keys.length+this.bboxes.length);a[0]=this.extent;a[1]=this.n;a[2]=this.padding;for(c=0;c<b.length;c++){var f=b[c];a[ad+c]=e;a.set(f,e);e+=f.length}return a[ad+b.length]=e,a.set(this.keys,e),e+=this.keys.length,a[ad+b.length+1]=e,a.set(this.bboxes,e),a.buffer};var Mg=self.ImageData,re={},Cf;for(Cf in B("Object",Object),E.serialize=function(b,e){b=b.toArrayBuffer();return e&&e.push(b),{buffer:b}},E.deserialize=function(b){return new E(b.buffer)},
B("Grid",E),B("Color",oa),B("Error",Error),B("StylePropertyFunction",qe),B("StyleExpression",Ze,{omit:["_evaluator"]}),B("ZoomDependentExpression",pe),B("ZoomConstantExpression",$e),B("CompoundExpression",Ta,{omit:["_evaluate"]}),Xd)Xd[Cf]._classRegistryKey||B("Expression_"+Cf,Xd[Cf]);var gg=function(){this.first=!0};gg.prototype.update=function(b,e){var a=Math.floor(b);return this.first?(this.first=!1,this.lastIntegerZoom=a,this.lastIntegerZoomTime=0,this.lastZoom=b,this.lastFloorZoom=a,!0):(this.lastFloorZoom>
a?(this.lastIntegerZoom=a+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<a&&(this.lastIntegerZoom=a,this.lastIntegerZoomTime=e),b!==this.lastZoom&&(this.lastZoom=b,this.lastFloorZoom=a,!0))};var T={"Latin-1 Supplement":function(b){return 128<=b&&255>=b},Arabic:function(b){return 1536<=b&&1791>=b},"Arabic Supplement":function(b){return 1872<=b&&1919>=b},"Arabic Extended-A":function(b){return 2208<=b&&2303>=b},"Hangul Jamo":function(b){return 4352<=b&&4607>=b},"Unified Canadian Aboriginal Syllabics":function(b){return 5120<=
b&&5759>=b},Khmer:function(b){return 6016<=b&&6143>=b},"Unified Canadian Aboriginal Syllabics Extended":function(b){return 6320<=b&&6399>=b},"General Punctuation":function(b){return 8192<=b&&8303>=b},"Letterlike Symbols":function(b){return 8448<=b&&8527>=b},"Number Forms":function(b){return 8528<=b&&8591>=b},"Miscellaneous Technical":function(b){return 8960<=b&&9215>=b},"Control Pictures":function(b){return 9216<=b&&9279>=b},"Optical Character Recognition":function(b){return 9280<=b&&9311>=b},"Enclosed Alphanumerics":function(b){return 9312<=
b&&9471>=b},"Geometric Shapes":function(b){return 9632<=b&&9727>=b},"Miscellaneous Symbols":function(b){return 9728<=b&&9983>=b},"Miscellaneous Symbols and Arrows":function(b){return 11008<=b&&11263>=b},"CJK Radicals Supplement":function(b){return 11904<=b&&12031>=b},"Kangxi Radicals":function(b){return 12032<=b&&12255>=b},"Ideographic Description Characters":function(b){return 12272<=b&&12287>=b},"CJK Symbols and Punctuation":function(b){return 12288<=b&&12351>=b},Hiragana:function(b){return 12352<=
b&&12447>=b},Katakana:function(b){return 12448<=b&&12543>=b},Bopomofo:function(b){return 12544<=b&&12591>=b},"Hangul Compatibility Jamo":function(b){return 12592<=b&&12687>=b},Kanbun:function(b){return 12688<=b&&12703>=b},"Bopomofo Extended":function(b){return 12704<=b&&12735>=b},"CJK Strokes":function(b){return 12736<=b&&12783>=b},"Katakana Phonetic Extensions":function(b){return 12784<=b&&12799>=b},"Enclosed CJK Letters and Months":function(b){return 12800<=b&&13055>=b},"CJK Compatibility":function(b){return 13056<=
b&&13311>=b},"CJK Unified Ideographs Extension A":function(b){return 13312<=b&&19903>=b},"Yijing Hexagram Symbols":function(b){return 19904<=b&&19967>=b},"CJK Unified Ideographs":function(b){return 19968<=b&&40959>=b},"Yi Syllables":function(b){return 40960<=b&&42127>=b},"Yi Radicals":function(b){return 42128<=b&&42191>=b},"Hangul Jamo Extended-A":function(b){return 43360<=b&&43391>=b},"Hangul Syllables":function(b){return 44032<=b&&55215>=b},"Hangul Jamo Extended-B":function(b){return 55216<=b&&
55295>=b},"Private Use Area":function(b){return 57344<=b&&63743>=b},"CJK Compatibility Ideographs":function(b){return 63744<=b&&64255>=b},"Arabic Presentation Forms-A":function(b){return 64336<=b&&65023>=b},"Vertical Forms":function(b){return 65040<=b&&65055>=b},"CJK Compatibility Forms":function(b){return 65072<=b&&65103>=b},"Small Form Variants":function(b){return 65104<=b&&65135>=b},"Arabic Presentation Forms-B":function(b){return 65136<=b&&65279>=b},"Halfwidth and Fullwidth Forms":function(b){return 65280<=
b&&65519>=b}},hg,ig=!1,Ie=null,Tg=!1,jg=new f,Ed={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Tg||null!=Ed.applyArabicShaping}},Ea=function(b,e){this.zoom=b;e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new gg,this.transition={})};Ea.prototype.isSupportedScript=function(b){a:{for(var e=Ed.isLoaded(),a=0;a<b.length;a+=
1){var c=b[a].charCodeAt(0);if(!e&&(1424<=c&&2303>=c||T["Arabic Presentation Forms-A"](c)||T["Arabic Presentation Forms-B"](c))||2304<=c&&3583>=c||3840<=c&&4255>=c||T.Khmer(c)){b=!1;break a}}b=!0}return b};Ea.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};Ea.prototype.getCrossfadeParameters=function(){var b=this.zoom,e=b-Math.floor(b),a=this.crossFadingFactor();return b>this.zoomHistory.lastIntegerZoom?
{fromScale:2,toScale:1,t:e+(1-e)*a}:{fromScale:.5,toScale:1,t:1-(1-a)*e}};var ge=function(b,e){this.property=b;this.value=e;this.expression=Va(void 0===e?b.specification.default:e,b.specification)};ge.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind};ge.prototype.possiblyEvaluate=function(b){return this.property.possiblyEvaluate(this,b)};var Je=function(b){this.property=b;this.value=new ge(b,void 0)};Je.prototype.transitioned=function(b,e){return new kg(this.property,
this.value,e,Qa({},b.transition,this.transition),b.now)};Je.prototype.untransitioned=function(){return new kg(this.property,this.value,null,{},0)};var Kc=function(b){this._properties=b;this._values=Object.create(b.defaultTransitionablePropertyValues)};Kc.prototype.getValue=function(b){return Xa(this._values[b].value.value)};Kc.prototype.setValue=function(b,e){this._values.hasOwnProperty(b)||(this._values[b]=new Je(this._values[b].property));this._values[b].value=new ge(this._values[b].property,null===
e?void 0:Xa(e))};Kc.prototype.getTransition=function(b){return Xa(this._values[b].transition)};Kc.prototype.setTransition=function(b,e){this._values.hasOwnProperty(b)||(this._values[b]=new Je(this._values[b].property));this._values[b].transition=Xa(e)||void 0};Kc.prototype.serialize=function(){for(var b={},e=0,a=Object.keys(this._values);e<a.length;e+=1){var c=a[e],f=this.getValue(c);void 0!==f&&(b[c]=f);f=this.getTransition(c);void 0!==f&&(b[c+"-transition"]=f)}return b};Kc.prototype.transitioned=
function(b,e){for(var a=new Ke(this._properties),c=0,f=Object.keys(this._values);c<f.length;c+=1){var g=f[c];a._values[g]=this._values[g].transitioned(b,e._values[g])}return a};Kc.prototype.untransitioned=function(){for(var b=new Ke(this._properties),e=0,a=Object.keys(this._values);e<a.length;e+=1){var c=a[e];b._values[c]=this._values[c].untransitioned()}return b};var kg=function(b,e,a,c,f){this.property=b;this.value=e;this.begin=f+c.delay||0;this.end=this.begin+c.duration||0;b.specification.transition&&
(c.delay||c.duration)&&(this.prior=a)};kg.prototype.possiblyEvaluate=function(b){var e=b.now||0,a=this.value.possiblyEvaluate(b),c=this.prior;if(c){if(e>this.end||this.value.isDataDriven())return this.prior=null,a;if(e<this.begin)return c.possiblyEvaluate(b);e=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(c.possiblyEvaluate(b),a,function(b){if(0>=b)return 0;if(1<=b)return 1;var e=b*b,a=e*b;return 4*(.5>b?a:3*(b-e)+a-.75)}(e))}return a};var Ke=function(b){this._properties=b;
this._values=Object.create(b.defaultTransitioningPropertyValues)};Ke.prototype.possiblyEvaluate=function(b){for(var e=new Df(this._properties),a=0,c=Object.keys(this._values);a<c.length;a+=1){var f=c[a];e._values[f]=this._values[f].possiblyEvaluate(b)}return e};Ke.prototype.hasTransition=function(){for(var b=0,e=Object.keys(this._values);b<e.length;b+=1)if(this._values[e[b]].prior)return!0;return!1};var Le=function(b){this._properties=b;this._values=Object.create(b.defaultPropertyValues)};Le.prototype.getValue=
function(b){return Xa(this._values[b].value)};Le.prototype.setValue=function(b,e){this._values[b]=new ge(this._values[b].property,null===e?void 0:Xa(e))};Le.prototype.serialize=function(){for(var b={},e=0,a=Object.keys(this._values);e<a.length;e+=1){var c=a[e],f=this.getValue(c);void 0!==f&&(b[c]=f)}return b};Le.prototype.possiblyEvaluate=function(b){for(var e=new Df(this._properties),a=0,c=Object.keys(this._values);a<c.length;a+=1){var f=c[a];e._values[f]=this._values[f].possiblyEvaluate(b)}return e};
var Ab=function(b,e,a){this.property=b;this.value=e;this.parameters=a};Ab.prototype.isConstant=function(){return"constant"===this.value.kind};Ab.prototype.constantOr=function(b){return"constant"===this.value.kind?this.value.value:b};Ab.prototype.evaluate=function(b,e){return this.property.evaluate(this.value,this.parameters,b,e)};var Df=function(b){this._properties=b;this._values=Object.create(b.defaultPossiblyEvaluatedValues)};Df.prototype.get=function(b){return this._values[b]};var U=function(b){this.specification=
b};U.prototype.possiblyEvaluate=function(b,e){return b.expression.evaluate(e)};U.prototype.interpolate=function(b,e,a){var c=Ye[this.specification.type];return c?c(b,e,a):b};var X=function(b){this.specification=b};X.prototype.possiblyEvaluate=function(b,e){return"constant"===b.expression.kind||"camera"===b.expression.kind?new Ab(this,{kind:"constant",value:b.expression.evaluate(e)},e):new Ab(this,b.expression,e)};X.prototype.interpolate=function(b,e,a){if("constant"!==b.value.kind||"constant"!==e.value.kind)return b;
if(void 0===b.value.value||void 0===e.value.value)return new Ab(this,{kind:"constant",value:void 0},b.parameters);var c=Ye[this.specification.type];return c?new Ab(this,{kind:"constant",value:c(b.value.value,e.value.value,a)},b.parameters):b};X.prototype.evaluate=function(b,e,a,c){return"constant"===b.kind?b.value:b.evaluate(e,a,c)};var Ef=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=
function(b,e){return void 0===b.value?new Ab(this,{kind:"constant",value:void 0},e):"constant"===b.expression.kind?(b=b.expression.evaluate(e),b=this._calculate(b,b,b,e),new Ab(this,{kind:"constant",value:b},e)):"camera"===b.expression.kind?(b=this._calculate(b.expression.evaluate({zoom:e.zoom-1}),b.expression.evaluate({zoom:e.zoom}),b.expression.evaluate({zoom:e.zoom+1}),e),new Ab(this,{kind:"constant",value:b},e)):new Ab(this,b.expression,e)},e.prototype.evaluate=function(b,e,a,c){return"source"===
b.kind?(b=b.evaluate(e,a,c),this._calculate(b,b,b,e)):"composite"===b.kind?this._calculate(b.evaluate({zoom:Math.floor(e.zoom)-1},a,c),b.evaluate({zoom:Math.floor(e.zoom)},a,c),b.evaluate({zoom:Math.floor(e.zoom)+1},a,c),e):b.value},e.prototype._calculate=function(b,e,a,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:b,to:e}:{from:a,to:e}},e.prototype.interpolate=function(b){return b},e}(X),he=function(b){this.specification=b};he.prototype.possiblyEvaluate=function(b,e){if(void 0!==b.value)return"constant"===
b.expression.kind?(b=b.expression.evaluate(e),this._calculate(b,b,b,e)):this._calculate(b.expression.evaluate(new Ea(Math.floor(e.zoom-1),e)),b.expression.evaluate(new Ea(Math.floor(e.zoom),e)),b.expression.evaluate(new Ea(Math.floor(e.zoom+1),e)),e)};he.prototype._calculate=function(b,e,a,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:b,to:e}:{from:a,to:e}};he.prototype.interpolate=function(b){return b};var Me=function(b){this.specification=b};Me.prototype.possiblyEvaluate=function(b,e){return!!b.expression.evaluate(e)};
Me.prototype.interpolate=function(){return!1};var Ob=function(b){for(var e in this.properties=b,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},b){var a=b[e],c=this.defaultPropertyValues[e]=new ge(a,void 0);a=this.defaultTransitionablePropertyValues[e]=new Je(a);this.defaultTransitioningPropertyValues[e]=a.untransitioned();this.defaultPossiblyEvaluatedValues[e]=c.possiblyEvaluate({})}};B("DataDrivenProperty",
X);B("DataConstantProperty",U);B("CrossFadedDataDrivenProperty",Ef);B("CrossFadedProperty",he);B("ColorRampProperty",Me);var bc=function(b){function e(e,a){if(b.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),a.layout&&(this._unevaluatedLayout=new Le(a.layout)),
a.paint)){for(var c in this._transitionablePaint=new Kc(a.paint),e.paint)this.setPaintProperty(c,e.paint[c],{validate:!1});for(var f in e.layout)this.setLayoutProperty(f,e.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(b){return"visibility"===
b?this.visibility:this._unevaluatedLayout.getValue(b)},e.prototype.setLayoutProperty=function(b,e,a){(void 0===a&&(a={}),null!=e)&&this._validate(Rh,"layers."+this.id+".layout."+b,b,e,a)||("visibility"!==b?this._unevaluatedLayout.setValue(b,e):this.visibility="none"===e?e:"visible")},e.prototype.getPaintProperty=function(b){return Oc(b,"-transition")?this._transitionablePaint.getTransition(b.slice(0,-11)):this._transitionablePaint.getValue(b)},e.prototype.setPaintProperty=function(b,e,a){if((void 0===
a&&(a={}),null!=e)&&this._validate(Qh,"layers."+this.id+".paint."+b,b,e,a))return!1;if(Oc(b,"-transition"))return this._transitionablePaint.setTransition(b.slice(0,-11),e||void 0),!1;a=this._transitionablePaint._values[b];a="cross-faded-data-driven"===a.property.specification["property-type"]&&!a.value.value&&e;var c=this._transitionablePaint._values[b].value.isDataDriven();this._transitionablePaint.setValue(b,e);e=this._transitionablePaint._values[b].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(b),
e||c||a},e.prototype._handleSpecialPaintPropertyUpdate=function(b){},e.prototype.isHidden=function(b){return!!(this.minzoom&&b<this.minzoom)||!!(this.maxzoom&&b>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(b){this._transitioningPaint=this._transitionablePaint.transitioned(b,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(b){b.getCrossfadeParameters&&(this._crossfadeParameters=
b.getCrossfadeParameters());this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(b));this.paint=this._transitioningPaint.possiblyEvaluate(b)},e.prototype.serialize=function(){var b={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};
return"none"===this.visibility&&(b.layout=b.layout||{},b.layout.visibility="none"),rd(b,function(b,e){return!(void 0===b||"layout"===e&&!Object.keys(b).length||"paint"===e&&!Object.keys(b).length)})},e.prototype._validate=function(b,e,a,c,f){return void 0===f&&(f={}),(!f||!1!==f.validate)&&S(this,b.call(y,{key:e,layerType:this.type,objectKey:a,value:c,styleSpec:g,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=
function(){for(var b in this.paint._values){var e=this.paint.get(b);if(e instanceof Ab&&Ib(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(f),Dh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ie=function(b,e){this._structArray=b;this._pos1=e*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},ta=function(){this.isTransferred=
!1;this.capacity=-1;this.resize(0)};ta.serialize=function(b,e){return b._trim(),e&&(b.isTransferred=!0,e.push(b.arrayBuffer)),{length:b.length,arrayBuffer:b.arrayBuffer}};ta.deserialize=function(b){var e=Object.create(this.prototype);return e.arrayBuffer=b.arrayBuffer,e.length=b.length,e.capacity=b.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e};ta.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*
this.bytesPerElement),this._refreshViews())};ta.prototype.clear=function(){this.length=0};ta.prototype.resize=function(b){this.reserve(b);this.length=b};ta.prototype.reserve=function(b){b>this.capacity&&(this.capacity=Math.max(b,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),b=this.uint8,this._refreshViews(),b&&this.uint8.set(b))};ta.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");
};var Ne=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e){var a=this.length;return this.resize(a+1),this.emplace(a,b,e)},e.prototype.emplace=function(b,e,a){var c=2*b;return this.int16[c+0]=e,this.int16[c+1]=a,b},e}(ta);Ne.prototype.bytesPerElement=
4;B("StructArrayLayout2i4",Ne);var Ff=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a,c){var f=this.length;return this.resize(f+1),this.emplace(f,b,e,a,c)},e.prototype.emplace=function(b,e,a,c,f){var g=4*b;return this.int16[g+0]=e,this.int16[g+
1]=a,this.int16[g+2]=c,this.int16[g+3]=f,b},e}(ta);Ff.prototype.bytesPerElement=8;B("StructArrayLayout4i8",Ff);var lg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a,c,f,g){var k=this.length;return this.resize(k+1),this.emplace(k,b,e,a,c,f,g)},
e.prototype.emplace=function(b,e,a,c,f,g,d){var k=6*b;return this.int16[k+0]=e,this.int16[k+1]=a,this.int16[k+2]=c,this.int16[k+3]=f,this.int16[k+4]=g,this.int16[k+5]=d,b},e}(ta);lg.prototype.bytesPerElement=12;B("StructArrayLayout2i4i12",lg);var mg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},
e.prototype.emplaceBack=function(b,e,a,c,f,g,d,l){var k=this.length;return this.resize(k+1),this.emplace(k,b,e,a,c,f,g,d,l)},e.prototype.emplace=function(b,e,a,c,f,g,d,l,n){var k=6*b,J=12*b;return this.int16[k+0]=e,this.int16[k+1]=a,this.int16[k+2]=c,this.int16[k+3]=f,this.uint8[J+8]=g,this.uint8[J+9]=d,this.uint8[J+10]=l,this.uint8[J+11]=n,b},e}(ta);mg.prototype.bytesPerElement=12;B("StructArrayLayout4i4ub12",mg);var bd=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=
Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a,c,f,g,d,l){var k=this.length;return this.resize(k+1),this.emplace(k,b,e,a,c,f,g,d,l)},e.prototype.emplace=function(b,e,a,c,f,g,d,l,n){var k=8*b;return this.uint16[k+0]=e,this.uint16[k+1]=a,this.uint16[k+2]=c,this.uint16[k+3]=f,this.uint16[k+4]=g,this.uint16[k+5]=d,this.uint16[k+
6]=l,this.uint16[k+7]=n,b},e}(ta);bd.prototype.bytesPerElement=16;B("StructArrayLayout8ui16",bd);var ng=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a,c,f,g,d,l){var k=this.length;return this.resize(k+
1),this.emplace(k,b,e,a,c,f,g,d,l)},e.prototype.emplace=function(b,e,a,c,f,g,d,l,n){var k=8*b;return this.int16[k+0]=e,this.int16[k+1]=a,this.int16[k+2]=c,this.int16[k+3]=f,this.uint16[k+4]=g,this.uint16[k+5]=d,this.uint16[k+6]=l,this.uint16[k+7]=n,b},e}(ta);ng.prototype.bytesPerElement=16;B("StructArrayLayout4i4ui16",ng);var og=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a){var c=this.length;return this.resize(c+1),this.emplace(c,b,e,a)},e.prototype.emplace=function(b,e,a,c){var f=3*b;return this.float32[f+0]=e,this.float32[f+1]=a,this.float32[f+2]=c,b},e}(ta);og.prototype.bytesPerElement=12;B("StructArrayLayout3f12",og);var pg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=
e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b){var e=this.length;return this.resize(e+1),this.emplace(e,b)},e.prototype.emplace=function(b,e){return this.uint32[1*b]=e,b},e}(ta);pg.prototype.bytesPerElement=4;B("StructArrayLayout1ul4",pg);var qg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=
e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a,c,f,g,d,l,n,t,u){var k=this.length;return this.resize(k+1),this.emplace(k,b,e,a,c,f,g,d,l,n,t,u)},e.prototype.emplace=function(b,e,a,c,f,g,d,l,n,t,u,h){var k=12*b;return this.int16[k+0]=e,this.int16[k+1]=a,this.int16[k+2]=c,this.int16[k+3]=f,
this.int16[k+4]=g,this.int16[k+5]=d,this.uint32[6*b+3]=l,this.uint16[k+8]=n,this.uint16[k+9]=t,this.int16[k+10]=u,this.int16[k+11]=h,b},e}(ta);qg.prototype.bytesPerElement=24;B("StructArrayLayout6i1ul2ui2i24",qg);var Gf=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=
function(b,e,a,c,f,g){var k=this.length;return this.resize(k+1),this.emplace(k,b,e,a,c,f,g)},e.prototype.emplace=function(b,e,a,c,f,g,d){var k=6*b;return this.int16[k+0]=e,this.int16[k+1]=a,this.int16[k+2]=c,this.int16[k+3]=f,this.int16[k+4]=g,this.int16[k+5]=d,b},e}(ta);Gf.prototype.bytesPerElement=12;B("StructArrayLayout2i2i2i12",Gf);var rg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e){var a=this.length;return this.resize(a+1),this.emplace(a,b,e)},e.prototype.emplace=function(b,e,a){var c=4*b;return this.uint8[c+0]=e,this.uint8[c+1]=a,b},e}(ta);rg.prototype.bytesPerElement=4;B("StructArrayLayout2ub4",rg);var sg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a,c,f,g,d,l,n,t,u,h,C,p){var k=this.length;return this.resize(k+1),this.emplace(k,b,e,a,c,f,g,d,l,n,t,u,h,C,p)},e.prototype.emplace=function(b,e,a,c,f,g,d,l,n,t,u,h,C,p,m){var k=20*b,J=10*b,aa=40*b;return this.int16[k+0]=e,this.int16[k+1]=a,this.uint16[k+
2]=c,this.uint16[k+3]=f,this.uint32[J+2]=g,this.uint32[J+3]=d,this.uint32[J+4]=l,this.uint16[k+10]=n,this.uint16[k+11]=t,this.uint16[k+12]=u,this.float32[J+7]=h,this.float32[J+8]=C,this.uint8[aa+36]=p,this.uint8[aa+37]=m,b},e}(ta);sg.prototype.bytesPerElement=40;B("StructArrayLayout2i2ui3ul3ui2f2ub40",sg);var tg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a,c,f,g,d,l,n,t,u,h,C,p){var k=this.length;return this.resize(k+1),this.emplace(k,b,e,a,c,f,g,d,l,n,t,u,h,C,p)},e.prototype.emplace=function(b,e,a,c,f,g,d,l,n,t,u,h,C,p,m){var k=16*b;return this.int16[k+0]=e,this.int16[k+1]=a,this.int16[k+2]=c,this.int16[k+3]=f,this.uint16[k+4]=g,this.uint16[k+
5]=d,this.uint16[k+6]=l,this.uint16[k+7]=n,this.uint16[k+8]=t,this.uint16[k+9]=u,this.uint16[k+10]=h,this.uint16[k+11]=C,this.uint16[k+12]=p,this.uint32[8*b+7]=m,b},e}(ta);tg.prototype.bytesPerElement=32;B("StructArrayLayout4i9ui1ul32",tg);var bf=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},
e.prototype.emplaceBack=function(b){var e=this.length;return this.resize(e+1),this.emplace(e,b)},e.prototype.emplace=function(b,e){return this.float32[1*b]=e,b},e}(ta);bf.prototype.bytesPerElement=4;B("StructArrayLayout1f4",bf);var ug=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},
e.prototype.emplaceBack=function(b,e,a){var c=this.length;return this.resize(c+1),this.emplace(c,b,e,a)},e.prototype.emplace=function(b,e,a,c){var f=3*b;return this.int16[f+0]=e,this.int16[f+1]=a,this.int16[f+2]=c,b},e}(ta);ug.prototype.bytesPerElement=6;B("StructArrayLayout3i6",ug);var vg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a){var c=this.length;return this.resize(c+1),this.emplace(c,b,e,a)},e.prototype.emplace=function(b,e,a,c){var f=4*b;return this.uint32[2*b]=e,this.uint16[f+2]=a,this.uint16[f+3]=c,b},e}(ta);vg.prototype.bytesPerElement=8;B("StructArrayLayout1ul2ui8",vg);var yc=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),
e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a){var c=this.length;return this.resize(c+1),this.emplace(c,b,e,a)},e.prototype.emplace=function(b,e,a,c){var f=3*b;return this.uint16[f+0]=e,this.uint16[f+1]=a,this.uint16[f+2]=c,b},e}(ta);yc.prototype.bytesPerElement=6;B("StructArrayLayout3ui6",yc);var Oe=function(b){function e(){b.apply(this,arguments)}return b&&
(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e){var a=this.length;return this.resize(a+1),this.emplace(a,b,e)},e.prototype.emplace=function(b,e,a){var c=2*b;return this.uint16[c+0]=e,this.uint16[c+1]=a,b},e}(ta);Oe.prototype.bytesPerElement=4;B("StructArrayLayout2ui4",Oe);var wg=function(b){function e(){b.apply(this,
arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b){var e=this.length;return this.resize(e+1),this.emplace(e,b)},e.prototype.emplace=function(b,e){return this.uint16[1*b]=e,b},e}(ta);wg.prototype.bytesPerElement=2;B("StructArrayLayout1ui2",wg);var af=function(b){function e(){b.apply(this,
arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e){var a=this.length;return this.resize(a+1),this.emplace(a,b,e)},e.prototype.emplace=function(b,e,a){var c=2*b;return this.float32[c+0]=e,this.float32[c+1]=a,b},e}(ta);af.prototype.bytesPerElement=8;B("StructArrayLayout2f8",af);var Mf=
function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(b,e,a,c){var f=this.length;return this.resize(f+1),this.emplace(f,b,e,a,c)},e.prototype.emplace=function(b,e,a,c,f){var g=4*b;return this.float32[g+0]=e,this.float32[g+1]=a,this.float32[g+2]=c,this.float32[g+
3]=f,b},e}(ta);Mf.prototype.bytesPerElement=16;B("StructArrayLayout4f16",Mf);var Ug=function(b){function e(){b.apply(this,arguments)}b&&(e.__proto__=b);e.prototype=Object.create(b&&b.prototype);e.prototype.constructor=e;var a={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},
anchorPoint:{configurable:!0}};return a.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},a.anchorPointX.set=function(b){this._structArray.int16[this._pos2+0]=b},a.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},a.anchorPointY.set=function(b){this._structArray.int16[this._pos2+1]=b},a.x1.get=function(){return this._structArray.int16[this._pos2+2]},a.x1.set=function(b){this._structArray.int16[this._pos2+2]=b},a.y1.get=function(){return this._structArray.int16[this._pos2+
3]},a.y1.set=function(b){this._structArray.int16[this._pos2+3]=b},a.x2.get=function(){return this._structArray.int16[this._pos2+4]},a.x2.set=function(b){this._structArray.int16[this._pos2+4]=b},a.y2.get=function(){return this._structArray.int16[this._pos2+5]},a.y2.set=function(b){this._structArray.int16[this._pos2+5]=b},a.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},a.featureIndex.set=function(b){this._structArray.uint32[this._pos4+3]=b},a.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+
8]},a.sourceLayerIndex.set=function(b){this._structArray.uint16[this._pos2+8]=b},a.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},a.bucketIndex.set=function(b){this._structArray.uint16[this._pos2+9]=b},a.radius.get=function(){return this._structArray.int16[this._pos2+10]},a.radius.set=function(b){this._structArray.int16[this._pos2+10]=b},a.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},a.signedDistanceFromAnchor.set=function(b){this._structArray.int16[this._pos2+
11]=b},a.anchorPoint.get=function(){return new sa(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,a),e}(ie);Ug.prototype.size=24;var xg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.get=function(b){return new Ug(this,b)},e}(qg);B("CollisionBoxArray",xg);var Vg=function(b){function e(){b.apply(this,arguments)}b&&(e.__proto__=b);e.prototype=Object.create(b&&b.prototype);
e.prototype.constructor=e;var a={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return a.anchorX.get=function(){return this._structArray.int16[this._pos2+
0]},a.anchorX.set=function(b){this._structArray.int16[this._pos2+0]=b},a.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},a.anchorY.set=function(b){this._structArray.int16[this._pos2+1]=b},a.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},a.glyphStartIndex.set=function(b){this._structArray.uint16[this._pos2+2]=b},a.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},a.numGlyphs.set=function(b){this._structArray.uint16[this._pos2+
3]=b},a.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},a.vertexStartIndex.set=function(b){this._structArray.uint32[this._pos4+2]=b},a.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},a.lineStartIndex.set=function(b){this._structArray.uint32[this._pos4+3]=b},a.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},a.lineLength.set=function(b){this._structArray.uint32[this._pos4+4]=b},a.segment.get=function(){return this._structArray.uint16[this._pos2+
10]},a.segment.set=function(b){this._structArray.uint16[this._pos2+10]=b},a.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},a.lowerSize.set=function(b){this._structArray.uint16[this._pos2+11]=b},a.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},a.upperSize.set=function(b){this._structArray.uint16[this._pos2+12]=b},a.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},a.lineOffsetX.set=function(b){this._structArray.float32[this._pos4+
7]=b},a.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},a.lineOffsetY.set=function(b){this._structArray.float32[this._pos4+8]=b},a.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},a.writingMode.set=function(b){this._structArray.uint8[this._pos1+36]=b},a.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},a.hidden.set=function(b){this._structArray.uint8[this._pos1+37]=b},Object.defineProperties(e.prototype,a),e}(ie);Vg.prototype.size=
40;var Wg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.get=function(b){return new Vg(this,b)},e}(sg);B("PlacedSymbolArray",Wg);var Xg=function(b){function e(){b.apply(this,arguments)}b&&(e.__proto__=b);e.prototype=Object.create(b&&b.prototype);e.prototype.constructor=e;var a={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},
key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return a.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},a.anchorX.set=function(b){this._structArray.int16[this._pos2+0]=b},a.anchorY.get=function(){return this._structArray.int16[this._pos2+
1]},a.anchorY.set=function(b){this._structArray.int16[this._pos2+1]=b},a.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},a.horizontalPlacedTextSymbolIndex.set=function(b){this._structArray.int16[this._pos2+2]=b},a.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},a.verticalPlacedTextSymbolIndex.set=function(b){this._structArray.int16[this._pos2+3]=b},a.key.get=function(){return this._structArray.uint16[this._pos2+
4]},a.key.set=function(b){this._structArray.uint16[this._pos2+4]=b},a.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},a.textBoxStartIndex.set=function(b){this._structArray.uint16[this._pos2+5]=b},a.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},a.textBoxEndIndex.set=function(b){this._structArray.uint16[this._pos2+6]=b},a.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},a.iconBoxStartIndex.set=function(b){this._structArray.uint16[this._pos2+
7]=b},a.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},a.iconBoxEndIndex.set=function(b){this._structArray.uint16[this._pos2+8]=b},a.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},a.featureIndex.set=function(b){this._structArray.uint16[this._pos2+9]=b},a.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},a.numGlyphVertices.set=function(b){this._structArray.uint16[this._pos2+10]=b},a.numVerticalGlyphVertices.get=
function(){return this._structArray.uint16[this._pos2+11]},a.numVerticalGlyphVertices.set=function(b){this._structArray.uint16[this._pos2+11]=b},a.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},a.numIconVertices.set=function(b){this._structArray.uint16[this._pos2+12]=b},a.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},a.crossTileID.set=function(b){this._structArray.uint32[this._pos4+7]=b},Object.defineProperties(e.prototype,a),e}(ie);Xg.prototype.size=
32;var yg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.get=function(b){return new Xg(this,b)},e}(tg);B("SymbolInstanceArray",yg);var Yg=function(b){function e(){b.apply(this,arguments)}b&&(e.__proto__=b);e.prototype=Object.create(b&&b.prototype);e.prototype.constructor=e;var a={offsetX:{configurable:!0}};return a.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},a.offsetX.set=
function(b){this._structArray.float32[this._pos4+0]=b},Object.defineProperties(e.prototype,a),e}(ie);Yg.prototype.size=4;var Zg=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(b){return this.float32[1*b]},e.prototype.get=function(b){return new Yg(this,b)},e}(bf);B("GlyphOffsetArray",Zg);var $g=function(b){function e(){b.apply(this,arguments)}b&&(e.__proto__=b);e.prototype=
Object.create(b&&b.prototype);e.prototype.constructor=e;var a={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return a.x.get=function(){return this._structArray.int16[this._pos2+0]},a.x.set=function(b){this._structArray.int16[this._pos2+0]=b},a.y.get=function(){return this._structArray.int16[this._pos2+1]},a.y.set=function(b){this._structArray.int16[this._pos2+1]=b},a.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},a.tileUnitDistanceFromAnchor.set=
function(b){this._structArray.int16[this._pos2+2]=b},Object.defineProperties(e.prototype,a),e}(ie);$g.prototype.size=6;var ah=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.getx=function(b){return this.int16[3*b]},e.prototype.gety=function(b){return this.int16[3*b+1]},e.prototype.gettileUnitDistanceFromAnchor=function(b){return this.int16[3*b+2]},e.prototype.get=function(b){return new $g(this,
b)},e}(ug);B("SymbolLineVertexArray",ah);var bh=function(b){function e(){b.apply(this,arguments)}b&&(e.__proto__=b);e.prototype=Object.create(b&&b.prototype);e.prototype.constructor=e;var a={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return a.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},a.featureIndex.set=function(b){this._structArray.uint32[this._pos4+0]=b},a.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+
2]},a.sourceLayerIndex.set=function(b){this._structArray.uint16[this._pos2+2]=b},a.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},a.bucketIndex.set=function(b){this._structArray.uint16[this._pos2+3]=b},Object.defineProperties(e.prototype,a),e}(ie);bh.prototype.size=8;var ch=function(b){function e(){b.apply(this,arguments)}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.get=function(b){return new bh(this,b)},e}(vg);
B("FeatureIndexArray",ch);var zg=P([{name:"a_pos",components:2,type:"Int16"}],4),dh=zg.members,Ia=(zg.size,zg.alignment,function(b){void 0===b&&(b=[]);this.segments=b});Ia.prototype.prepareSegment=function(b,e,a){var c=this.segments[this.segments.length-1];return b>Ia.MAX_VERTEX_ARRAY_LENGTH&&ic("Max vertices per segment is "+Ia.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+b),(!c||c.vertexLength+b>Ia.MAX_VERTEX_ARRAY_LENGTH)&&(c={vertexOffset:e.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0},
this.segments.push(c)),c};Ia.prototype.get=function(){return this.segments};Ia.prototype.destroy=function(){for(var b=0,e=this.segments;b<e.length;b+=1){var a=e[b],c;for(c in a.vaos)a.vaos[c].destroy()}};Ia.simpleSegment=function(b,e,a,c){return new Ia([{vertexOffset:b,primitiveOffset:e,vertexLength:a,primitiveLength:c,vaos:{}}])};Ia.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;B("SegmentVector",Ia);var Pd=function(){this.ids=[];this.positions=[];this.indexed=!1};Pd.prototype.add=function(b,e,a,c){this.ids.push(b);
this.positions.push(e,a,c)};Pd.prototype.getPositions=function(b){for(var e=0,a=this.ids.length-1;e<a;){var c=e+a>>1;this.ids[c]>=b?a=c:e=c+1}for(a=[];this.ids[e]===b;)a.push({index:this.positions[3*e],start:this.positions[3*e+1],end:this.positions[3*e+2]}),e++;return a};Pd.serialize=function(b,e){var a=new Float64Array(b.ids);b=new Uint32Array(b.positions);return function Lf(b,e,a,c){if(!(a>=c)){for(var f=b[a+c>>1],g=a-1,k=c+1;;){do g++;while(b[g]<f);do k--;while(b[k]>f);if(g>=k)break;da(b,g,k);
da(e,3*g,3*k);da(e,3*g+1,3*k+1);da(e,3*g+2,3*k+2)}Lf(b,e,a,k);Lf(b,e,k+1,c)}}(a,b,0,a.length-1),e.push(a.buffer,b.buffer),{ids:a,positions:b}};Pd.deserialize=function(b){var e=new Pd;return e.ids=b.ids,e.positions=b.positions,e.indexed=!0,e};B("FeaturePositionMap",Pd);var Qd=function(b,e){this.gl=b.gl;this.location=e},Sh=function(b){function e(e,a){b.call(this,e,a);this.current=0}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.set=function(b){this.current!==
b&&(this.current=b,this.gl.uniform1i(this.location,b))},e}(Qd),Pe=function(b){function e(e,a){b.call(this,e,a);this.current=0}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.set=function(b){this.current!==b&&(this.current=b,this.gl.uniform1f(this.location,b))},e}(Qd),Th=function(b){function e(e,a){b.call(this,e,a);this.current=[0,0]}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.set=
function(b){b[0]===this.current[0]&&b[1]===this.current[1]||(this.current=b,this.gl.uniform2f(this.location,b[0],b[1]))},e}(Qd),Uh=function(b){function e(e,a){b.call(this,e,a);this.current=[0,0,0]}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.set=function(b){b[0]===this.current[0]&&b[1]===this.current[1]&&b[2]===this.current[2]||(this.current=b,this.gl.uniform3f(this.location,b[0],b[1],b[2]))},e}(Qd),eh=function(b){function e(e,a){b.call(this,
e,a);this.current=[0,0,0,0]}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.set=function(b){b[0]===this.current[0]&&b[1]===this.current[1]&&b[2]===this.current[2]&&b[3]===this.current[3]||(this.current=b,this.gl.uniform4f(this.location,b[0],b[1],b[2],b[3]))},e}(Qd),fh=function(b){function e(e,a){b.call(this,e,a);this.current=oa.transparent}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.set=
function(b){b.r===this.current.r&&b.g===this.current.g&&b.b===this.current.b&&b.a===this.current.a||(this.current=b,this.gl.uniform4f(this.location,b.r,b.g,b.b,b.a))},e}(Qd),Vh=new Float32Array(16),Wh=function(b){function e(e,a){b.call(this,e,a);this.current=Vh}return b&&(e.__proto__=b),e.prototype=Object.create(b&&b.prototype),e.prototype.constructor=e,e.prototype.set=function(b){if(b[12]!==this.current[12]||b[0]!==this.current[0])return this.current=b,void this.gl.uniformMatrix4fv(this.location,
!1,b);for(var e=1;16>e;e++)if(b[e]!==this.current[e]){this.current=b;this.gl.uniformMatrix4fv(this.location,!1,b);break}},e}(Qd),nb=function(b,e,a){this.value=b;this.names=e;this.uniformNames=this.names.map(function(b){return"u_"+b});this.type=a;this.maxValue=-1/0};nb.prototype.defines=function(){return this.names.map(function(b){return"#define HAS_UNIFORM_u_"+b})};nb.prototype.setConstantPatternPositions=function(){};nb.prototype.populatePaintArray=function(){};nb.prototype.updatePaintArray=function(){};
nb.prototype.upload=function(){};nb.prototype.destroy=function(){};nb.prototype.setUniforms=function(b,e,a,c){e.set(c.constantOr(this.value))};nb.prototype.getBinding=function(b,e){return"color"===this.type?new fh(b,e):new Pe(b,e)};nb.serialize=function(b){var e=b.names,a=b.type;return{value:I(b.value),names:e,type:a}};nb.deserialize=function(b){var e=b.names,a=b.type;return new nb(ma(b.value),e,a)};var cc=function(b,e,a){this.value=b;this.names=e;this.uniformNames=this.names.map(function(b){return"u_"+
b});this.type=a;this.maxValue=-1/0;this.patternPositions={patternTo:null,patternFrom:null}};cc.prototype.defines=function(){return this.names.map(function(b){return"#define HAS_UNIFORM_u_"+b})};cc.prototype.populatePaintArray=function(){};cc.prototype.updatePaintArray=function(){};cc.prototype.upload=function(){};cc.prototype.destroy=function(){};cc.prototype.setConstantPatternPositions=function(b,e){this.patternPositions.patternTo=b.tlbr;this.patternPositions.patternFrom=e.tlbr};cc.prototype.setUniforms=
function(b,e,a,c,f){b=this.patternPositions;"u_pattern_to"===f&&b.patternTo&&e.set(b.patternTo);"u_pattern_from"===f&&b.patternFrom&&e.set(b.patternFrom)};cc.prototype.getBinding=function(b,e){return new eh(b,e)};var Pb=function(b,e,a,c){this.expression=b;this.names=e;this.type=a;this.uniformNames=this.names.map(function(b){return"a_"+b});this.maxValue=-1/0;this.paintVertexAttributes=e.map(function(b){return{name:"a_"+b,type:"Float32",components:"color"===a?2:1,offset:0}});this.paintVertexArray=new c};
Pb.prototype.defines=function(){return[]};Pb.prototype.setConstantPatternPositions=function(){};Pb.prototype.populatePaintArray=function(b,e){var a=this.paintVertexArray,c=a.length;a.reserve(b);e=this.expression.evaluate(new Ea(0),e,{});if("color"===this.type)for(e=Ra(e);c<b;c++)a.emplaceBack(e[0],e[1]);else{for(;c<b;c++)a.emplaceBack(e);this.maxValue=Math.max(this.maxValue,e)}};Pb.prototype.updatePaintArray=function(b,e,a,c){var f=this.paintVertexArray;a=this.expression.evaluate({zoom:0},a,c);if("color"===
this.type)for(a=Ra(a);b<e;b++)f.emplace(b,a[0],a[1]);else{for(;b<e;b++)f.emplace(b,a);this.maxValue=Math.max(this.maxValue,a)}};Pb.prototype.upload=function(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Pb.prototype.destroy=function(){this.paintVertexBuffer&&
this.paintVertexBuffer.destroy()};Pb.prototype.setUniforms=function(b,e){e.set(0)};Pb.prototype.getBinding=function(b,e){return new Pe(b,e)};var Bb=function(b,e,a,c,f,g){this.expression=b;this.names=e;this.uniformNames=this.names.map(function(b){return"a_"+b+"_t"});this.type=a;this.useIntegerZoom=c;this.zoom=f;this.maxValue=-1/0;this.paintVertexAttributes=e.map(function(b){return{name:"a_"+b,type:"Float32",components:"color"===a?4:2,offset:0}});this.paintVertexArray=new g};Bb.prototype.defines=function(){return[]};
Bb.prototype.setConstantPatternPositions=function(){};Bb.prototype.populatePaintArray=function(b,e){var a=this.paintVertexArray,c=a.length;a.reserve(b);var f=this.expression.evaluate(new Ea(this.zoom),e,{});e=this.expression.evaluate(new Ea(this.zoom+1),e,{});if("color"===this.type)for(f=Ra(f),e=Ra(e);c<b;c++)a.emplaceBack(f[0],f[1],e[0],e[1]);else{for(;c<b;c++)a.emplaceBack(f,e);this.maxValue=Math.max(this.maxValue,f,e)}};Bb.prototype.updatePaintArray=function(b,e,a,c){var f=this.paintVertexArray,
g=this.expression.evaluate({zoom:this.zoom},a,c);a=this.expression.evaluate({zoom:this.zoom+1},a,c);if("color"===this.type)for(g=Ra(g),a=Ra(a);b<e;b++)f.emplace(b,g[0],g[1],a[0],a[1]);else{for(;b<e;b++)f.emplace(b,g,a);this.maxValue=Math.max(this.maxValue,g,a)}};Bb.prototype.upload=function(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,
this.paintVertexAttributes,this.expression.isStateDependent))};Bb.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};Bb.prototype.interpolationFactor=function(b){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(b),this.zoom,this.zoom+1):this.expression.interpolationFactor(b,this.zoom,this.zoom+1)};Bb.prototype.setUniforms=function(b,e,a){e.set(this.interpolationFactor(a.zoom))};Bb.prototype.getBinding=function(b,e){return new Pe(b,e)};var dc=
function(b,e,a,c,f,g,d){this.expression=b;this.names=e;this.type=a;this.uniformNames=this.names.map(function(b){return"a_"+b+"_t"});this.useIntegerZoom=c;this.zoom=f;this.maxValue=-1/0;this.layerId=d;this.paintVertexAttributes=e.map(function(b){return{name:"a_"+b,type:"Uint16",components:4,offset:0}});this.zoomInPaintVertexArray=new g;this.zoomOutPaintVertexArray=new g};dc.prototype.defines=function(){return[]};dc.prototype.setConstantPatternPositions=function(){};dc.prototype.populatePaintArray=
function(b,e,a){var c=this.zoomInPaintVertexArray,f=this.zoomOutPaintVertexArray,g=this.layerId,k=c.length;if(c.reserve(b),f.reserve(b),a&&e.patterns&&e.patterns[g]){var d=e.patterns[g];e=a[d.min];g=a[d.mid];a=a[d.max];if(e&&g&&a)for(;k<b;k++)c.emplaceBack(g.tl[0],g.tl[1],g.br[0],g.br[1],e.tl[0],e.tl[1],e.br[0],e.br[1]),f.emplaceBack(g.tl[0],g.tl[1],g.br[0],g.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1])}};dc.prototype.updatePaintArray=function(b,a,c,f,g){f=this.zoomInPaintVertexArray;var e=this.zoomOutPaintVertexArray,
k=this.layerId;if(g&&c.patterns&&c.patterns[k]){var d=c.patterns[k];c=g[d.min];k=g[d.mid];g=g[d.max];if(c&&k&&g)for(;b<a;b++)f.emplace(b,k.tl[0],k.tl[1],k.br[0],k.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1]),e.emplace(b,k.tl[0],k.tl[1],k.br[0],k.br[1],g.tl[0],g.tl[1],g.br[0],g.br[1])}};dc.prototype.upload=function(b){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=b.createVertexBuffer(this.zoomInPaintVertexArray,
this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=b.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};dc.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};dc.prototype.setUniforms=function(b,a){a.set(0)};dc.prototype.getBinding=function(b,a){return new Pe(b,a)};var ib=function(){this.binders=
{};this.cacheKey="";this._buffers=[];this._featureMap=new Pd;this._bufferOffset=0};ib.createDynamic=function(b,a,c){var e=new ib,f=[],g;for(g in b.paint._values)if(c(g)){var k=b.paint.get(g);if(k instanceof Ab&&Ib(k.property.specification)){var d={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],
"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[g]||[g.replace(b.type+"-","").replace(/-/g,"_")],l=k.property.specification.type,n=k.property.useIntegerZoom;if("cross-faded"===k.property.specification["property-type"]||"cross-faded-data-driven"===k.property.specification["property-type"])if("constant"===k.value.kind)e.binders[g]=new cc(k.value.value,
d,l),f.push("/u_"+g);else{var t=Lb(g,l,"source");e.binders[g]=new dc(k.value,d,l,n,a,t,b.id);f.push("/a_"+g)}else"constant"===k.value.kind?(e.binders[g]=new nb(k.value.value,d,l),f.push("/u_"+g)):"source"===k.value.kind?(n=Lb(g,l,"source"),e.binders[g]=new Pb(k.value,d,l,n),f.push("/a_"+g)):(t=Lb(g,l,"composite"),e.binders[g]=new Bb(k.value,d,l,n,a,t),f.push("/z_"+g))}}return e.cacheKey=f.sort().join(""),e};ib.prototype.populatePaintArrays=function(b,a,c,f){for(var e in this.binders)this.binders[e].populatePaintArray(b,
a,f);void 0!==a.id&&this._featureMap.add(+a.id,c,this._bufferOffset,b);this._bufferOffset=b};ib.prototype.setConstantPatternPositions=function(b,a){for(var e in this.binders)this.binders[e].setConstantPatternPositions(b,a)};ib.prototype.updatePaintArrays=function(b,a,c,f){var e=!1,g;for(g in b)for(var k=0,d=this._featureMap.getPositions(+g);k<d.length;k+=1){var l=d[k],n=a.feature(l.index),t;for(t in this.binders){var u=this.binders[t];u instanceof nb||u instanceof cc||!0!==u.expression.isStateDependent||
(e=c.paint.get(t),u.expression=e.value,u.updatePaintArray(l.start,l.end,n,b[g],f),e=!0)}}return e};ib.prototype.defines=function(){var b=[],a;for(a in this.binders)b.push.apply(b,this.binders[a].defines());return b};ib.prototype.getPaintVertexBuffers=function(){return this._buffers};ib.prototype.getUniforms=function(b,a){var e={},c;for(c in this.binders)for(var f=this.binders[c],g=0,d=f.uniformNames;g<d.length;g+=1){var l=d[g];e[l]=f.getBinding(b,a[l])}return e};ib.prototype.setUniforms=function(b,
a,c,f){for(var e in this.binders)for(var g=this.binders[e],k=0,d=g.uniformNames;k<d.length;k+=1){var l=d[k];g.setUniforms(b,a[l],f,c.get(e),l)}};ib.prototype.updatePatternPaintBuffers=function(b){var a=[],c;for(c in this.binders){var f=this.binders[c];f instanceof dc?(f=2===b.fromScale?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer)&&a.push(f):(f instanceof Pb||f instanceof Bb)&&f.paintVertexBuffer&&a.push(f.paintVertexBuffer)}this._buffers=a};ib.prototype.upload=function(b){for(var a in this.binders)this.binders[a].upload(b);
b=[];for(var c in this.binders)a=this.binders[c],(a instanceof Pb||a instanceof Bb)&&a.paintVertexBuffer&&b.push(a.paintVertexBuffer);this._buffers=b};ib.prototype.destroy=function(){for(var b in this.binders)this.binders[b].destroy()};var Qb=function(b,a,c,f){void 0===f&&(f=function(){return!0});this.programConfigurations={};for(var e=0;e<a.length;e+=1){var g=a[e];this.programConfigurations[g.id]=ib.createDynamic(g,c,f);this.programConfigurations[g.id].layoutAttributes=b}this.needsUpload=!1};Qb.prototype.populatePaintArrays=
function(b,a,c,f){for(var e in this.programConfigurations)this.programConfigurations[e].populatePaintArrays(b,a,c,f);this.needsUpload=!0};Qb.prototype.updatePaintArrays=function(b,a,c,f){for(var e=0;e<c.length;e+=1){var g=c[e];this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(b,a,g,f)||this.needsUpload}};Qb.prototype.get=function(b){return this.programConfigurations[b]};Qb.prototype.upload=function(b){if(this.needsUpload){for(var a in this.programConfigurations)this.programConfigurations[a].upload(b);
this.needsUpload=!1}};Qb.prototype.destroy=function(){for(var b in this.programConfigurations)this.programConfigurations[b].destroy()};B("ConstantBinder",nb);B("CrossFadedConstantBinder",cc);B("SourceExpressionBinder",Pb);B("CrossFadedCompositeBinder",dc);B("CompositeExpressionBinder",Bb);B("ProgramConfiguration",ib,{omit:["_buffers"]});B("ProgramConfigurationSet",Qb);var cf={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1},zc=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;
this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.hasPattern=!1;this.layoutVertexArray=new Ne;this.indexArray=new yc;this.segments=new Ia;this.programConfigurations=new Qb(dh,b.layers,b.zoom)};zc.prototype.populate=function(b,a){for(var e=0;e<b.length;e+=1){var c=b[e],f=c.feature,g=c.index;c=c.sourceLayerIndex;if(this.layers[0]._featureFilter(new Ea(this.zoom),f)){var d=ia(f);this.addFeature(f,d,g);a.featureIndex.insert(f,d,g,c,this.index)}}};zc.prototype.update=function(b,
a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,a,this.stateDependentLayers,c)};zc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};zc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};zc.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,dh),this.indexBuffer=b.createIndexBuffer(this.indexArray));this.programConfigurations.upload(b);
this.uploaded=!0};zc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};zc.prototype.addFeature=function(b,a,c){for(var e=0;e<a.length;e+=1)for(var f=0,g=a[e];f<g.length;f+=1){var k=g[f],d=k.x;k=k.y;if(!(0>d||8192<=d||0>k||8192<=k)){var l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),n=l.vertexLength;xb(this.layoutVertexArray,d,k,-1,-1);xb(this.layoutVertexArray,
d,k,1,-1);xb(this.layoutVertexArray,d,k,1,1);xb(this.layoutVertexArray,d,k,-1,1);this.indexArray.emplaceBack(n,n+1,n+2);this.indexArray.emplaceBack(n,n+3,n+2);l.vertexLength+=4;l.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,c,{})};B("CircleBucket",zc,{omit:["layers"]});var Xh={paint:new Ob({"circle-radius":new X(g.paint_circle["circle-radius"]),"circle-color":new X(g.paint_circle["circle-color"]),"circle-blur":new X(g.paint_circle["circle-blur"]),
"circle-opacity":new X(g.paint_circle["circle-opacity"]),"circle-translate":new U(g.paint_circle["circle-translate"]),"circle-translate-anchor":new U(g.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new U(g.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new U(g.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new X(g.paint_circle["circle-stroke-width"]),"circle-stroke-color":new X(g.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new X(g.paint_circle["circle-stroke-opacity"])})},
dd="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;var Lc,Yh=(Lc=se(),function(b,a,c,f,g,d){a||(a=3);c||(c=0);for(f=f?Math.min(f*a+c,b.length):b.length;c<f;c+=a)Lc[0]=b[c],Lc[1]=b[c+1],Lc[2]=b[c+2],g(Lc,Lc,d),b[c]=Lc[0],b[c+1]=Lc[1],b[c+2]=Lc[2];return b}),Zh=function(){var b=$d();return function(a,c,f,g,d,l){c||(c=4);f||(f=0);for(g=g?Math.min(g*c+f,a.length):a.length;f<g;f+=c)b[0]=a[f],b[1]=a[f+1],b[2]=a[f+2],b[3]=a[f+3],d(b,b,l),a[f]=b[0],a[f+1]=b[1],a[f+2]=b[2],a[f+3]=b[3];return a}}();
se();ba(1,0,0);ba(0,1,0);te();te();Da();!function(){var b;(b=new dd(2))[0]=0;b[1]=0}();var $h=function(b){function a(a){b.call(this,a,Xh)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.createBucket=function(b){return new zc(b)},a.prototype.queryRadius=function(b){return ab("circle-radius",this,b)+ab("circle-stroke-width",this,b)+cd(this.paint.get("circle-translate"))},a.prototype.queryIntersectsFeature=function(b,a,e,c,f,g,d,l){b=Z(b,this.paint.get("circle-translate"),
this.paint.get("circle-translate-anchor"),g.angle,d);f=this.paint.get("circle-radius").evaluate(a,e)+this.paint.get("circle-stroke-width").evaluate(a,e);e=(a="map"===this.paint.get("circle-pitch-alignment"))?b:function(b,a,e){return b.map(function(b){return b.map(function(b){return df(b,a,e)})})}(b,l,g);d=a?f*d:f;for(b=0;b<c.length;b+=1){f=0;for(var k=c[b];f<k.length;f+=1){var n=k[f],t=a?n:df(n,l,g),u=d;n=tc([],[n.x,n.y,0,1],l);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?
u*=n[3]/g.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(u*=g.cameraToCenterDistance/n[3]),Ng(e,t,u))return!0}}return!1},a}(bc),gh=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(zc);B("HeatmapBucket",gh,{omit:["layers"]});var Fd=function(b,a){ae(this,b,1,a)};Fd.prototype.resize=function(b){yb(this,b,1)};Fd.prototype.clone=
function(){return new Fd({width:this.width,height:this.height},new Uint8Array(this.data))};Fd.copy=function(b,a,c,f,g){ue(b,a,c,f,g,1)};var hb=function(b,a){ae(this,b,4,a)};hb.prototype.resize=function(b){yb(this,b,4)};hb.prototype.clone=function(){return new hb({width:this.width,height:this.height},new Uint8Array(this.data))};hb.copy=function(b,a,c,f,g){ue(b,a,c,f,g,4)};B("AlphaImage",Fd);B("RGBAImage",hb);var ai={paint:new Ob({"heatmap-radius":new X(g.paint_heatmap["heatmap-radius"]),"heatmap-weight":new X(g.paint_heatmap["heatmap-weight"]),
"heatmap-intensity":new U(g.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Me(g.paint_heatmap["heatmap-color"]),"heatmap-opacity":new U(g.paint_heatmap["heatmap-opacity"])})},bi=function(b){function a(a){b.call(this,a,ai);this._updateColorRamp()}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.createBucket=function(b){return new gh(b)},a.prototype._handleSpecialPaintPropertyUpdate=function(b){"heatmap-color"===b&&this._updateColorRamp()},
a.prototype._updateColorRamp=function(){this.colorRamp=ef(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity");this.colorRampTexture=null},a.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},a.prototype.queryRadius=function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},a}(bc),ci={paint:new Ob({"hillshade-illumination-direction":new U(g.paint_hillshade["hillshade-illumination-direction"]),
"hillshade-illumination-anchor":new U(g.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new U(g.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new U(g.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new U(g.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new U(g.paint_hillshade["hillshade-accent-color"])})},di=function(b){function a(a){b.call(this,a,ci)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&
b.prototype),a.prototype.constructor=a,a.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},a}(bc),Ag=P([{name:"a_pos",components:2,type:"Int16"}],4),hh=Ag.members,Bg=(Ag.size,Ag.alignment,be);be.deviation=function(b,a,c,f){var e=a&&a.length,g=Math.abs(ve(b,0,e?a[0]*c:b.length,c));if(e){e=0;for(var d=a.length;e<d;e++)g-=Math.abs(ve(b,a[e]*c,e<d-1?a[e+1]*c:b.length,c))}for(e=a=0;e<f.length;e+=3){d=f[e]*c;var k=f[e+1]*c,l=f[e+2]*c;a+=
Math.abs((b[d]-b[l])*(b[k+1]-b[d+1])-(b[d]-b[k])*(b[l+1]-b[d+1]))}return 0===g&&0===a?0:Math.abs((a-g)/g)};be.flatten=function(b){for(var a=b[0][0].length,c={vertices:[],holes:[],dimensions:a},f=0,g=0;g<b.length;g++){for(var d=0;d<b[g].length;d++)for(var l=0;l<a;l++)c.vertices.push(b[g][d][l]);0<g&&(f+=b[g-1].length,c.holes.push(f))}return c};Bg.default=be;var Pg=kf;Pg.default=kf;var ec=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});
this.index=b.index;this.hasPattern=!1;this.layoutVertexArray=new Ne;this.indexArray=new yc;this.indexArray2=new Oe;this.programConfigurations=new Qb(hh,b.layers,b.zoom);this.segments=new Ia;this.segments2=new Ia};ec.prototype.populate=function(b,a){this.features=[];this.hasPattern=xe("fill",this.layers,a);for(var e=0;e<b.length;e+=1){var c=b[e],f=c.feature,g=c.index;c=c.sourceLayerIndex;if(this.layers[0]._featureFilter(new Ea(this.zoom),f)){var d=ia(f),l={sourceLayerIndex:c,index:g,geometry:d,properties:f.properties,
type:f.type,patterns:{}};void 0!==f.id&&(l.id=f.id);this.hasPattern?this.features.push(ye("fill",this.layers,l,this.zoom,a)):this.addFeature(l,d,g,{});a.featureIndex.insert(f,d,g,c,this.index)}}};ec.prototype.update=function(b,a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,a,this.stateDependentLayers,c)};ec.prototype.addFeatures=function(b,a){b=0;for(var e=this.features;b<e.length;b+=1){var c=e[b];this.addFeature(c,c.geometry,c.index,a)}};ec.prototype.isEmpty=
function(){return 0===this.layoutVertexArray.length};ec.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};ec.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,hh),this.indexBuffer=b.createIndexBuffer(this.indexArray),this.indexBuffer2=b.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(b);this.uploaded=!0};ec.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),
this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};ec.prototype.addFeature=function(b,a,c,f){var e=0;for(a=we(a,500);e<a.length;e+=1){for(var g=a[e],d=0,k=0,l=g;k<l.length;k+=1)d+=l[k].length;k=this.segments.prepareSegment(d,this.layoutVertexArray,this.indexArray);l=k.vertexLength;for(var n=[],t=[],u=0,h=g;u<h.length;u+=1){var C=h[u];if(0!==C.length){C!==g[0]&&t.push(n.length/2);var p=this.segments2.prepareSegment(C.length,
this.layoutVertexArray,this.indexArray2),J=p.vertexLength;this.layoutVertexArray.emplaceBack(C[0].x,C[0].y);this.indexArray2.emplaceBack(J+C.length-1,J);n.push(C[0].x);n.push(C[0].y);for(var m=1;m<C.length;m++)this.layoutVertexArray.emplaceBack(C[m].x,C[m].y),this.indexArray2.emplaceBack(J+m-1,J+m),n.push(C[m].x),n.push(C[m].y);p.vertexLength+=C.length;p.primitiveLength+=C.length}}g=Bg(n,t);for(n=0;n<g.length;n+=3)this.indexArray.emplaceBack(l+g[n],l+g[n+1],l+g[n+2]);k.vertexLength+=d;k.primitiveLength+=
g.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,c,f)};B("FillBucket",ec,{omit:["layers","features"]});var ei={paint:new Ob({"fill-antialias":new U(g.paint_fill["fill-antialias"]),"fill-opacity":new X(g.paint_fill["fill-opacity"]),"fill-color":new X(g.paint_fill["fill-color"]),"fill-outline-color":new X(g.paint_fill["fill-outline-color"]),"fill-translate":new U(g.paint_fill["fill-translate"]),"fill-translate-anchor":new U(g.paint_fill["fill-translate-anchor"]),
"fill-pattern":new Ef(g.paint_fill["fill-pattern"])})},fi=function(b){function a(a){b.call(this,a,ei)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.recalculate=function(a){b.prototype.recalculate.call(this,a);a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},a.prototype.createBucket=function(b){return new ec(b)},a.prototype.queryRadius=
function(){return cd(this.paint.get("fill-translate"))},a.prototype.queryIntersectsFeature=function(b,a,e,c,f,g,d){return Zd(Z(b,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,d),c)},a}(bc),Cg=P([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ih=Cg.members,Of=(Cg.size,Cg.alignment,Math.pow(2,13)),fc=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});
this.index=b.index;this.hasPattern=!1;this.layoutVertexArray=new lg;this.indexArray=new yc;this.programConfigurations=new Qb(ih,b.layers,b.zoom);this.segments=new Ia};fc.prototype.populate=function(b,a){this.features=[];this.hasPattern=xe("fill-extrusion",this.layers,a);for(var e=0;e<b.length;e+=1){var c=b[e],f=c.feature,g=c.index;c=c.sourceLayerIndex;if(this.layers[0]._featureFilter(new Ea(this.zoom),f)){var d=ia(f),l={sourceLayerIndex:c,index:g,geometry:d,properties:f.properties,type:f.type,patterns:{}};
void 0!==f.id&&(l.id=f.id);this.hasPattern?this.features.push(ye("fill-extrusion",this.layers,l,this.zoom,a)):this.addFeature(l,d,g,{});a.featureIndex.insert(f,d,g,c,this.index)}}};fc.prototype.addFeatures=function(b,a){b=0;for(var e=this.features;b<e.length;b+=1){var c=e[b];this.addFeature(c,c.geometry,c.index,a)}};fc.prototype.update=function(b,a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,a,this.stateDependentLayers,c)};fc.prototype.isEmpty=function(){return 0===
this.layoutVertexArray.length};fc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};fc.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,ih),this.indexBuffer=b.createIndexBuffer(this.indexArray));this.programConfigurations.upload(b);this.uploaded=!0};fc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),
this.segments.destroy())};fc.prototype.addFeature=function(b,a,c,f){var e=0;for(a=we(a,500);e<a.length;e+=1){for(var g=a[e],d=0,k=0,l=g;k<l.length;k+=1)d+=l[k].length;k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);l=0;for(var n=g;l<n.length;l+=1){var t=n[l];if(0!==t.length&&!Pf(t))for(var u=0,h=0;h<t.length;h++){var C=t[h];if(1<=h){var p=t[h-1];if(!(C.x===p.x&&(0>C.x||8192<C.x)||C.y===p.y&&(0>C.y||8192<C.y))){k.vertexLength+4>Ia.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(4,
this.layoutVertexArray,this.indexArray));var J=C.sub(p)._perp()._unit(),m=p.dist(C);32768<u+m&&(u=0);Dd(this.layoutVertexArray,C.x,C.y,J.x,J.y,0,0,u);Dd(this.layoutVertexArray,C.x,C.y,J.x,J.y,0,1,u);u+=m;Dd(this.layoutVertexArray,p.x,p.y,J.x,J.y,0,0,u);Dd(this.layoutVertexArray,p.x,p.y,J.x,J.y,0,1,u);C=k.vertexLength;this.indexArray.emplaceBack(C,C+2,C+1);this.indexArray.emplaceBack(C+1,C+2,C+3);k.vertexLength+=4;k.primitiveLength+=2}}}}k.vertexLength+d>Ia.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(d,
this.layoutVertexArray,this.indexArray));n=[];t=[];l=k.vertexLength;u=0;for(h=g;u<h.length;u+=1)if(C=h[u],0!==C.length)for(C!==g[0]&&t.push(n.length/2),p=0;p<C.length;p++)J=C[p],Dd(this.layoutVertexArray,J.x,J.y,0,0,1,1,0),n.push(J.x),n.push(J.y);g=Bg(n,t);for(n=0;n<g.length;n+=3)this.indexArray.emplaceBack(l+g[n],l+g[n+2],l+g[n+1]);k.primitiveLength+=g.length/3;k.vertexLength+=d}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,c,f)};B("FillExtrusionBucket",fc,{omit:["layers",
"features"]});var gi={paint:new Ob({"fill-extrusion-opacity":new U(g["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new X(g["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new U(g["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new U(g["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ef(g["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new X(g["paint_fill-extrusion"]["fill-extrusion-height"]),
"fill-extrusion-base":new X(g["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new U(g["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},hi=function(b){function a(a){b.call(this,a,gi)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.createBucket=function(b){return new fc(b)},a.prototype.queryRadius=function(){return cd(this.paint.get("fill-extrusion-translate"))},a.prototype.queryIntersectsFeature=
function(b,a,e,c,f,g,d){return Zd(Z(b,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,d),c)},a.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},a.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},a}(bc),Dg=P([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),jh=Dg.members,kh=(Dg.size,
Dg.alignment,gd);gd.types=["Unknown","Point","LineString","Polygon"];gd.prototype.loadGeometry=function(){var b=this._pbf;b.pos=this._geometry;for(var a,c=b.readVarint()+b.pos,f=1,g=0,d=0,l=0,n=[];b.pos<c;)if(0>=g&&(g=b.readVarint(),f=7&g,g>>=3),g--,1===f||2===f)d+=b.readSVarint(),l+=b.readSVarint(),1===f&&(a&&n.push(a),a=[]),a.push(new sa(d,l));else{if(7!==f)throw Error("unknown command "+f);a&&a.push(a[0].clone())}return a&&n.push(a),n};gd.prototype.bbox=function(){var b=this._pbf;b.pos=this._geometry;
for(var a=b.readVarint()+b.pos,c=1,f=0,g=0,d=0,l=1/0,n=-1/0,t=1/0,u=-1/0;b.pos<a;)if(0>=f&&(f=b.readVarint(),c=7&f,f>>=3),f--,1===c||2===c)(g+=b.readSVarint())<l&&(l=g),g>n&&(n=g),(d+=b.readSVarint())<t&&(t=d),d>u&&(u=d);else if(7!==c)throw Error("unknown command "+c);return[l,t,n,u]};gd.prototype.toGeoJSON=function(b,a,c){function e(b){for(var a=0;a<b.length;a++){var e=b[a];b[a]=[360*(e.x+g)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(e.y+d)/f)*Math.PI/180))-90]}}var f=this.extent*Math.pow(2,
c),g=this.extent*b,d=this.extent*a;a=this.loadGeometry();c=gd.types[this.type];switch(this.type){case 1:var k=[];for(b=0;b<a.length;b++)k[b]=a[b][0];e(a=k);break;case 2:for(b=0;b<a.length;b++)e(a[b]);break;case 3:for(a=function(b){var a=b.length;if(1>=a)return[b];for(var e,c,f=[],g=0;g<a;g++){var d=void 0;for(var k,l=b[g],n=0,t=0,u=l.length,h=u-1;t<u;h=t++)k=l[t],n+=((d=l[h]).x-k.x)*(k.y+d.y);d=n;0!==d&&(void 0===c&&(c=0>d),c===0>d?(e&&f.push(e),e=[b[g]]):e.push(b[g]))}e&&f.push(e);return f}(a),b=
0;b<a.length;b++)for(k=0;k<a[b].length;k++)e(a[b][k])}1===a.length?a=a[0]:c="Multi"+c;b={type:"Feature",geometry:{type:c,coordinates:a},properties:this.properties};return"id"in this&&(b.id=this.id),b};var Qg=lf;lf.prototype.feature=function(b){if(0>b||b>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[b];b=this._pbf.readVarint()+this._pbf.pos;return new kh(this._pbf,b,this.extent,this._keys,this._values)};var Qe={VectorTile:function(b,a){this.layers=b.readFields(Sf,
{},a)},VectorTileFeature:kh,VectorTileLayer:Qg},ii=Qe.VectorTileFeature.types,ji=Math.cos(Math.PI/180*37.5),Eg=Math.pow(2,14)/.5,ob=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.features=[];this.hasPattern=!1;this.layoutVertexArray=new mg;this.indexArray=new yc;this.programConfigurations=new Qb(jh,b.layers,b.zoom);this.segments=new Ia};ob.prototype.populate=function(b,a){this.features=
[];this.hasPattern=xe("line",this.layers,a);for(var e=0;e<b.length;e+=1){var c=b[e],f=c.feature,g=c.index;c=c.sourceLayerIndex;if(this.layers[0]._featureFilter(new Ea(this.zoom),f)){var d=ia(f),l={sourceLayerIndex:c,index:g,geometry:d,properties:f.properties,type:f.type,patterns:{}};void 0!==f.id&&(l.id=f.id);this.hasPattern?this.features.push(ye("line",this.layers,l,this.zoom,a)):this.addFeature(l,d,g,{});a.featureIndex.insert(f,d,g,c,this.index)}}};ob.prototype.update=function(b,a,c){this.stateDependentLayers.length&&
this.programConfigurations.updatePaintArrays(b,a,this.stateDependentLayers,c)};ob.prototype.addFeatures=function(b,a){b=0;for(var e=this.features;b<e.length;b+=1){var c=e[b];this.addFeature(c,c.geometry,c.index,a)}};ob.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};ob.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};ob.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,
jh),this.indexBuffer=b.createIndexBuffer(this.indexArray));this.programConfigurations.upload(b);this.uploaded=!0};ob.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};ob.prototype.addFeature=function(b,a,c,f){var e=this.layers[0].layout,g=e.get("line-join").evaluate(b,{}),d=e.get("line-cap"),k=e.get("line-miter-limit");e=e.get("line-round-limit");for(var l=0;l<a.length;l+=
1)this.addLine(a[l],b,g,d,k,e,c,f)};ob.prototype.addLine=function(b,a,c,f,g,d,l,n){var e=null;a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end")&&(e={start:a.properties.mapbox_clip_start,end:a.properties.mapbox_clip_end,tileTotal:void 0});for(var k="Polygon"===ii[a.type],t=b.length;2<=t&&b[t-1].equals(b[t-2]);)t--;for(var u=0;u<t-1&&b[u].equals(b[u+1]);)u++;if(!(t<(k?3:2))){if(e){for(var h=e,C=t,p,J,m=0,D=u;D<C-1;D++)p=b[D],J=b[D+1],m+=p.dist(J);
h.tileTotal=m}"bevel"===c&&(g=1.05);h=8192/(512*this.overscaling)*15;var K=b[u];C=this.segments.prepareSegment(10*t,this.layoutVertexArray,this.indexArray);this.distance=0;var q,x,aa;p=k?"butt":f;var r=!0,N=D=m=J=void 0;this.e1=this.e2=this.e3=-1;k&&(q=b[t-2],N=K.sub(q)._unit()._perp());for(K=u;K<t;K++)if(!(m=k&&K===t-1?b[u+1]:b[K+1])||!b[K].equals(m)){N&&(D=N);q&&(J=q);q=b[K];N=m?m.sub(q)._unit()._perp():D;var w=(D=D||N).add(N);0===w.x&&0===w.y||w._unit();var wa=w.x*N.x+w.y*N.y,Q=0!==wa?1/wa:1/0,
y=wa<ji&&J&&m;if(y&&K>u){var v=q.dist(J);v>2*h&&(v=q.sub(q.sub(J)._mult(h/v)._round()),this.distance+=v.dist(J),this.addCurrentVertex(v,this.distance,D.mult(1),0,0,!1,C,e),J=v)}var z=(v=J&&m)?c:m?f:p;if(v&&"round"===z&&(Q<d?z="miter":2>=Q&&(z="fakeround")),"miter"===z&&Q>g&&(z="bevel"),"bevel"===z&&(2<Q&&(z="flipbevel"),Q<g&&(z="miter")),J&&(this.distance+=q.dist(J)),"miter"===z)w._mult(Q),this.addCurrentVertex(q,this.distance,w,0,0,!1,C,e);else if("flipbevel"===z)100<Q?w=N.clone().mult(-1):(r=0<
D.x*N.y-D.y*N.x?-1:1,v=Q*D.add(N).mag()/D.sub(N).mag(),w._perp()._mult(v*r)),this.addCurrentVertex(q,this.distance,w,0,0,!1,C,e),this.addCurrentVertex(q,this.distance,w.mult(-1),0,0,!1,C,e);else if("bevel"===z||"fakeround"===z){v=0<D.x*N.y-D.y*N.x;Q=-Math.sqrt(Q*Q-1);if(v?(aa=0,x=Q):(x=0,aa=Q),r||this.addCurrentVertex(q,this.distance,D,x,aa,!1,C,e),"fakeround"===z){r=Math.floor(8*(.5-(wa-.5)));for(Q=0;Q<r;Q++)wa=N.mult((Q+1)/(r+1))._add(D)._unit(),this.addPieSliceVertex(q,this.distance,wa,v,C,e);
this.addPieSliceVertex(q,this.distance,w,v,C,e);for(w=r-1;0<=w;w--)wa=D.mult((w+1)/(r+1))._add(N)._unit(),this.addPieSliceVertex(q,this.distance,wa,v,C,e)}m&&this.addCurrentVertex(q,this.distance,N,-x,-aa,!1,C,e)}else"butt"===z?(r||this.addCurrentVertex(q,this.distance,D,0,0,!1,C,e),m&&this.addCurrentVertex(q,this.distance,N,0,0,!1,C,e)):"square"===z?(r||(this.addCurrentVertex(q,this.distance,D,1,1,!1,C,e),this.e1=this.e2=-1),m&&this.addCurrentVertex(q,this.distance,N,-1,-1,!1,C,e)):"round"===z&&
(r||(this.addCurrentVertex(q,this.distance,D,0,0,!1,C,e),this.addCurrentVertex(q,this.distance,D,1,1,!0,C,e),this.e1=this.e2=-1),m&&(this.addCurrentVertex(q,this.distance,N,-1,-1,!0,C,e),this.addCurrentVertex(q,this.distance,N,0,0,!1,C,e)));y&&K<t-1&&(y=q.dist(m),y>2*h&&(y=q.add(m.sub(q)._mult(h/y)._round()),this.distance+=y.dist(q),this.addCurrentVertex(y,this.distance,N.mult(1),0,0,!1,C,e),q=y));r=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,l,n)}};ob.prototype.addCurrentVertex=
function(b,a,c,f,g,d,l,n){var e=this.layoutVertexArray,k=this.indexArray;n&&(a=(a/n.tileTotal*(n.end-n.start)+n.start)*(Eg-1));var t=c.clone();f&&t._sub(c.perp()._mult(f));ze(e,b,t,d,!1,f,a);this.e3=l.vertexLength++;0<=this.e1&&0<=this.e2&&(k.emplaceBack(this.e1,this.e2,this.e3),l.primitiveLength++);this.e1=this.e2;this.e2=this.e3;t=c.mult(-1);g&&t._sub(c.perp()._mult(g));ze(e,b,t,d,!0,-g,a);this.e3=l.vertexLength++;0<=this.e1&&0<=this.e2&&(k.emplaceBack(this.e1,this.e2,this.e3),l.primitiveLength++);
this.e1=this.e2;this.e2=this.e3;a>Eg/2&&!n&&(this.distance=0,this.addCurrentVertex(b,this.distance,c,f,g,d,l))};ob.prototype.addPieSliceVertex=function(b,a,c,f,g,d){c=c.mult(f?-1:1);var e=this.layoutVertexArray,k=this.indexArray;d&&(a=(a/d.tileTotal*(d.end-d.start)+d.start)*(Eg-1));ze(e,b,c,!1,f,0,a);this.e3=g.vertexLength++;0<=this.e1&&0<=this.e2&&(k.emplaceBack(this.e1,this.e2,this.e3),g.primitiveLength++);f?this.e2=this.e3:this.e1=this.e3};B("LineBucket",ob,{omit:["layers","features"]});var ki=
new Ob({"line-cap":new U(g.layout_line["line-cap"]),"line-join":new X(g.layout_line["line-join"]),"line-miter-limit":new U(g.layout_line["line-miter-limit"]),"line-round-limit":new U(g.layout_line["line-round-limit"])}),lh={paint:new Ob({"line-opacity":new X(g.paint_line["line-opacity"]),"line-color":new X(g.paint_line["line-color"]),"line-translate":new U(g.paint_line["line-translate"]),"line-translate-anchor":new U(g.paint_line["line-translate-anchor"]),"line-width":new X(g.paint_line["line-width"]),
"line-gap-width":new X(g.paint_line["line-gap-width"]),"line-offset":new X(g.paint_line["line-offset"]),"line-blur":new X(g.paint_line["line-blur"]),"line-dasharray":new he(g.paint_line["line-dasharray"]),"line-pattern":new Ef(g.paint_line["line-pattern"]),"line-gradient":new Me(g.paint_line["line-gradient"])}),layout:ki},mh=new (function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.possiblyEvaluate=
function(a,e){return e=new Ea(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),b.prototype.possiblyEvaluate.call(this,a,e)},a.prototype.evaluate=function(a,e,c,f){return e=Qa({},e,{zoom:Math.floor(e.zoom)}),b.prototype.evaluate.call(this,a,e,c,f)},a}(X))(lh.paint.properties["line-width"].specification);mh.useIntegerZoom=!0;var li=function(b){function a(a){b.call(this,a,lh)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),
a.prototype.constructor=a,a.prototype._handleSpecialPaintPropertyUpdate=function(b){"line-gradient"===b&&this._updateGradient()},a.prototype._updateGradient=function(){this.gradient=ef(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},a.prototype.recalculate=function(a){b.prototype.recalculate.call(this,a);this.paint._values["line-floorwidth"]=mh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)},a.prototype.createBucket=
function(b){return new ob(b)},a.prototype.queryRadius=function(b){var a=ab("line-width",this,b);var e=ab("line-gap-width",this,b);a=0<e?e+2*a:a;b=ab("line-offset",this,b);return a/2+Math.abs(b)+cd(this.paint.get("line-translate"))},a.prototype.queryIntersectsFeature=function(b,a,e,c,f,g,d){b=Z(b,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,d);f=this.paint.get("line-width").evaluate(a,e);g=this.paint.get("line-gap-width").evaluate(a,e);f=d/2*(0<g?g+2*f:f);if(a=this.paint.get("line-offset").evaluate(a,
e)){d*=a;a=[];e=new sa(0,0);for(g=0;g<c.length;g++){for(var k=c[g],l=[],n=0;n<k.length;n++){var t=k[n-1],u=k[n],h=k[n+1];t=0===n?e:u.sub(t)._unit()._perp();h=n===k.length-1?e:h.sub(u)._unit()._perp();t=t._add(h)._unit();t._mult(1/(t.x*h.x+t.y*h.y));l.push(t._mult(d)._add(u))}a.push(l)}c=a}return la(b,c,f)},a}(bc),Fg=P([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),mi=P([{name:"a_projected_pos",components:3,type:"Float32"}],4),ni=(P([{name:"a_fade_opacity",
components:1,type:"Uint32"}],4),P([{name:"a_placed",components:2,type:"Uint8"}],4)),oi=(P([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),P([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",
components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),pi=P([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);P([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",
name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]);P([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},
{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]);P([{type:"Float32",name:"offsetX"}]);P([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Re={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"",
"\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",
"":"","":"","":"","":"","":"","":""},nh=function(b){function a(a,e,c,f){b.call(this,a,e);this.angle=c;void 0!==f&&(this.segment=f)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.clone=function(){return new a(this.x,this.y,this.angle,this.segment)},a}(sa);B("Anchor",nh);var qi=Qe.VectorTileFeature.types,ri=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Se=function(b){this.layoutVertexArray=new ng;this.indexArray=new yc;
this.programConfigurations=b;this.segments=new Ia;this.dynamicLayoutVertexArray=new og;this.opacityVertexArray=new pg;this.placedSymbolArray=new Wg};Se.prototype.upload=function(b,a,c,f){c&&(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,Fg.members),this.indexBuffer=b.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=b.createVertexBuffer(this.dynamicLayoutVertexArray,mi.members,!0),this.opacityVertexBuffer=b.createVertexBuffer(this.opacityVertexArray,ri,!0),
this.opacityVertexBuffer.itemSize=1);(c||f)&&this.programConfigurations.upload(b)};Se.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};B("SymbolBuffers",Se);var Te=function(b,a,c){this.layoutVertexArray=new b;this.layoutAttributes=a;this.indexArray=new c;this.segments=new Ia;this.collisionVertexArray=
new rg};Te.prototype.upload=function(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=b.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=b.createVertexBuffer(this.collisionVertexArray,ni.members,!0)};Te.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};B("CollisionBuffers",Te);var ua=function(b){this.collisionBoxArray=
b.collisionBoxArray;this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.pixelRatio=b.pixelRatio;this.sourceLayerIndex=b.sourceLayerIndex;this.hasPattern=!1;var a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ae(this.zoom,a["text-size"]);this.iconSizeData=Ae(this.zoom,a["icon-size"]);a=this.layers[0].layout;this.sortFeaturesByY="viewport-y"===a.get("symbol-z-order")&&(a.get("text-allow-overlap")||
a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"));this.sourceID=b.sourceID};ua.prototype.createArrays=function(){this.text=new Se(new Qb(Fg.members,this.layers,this.zoom,function(b){return/^text/.test(b)}));this.icon=new Se(new Qb(Fg.members,this.layers,this.zoom,function(b){return/^icon/.test(b)}));this.collisionBox=new Te(Gf,oi.members,Oe);this.collisionCircle=new Te(Gf,pi.members,yc);this.glyphOffsetArray=new Zg;this.lineVertexArray=new ah;this.symbolInstances=
new yg};ua.prototype.calculateGlyphDependencies=function(b,a,c,f){for(var e=0;e<b.length;e++)if(a[b.charCodeAt(e)]=!0,c&&f){var g=Re[b.charAt(e)];g&&(a[g.charCodeAt(0)]=!0)}};ua.prototype.populate=function(b,a){var e=this.layers[0],c=e.layout,f=c.get("text-font"),g=c.get("text-field"),d=c.get("icon-image");g=("constant"!==g.value.kind||0<g.value.value.toString().length)&&("constant"!==f.value.kind||0<f.value.value.length);d="constant"!==d.value.kind||d.value.value&&0<d.value.value.length;if(this.features=
[],g||d){var l=a.iconDependencies;a=a.glyphDependencies;for(var n=new Ea(this.zoom),t=0;t<b.length;t+=1){var u=b[t],h=u.feature,C=u.index,p=u.sourceLayerIndex;if(e._featureFilter(n,h)){u=void 0;g&&(u=e.getValueAndResolveTokens("text-field",h),u=Tf(u instanceof sb?u:sb.fromString(u),e,h));var m=void 0;if(d&&(m=e.getValueAndResolveTokens("icon-image",h)),u||m)if(C={text:u,icon:m,index:C,sourceLayerIndex:p,geometry:ia(h),properties:h.properties,type:qi[h.type]},void 0!==h.id&&(C.id=h.id),this.features.push(C),
m&&(l[m]=!0),u)for(h=f.evaluate(h,{}).join(","),C="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),p=0,m=u.sections;p<m.length;p+=1){var D=m[p],q=Ba(u.toString()),K=D.fontStack||h;K=a[K]=a[K]||{};this.calculateGlyphDependencies(D.text,K,C,q)}}}"line"===c.get("symbol-placement")&&(this.features=function(b){function a(b,a,e){var c=g[b];return delete g[b],g[a]=c,d[c].geometry[0].pop(),d[c].geometry[0]=d[c].geometry[0].concat(e[0]),c}function e(b,a,e){var c=f[a];return delete f[a],
f[b]=c,d[c].geometry[0].shift(),d[c].geometry[0]=e[0].concat(d[c].geometry[0]),c}function c(b,a,e){a=e?a[0][a[0].length-1]:a[0][0];return b+":"+a.x+":"+a.y}for(var f={},g={},d=[],k=0,l=0;l<b.length;l++){var n=b[l],t=n.geometry;if(n=n.text?n.text.toString():null){var u=c(n,t),h=c(n,t,!0);if(u in g&&h in f&&g[u]!==f[h]){t=e(u,h,t);var C=a(u,h,d[t].geometry);delete f[u];delete g[h];g[c(n,d[C].geometry,!0)]=C;d[t].geometry=null}else u in g?a(u,h,t):h in f?e(u,h,t):(d.push(b[l]),k++,f[u]=k-1,g[h]=k-1)}else d.push(b[l]),
k++}return d.filter(function(b){return b.geometry})}(this.features))}};ua.prototype.update=function(b,a,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(b,a,this.layers,c),this.icon.programConfigurations.updatePaintArrays(b,a,this.layers,c))};ua.prototype.isEmpty=function(){return 0===this.symbolInstances.length};ua.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};
ua.prototype.upload=function(b){this.uploaded||(this.collisionBox.upload(b),this.collisionCircle.upload(b));this.text.upload(b,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(b,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};ua.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.collisionBox.destroy();this.collisionCircle.destroy()};ua.prototype.addToLineVertexArray=function(b,
a){var e=this.lineVertexArray.length;if(void 0!==b.segment){for(var c=b.dist(a[b.segment+1]),f=b.dist(a[b.segment]),g={},d=b.segment+1;d<a.length;d++)g[d]={x:a[d].x,y:a[d].y,tileUnitDistanceFromAnchor:c},d<a.length-1&&(c+=a[d+1].dist(a[d]));for(b=b.segment||0;0<=b;b--)g[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:f},0<b&&(f+=a[b-1].dist(a[b]));for(f=0;f<a.length;f++)b=g[f],this.lineVertexArray.emplaceBack(b.x,b.y,b.tileUnitDistanceFromAnchor)}return{lineStartIndex:e,lineLength:this.lineVertexArray.length-
e}};ua.prototype.addSymbols=function(b,a,c,f,g,d,l,n,t,u){g=b.indexArray;for(var e=b.layoutVertexArray,k=b.dynamicLayoutVertexArray,h=b.segments.prepareSegment(4*a.length,b.layoutVertexArray,b.indexArray),C=this.glyphOffsetArray.length,p=h.vertexLength,m=0;m<a.length;m+=1){var D=a[m],J=D.tl,q=D.tr,K=D.bl,x=D.br,r=D.tex,N=h.vertexLength,aa=D.glyphOffset[1];ce(e,n.x,n.y,J.x,aa+J.y,r.x,r.y,c);ce(e,n.x,n.y,q.x,aa+q.y,r.x+r.w,r.y,c);ce(e,n.x,n.y,K.x,aa+K.y,r.x,r.y+r.h,c);ce(e,n.x,n.y,x.x,aa+x.y,r.x+r.w,
r.y+r.h,c);Be(k,n,0);g.emplaceBack(N,N+1,N+2);g.emplaceBack(N+1,N+2,N+3);h.vertexLength+=4;h.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(D.glyphOffset[0])}b.placedSymbolArray.emplaceBack(n.x,n.y,C,this.glyphOffsetArray.length-C,p,t,u,n.segment,c?c[0]:0,c?c[1]:0,f[0],f[1],l,!1);b.programConfigurations.populatePaintArrays(b.layoutVertexArray.length,d,d.index,{})};ua.prototype._addCollisionDebugVertex=function(b,a,c,f,g,d){return a.emplaceBack(0,0),b.emplaceBack(c.x,c.y,f,g,Math.round(d.x),
Math.round(d.y))};ua.prototype.addCollisionDebugVertices=function(b,a,c,f,g,d,l,n){var e=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),k=e.vertexLength,t=g.layoutVertexArray,u=g.collisionVertexArray,h=l.anchorX;l=l.anchorY;(this._addCollisionDebugVertex(t,u,d,h,l,new sa(b,a)),this._addCollisionDebugVertex(t,u,d,h,l,new sa(c,a)),this._addCollisionDebugVertex(t,u,d,h,l,new sa(c,f)),this._addCollisionDebugVertex(t,u,d,h,l,new sa(b,f)),e.vertexLength+=4,n)?(b=g.indexArray,b.emplaceBack(k,
k+1,k+2),b.emplaceBack(k,k+2,k+3),e.primitiveLength+=2):(b=g.indexArray,b.emplaceBack(k,k+1),b.emplaceBack(k+1,k+2),b.emplaceBack(k+2,k+3),b.emplaceBack(k+3,k),e.primitiveLength+=4)};ua.prototype.addDebugCollisionBoxes=function(b,a,c){for(;b<a;b++){var e=this.collisionBoxArray.get(b),f=0<e.radius;this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,f?this.collisionCircle:this.collisionBox,e.anchorPoint,c,f)}};ua.prototype.generateCollisionDebugBuffers=function(){for(var b=0;b<this.symbolInstances.length;b++){var a=
this.symbolInstances.get(b);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a);this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a)}};ua.prototype._deserializeCollisionBoxesForSymbol=function(b,a,c,f,g){for(var e={};a<c;a++){var d=b.get(a);if(0===d.radius){e.textBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY};e.textFeatureIndex=d.featureIndex;break}e.textCircles||(e.textCircles=[],e.textFeatureIndex=d.featureIndex);e.textCircles.push(d.anchorPointX,
d.anchorPointY,d.radius,d.signedDistanceFromAnchor,1)}for(c=f;c<g;c++)if(f=b.get(c),0===f.radius){e.iconBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY};e.iconFeatureIndex=f.featureIndex;break}return e};ua.prototype.deserializeCollisionBoxes=function(b){this.collisionArrays=[];for(var a=0;a<this.symbolInstances.length;a++){var c=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(b,c.textBoxStartIndex,c.textBoxEndIndex,
c.iconBoxStartIndex,c.iconBoxEndIndex))}};ua.prototype.hasTextData=function(){return 0<this.text.segments.get().length};ua.prototype.hasIconData=function(){return 0<this.icon.segments.get().length};ua.prototype.hasCollisionBoxData=function(){return 0<this.collisionBox.segments.get().length};ua.prototype.hasCollisionCircleData=function(){return 0<this.collisionCircle.segments.get().length};ua.prototype.addIndicesForPlacedTextSymbol=function(b){var a=this.text.placedSymbolArray.get(b);b=a.vertexStartIndex+
4*a.numGlyphs;for(a=a.vertexStartIndex;a<b;a+=4)this.text.indexArray.emplaceBack(a,a+1,a+2),this.text.indexArray.emplaceBack(a+1,a+2,a+3)};ua.prototype.sortFeatures=function(b){if(this.sortFeaturesByY&&this.sortedAngle!==b&&(this.sortedAngle=b,!(1<this.text.segments.get().length||1<this.icon.segments.get().length))){for(var a=[],c=0;c<this.symbolInstances.length;c++)a.push(c);c=Math.sin(b);b=Math.cos(b);for(var f=[],g=[],d=0;d<this.symbolInstances.length;d++){var l=this.symbolInstances.get(d);f.push(0|
Math.round(c*l.anchorX+b*l.anchorY));g.push(l.featureIndex)}a.sort(function(b,a){return f[b]-f[a]||g[a]-g[b]});this.text.indexArray.clear();this.icon.indexArray.clear();this.featureSortOrder=[];for(c=0;c<a.length;c+=1)b=a[c],d=this.symbolInstances.get(b),this.featureSortOrder.push(d.featureIndex),0<=d.horizontalPlacedTextSymbolIndex&&this.addIndicesForPlacedTextSymbol(d.horizontalPlacedTextSymbolIndex),0<=d.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedTextSymbol(d.verticalPlacedTextSymbolIndex),
b=this.icon.placedSymbolArray.get(b),b.numGlyphs&&(b=b.vertexStartIndex,this.icon.indexArray.emplaceBack(b,b+1,b+2),this.icon.indexArray.emplaceBack(b+1,b+2,b+3));this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};B("SymbolBucket",ua,{omit:["layers","collisionBoxArray","features","compareText"]});ua.MAX_GLYPHS=65535;ua.addDynamicAttributes=Be;var si=new Ob({"symbol-placement":new U(g.layout_symbol["symbol-placement"]),
"symbol-spacing":new U(g.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new U(g.layout_symbol["symbol-avoid-edges"]),"symbol-z-order":new U(g.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new U(g.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new U(g.layout_symbol["icon-ignore-placement"]),"icon-optional":new U(g.layout_symbol["icon-optional"]),"icon-rotation-alignment":new U(g.layout_symbol["icon-rotation-alignment"]),"icon-size":new X(g.layout_symbol["icon-size"]),"icon-text-fit":new U(g.layout_symbol["icon-text-fit"]),
"icon-text-fit-padding":new U(g.layout_symbol["icon-text-fit-padding"]),"icon-image":new X(g.layout_symbol["icon-image"]),"icon-rotate":new X(g.layout_symbol["icon-rotate"]),"icon-padding":new U(g.layout_symbol["icon-padding"]),"icon-keep-upright":new U(g.layout_symbol["icon-keep-upright"]),"icon-offset":new X(g.layout_symbol["icon-offset"]),"icon-anchor":new X(g.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new U(g.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new U(g.layout_symbol["text-pitch-alignment"]),
"text-rotation-alignment":new U(g.layout_symbol["text-rotation-alignment"]),"text-field":new X(g.layout_symbol["text-field"]),"text-font":new X(g.layout_symbol["text-font"]),"text-size":new X(g.layout_symbol["text-size"]),"text-max-width":new X(g.layout_symbol["text-max-width"]),"text-line-height":new U(g.layout_symbol["text-line-height"]),"text-letter-spacing":new X(g.layout_symbol["text-letter-spacing"]),"text-justify":new X(g.layout_symbol["text-justify"]),"text-anchor":new X(g.layout_symbol["text-anchor"]),
"text-max-angle":new U(g.layout_symbol["text-max-angle"]),"text-rotate":new X(g.layout_symbol["text-rotate"]),"text-padding":new U(g.layout_symbol["text-padding"]),"text-keep-upright":new U(g.layout_symbol["text-keep-upright"]),"text-transform":new X(g.layout_symbol["text-transform"]),"text-offset":new X(g.layout_symbol["text-offset"]),"text-allow-overlap":new U(g.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new U(g.layout_symbol["text-ignore-placement"]),"text-optional":new U(g.layout_symbol["text-optional"])}),
oh={paint:new Ob({"icon-opacity":new X(g.paint_symbol["icon-opacity"]),"icon-color":new X(g.paint_symbol["icon-color"]),"icon-halo-color":new X(g.paint_symbol["icon-halo-color"]),"icon-halo-width":new X(g.paint_symbol["icon-halo-width"]),"icon-halo-blur":new X(g.paint_symbol["icon-halo-blur"]),"icon-translate":new U(g.paint_symbol["icon-translate"]),"icon-translate-anchor":new U(g.paint_symbol["icon-translate-anchor"]),"text-opacity":new X(g.paint_symbol["text-opacity"]),"text-color":new X(g.paint_symbol["text-color"]),
"text-halo-color":new X(g.paint_symbol["text-halo-color"]),"text-halo-width":new X(g.paint_symbol["text-halo-width"]),"text-halo-blur":new X(g.paint_symbol["text-halo-blur"]),"text-translate":new U(g.paint_symbol["text-translate"]),"text-translate-anchor":new U(g.paint_symbol["text-translate-anchor"])}),layout:si},ti=function(b){function a(a){b.call(this,a,oh)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.recalculate=function(a){b.prototype.recalculate.call(this,
a);"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport");"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport");"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=
this.layout.get("text-rotation-alignment"));"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},a.prototype.getValueAndResolveTokens=function(b,a){var e,c=this.layout.get(b).evaluate(a,{});b=this._unevaluatedLayout._values[b];return b.isDataDriven()||Dc(b.value)?c:(e=a.properties,c.replace(/{([^{}]+)}/g,function(b,a){return a in e?String(e[a]):""}))},a.prototype.createBucket=function(b){return new ua(b)},a.prototype.queryRadius=
function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a}(bc),ui={paint:new Ob({"background-color":new U(g.paint_background["background-color"]),"background-pattern":new he(g.paint_background["background-pattern"]),"background-opacity":new U(g.paint_background["background-opacity"])})},vi=function(b){function a(a){b.call(this,a,ui)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(bc),wi={paint:new Ob({"raster-opacity":new U(g.paint_raster["raster-opacity"]),
"raster-hue-rotate":new U(g.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new U(g.paint_raster["raster-brightness-min"]),"raster-brightness-max":new U(g.paint_raster["raster-brightness-max"]),"raster-saturation":new U(g.paint_raster["raster-saturation"]),"raster-contrast":new U(g.paint_raster["raster-contrast"]),"raster-resampling":new U(g.paint_raster["raster-resampling"]),"raster-fade-duration":new U(g.paint_raster["raster-fade-duration"])})},xi=function(b){function a(a){b.call(this,
a,wi)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(bc),yi=function(b){function a(a){b.call(this,a,{});this.implementation=a}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},a.prototype.recalculate=function(){},a.prototype.updateTransitions=function(){},a.prototype.hasTransition=
function(){},a.prototype.serialize=function(){},a.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},a.prototype.onAdd=function(b){this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},a.prototype.onRemove=function(b){this.implementation.onRemove&&this.implementation.onRemove(b)},a}(bc),zi={circle:$h,heatmap:bi,hillshade:di,fill:fi,"fill-extrusion":hi,line:li,symbol:ti,background:vi,raster:xi},Ue=function(b,a){a=a.pixelRatio;
this.paddedRect=b;this.pixelRatio=a},Ve={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ve.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};Ve.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};Ve.tlbr.get=function(){return this.tl.concat(this.br)};Ve.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(Ue.prototype,
Ve);var ph=function(b,a){var e={},c={},f=[];for(n in b){var g=b[n],d={x:0,y:0,w:g.data.width+2,h:g.data.height+2};f.push(d);e[n]=new Ue(d,g)}for(var l in a){var n=a[l];g={x:0,y:0,w:n.data.width+2,h:n.data.height+2};f.push(g);c[l]=new Ue(g,n)}f=mf(f);f=new hb({width:f.w||1,height:f.h||1});for(var t in b)l=b[t],n=e[t].paddedRect,hb.copy(l.data,f,{x:0,y:0},{x:n.x+1,y:n.y+1},l.data);for(var u in a)b=a[u],l=c[u].paddedRect,t=l.x+1,l=l.y+1,n=b.data.width,g=b.data.height,hb.copy(b.data,f,{x:0,y:0},{x:t,
y:l},b.data),hb.copy(b.data,f,{x:0,y:g-1},{x:t,y:l-1},{width:n,height:1}),hb.copy(b.data,f,{x:0,y:0},{x:t,y:l+g},{width:n,height:1}),hb.copy(b.data,f,{x:n-1,y:0},{x:t-1,y:l},{width:1,height:g}),hb.copy(b.data,f,{x:0,y:0},{x:t+n,y:l},{width:1,height:g});this.image=f;this.iconPositions=e;this.patternPositions=c};B("ImagePosition",Ue);B("ImageAtlas",ph);var qh=self.HTMLImageElement,rh=self.HTMLCanvasElement,sh=self.HTMLVideoElement,th=self.ImageData,Rd=function(b,a,c,f){this.context=b;this.format=c;
this.texture=b.gl.createTexture();this.update(a,f)};Rd.prototype.update=function(b,a){var e=b.width,c=b.height,f=!this.size||this.size[0]!==e||this.size[1]!==c,g=this.context,d=g.gl;this.useMipmap=!(!a||!a.useMipmap);d.bindTexture(d.TEXTURE_2D,this.texture);g.pixelStoreUnpackFlipY.set(!1);g.pixelStoreUnpack.set(1);g.pixelStoreUnpackPremultiplyAlpha.set(this.format===d.RGBA&&(!a||!1!==a.premultiply));f?(this.size=[e,c],b instanceof qh||b instanceof rh||b instanceof sh||b instanceof th?d.texImage2D(d.TEXTURE_2D,
0,this.format,this.format,d.UNSIGNED_BYTE,b):d.texImage2D(d.TEXTURE_2D,0,this.format,e,c,0,this.format,d.UNSIGNED_BYTE,b.data)):b instanceof qh||b instanceof rh||b instanceof sh||b instanceof th?d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,b):d.texSubImage2D(d.TEXTURE_2D,0,0,0,e,c,d.RGBA,d.UNSIGNED_BYTE,b.data);this.useMipmap&&this.isSizePowerOfTwo()&&d.generateMipmap(d.TEXTURE_2D)};Rd.prototype.bind=function(b,a,c){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,this.texture);c!==e.LINEAR_MIPMAP_NEAREST||
this.isSizePowerOfTwo()||(c=e.LINEAR);b!==this.filter&&(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,b),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,c||b),this.filter=b);a!==this.wrap&&(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a),this.wrap=a)};Rd.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};Rd.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=
null};var uh=function(b,a,c,f,g){var e=8*g-f-1;var d=(1<<e)-1,k=d>>1,l=-7;g=c?g-1:0;var n=c?-1:1,t=b[a+g];g+=n;c=t&(1<<-l)-1;t>>=-l;for(l+=e;0<l;c=256*c+b[a+g],g+=n,l-=8);e=c&(1<<-l)-1;c>>=-l;for(l+=f;0<l;e=256*e+b[a+g],g+=n,l-=8);if(0===c)c=1-k;else{if(c===d)return e?NaN:1/0*(t?-1:1);e+=Math.pow(2,f);c-=k}return(t?-1:1)*e*Math.pow(2,c-f)},vh=function(b,a,c,f,g,d){var e,k,l,n=8*d-g-1,t=(1<<n)-1,u=t>>1,h=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;d=f?0:d-1;f=f?1:-1;var C=0>a||0===a&&0>1/a?1:0;a=Math.abs(a);
for(isNaN(a)||a===1/0?(k=isNaN(a)?1:0,e=t):(e=Math.floor(Math.log(a)/Math.LN2),1>a*(l=Math.pow(2,-e))&&(e--,l*=2),2<=(a+=1<=e+u?h/l:h*Math.pow(2,1-u))*l&&(e++,l/=2),e+u>=t?(k=0,e=t):1<=e+u?(k=(a*l-1)*Math.pow(2,g),e+=u):(k=a*Math.pow(2,u-1)*Math.pow(2,g),e=0));8<=g;b[c+d]=255&k,d+=f,k/=256,g-=8);e=e<<g|k;for(n+=g;0<n;b[c+d]=255&e,d+=f,e/=256,n-=8);b[c+d-f]|=128*C};ra.Varint=0;ra.Fixed64=1;ra.Bytes=2;ra.Fixed32=5;ra.prototype={destroy:function(){this.buf=null},readFields:function(b,a,c){for(c=c||this.length;this.pos<
c;){var e=this.readVarint(),f=e>>3,g=this.pos;this.type=7&e;b(f,a,this);this.pos===g&&this.skip(e)}return a},readMessage:function(b,a){return this.readFields(b,a,this.readVarint()+this.pos)},readFixed32:function(){var b=hd(this.buf,this.pos);return this.pos+=4,b},readSFixed32:function(){var b=rf(this.buf,this.pos);return this.pos+=4,b},readFixed64:function(){var b=hd(this.buf,this.pos)+4294967296*hd(this.buf,this.pos+4);return this.pos+=8,b},readSFixed64:function(){var b=hd(this.buf,this.pos)+4294967296*
rf(this.buf,this.pos+4);return this.pos+=8,b},readFloat:function(){var b=uh(this.buf,this.pos,!0,23,4);return this.pos+=4,b},readDouble:function(){var b=uh(this.buf,this.pos,!0,52,8);return this.pos+=8,b},readVarint:function(b){var a,c=this.buf;var f=127&(a=c[this.pos++]);if(128>a)b=f;else if(f|=(127&(a=c[this.pos++]))<<7,128>a)b=f;else if(f|=(127&(a=c[this.pos++]))<<14,128>a)b=f;else if(f|=(127&(a=c[this.pos++]))<<21,128>a)b=f;else{f|=(15&c[this.pos])<<28;var g,d;a=this.buf;if((d=a[this.pos++],g=
(112&d)>>4,128>d)||(d=a[this.pos++],g|=(127&d)<<3,128>d)||(d=a[this.pos++],g|=(127&d)<<10,128>d)||(d=a[this.pos++],g|=(127&d)<<17,128>d)||(d=a[this.pos++],g|=(127&d)<<24,128>d)||(d=a[this.pos++],g|=(1&d)<<31,128>d))b=b?4294967296*g+(f>>>0):4294967296*(g>>>0)+(f>>>0);else throw Error("Expected varint not more than 10 bytes");}return b},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var b=this.readVarint();return 1==b%2?(b+1)/-2:b/2},readBoolean:function(){return!!this.readVarint()},
readString:function(){for(var b=this.readVarint()+this.pos,a=this.buf,c="",f=this.pos;f<b;){var g,d,l,n=a[f],t=null,u=239<n?4:223<n?3:191<n?2:1;if(f+u>b)break;1===u?128>n&&(t=n):2===u?128==(192&(g=a[f+1]))&&127>=(t=(31&n)<<6|63&g)&&(t=null):3===u?(g=a[f+1],d=a[f+2],128==(192&g)&&128==(192&d)&&(2047>=(t=(15&n)<<12|(63&g)<<6|63&d)||55296<=t&&57343>=t)&&(t=null)):4===u&&(g=a[f+1],d=a[f+2],l=a[f+3],128==(192&g)&&128==(192&d)&&128==(192&l)&&(65535>=(t=(15&n)<<18|(63&g)<<12|(63&d)<<6|63&l)||1114112<=t)&&
(t=null));null===t?(t=65533,u=1):65535<t&&(t-=65536,c+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t);c+=String.fromCharCode(t);f+=u}return this.pos=b,c},readBytes:function(){var b=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,b);return this.pos=b,a},readPackedVarint:function(b,a){var e=Yb(this);for(b=b||[];this.pos<e;)b.push(this.readVarint(a));return b},readPackedSVarint:function(b){var a=Yb(this);for(b=b||[];this.pos<a;)b.push(this.readSVarint());return b},readPackedBoolean:function(b){var a=
Yb(this);for(b=b||[];this.pos<a;)b.push(this.readBoolean());return b},readPackedFloat:function(b){var a=Yb(this);for(b=b||[];this.pos<a;)b.push(this.readFloat());return b},readPackedDouble:function(b){var a=Yb(this);for(b=b||[];this.pos<a;)b.push(this.readDouble());return b},readPackedFixed32:function(b){var a=Yb(this);for(b=b||[];this.pos<a;)b.push(this.readFixed32());return b},readPackedSFixed32:function(b){var a=Yb(this);for(b=b||[];this.pos<a;)b.push(this.readSFixed32());return b},readPackedFixed64:function(b){var a=
Yb(this);for(b=b||[];this.pos<a;)b.push(this.readFixed64());return b},readPackedSFixed64:function(b){var a=Yb(this);for(b=b||[];this.pos<a;)b.push(this.readSFixed64());return b},skip:function(b){b&=7;if(b===ra.Varint)for(;127<this.buf[this.pos++];);else if(b===ra.Bytes)this.pos=this.readVarint()+this.pos;else if(b===ra.Fixed32)this.pos+=4;else{if(b!==ra.Fixed64)throw Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(b,a){this.writeVarint(b<<3|a)},realloc:function(b){for(var a=this.length||
16;a<this.pos+b;)a*=2;a!==this.length&&(b=new Uint8Array(a),b.set(this.buf),this.buf=b,this.length=a)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(b){this.realloc(4);id(this.buf,b,this.pos);this.pos+=4},writeSFixed32:function(b){this.realloc(4);id(this.buf,b,this.pos);this.pos+=4},writeFixed64:function(b){this.realloc(8);id(this.buf,-1&b,this.pos);id(this.buf,Math.floor(1/4294967296*b),this.pos+4);this.pos+=8},writeSFixed64:function(b){this.realloc(8);
id(this.buf,-1&b,this.pos);id(this.buf,Math.floor(1/4294967296*b),this.pos+4);this.pos+=8},writeVarint:function(b){268435455<(b=+b||0)||0>b?function(b,a){var e,c;0<=b?(e=b%4294967296|0,c=b/4294967296|0):(c=~(-b/4294967296),4294967295^(e=~(-b%4294967296))?e=e+1|0:(e=0,c=c+1|0));if(1.8446744073709552E19<=b||-1.8446744073709552E19>b)throw Error("Given varint doesn't fit into 10 bytes");a.realloc(10);(function(b,a,e){e.buf[e.pos++]=127&b|128;b>>>=7;e.buf[e.pos++]=127&b|128;b>>>=7;e.buf[e.pos++]=127&b|
128;b>>>=7;e.buf[e.pos++]=127&b|128;e.buf[e.pos]=127&b>>>7})(e,0,a);(function(b,a){if(a.buf[a.pos++]|=(7&b)<<4|((b>>>=3)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)a.buf[a.pos++]=127&b})(c,a)}(b,this):(this.realloc(4),this.buf[this.pos++]=127&b|(127<b?128:0),127>=b||(this.buf[this.pos++]=127&(b>>>=7)|(127<b?128:0),127>=b||(this.buf[this.pos++]=127&(b>>>=7)|(127<
b?128:0),127>=b||(this.buf[this.pos++]=b>>>7&127))))},writeSVarint:function(b){this.writeVarint(0>b?2*-b-1:2*b)},writeBoolean:function(b){this.writeVarint(!!b)},writeString:function(b){b=String(b);this.realloc(4*b.length);this.pos++;for(var a=this.pos,c=this.buf,f=this.pos,g,d,l=0;l<b.length;l++){if(55295<(g=b.charCodeAt(l))&&57344>g){if(!d){56319<g||l+1===b.length?(c[f++]=239,c[f++]=191,c[f++]=189):d=g;continue}if(56320>g){c[f++]=239;c[f++]=191;c[f++]=189;d=g;continue}g=d-55296<<10|g-56320|65536;
d=null}else d&&(c[f++]=239,c[f++]=191,c[f++]=189,d=null);128>g?c[f++]=g:(2048>g?c[f++]=g>>6|192:(65536>g?c[f++]=g>>12|224:(c[f++]=g>>18|240,c[f++]=g>>12&63|128),c[f++]=g>>6&63|128),c[f++]=63&g|128)}this.pos=f;c=this.pos-a;128<=c&&nf(a,c,this);this.pos=a-1;this.writeVarint(c);this.pos+=c},writeFloat:function(b){this.realloc(4);vh(this.buf,b,this.pos,!0,23,4);this.pos+=4},writeDouble:function(b){this.realloc(8);vh(this.buf,b,this.pos,!0,52,8);this.pos+=8},writeBytes:function(b){var a=b.length;this.writeVarint(a);
this.realloc(a);for(var c=0;c<a;c++)this.buf[this.pos++]=b[c]},writeRawMessage:function(b,a){this.pos++;var e=this.pos;b(a,this);b=this.pos-e;128<=b&&nf(e,b,this);this.pos=e-1;this.writeVarint(b);this.pos+=b},writeMessage:function(b,a,c){this.writeTag(b,ra.Bytes);this.writeRawMessage(a,c)},writePackedVarint:function(b,a){this.writeMessage(b,Uf,a)},writePackedSVarint:function(b,a){this.writeMessage(b,Vf,a)},writePackedBoolean:function(b,a){this.writeMessage(b,pf,a)},writePackedFloat:function(b,a){this.writeMessage(b,
de,a)},writePackedDouble:function(b,a){this.writeMessage(b,of,a)},writePackedFixed32:function(b,a){this.writeMessage(b,Wf,a)},writePackedSFixed32:function(b,a){this.writeMessage(b,Xf,a)},writePackedFixed64:function(b,a){this.writeMessage(b,qf,a)},writePackedSFixed64:function(b,a){this.writeMessage(b,Yf,a)},writeBytesField:function(b,a){this.writeTag(b,ra.Bytes);this.writeBytes(a)},writeFixed32Field:function(b,a){this.writeTag(b,ra.Fixed32);this.writeFixed32(a)},writeSFixed32Field:function(b,a){this.writeTag(b,
ra.Fixed32);this.writeSFixed32(a)},writeFixed64Field:function(b,a){this.writeTag(b,ra.Fixed64);this.writeFixed64(a)},writeSFixed64Field:function(b,a){this.writeTag(b,ra.Fixed64);this.writeSFixed64(a)},writeVarintField:function(b,a){this.writeTag(b,ra.Varint);this.writeVarint(a)},writeSVarintField:function(b,a){this.writeTag(b,ra.Varint);this.writeSVarint(a)},writeStringField:function(b,a){this.writeTag(b,ra.Bytes);this.writeString(a)},writeFloatField:function(b,a){this.writeTag(b,ra.Fixed32);this.writeFloat(a)},
writeDoubleField:function(b,a){this.writeTag(b,ra.Fixed64);this.writeDouble(a)},writeBooleanField:function(b,a){this.writeVarintField(b,!!a)}};var Hf=function(b,a,c){this.target=b;this.parent=a;this.mapId=c;this.callbacks={};this.callbackID=0;Td(["receive"],this);this.target.addEventListener("message",this.receive,!1)};Hf.prototype.send=function(b,a,c,f){var e=c?this.mapId+":"+this.callbackID++:null;c&&(this.callbacks[e]=c);c=[];this.target.postMessage({targetMapId:f,sourceMapId:this.mapId,type:b,
id:String(e),data:I(a,c)},c)};Hf.prototype.receive=function(b){var a=this;b=b.data;var c=b.id;if(!b.targetMapId||this.mapId===b.targetMapId){var f=function(b,e){var f=[];a.target.postMessage({sourceMapId:a.mapId,type:"\x3cresponse\x3e",id:String(c),error:b?I(b):null,data:I(e,f)},f)};if("\x3cresponse\x3e"===b.type)f=this.callbacks[b.id],delete this.callbacks[b.id],f&&b.error?f(ma(b.error)):f&&f(null,ma(b.data));else if(void 0!==b.id&&this.parent[b.type])this.parent[b.type](b.sourceMapId,ma(b.data),
f);else if(void 0!==b.id&&this.parent.getWorkerSource){var g=b.type.split("."),d=ma(b.data);this.parent.getWorkerSource(b.sourceMapId,g[0],d.source)[g[1]](d,f)}else this.parent[b.type](ma(b.data))}};Hf.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var Fa=function(b,a){b&&(a?this.setSouthWest(b).setNorthEast(a):4===b.length?this.setSouthWest([b[0],b[1]]).setNorthEast([b[2],b[3]]):this.setSouthWest(b[0]).setNorthEast(b[1]))};Fa.prototype.setNorthEast=function(b){return this._ne=
b instanceof va?new va(b.lng,b.lat):va.convert(b),this};Fa.prototype.setSouthWest=function(b){return this._sw=b instanceof va?new va(b.lng,b.lat):va.convert(b),this};Fa.prototype.extend=function(b){var a,c=this._sw,f=this._ne;if(b instanceof va)var g=a=b;else{if(!(b instanceof Fa))return Array.isArray(b)?b.every(Array.isArray)?this.extend(Fa.convert(b)):this.extend(va.convert(b)):this;if(a=b._sw,g=b._ne,!a||!g)return this}return c||f?(c.lng=Math.min(a.lng,c.lng),c.lat=Math.min(a.lat,c.lat),f.lng=
Math.max(g.lng,f.lng),f.lat=Math.max(g.lat,f.lat)):(this._sw=new va(a.lng,a.lat),this._ne=new va(g.lng,g.lat)),this};Fa.prototype.getCenter=function(){return new va((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};Fa.prototype.getSouthWest=function(){return this._sw};Fa.prototype.getNorthEast=function(){return this._ne};Fa.prototype.getNorthWest=function(){return new va(this.getWest(),this.getNorth())};Fa.prototype.getSouthEast=function(){return new va(this.getEast(),this.getSouth())};
Fa.prototype.getWest=function(){return this._sw.lng};Fa.prototype.getSouth=function(){return this._sw.lat};Fa.prototype.getEast=function(){return this._ne.lng};Fa.prototype.getNorth=function(){return this._ne.lat};Fa.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};Fa.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};Fa.prototype.isEmpty=function(){return!(this._sw&&this._ne)};Fa.convert=function(b){return!b||b instanceof
Fa?b:new Fa(b)};var va=function(b,a){if(isNaN(b)||isNaN(a))throw Error("Invalid LngLat object: ("+b+", "+a+")");if(this.lng=+b,this.lat=+a,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};va.prototype.wrap=function(){return new va(pd(this.lng,-180,180),this.lat)};va.prototype.toArray=function(){return[this.lng,this.lat]};va.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};va.prototype.toBounds=function(b){b=360*b/40075017;
var a=b/Math.cos(Math.PI/180*this.lat);return new Fa(new va(this.lng-a,this.lat-b),new va(this.lng+a,this.lat+b))};va.convert=function(b){if(b instanceof va)return b;if(Array.isArray(b)&&(2===b.length||3===b.length))return new va(Number(b[0]),Number(b[1]));if(!Array.isArray(b)&&"object"==typeof b&&null!==b)return new va(Number("lng"in b?b.lng:b.lon),Number(b.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var je=function(b,a,c){void 0===c&&(c=0);this.x=+b;this.y=+a;this.z=+c};je.fromLngLat=function(b,a){void 0===a&&(a=0);b=va.convert(b);return new je(uf(b.lng),vf(b.lat),a/De(b.lat))};je.prototype.toLngLat=function(){return new va(360*this.x-180,wf(this.y))};je.prototype.toAltitude=function(){return b=this.z,a=this.y,b*De(wf(a));var b,a};var ke=function(b,a,c){this.z=b;this.x=a;this.y=c;this.key=ee(0,b,a,c)};ke.prototype.equals=function(b){return this.z===b.z&&this.x===b.x&&this.y===b.y};ke.prototype.url=
function(b,a){var e,c,f,g,d,l=(e=this.x,c=this.y,f=this.z,g=tf(256*e,256*(c=Math.pow(2,f)-c-1),f),d=tf(256*(e+1),256*(c+1),f),g[0]+","+g[1]+","+d[0]+","+d[1]),n;e="";for(c=this.z;0<c;c--)e+=(this.x&(n=1<<c-1)?1:0)+(this.y&n?2:0);n=e;return b[(this.x+this.y)%b.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===a?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",
l)};ke.prototype.getTilePoint=function(b){var a=Math.pow(2,this.z);return new sa(8192*(b.x*a-this.x),8192*(b.y*a-this.y))};var wh=function(b,a){this.wrap=b;this.canonical=a;this.key=ee(b,a.z,a.x,a.y)},Ga=function(b,a,c,f,g){this.overscaledZ=b;this.wrap=a;this.canonical=new ke(c,+f,+g);this.key=ee(a,b,f,g)};Ga.prototype.equals=function(b){return this.overscaledZ===b.overscaledZ&&this.wrap===b.wrap&&this.canonical.equals(b.canonical)};Ga.prototype.scaledTo=function(b){var a=this.canonical.z-b;return b>
this.canonical.z?new Ga(b,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ga(b,this.wrap,b,this.canonical.x>>a,this.canonical.y>>a)};Ga.prototype.isChildOf=function(b){if(b.wrap!==this.wrap)return!1;var a=this.canonical.z-b.canonical.z;return 0===b.overscaledZ||b.overscaledZ<this.overscaledZ&&b.canonical.x===this.canonical.x>>a&&b.canonical.y===this.canonical.y>>a};Ga.prototype.children=function(b){if(this.overscaledZ>=b)return[new Ga(this.overscaledZ+1,this.wrap,this.canonical.z,
this.canonical.x,this.canonical.y)];b=this.canonical.z+1;var a=2*this.canonical.x,c=2*this.canonical.y;return[new Ga(b,this.wrap,b,a,c),new Ga(b,this.wrap,b,a+1,c),new Ga(b,this.wrap,b,a,c+1),new Ga(b,this.wrap,b,a+1,c+1)]};Ga.prototype.isLessThan=function(b){return this.wrap<b.wrap||!(this.wrap>b.wrap)&&(this.overscaledZ<b.overscaledZ||!(this.overscaledZ>b.overscaledZ)&&(this.canonical.x<b.canonical.x||!(this.canonical.x>b.canonical.x)&&this.canonical.y<b.canonical.y))};Ga.prototype.wrapped=function(){return new Ga(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};Ga.prototype.unwrapTo=function(b){return new Ga(this.overscaledZ,b,this.canonical.z,this.canonical.x,this.canonical.y)};Ga.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};Ga.prototype.toUnwrapped=function(){return new wh(this.wrap,this.canonical)};Ga.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};Ga.prototype.getTilePoint=function(b){return this.canonical.getTilePoint(new je(b.x-
this.wrap,b.y))};B("CanonicalTileID",ke);B("OverscaledTileID",Ga,{omit:["posMatrix"]});var Mc=function(b,a,c){if(this.uid=b,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(c&&"mapbox"!==c&&"terrarium"!==c)return ic('"'+c+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');b=this.dim=a.height;this.border=Math.max(Math.ceil(a.height/2),1);this.stride=this.dim+2*this.border;this.data=new Int32Array(this.stride*this.stride);a=a.data;c="terrarium"===
c?this._unpackTerrarium:this._unpackMapbox;for(var e=0;e<b;e++)for(var f=0;f<b;f++){var g=4*(e*b+f);this.set(f,e,c(a[g],a[g+1],a[g+2]))}for(a=0;a<b;a++)this.set(-1,a,this.get(0,a)),this.set(b,a,this.get(b-1,a)),this.set(a,-1,this.get(a,0)),this.set(a,b,this.get(a,b-1));this.set(-1,-1,this.get(0,0));this.set(b,-1,this.get(b-1,0));this.set(-1,b,this.get(0,b-1));this.set(b,b,this.get(b-1,b-1))};Mc.prototype.set=function(b,a,c){this.data[this._idx(b,a)]=c+65536};Mc.prototype.get=function(b,a){return this.data[this._idx(b,
a)]-65536};Mc.prototype._idx=function(b,a){if(b<-this.border||b>=this.dim+this.border||a<-this.border||a>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(a+this.border)*this.stride+(b+this.border)};Mc.prototype._unpackMapbox=function(b,a,c){return(65536*b+256*a+c)/10-1E4};Mc.prototype._unpackTerrarium=function(b,a,c){return 256*b+a+c/256-32768};Mc.prototype.getPixels=function(){return new hb({width:this.dim+2*this.border,height:this.dim+2*this.border},
new Uint8Array(this.data.buffer))};Mc.prototype.backfillBorder=function(b,a,c){if(this.dim!==b.dim)throw Error("dem dimension mismatch");var e=a*this.dim,f=a*this.dim+this.dim,g=c*this.dim,d=c*this.dim+this.dim;switch(a){case -1:e=f-1;break;case 1:f=e+1}switch(c){case -1:g=d-1;break;case 1:d=g+1}e=Sa(e,-this.border,this.dim+this.border);f=Sa(f,-this.border,this.dim+this.border);g=Sa(g,-this.border,this.dim+this.border);d=Sa(d,-this.border,this.dim+this.border);a=-a*this.dim;for(c=-c*this.dim;g<d;g++)for(var l=
e;l<f;l++)this.set(l,g,b.get(l+a,g+c))};B("DEMData",Mc);var xh=P([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),If=function(b){this._stringToNumber={};this._numberToString=[];for(var a=0;a<b.length;a++){var c=b[a];this._stringToNumber[c]=a;this._numberToString[a]=c}};If.prototype.encode=function(b){return this._stringToNumber[b]};If.prototype.decode=function(b){return this._numberToString[b]};var Jf=function(b,a,c,f){this.type="Feature";this._vectorTileFeature=
b;b._z=a;b._x=c;b._y=f;this.properties=b.properties;null!=b.id&&(this.id=b.id)},Gg={geometry:{configurable:!0}};Gg.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};Gg.geometry.set=function(b){this._geometry=b};Jf.prototype.toJSON=function(){var b={geometry:this.geometry},a;for(a in this)"_geometry"!==a&&"_vectorTileFeature"!==a&&(b[a]=
this[a]);return b};Object.defineProperties(Jf.prototype,Gg);var We=function(){this.state={};this.stateChanges={}};We.prototype.updateState=function(b,a,c){a=String(a);this.stateChanges[b]=this.stateChanges[b]||{};this.stateChanges[b][a]=this.stateChanges[b][a]||{};Qa(this.stateChanges[b][a],c)};We.prototype.getState=function(b,a){a=String(a);return Qa({},(this.state[b]||{})[a],(this.stateChanges[b]||{})[a])};We.prototype.initializeTileState=function(b,a){b.setFeatureState(this.state,a)};We.prototype.coalesceChanges=
function(b,a){var c={},e;for(e in this.stateChanges){this.state[e]=this.state[e]||{};var f={},g;for(g in this.stateChanges[e])this.state[e][g]||(this.state[e][g]={}),Qa(this.state[e][g],this.stateChanges[e][g]),f[g]=this.state[e][g];c[e]=f}if(this.stateChanges={},0!==Object.keys(c).length)for(var d in b)b[d].setFeatureState(c,a)};var nd=function(b,a,c){this.tileID=b;this.x=b.canonical.x;this.y=b.canonical.y;this.z=b.canonical.z;this.grid=a||new E(8192,16,0);this.featureIndexArray=c||new ch};nd.prototype.insert=
function(b,a,c,f,g){b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,f,g);for(c=0;c<a.length;c++){f=a[c];g=[1/0,1/0,-1/0,-1/0];for(var e=0;e<f.length;e++){var d=f[e];g[0]=Math.min(g[0],d.x);g[1]=Math.min(g[1],d.y);g[2]=Math.max(g[2],d.x);g[3]=Math.max(g[3],d.y)}8192>g[0]&&8192>g[1]&&0<=g[2]&&0<=g[3]&&this.grid.insert(b,g[0],g[1],g[2],g[3])}};nd.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new Qe.VectorTile(new ra(this.rawTileData))).layers,this.sourceLayerCoder=
new If(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers};nd.prototype.query=function(b,a,c){var e=this;this.loadVTLayers();for(var f=b.params||{},g=8192/b.tileSize/b.scale,d=Fc(f.filter),l=b.queryGeometry,k=b.queryPadding*g,n=1/0,t=1/0,u=-1/0,h=-1/0,C=0;C<l.length;C++)for(var p=l[C],m=0;m<p.length;m++){var D=p[m];n=Math.min(n,D.x);t=Math.min(t,D.y);u=Math.max(u,D.x);h=Math.max(h,D.y)}var q=this.grid.query(n-k,t-k,u+k,h+k);q.sort(La);var K,r={};k=function(k){k=
q[k];if(k!==K){K=k;k=e.featureIndexArray.get(k);var n=null;e.loadMatchingFeature(r,k.bucketIndex,k.sourceLayerIndex,k.featureIndex,d,f.layers,a,function(a,f){n||(n=ia(a));var d={};return a.id&&(d=c.getState(f.sourceLayer||"_geojsonTileLayer",a.id)),f.queryIntersectsFeature(l,a,d,n,e.z,b.transform,g,b.posMatrix)})}};for(n=0;n<q.length;n++)k(n);return r};nd.prototype.loadMatchingFeature=function(b,a,c,f,g,d,l,n){a=this.bucketLayerIDs[a];var e;if(!(e=!d))a:{for(e=0;e<d.length;e++)if(0<=a.indexOf(d[e])){e=
!0;break a}e=!1}if(e&&(c=this.sourceLayerCoder.decode(c),c=this.vtLayers[c].feature(f),g(new Ea(this.tileID.overscaledZ),c)))for(g=0;g<a.length;g++)if(e=a[g],!(d&&0>d.indexOf(e))){var k=l[e];if(k&&(!n||n(c,k))){var t=new Jf(c,this.z,this.x,this.y);t.layer=k.serialize();k=b[e];void 0===k&&(k=b[e]=[]);k.push({featureIndex:f,feature:t})}}};nd.prototype.lookupSymbolFeatures=function(b,a,c,f,g,d){var e={};this.loadVTLayers();f=Fc(f);for(var l=0;l<b.length;l+=1)this.loadMatchingFeature(e,a,c,b[l],f,g,d);
return e};nd.prototype.hasLayer=function(b){for(var a=0,c=this.bucketLayerIDs;a<c.length;a+=1)for(var f=0,g=c[a];f<g.length;f+=1)if(b===g[f])return!0;return!1};B("FeatureIndex",nd,{omit:["rawTileData","sourceLayerCoder"]});var Ja=function(b,a){this.tileID=b;this.uid=xf++;this.uses=0;this.tileSize=a;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasSymbolBuckets=!1;this.expiredRequestCount=0;this.state="loading"};Ja.prototype.registerFadeDuration=function(b){b+=this.timeAdded;b<
Pa.now()||this.fadeEndTime&&b<this.fadeEndTime||(this.fadeEndTime=b)};Ja.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};Ja.prototype.loadVectorData=function(b,a,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",b){for(var e in b.featureIndex&&(this.latestFeatureIndex=b.featureIndex,b.rawTileData?(this.latestRawTileData=b.rawTileData,this.latestFeatureIndex.rawTileData=b.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=
this.latestRawTileData)),this.collisionBoxArray=b.collisionBoxArray,this.buckets=function(b,a){var c={};if(!a)return c;for(var e=0;e<b.length;e+=1){var f=b[e],g=f.layerIds.map(function(b){return a.getLayer(b)}).filter(Boolean);if(0!==g.length){f.layers=g;f.stateDependentLayers=g.filter(function(b){return b.isStateDependent()});for(var d=0;d<g.length;d+=1)c[g[d].id]=f}}return c}(b.buckets,a.style),this.hasSymbolBuckets=!1,this.buckets){var f=this.buckets[e];if(f instanceof ua){if(this.hasSymbolBuckets=
!0,!c)break;f.justReloaded=!0}}for(var g in this.queryPadding=0,this.buckets)c=this.buckets[g],this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(g).queryRadius(c));b.imageAtlas&&(this.imageAtlas=b.imageAtlas);b.glyphAtlasImage&&(this.glyphAtlasImage=b.glyphAtlasImage)}else this.collisionBoxArray=new xg};Ja.prototype.unloadVectorData=function(){for(var b in this.buckets)this.buckets[b].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=
null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();this.latestFeatureIndex=null;this.state="unloaded"};Ja.prototype.unloadDEMData=function(){this.neighboringTiles=this.dem=null;this.state="unloaded"};Ja.prototype.getBucket=function(b){return this.buckets[b.id]};Ja.prototype.upload=function(b){for(var a in this.buckets){var c=this.buckets[a];c.uploadPending()&&c.upload(b)}a=b.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Rd(b,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=
!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new Rd(b,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)};Ja.prototype.queryRenderedFeatures=function(b,a,c,f,g,d,l,n){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:c,scale:f,tileSize:this.tileSize,posMatrix:n,transform:d,params:g,queryPadding:this.queryPadding*l},b,a):{}};Ja.prototype.querySourceFeatures=function(b,a){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var c=
this.latestFeatureIndex.loadVTLayers(),e=a?a.sourceLayer:"";if(c=c._geojsonTileLayer||c[e]){a=Fc(a&&a.filter);var f=this.tileID.canonical;e=f.z;var g=f.x;f=f.y;for(var d={z:e,x:g,y:f},l=0;l<c.length;l++){var n=c.feature(l);a(new Ea(this.tileID.overscaledZ),n)&&(n=new Jf(n,e,g,f),n.tile=d,b.push(n))}}}};Ja.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments);this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer);this.maskedIndexBuffer&&
(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)};Ja.prototype.setMask=function(b,a){if(!me(this.mask,b)&&(this.mask=b,this.clearMask(),!me(b,{0:!0}))){var c=new Ff,e=new yc;this.segments=new Ia;this.segments.prepareSegment(0,c,e);for(var f=Object.keys(b),g=0;g<f.length;g++){var d=b[f[g]],l=8192>>d.z;d=new sa(d.x*l,d.y*l);var n=new sa(d.x+l,d.y+l);l=this.segments.prepareSegment(4,c,e);c.emplaceBack(d.x,d.y,d.x,d.y);c.emplaceBack(n.x,d.y,n.x,d.y);c.emplaceBack(d.x,n.y,d.x,n.y);c.emplaceBack(n.x,
n.y,n.x,n.y);d=l.vertexLength;e.emplaceBack(d,d+1,d+2);e.emplaceBack(d+1,d+2,d+3);l.vertexLength+=4;l.primitiveLength+=2}this.maskedBoundsBuffer=a.createVertexBuffer(c,xh.members);this.maskedIndexBuffer=a.createIndexBuffer(e)}};Ja.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};Ja.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};Ja.prototype.setExpiryData=function(b){var a=
this.expirationTime;b.cacheControl?(b=function(b){var a={};if(b.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(b,c,e,f){b=e||f;return a[c]=!b||b.toLowerCase(),""}),a["max-age"])b=parseInt(a["max-age"],10),isNaN(b)?delete a["max-age"]:a["max-age"]=b;return a}(b.cacheControl),b["max-age"]&&(this.expirationTime=Date.now()+1E3*b["max-age"])):b.expires&&(this.expirationTime=(new Date(b.expires)).getTime());
if(this.expirationTime){b=Date.now();var c=!1;this.expirationTime>b?c=!1:a?this.expirationTime<a?c=!0:(a=this.expirationTime-a)?this.expirationTime=b+Math.max(a,3E4):c=!0:c=!0;c?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}};Ja.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};Ja.prototype.setFeatureState=function(b,
a){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(b).length){var c=this.latestFeatureIndex.loadVTLayers(),e;for(e in this.buckets){var f=this.buckets[e],g=f.layers[0].sourceLayer||"_geojsonTileLayer",d=c[g];g=b[g];d&&g&&0!==Object.keys(g).length&&(f.update(g,d,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a&&a.style&&(this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(e).queryRadius(f))))}}};Ja.prototype.holdingForFade=function(){return void 0!==
this.symbolFadeHoldUntil};Ja.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Pa.now()};Ja.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0};Ja.prototype.setHoldDuration=function(b){this.symbolFadeHoldUntil=Pa.now()+b};var Hg={horizontal:1,vertical:2,horizontalOnly:3},pb=function(){this.text="";this.sectionIndex=[];this.sections=[]};pb.fromFeature=function(b,a){for(var c=new pb,e=0;e<b.sections.length;e++){var f=b.sections[e];c.sections.push({scale:f.scale||
1,fontStack:f.fontStack||a});c.text+=f.text;for(var g=0;g<f.text.length;g++)c.sectionIndex.push(e)}return c};pb.prototype.length=function(){return this.text.length};pb.prototype.getSection=function(b){return this.sections[this.sectionIndex[b]]};pb.prototype.getCharCode=function(b){return this.text.charCodeAt(b)};pb.prototype.verticalizePunctuation=function(){for(var b=this.text,a="",c=0;c<b.length;c++){var f=b.charCodeAt(c+1)||null,g=b.charCodeAt(c-1)||null;f&&R(f)&&!Re[b[c+1]]||g&&R(g)&&!Re[b[c-
1]]||!Re[b[c]]?a+=b[c]:a+=Re[b[c]]}this.text=a};pb.prototype.trim=function(){for(var b=0,a=0;a<this.text.length&&$f[this.text.charCodeAt(a)];a++)b++;a=this.text.length;for(var c=this.text.length-1;0<=c&&c>=b&&$f[this.text.charCodeAt(c)];c--)a--;this.text=this.text.substring(b,a);this.sectionIndex=this.sectionIndex.slice(b,a)};pb.prototype.substring=function(b,a){var c=new pb;return c.text=this.text.substring(b,a),c.sectionIndex=this.sectionIndex.slice(b,a),c.sections=this.sections,c};pb.prototype.toString=
function(){return this.text};pb.prototype.getMaxScale=function(){var b=this;return this.sectionIndex.reduce(function(a,c){return Math.max(a,b.sections[c].scale)},0)};var $f={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Gh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};d.createCommonjsModule=gc;d.Point=sa;d.window=self;d.getJSON=function(b,a){return wc(Qa(b,{type:"json"}),a)};d.getImage=C;d.ResourceType=zf;d.browser=Pa;d.normalizeSpriteURL=function(b,a,c,f){var e=
eb(b);return rb(b)?(e.path="/styles/v1"+e.path+"/sprite"+a+c,Tb(e,f)):(e.path+=""+a+c,jb(e))};d.RGBAImage=hb;d.potpack=mf;d.ImagePosition=Ue;d.Texture=Rd;d.normalizeGlyphsURL=function(b,a){if(!rb(b))return b;b=eb(b);return b.path="/fonts/v1"+b.path,Tb(b,a)};d.getArrayBuffer=ac;d.parseGlyphPBF=function(b){return(new ra(b)).readFields(Zf,[])};d.isChar=T;d.asyncAll=function(b,a,c){if(!b.length)return c(null,[]);var e=b.length,f=Array(b.length),g=null;b.forEach(function(b,d){a(b,function(b,a){b&&(g=b);
f[d]=a;0==--e&&c(g,f)})})};d.AlphaImage=Fd;d.styleSpec=g;d.endsWith=Oc;d.extend=Qa;d.sphericalToCartesian=function(b){var a=b[0],c=b[1];b=b[2];return c+=90,c*=Math.PI/180,b*=Math.PI/180,{x:a*Math.cos(c)*Math.sin(b),y:a*Math.sin(c)*Math.sin(b),z:a*Math.cos(b)}};d.Evented=f;d.validateStyle=y;d.validateLight=Ph;d.emitValidationErrors=S;d.Color=oa;d.number=ha;d.Properties=Ob;d.Transitionable=Kc;d.Transitioning=Ke;d.PossiblyEvaluated=Df;d.DataConstantProperty=U;d.warnOnce=ic;d.uniqueId=function(){return xf++};
d.Actor=Hf;d.pick=function(b,a){for(var c={},e=0;e<a.length;e++){var f=a[e];f in b&&(c[f]=b[f])}return c};d.normalizeSourceURL=function(b,a){if(!rb(b))return b;b=eb(b);return b.path="/v4/"+b.authority+".json",b.params.push("secure"),Tb(b,a)};d.canonicalizeTileset=function(b,a){if(!rb(a))return b.tiles||[];a=[];var c=0;for(b=b.tiles;c<b.length;c+=1){var e=cg(b[c]);a.push(e)}return a};d.LngLatBounds=Fa;d.mercatorXfromLng=uf;d.mercatorYfromLat=vf;d.Event=a;d.ErrorEvent=c;d.normalizeTileURL=function(b,
a,c){if(!a||!rb(a))return b;b=eb(b);return b.path=b.path.replace(Jd,(2<=Pa.devicePixelRatio||512===c?"@2x":"")+(ne.supported?".webp":"$1")),b.path="/v4"+b.path,Tb(b)};d.postTurnstileEvent=Ee;d.postMapLoadEvent=yf;d.OverscaledTileID=Ga;d.EXTENT=8192;d.CanonicalTileID=ke;d.StructArrayLayout4i8=Ff;d.rasterBoundsAttributes=xh;d.SegmentVector=Ia;d.MercatorCoordinate=je;d.getVideo=function(b,a){var c=self.document.createElement("video");c.muted=!0;c.onloadstart=function(){a(null,c)};for(var e=0;e<b.length;e++){var f=
self.document.createElement("source");var g=b[e];var d=void 0;(d=self.document.createElement("a")).href=g;d.protocol===self.document.location.protocol&&d.host===self.document.location.host||(c.crossOrigin="Anonymous");f.src=b[e];c.appendChild(f)}return{cancel:function(){}}};d.ValidationError=l;d.bindAll=Td;d.isEqual=me;d.Tile=Ja;d.keysDifference=function(b,a){var c=[],e;for(e in b)e in a||c.push(e);return c};d.SourceFeatureState=We;d.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");
d.create=function(){var b=new dd(16);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};d.identity=function(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};d.invert=function(b,a){var c=a[0],e=a[1],f=a[2],g=a[3],d=a[4],l=a[5],n=a[6],t=a[7],u=a[8],h=a[9],C=a[10],p=a[11],m=a[12],D=a[13],q=a[14];a=a[15];var K=c*l-e*d,r=c*n-f*d,x=c*t-g*d,N=e*n-
f*l,w=e*t-g*l,v=f*t-g*n,y=u*D-h*m,z=u*q-C*m,ja=u*a-p*m,kb=h*q-C*D,Fb=h*a-p*D,lc=C*a-p*q,ya=K*lc-r*Fb+x*kb+N*ja-w*z+v*y;return ya?(ya=1/ya,b[0]=(l*lc-n*Fb+t*kb)*ya,b[1]=(f*Fb-e*lc-g*kb)*ya,b[2]=(D*v-q*w+a*N)*ya,b[3]=(C*w-h*v-p*N)*ya,b[4]=(n*ja-d*lc-t*z)*ya,b[5]=(c*lc-f*ja+g*z)*ya,b[6]=(q*x-m*v-a*r)*ya,b[7]=(u*v-C*x+p*r)*ya,b[8]=(d*Fb-l*ja+t*y)*ya,b[9]=(e*ja-c*Fb-g*y)*ya,b[10]=(m*w-D*x+a*K)*ya,b[11]=(h*x-u*w-p*K)*ya,b[12]=(l*z-d*kb-n*y)*ya,b[13]=(c*kb-e*z+f*y)*ya,b[14]=(D*r-m*N-q*K)*ya,b[15]=(u*N-h*
r+C*K)*ya,b):null};d.multiply=function(b,a,c){var e=a[0],f=a[1],g=a[2],d=a[3],l=a[4],k=a[5],n=a[6],t=a[7],u=a[8],h=a[9],C=a[10],p=a[11],m=a[12],D=a[13],q=a[14];a=a[15];var K=c[0],r=c[1],x=c[2],N=c[3];return b[0]=K*e+r*l+x*u+N*m,b[1]=K*f+r*k+x*h+N*D,b[2]=K*g+r*n+x*C+N*q,b[3]=K*d+r*t+x*p+N*a,K=c[4],r=c[5],x=c[6],N=c[7],b[4]=K*e+r*l+x*u+N*m,b[5]=K*f+r*k+x*h+N*D,b[6]=K*g+r*n+x*C+N*q,b[7]=K*d+r*t+x*p+N*a,K=c[8],r=c[9],x=c[10],N=c[11],b[8]=K*e+r*l+x*u+N*m,b[9]=K*f+r*k+x*h+N*D,b[10]=K*g+r*n+x*C+N*q,b[11]=
K*d+r*t+x*p+N*a,K=c[12],r=c[13],x=c[14],N=c[15],b[12]=K*e+r*l+x*u+N*m,b[13]=K*f+r*k+x*h+N*D,b[14]=K*g+r*n+x*C+N*q,b[15]=K*d+r*t+x*p+N*a,b};d.translate=function(b,a,c){var e,f,g,d,l,k,n,t,u,h,C,p,m=c[0],D=c[1];c=c[2];return a===b?(b[12]=a[0]*m+a[4]*D+a[8]*c+a[12],b[13]=a[1]*m+a[5]*D+a[9]*c+a[13],b[14]=a[2]*m+a[6]*D+a[10]*c+a[14],b[15]=a[3]*m+a[7]*D+a[11]*c+a[15]):(e=a[0],f=a[1],g=a[2],d=a[3],l=a[4],k=a[5],n=a[6],t=a[7],u=a[8],h=a[9],C=a[10],p=a[11],b[0]=e,b[1]=f,b[2]=g,b[3]=d,b[4]=l,b[5]=k,b[6]=n,
b[7]=t,b[8]=u,b[9]=h,b[10]=C,b[11]=p,b[12]=e*m+l*D+u*c+a[12],b[13]=f*m+k*D+h*c+a[13],b[14]=g*m+n*D+C*c+a[14],b[15]=d*m+t*D+p*c+a[15]),b};d.scale=function(b,a,c){var e=c[0],f=c[1];c=c[2];return b[0]=a[0]*e,b[1]=a[1]*e,b[2]=a[2]*e,b[3]=a[3]*e,b[4]=a[4]*f,b[5]=a[5]*f,b[6]=a[6]*f,b[7]=a[7]*f,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};d.rotateX=function(b,a,c){var e=Math.sin(c);c=Math.cos(c);var f=a[4],g=a[5],d=a[6],l=a[7],k=a[8],n=a[9],t=a[10],
u=a[11];return a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b[4]=f*c+k*e,b[5]=g*c+n*e,b[6]=d*c+t*e,b[7]=l*c+u*e,b[8]=k*c-f*e,b[9]=n*c-g*e,b[10]=t*c-d*e,b[11]=u*c-l*e,b};d.rotateZ=function(b,a,c){var e=Math.sin(c);c=Math.cos(c);var f=a[0],g=a[1],d=a[2],l=a[3],k=a[4],n=a[5],t=a[6],u=a[7];return a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b[0]=f*c+k*e,b[1]=g*c+n*e,b[2]=d*c+t*e,b[3]=l*c+u*e,b[4]=
k*c-f*e,b[5]=n*c-g*e,b[6]=t*c-d*e,b[7]=u*c-l*e,b};d.perspective=function(b,a,c,f,g){a=1/Math.tan(a/2);var e=1/(f-g);return b[0]=a/c,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=a,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=(g+f)*e,b[11]=-1,b[12]=0,b[13]=0,b[14]=2*g*f*e,b[15]=0,b};d.ortho=function(b,a,c,f,g,d,l){var e=1/(a-c),k=1/(f-g),n=1/(d-l);return b[0]=-2*e,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*k,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*n,b[11]=0,b[12]=(a+c)*e,b[13]=(g+f)*k,b[14]=(l+d)*n,b[15]=1,b};d.create$1=$d;d.normalize=
function(b,a){var c=a[0],e=a[1],f=a[2];a=a[3];var g=c*c+e*e+f*f+a*a;return 0<g&&(g=1/Math.sqrt(g),b[0]=c*g,b[1]=e*g,b[2]=f*g,b[3]=a*g),b};d.transformMat4=tc;d.forEach=Zh;d.getSizeData=Ae;d.evaluateSizeForFeature=function(b,a,c){return"source"===b.functionType?c.lowerSize/256:"composite"===b.functionType?ha(c.lowerSize/256,c.upperSize/256,a.uSizeT):a.uSize};d.evaluateSizeForZoom=function(b,a,c){if("constant"===b.functionType)return{uSizeT:0,uSize:b.layoutSize};if("source"===b.functionType)return{uSizeT:0,
uSize:0};if("camera"===b.functionType){var e=b.zoomRange,f=b.sizeRange;b=Sa(Va(b.propertyValue,c.specification).interpolationFactor(a,e.min,e.max),0,1);return{uSizeT:0,uSize:f.min+b*(f.max-f.min)}}f=b.zoomRange;return{uSizeT:Sa(Va(b.propertyValue,c.specification).interpolationFactor(a,f.min,f.max),0,1),uSize:0}};d.SIZE_PACK_FACTOR=256;d.addDynamicAttributes=Be;d.properties=oh;d.WritingMode=Hg;d.multiPolygonIntersectsBufferedPoint=Ng;d.multiPolygonIntersectsMultiPolygon=Zd;d.multiPolygonIntersectsBufferedMultiLine=
la;d.polygonIntersectsPolygon=function(b,a){for(var c=0;c<b.length;c++)if(sc(a,b[c]))return!0;for(c=0;c<a.length;c++)if(sc(b,a[c]))return!0;return!!Ca(b,a)};d.distToSegmentSquared=na;d.SymbolInstanceArray=yg;d.StyleLayer=bc;d.createStyleLayer=function(b){return"custom"===b.type?new yi(b):new zi[b.type](b)};d.clone=Xa;d.filterObject=rd;d.mapObject=hc;d.getReferrer=Bf;d.isMapboxURL=rb;d.normalizeStyleURL=function(b,a){if(!rb(b))return b;b=eb(b);return b.path="/styles/v1"+b.path,Tb(b,a)};d.registerForPluginAvailability=
function(b){return Ie?b({pluginURL:Ie,completionCallback:hg}):jg.once("pluginAvailable",b),b};d.evented=jg;d.ZoomHistory=gg;d.validateCustomStyleLayer=function(b){var a=[],c=b.id;return void 0===c&&a.push({message:"layers."+c+': missing required property "id"'}),void 0===b.render&&a.push({message:"layers."+c+': missing required method "render"'}),b.renderingMode&&"2d"!==b.renderingMode&&"3d"!==b.renderingMode&&a.push({message:"layers."+c+': property "renderingMode" must be either "2d" or "3d"'}),
a};d.createLayout=P;d.ProgramConfiguration=ib;d.Uniform1i=Sh;d.Uniform1f=Pe;d.Uniform2f=Th;d.Uniform4f=eh;d.Uniform3f=Uh;d.UniformMatrix4f=Wh;d.create$2=Da;d.fromRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);return b[0]=a,b[1]=c,b[2]=0,b[3]=-c,b[4]=a,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b};d.create$3=se;d.length=Og;d.fromValues=ba;d.normalize$1=function(b,a){var c=a[0],e=a[1],f=a[2];c=c*c+e*e+f*f;return 0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c),b};d.dot=function(b,a){return b[0]*
a[0]+b[1]*a[1]+b[2]*a[2]};d.cross=function(b,a,c){var e=a[0],f=a[1];a=a[2];var g=c[0],d=c[1];c=c[2];return b[0]=f*c-a*d,b[1]=a*g-e*c,b[2]=e*d-f*g,b};d.transformMat3=function(b,a,c){var e=a[0],f=a[1];a=a[2];return b[0]=e*c[0]+f*c[3]+a*c[6],b[1]=e*c[1]+f*c[4]+a*c[7],b[2]=e*c[2]+f*c[5]+a*c[8],b};d.len=Og;d.forEach$1=Yh;d.UniformColor=fh;d.clamp=Sa;d.StructArrayLayout2i4=Ne;d.StructArrayLayout2ui4=Oe;d.StructArrayLayout3ui6=yc;d.StructArrayLayout1ui2=wg;d.LngLat=va;d.mercatorZfromAltitude=function(b,
a){return b/De(a)};d.wrap=pd;d.UnwrappedTileID=wh;d.create$4=function(){var b=new dd(4);return b[0]=1,b[1]=0,b[2]=0,b[3]=1,b};d.rotate=function(b,a,c){var e=a[0],f=a[1],g=a[2];a=a[3];var d=Math.sin(c);c=Math.cos(c);return b[0]=e*c+g*d,b[1]=f*c+a*d,b[2]=e*-d+g*c,b[3]=f*-d+a*c,b};d.ease=zb;d.bezier=Wa;d.config=Ka;d.EvaluationParameters=Ea;d.webpSupported=ne;d.version="0.52.0";d.setRTLTextPlugin=function(b,c){if(ig)throw Error("setRTLTextPlugin cannot be called multiple times.");ig=!0;Ie=Pa.resolveURL(b);
hg=function(b){b?(ig=!1,Ie=null,c&&c(b)):Tg=!0};jg.fire(new a("pluginAvailable",{pluginURL:Ie,completionCallback:hg}))};d.values=function(b){var a=[],c;for(c in b)a.push(b[c]);return a};d.featureFilter=Fc;d.Anchor=nh;d.GLYPH_PBF_BORDER=3;d.shapeText=function(b,a,c,f,g,d,l,n,t,u,h){b=pb.fromFeature(b,c);h===Hg.vertical&&b.verticalizePunctuation();c=[];var e={positionedGlyphs:c,text:b,top:t[1],bottom:t[1],left:t[0],right:t[0],writingMode:h},k=Ed.processBidirectionalText,C=Ed.processStyledBidirectionalText;
if(k&&1===b.sections.length){t=[];var p=0;for(f=k(b.toString(),bb(b,n,f,a));p<f.length;p+=1){k=f[p];C=new pb;C.text=k;C.sections=b.sections;for(var m=0;m<k.length;m++)C.sectionIndex.push(0);t.push(C)}}else if(C)for(t=[],p=0,f=C(b.text,b.sectionIndex,bb(b,n,f,a));p<f.length;p+=1)k=f[p],C=new pb,C.text=k[0],C.sectionIndex=k[1],C.sections=b.sections,t.push(C);else t=function(b,a){for(var c=[],e=b.text,f=0,g=0;g<a.length;g+=1){var d=a[g];c.push(b.substring(f,d));f=d}return f<e.length&&c.push(b.substring(f,
e.length)),c}(b,bb(b,n,f,a));return function(b,a,c,e,f,g,d,l,n){var k=0,t=-17,u=0,h=b.positionedGlyphs;g="right"===g?1:"left"===g?0:.5;for(var C=0;C<c.length;C+=1){var p=c[C];p.trim();var m=p.getMaxScale();if(p.length()){for(var D=h.length,K=0;K<p.length();K++){var q=p.getSection(K),r=p.getCharCode(K),x=24*(m-q.scale),N=a[q.fontStack];(N=N&&N[r])&&(O(r)&&d!==Hg.horizontal?(h.push({glyph:r,x:k,y:x,vertical:!0,scale:q.scale,fontStack:q.fontStack}),k+=n*q.scale+l):(h.push({glyph:r,x:k,y:t+x,vertical:!1,
scale:q.scale,fontStack:q.fontStack}),k+=N.metrics.advance*q.scale+l))}if(h.length!==D&&(u=Math.max(k-l,u),k=h,p=h.length-1,g&&(K=k[p],q=(q=a[K.fontStack])&&q[K.glyph])))for(K=(k[p].x+q.metrics.advance*K.scale)*g;D<=p;D++)k[D].x-=K;k=0;t+=e*m}else t+=e}f=Gd(f);a=f.horizontalAlign;f=f.verticalAlign;g=(g-a)*u;c=(-f*c.length+.5)*e;for(e=0;e<h.length;e++)h[e].x+=g,h[e].y+=c;!0;t-=-17;b.top+=-f*t;b.bottom=b.top+t;b.left+=-a*u;b.right=b.left+u}(e,a,t,g,d,l,h,n,u),!!c.length&&(e.text=e.text.toString(),e)};
d.shapeIcon=function(b,a,c){var e=Gd(c);c=a[0]-b.displaySize[0]*e.horizontalAlign;a=a[1]-b.displaySize[1]*e.verticalAlign;return{image:b,top:a,bottom:a+b.displaySize[1],left:c,right:c+b.displaySize[0]}};d.allowsVerticalWritingMode=Ba;d.allowsLetterSpacing=function(b){for(var a=0;a<b.length;a+=1){var c=b[a].charCodeAt(0);if(T.Arabic(c)||T["Arabic Supplement"](c)||T["Arabic Extended-A"](c)||T["Arabic Presentation Forms-A"](c)||T["Arabic Presentation Forms-B"](c))return!1}return!0};d.classifyRings=we;
d.SymbolBucket=ua;d.register=B;d.FeatureIndex=nd;d.CollisionBoxArray=xg;d.DictionaryCoder=If;d.LineBucket=ob;d.FillBucket=ec;d.FillExtrusionBucket=fc;d.ImageAtlas=ph;d.mvt=Qe;d.Protobuf=ra;d.DEMData=Mc;d.vectorTile=Qe;d.Point$1=sa;d.pbf=ra;d.plugin=Ed});Cb(["./shared.js"],function(d){function gc(d){var p=typeof d;if("number"===p||"boolean"===p||"string"===p||null==d)return JSON.stringify(d);if(Array.isArray(d)){p="[";for(var h=0;h<d.length;h+=1)p+=gc(d[h])+",";return p+"]"}p=Object.keys(d).sort();
h="{";for(var m=0;m<p.length;m++)h+=JSON.stringify(p[m])+":"+gc(d[p[m]])+",";return h+"}"}function cb(d,q,h,m,x){if(void 0===q.segment)return!0;var p=q;q=q.segment+1;for(var w=0;w>-h/2;){if(0>--q)return!1;w-=d[q].dist(p);p=d[q]}w+=d[q].dist(d[q+1]);q++;p=[];for(var v=0;w<h/2;){var z=d[q],y=d[q+1];if(!y)return!1;var F=d[q-1].angleTo(z)-z.angleTo(y);F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI);p.push({distance:w,angleDelta:F});for(v+=F;w-p[0].distance>m;)v-=p.shift().angleDelta;if(v>x)return!1;q++;
w+=z.dist(y)}return!0}function Db(d){for(var p=0,h=0;h<d.length-1;h++)p+=d[h].dist(d[h+1]);return p}function Wa(p,q,h,m,x,r){x=h?.6*x*r:0;h=Math.max(h?h.right-h.left:0,m?m.right-m.left:0)*r;var w=0,v=Db(p)/2;for(m=0;m<p.length-1;m++){r=p[m];var z=p[m+1],y=r.dist(z);if(w+y>v)return v=(v-w)/y,w=d.number(r.x,z.x,v),v=d.number(r.y,z.y,v),m=new d.Anchor(w,v,z.angleTo(r),m),m._round(),!x||cb(p,m,h,x,q)?m:void 0;w+=y}}function Cb(p,q,h,m,x,r,w,v,z){x=Math.max(m?m.right-m.left:0,x?x.right-x.left:0);var y=
x*w,F=0===p[0].x||p[0].x===z||0===p[0].y||p[0].y===z;return q-y<q/4&&(q=y+q/4),function gb(h,p,m,q,x,r,w,v,y){var z=r/2,B=Db(h),F=0;p-=m;for(var E=[],A=0;A<h.length-1;A++){for(var S=h[A],I=h[A+1],O=S.dist(I),ma=I.angleTo(S);p+m<F+O;){var Ba=((p+=m)-F)/O,P=d.number(S.x,I.x,Ba);Ba=d.number(S.y,I.y,Ba);0<=P&&P<y&&0<=Ba&&Ba<y&&0<=p-z&&p+z<=B&&(P=new d.Anchor(P,Ba,ma,A),P._round(),q&&!cb(h,P,r,q,x)||E.push(P))}F+=O}v||E.length||w||(E=gb(h,F/2,m,q,x,r,w,!0,y));return E}(p,F?q/2*v%q:(x/2+2*r)*w*v%q,q,m?
.6*r*w:0,h,y,F,!1,z)}function Sa(d,q){if(!(this instanceof Sa))return new Sa(d,q);if(this.data=d||[],this.length=this.data.length,this.compare=q||pd,0<this.length)for(d=(this.length>>1)-1;0<=d;d--)this._down(d)}function pd(d,q){return d<q?-1:d>q?1:0}function Qa(p,q,h){void 0===q&&(q=1);void 0===h&&(h=!1);for(var m=1/0,x=1/0,r=-1/0,w=-1/0,v=p[0],z=0;z<v.length;z++){var y=v[z];(!z||y.x<m)&&(m=y.x);(!z||y.y<x)&&(x=y.y);(!z||y.x>r)&&(r=y.x);(!z||y.y>w)&&(w=y.y)}y=Math.min(r-m,w-x);v=y/2;z=new Wd(null,
qd);if(0===y)return new d.Point(m,x);for(;m<r;m+=y)for(var F=x;F<w;F+=y)z.push(new Rb(m+v,F+v,v,p));w=r=x=0;m=p[0];y=0;F=m.length;for(var A=F-1;y<F;A=y++){var S=m[y];A=m[A];var E=S.x*A.y-A.x*S.y;r+=(S.x+A.x)*E;w+=(S.y+A.y)*E;x+=3*E}x=new Rb(r/x,w/x,0,p);for(r=z.length;z.length;)w=z.pop(),(w.d>x.d||!x.d)&&(x=w,h&&console.log("found best %d after %d probes",Math.round(1E4*w.d)/1E4,r)),w.max-x.d<=q||(v=w.h/2,z.push(new Rb(w.p.x-v,w.p.y-v,v,p)),z.push(new Rb(w.p.x+v,w.p.y-v,v,p)),z.push(new Rb(w.p.x-
v,w.p.y+v,v,p)),z.push(new Rb(w.p.x+v,w.p.y+v,v,p)),r+=4);return h&&(console.log("num probes: "+r),console.log("best distance: "+x.d)),x.p}function qd(d,q){return q.max-d.max}function Rb(p,q,h,m){this.p=new d.Point(p,q);this.h=h;p=this.p;q=!1;h=1/0;for(var x=0;x<m.length;x++)for(var r=m[x],w=0,v=r.length,z=v-1;w<v;z=w++){var y=r[w];z=r[z];y.y>p.y!=z.y>p.y&&p.x<(z.x-y.x)*(p.y-y.y)/(z.y-y.y)+y.x&&(q=!q);h=Math.min(h,d.distToSegmentSquared(p,y,z))}this.d=(q?1:-1)*Math.sqrt(h);this.max=this.d+this.h*
Math.SQRT2}function Td(p,q,h,m,x,r){p.createArrays();p.tilePixelRatio=d.EXTENT/(512*p.overscaling);p.compareText={};p.iconsNeedLinear=!1;var w=p.layers[0].layout,v=p.layers[0]._unevaluatedLayout._values,z={};if("composite"===p.textSizeData.functionType){var y=p.textSizeData.zoomRange,F=y.max;z.compositeTextSizes=[v["text-size"].possiblyEvaluate(new d.EvaluationParameters(y.min)),v["text-size"].possiblyEvaluate(new d.EvaluationParameters(F))]}"composite"===p.iconSizeData.functionType&&(y=p.iconSizeData.zoomRange,
F=y.max,z.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new d.EvaluationParameters(y.min)),v["icon-size"].possiblyEvaluate(new d.EvaluationParameters(F))]);z.layoutTextSize=v["text-size"].possiblyEvaluate(new d.EvaluationParameters(p.zoom+1));z.layoutIconSize=v["icon-size"].possiblyEvaluate(new d.EvaluationParameters(p.zoom+1));z.textMaxSize=v["text-size"].possiblyEvaluate(new d.EvaluationParameters(18));v=24*w.get("text-line-height");y="map"===w.get("text-rotation-alignment")&&"point"!==w.get("symbol-placement");
F=w.get("text-keep-upright");for(var A=0,S=p.features;A<S.length;A+=1){var E=S[A],B=w.get("text-font").evaluate(E,{}).join(","),I=h,ma={},Ba=E.text;if(Ba){var O=Ba.toString(),R=w.get("text-offset").evaluate(E,{}).map(function(d){return 24*d}),P=24*w.get("text-letter-spacing").evaluate(E,{});P=d.allowsLetterSpacing(O)?P:0;var gb=w.get("text-anchor").evaluate(E,{}),wb=w.get("text-justify").evaluate(E,{}),H="point"===w.get("symbol-placement")?24*w.get("text-max-width").evaluate(E,{}):0;ma.horizontal=
d.shapeText(Ba,q,B,H,v,gb,wb,P,R,24,d.WritingMode.horizontal);d.allowsVerticalWritingMode(O)&&y&&F&&(ma.vertical=d.shapeText(Ba,q,B,H,v,gb,wb,P,R,24,d.WritingMode.vertical))}B=void 0;E.icon&&(Ba=m[E.icon])&&(B=d.shapeIcon(x[E.icon],w.get("icon-offset").evaluate(E,{}),w.get("icon-anchor").evaluate(E,{})),void 0===p.sdfIcons?p.sdfIcons=Ba.sdf:p.sdfIcons!==Ba.sdf&&d.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),Ba.pixelRatio!==p.pixelRatio?p.iconsNeedLinear=!0:0!==w.get("icon-rotate").constantOr(1)&&
(p.iconsNeedLinear=!0));(ma.horizontal||B)&&Oc(p,E,ma,B,I,z)}r&&p.generateCollisionDebugBuffers()}function Oc(p,q,h,m,x,r){var w=r.layoutTextSize.evaluate(q,{}),v=r.layoutIconSize.evaluate(q,{}),z=r.textMaxSize.evaluate(q,{});void 0===z&&(z=w);var y=p.layers[0].layout,F=y.get("text-offset").evaluate(q,{}),A=y.get("icon-offset").evaluate(q,{}),S=w/24*p.tilePixelRatio;w=p.tilePixelRatio*z/24;var E=p.tilePixelRatio*v;z=p.tilePixelRatio*y.get("symbol-spacing");var B=y.get("text-padding")*p.tilePixelRatio,
I=y.get("icon-padding")*p.tilePixelRatio;v=y.get("text-max-angle")/180*Math.PI;var ma="map"===y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement"),Ba="map"===y.get("icon-rotation-alignment")&&"point"!==y.get("symbol-placement"),O=y.get("symbol-placement"),R=z/2;y=function(w,y){if(!(0>y.x||y.x>=d.EXTENT||0>y.y||y.y>=d.EXTENT)){var v=p.layers[0],z=p.collisionBoxArray,M=q.index,O=q.sourceLayerIndex,gb=p.index,P=p.addToLineVertexArray(y,w),R=0,H=0,ab=0,wb=Xb(h.horizontal?h.horizontal.text:
""),Ra=[];if(h.horizontal){var Lb=v.layout.get("text-rotate").evaluate(q,{});var xb=new ub(z,w,y,M,O,gb,h.horizontal,S,B,ma,p.overscaling,Lb);H+=hc(p,y,h.horizontal,v,ma,q,F,P,h.vertical?d.WritingMode.horizontal:d.WritingMode.horizontalOnly,Ra,x,r);h.vertical&&(ab+=hc(p,y,h.vertical,v,ma,q,F,P,d.WritingMode.vertical,Ra,x,r))}Lb=xb?xb.boxStartIndex:p.collisionBoxArray.length;xb=xb?xb.boxEndIndex:p.collisionBoxArray.length;if(m){var G=h.horizontal;R=m.image;var ba=v.layout;var L=m.top-1/R.pixelRatio,
da=m.left-1/R.pixelRatio;var ia=m.bottom+1/R.pixelRatio;var W=m.right+1/R.pixelRatio;if("none"!==ba.get("icon-text-fit")&&G){var V=W-da;var Y=ia-L;L=ba.get("text-size").evaluate(q,{})/24;ia=G.left*L;da=G.top*L;var ha=G.right*L-ia,ka=G.bottom*L-da,pa=ba.get("icon-text-fit-padding")[0];var fa=ba.get("icon-text-fit-padding")[1];G=ba.get("icon-text-fit-padding")[2];L=ba.get("icon-text-fit-padding")[3];W="width"===ba.get("icon-text-fit")?.5*(ka-Y):0;var ea="height"===ba.get("icon-text-fit")?.5*(ha-V):
0;ha="width"===ba.get("icon-text-fit")||"both"===ba.get("icon-text-fit")?ha:V;Y="height"===ba.get("icon-text-fit")||"both"===ba.get("icon-text-fit")?ka:Y;ba=new d.Point(ia+ea-L,da+W-pa);V=new d.Point(ia+ea+fa+ha,da+W-pa);fa=new d.Point(ia+ea+fa+ha,da+W+G+Y);ia=new d.Point(ia+ea-L,da+W+G+Y)}else ba=new d.Point(da,L),V=new d.Point(W,L),fa=new d.Point(W,ia),ia=new d.Point(da,ia);if(G=v.layout.get("icon-rotate").evaluate(q,{})*Math.PI/180)da=Math.sin(G),G=Math.cos(G),da=[G,-da,da,G],ba._matMult(da),V._matMult(da),
ia._matMult(da),fa._matMult(da);V=[{tl:ba,tr:V,bl:ia,br:fa,tex:R.paddedRect,writingMode:void 0,glyphOffset:[0,0]}];R=v.layout.get("icon-rotate").evaluate(q,{});ba=new ub(z,w,y,M,O,gb,m,E,I,!1,p.overscaling,R);R=4*V.length;w=p.iconSizeData;z=null;"source"===w.functionType?(z=[d.SIZE_PACK_FACTOR*v.layout.get("icon-size").evaluate(q,{})])[0]>mb&&d.warnOnce(p.layerIds[0]+': Value for "icon-size" is \x3e\x3d 256. Reduce your "icon-size".'):"composite"===w.functionType&&((z=[d.SIZE_PACK_FACTOR*r.compositeIconSizes[0].evaluate(q,
{}),d.SIZE_PACK_FACTOR*r.compositeIconSizes[1].evaluate(q,{})])[0]>mb||z[1]>mb)&&d.warnOnce(p.layerIds[0]+': Value for "icon-size" is \x3e\x3d 256. Reduce your "icon-size".');p.addSymbols(p.icon,V,z,A,Ba,q,!1,y,P.lineStartIndex,P.lineLength)}v=ba?ba.boxStartIndex:p.collisionBoxArray.length;P=ba?ba.boxEndIndex:p.collisionBoxArray.length;p.glyphOffsetArray.length>=d.SymbolBucket.MAX_GLYPHS&&d.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");
p.symbolInstances.emplaceBack(y.x,y.y,0<Ra.length?Ra[0]:-1,1<Ra.length?Ra[1]:-1,wb,Lb,xb,v,P,M,H,ab,R,0)}};if("line"===O){O=0;for(var P=function(h,p,m,q,x){for(var r=[],w=0;w<h.length;w++)for(var y=h[w],v=void 0,z=0;z<y.length-1;z++){var B=y[z],F=y[z+1];B.x<p&&F.x<p||(B.x<p?B=(new d.Point(p,B.y+(p-B.x)/(F.x-B.x)*(F.y-B.y)))._round():F.x<p&&(F=(new d.Point(p,B.y+(p-B.x)/(F.x-B.x)*(F.y-B.y)))._round()),B.y<m&&F.y<m||(B.y<m?B=(new d.Point(B.x+(m-B.y)/(F.y-B.y)*(F.x-B.x),m))._round():F.y<m&&(F=(new d.Point(B.x+
(m-B.y)/(F.y-B.y)*(F.x-B.x),m))._round()),B.x>=q&&F.x>=q||(B.x>=q?B=(new d.Point(q,B.y+(q-B.x)/(F.x-B.x)*(F.y-B.y)))._round():F.x>=q&&(F=(new d.Point(q,B.y+(q-B.x)/(F.x-B.x)*(F.y-B.y)))._round()),B.y>=x&&F.y>=x||(B.y>=x?B=(new d.Point(B.x+(x-B.y)/(F.y-B.y)*(F.x-B.x),x))._round():F.y>=x&&(F=(new d.Point(B.x+(x-B.y)/(F.y-B.y)*(F.x-B.x),x))._round()),v&&B.equals(v[v.length-1])||(v=[B],r.push(v)),v.push(F)))))}return r}(q.geometry,0,0,d.EXTENT,d.EXTENT);O<P.length;O+=1)for(var gb=P[O],wb=0,H=Cb(gb,z,
v,h.vertical||h.horizontal,m,24,w,p.overscaling,d.EXTENT);wb<H.length;wb+=1){var Ra=H[wb],Lb=h.horizontal;Lb&&rd(p,Lb.text,R,Ra)||y(gb,Ra)}}else if("line-center"===O)for(z=0,R=q.geometry;z<R.length;z+=1)O=R[z],1<O.length&&(P=Wa(O,v,h.vertical||h.horizontal,m,24,w))&&y(O,P);else if("Polygon"===q.type)for(w=0,v=d.classifyRings(q.geometry,0);w<v.length;w+=1)z=v[w],R=Qa(z,16),y(z[0],new d.Anchor(R.x,R.y,0));else if("LineString"===q.type)for(w=0,v=q.geometry;w<v.length;w+=1)z=v[w],y(z,new d.Anchor(z[0].x,
z[0].y,0));else if("Point"===q.type)for(w=0,v=q.geometry;w<v.length;w+=1)for(z=0,R=v[w];z<R.length;z+=1)O=R[z],y([O],new d.Anchor(O.x,O.y,0))}function hc(p,q,h,m,x,r,w,v,z,y,F,A){h=function(h,p,m,q,x,r){h=m.layout.get("text-rotate").evaluate(x,{})*Math.PI/180;m=m.layout.get("text-offset").evaluate(x,{}).map(function(d){return 24*d});x=p.positionedGlyphs;for(var w=[],y=0;y<x.length;y++){var v=x[y],z=r[v.fontStack],B=z&&z[v.glyph];if(B&&(z=B.rect)){var F=d.GLYPH_PBF_BORDER+1,A=B.metrics.advance*v.scale/
2,E=q?[v.x+A,v.y]:[0,0],M=q?[0,0]:[v.x+A+m[0],v.y+m[1]],S=(B.metrics.left-F)*v.scale-A+M[0];F=(-B.metrics.top-F)*v.scale+M[1];M=S+z.w*v.scale;var I=F+z.h*v.scale;B=new d.Point(S,F);F=new d.Point(M,F);S=new d.Point(S,I);M=new d.Point(M,I);q&&v.vertical&&(v=new d.Point(-A,A),A=-Math.PI/2,I=new d.Point(5,0),B._rotateAround(A,v)._add(I),F._rotateAround(A,v)._add(I),S._rotateAround(A,v)._add(I),M._rotateAround(A,v)._add(I));h&&(v=Math.sin(h),A=Math.cos(h),v=[A,-v,v,A],B._matMult(v),F._matMult(v),S._matMult(v),
M._matMult(v));w.push({tl:B,tr:F,bl:S,br:M,tex:z,writingMode:p.writingMode,glyphOffset:E})}}return w}(0,h,m,x,r,F);F=p.textSizeData;var M=null;return"source"===F.functionType?(M=[d.SIZE_PACK_FACTOR*m.layout.get("text-size").evaluate(r,{})])[0]>mb&&d.warnOnce(p.layerIds[0]+': Value for "text-size" is \x3e\x3d 256. Reduce your "text-size".'):"composite"===F.functionType&&((M=[d.SIZE_PACK_FACTOR*A.compositeTextSizes[0].evaluate(r,{}),d.SIZE_PACK_FACTOR*A.compositeTextSizes[1].evaluate(r,{})])[0]>mb||
M[1]>mb)&&d.warnOnce(p.layerIds[0]+': Value for "text-size" is \x3e\x3d 256. Reduce your "text-size".'),p.addSymbols(p.text,h,M,w,x,r,z,q,v.lineStartIndex,v.lineLength),y.push(p.text.placedSymbolArray.length-1),4*h.length}function rd(d,q,h,m){d=d.compareText;if(q in d)for(var p=d[q],r=p.length-1;0<=r;r--){if(m.dist(p[r])<h)return!0}else d[q]=[];return d[q].push(m),!1}function Xa(p,q){q=new d.EvaluationParameters(q);for(var h=0;h<p.length;h+=1)p[h].recalculate(q)}function ic(p,q){var h=d.getArrayBuffer(p.request,
function(h,p,r,w){h?q(h):p&&q(null,{vectorTile:new d.mvt.VectorTile(new d.Protobuf(p)),rawData:p,cacheControl:r,expires:w})});return function(){h.cancel();q()}}function Sb(d){var p=0;if(d&&0<d.length){p+=Math.abs(db(d[0]));for(var h=1;h<d.length;h++)p-=Math.abs(db(d[h]))}return p}function db(d){var p,h,m,x,r=0,w=d.length;if(2<w){for(x=0;x<w;x++){x===w-2?(p=w-2,h=w-1,m=0):x===w-1?(p=w-1,h=0,m=1):(p=x,h=x+1,m=x+2);var v=d[p];var z=d[h];r+=(d[m][0]*Math.PI/180-v[0]*Math.PI/180)*Math.sin(z[1]*Math.PI/
180)}r=r*td.RADIUS*td.RADIUS/2}return r}function Pc(d,q){return function(h){return d(h,q)}}function Tb(d,q){q=!!q;d[0]=rb(d[0],q);for(var h=1;h<d.length;h++)d[h]=rb(d[h],!q);return d}function rb(d,q){return 0<=$c.ring(d)===q?d:d.reverse()}function eb(d,q){this.options=q||{};this.features=d;this.length=d.length}function jb(d,q){this.id="number"==typeof d.id?d.id:void 0;this.type=d.type;this.rawGeometry=1===d.type?[d.geometry]:d.geometry;this.properties=d.tags;this.extent=q||4096}function jc(p){var q=
new d.pbf,h;for(h in p.layers)q.writeMessage(3,kc,p.layers[h]);return q.finish()}function kc(d,q){var h;q.writeVarintField(15,d.version||1);q.writeStringField(1,d.name||"");q.writeVarintField(5,d.extent||4096);var p={keys:[],values:[],keycache:{},valuecache:{}};for(h=0;h<d.length;h++)p.feature=d.feature(h),q.writeMessage(2,fa,p);d=p.keys;for(h=0;h<d.length;h++)q.writeStringField(3,d[h]);p=p.values;for(h=0;h<p.length;h++)q.writeMessage(4,L,p[h])}function fa(d,q){var h=d.feature;void 0!==h.id&&q.writeVarintField(1,
h.id);q.writeMessage(2,Eb,d);q.writeVarintField(3,h.type);q.writeMessage(4,V,h)}function Eb(d,q){var h=d.feature,p=d.keys,x=d.values,r=d.keycache;d=d.valuecache;for(var w in h.properties){var v=r[w];void 0===v&&(p.push(w),v=p.length-1,r[w]=v);q.writeVarint(v);v=h.properties[w];var z=typeof v;"string"!==z&&"boolean"!==z&&"number"!==z&&(v=JSON.stringify(v));z=z+":"+v;var y=d[z];void 0===y&&(x.push(v),y=x.length-1,d[z]=y);q.writeVarint(y)}}function V(d,q){var h=d.loadGeometry();d=d.type;for(var p=0,
x=0,r=h.length,w=0;w<r;w++){var v=h[w],z=1;1===d&&(z=v.length);q.writeVarint((z<<3)+1);z=3===d?v.length-1:v.length;for(var y=0;y<z;y++){1===y&&1!==d&&q.writeVarint((z-1<<3)+2);var F=v[y].x-p,A=v[y].y-x;q.writeVarint(F<<1^F>>31);q.writeVarint(A<<1^A>>31);p+=F;x+=A}3===d&&q.writeVarint(7)}}function L(d,q){var h=typeof d;"string"===h?q.writeStringField(1,d):"boolean"===h?q.writeBooleanField(7,d):"number"===h&&(0!=d%1?q.writeDoubleField(3,d):0>d?q.writeSVarintField(6,d):q.writeVarintField(5,d))}function ea(d,
q,h,m,x,r){if(!(x-m<=h)){var p=m+x>>1;!function B(d,h,p,m,q,x){for(;q>m;){if(600<q-m){var r=q-m+1,w=p-m+1,y=Math.log(r),z=.5*Math.exp(2*y/3);y=.5*Math.sqrt(y*z*(r-z)/r)*(0>w-r/2?-1:1);B(d,h,p,Math.max(m,Math.floor(p-w*z/r+y)),Math.min(q,Math.floor(p+(r-w)*z/r+y)),x)}r=h[2*p+x];w=m;z=q;Y(d,h,m,p);for(h[2*q+x]>r&&Y(d,h,m,q);w<z;){Y(d,h,w,z);w++;for(z--;h[2*w+x]<r;)w++;for(;h[2*z+x]>r;)z--}h[2*m+x]===r?Y(d,h,m,z):Y(d,h,++z,q);z<=p&&(m=z+1);p<=z&&(q=z-1)}}(d,q,p,m,x,r%2);ea(d,q,h,m,p-1,r+1);ea(d,q,h,
p+1,x,r+1)}}function Y(d,q,h,m){Ub(d,h,m);Ub(q,2*h,2*m);Ub(q,2*h+1,2*m+1)}function Ub(d,q,h){var p=d[q];d[q]=d[h];d[h]=p}function sd(d,q){d=d.geometry.coordinates;return{x:d[0]/360+.5,y:nc(d[1]),zoom:1/0,index:q,parentId:-1}}function Na(d){return{type:"Feature",id:d.id,properties:mc(d),geometry:{type:"Point",coordinates:[(m=d.x,360*(m-.5)),(p=d.y,h=(180-360*p)*Math.PI/180,360*Math.atan(Math.exp(h))/Math.PI-90)]}};var p,h,m}function mc(d){var p=d.numPoints,h=1E4<=p?Math.round(p/1E3)+"k":1E3<=p?Math.round(p/
100)/10+"k":p;return Gb(Gb({},d.properties),{cluster:!0,cluster_id:d.id,point_count:p,point_count_abbreviated:h})}function nc(d){d=Math.sin(d*Math.PI/180);d=.5-.25*Math.log((1+d)/(1-d))/Math.PI;return 0>d?0:1<d?1:d}function Gb(d,q){for(var h in q)d[h]=q[h];return d}function Ac(d){return d.x}function Qc(d){return d.y}function ha(d,q,h,m){d={id:void 0===d?null:d,type:q,geometry:h,tags:m,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};q=d.geometry;h=d.type;if("Point"===h||"MultiPoint"===h||"LineString"===h)oc(d,
q);else if("Polygon"===h||"MultiLineString"===h)for(h=0;h<q.length;h++)oc(d,q[h]);else if("MultiPolygon"===h)for(h=0;h<q.length;h++)for(m=0;m<q[h].length;m++)oc(d,q[h][m]);return d}function oc(d,q){for(var h=0;h<q.length;h+=3)d.minX=Math.min(d.minX,q[h]),d.minY=Math.min(d.minY,q[h+1]),d.maxX=Math.max(d.maxX,q[h]),d.maxY=Math.max(d.maxY,q[h+1])}function Vb(d,q,h,m){if(q.geometry){var p=q.geometry.coordinates,r=q.geometry.type,w=Math.pow(h.tolerance/((1<<h.maxZoom)*h.extent),2),v=[],z=q.id;if(h.promoteId?
z=q.properties[h.promoteId]:h.generateId&&(z=m||0),"Point"===r)Rc(p,v);else if("MultiPoint"===r)for(var y=0;y<p.length;y++)Rc(p[y],v);else if("LineString"===r)Wb(p,v,w,!1);else if("MultiLineString"===r){if(h.lineMetrics){for(y=0;y<p.length;y++)v=[],Wb(p[y],v,w,!1),d.push(ha(z,"LineString",v,q.properties));return}Bc(p,v,w,!1)}else if("Polygon"===r)Bc(p,v,w,!0);else{if("MultiPolygon"!==r){if("GeometryCollection"===r){for(y=0;y<q.geometry.geometries.length;y++)Vb(d,{id:z,geometry:q.geometry.geometries[y],
properties:q.properties},h,m);return}throw Error("Input data is not a valid GeoJSON object.");}for(y=0;y<p.length;y++)h=[],Bc(p[y],h,w,!0),v.push(h)}d.push(ha(z,r,v,q.properties))}}function Rc(d,q){q.push(d[0]/360+.5);q.push(Sc(d[1]));q.push(0)}function Wb(d,q,h,m){for(var p,r,w=0,v=0;v<d.length;v++){var z=d[v][0]/360+.5,y=Sc(d[v][1]);q.push(z);q.push(y);q.push(0);0<v&&(w+=m?(p*y-z*r)/2:Math.sqrt(Math.pow(z-p,2)+Math.pow(y-r,2)));p=z;r=y}d=q.length-3;q[2]=1;(function I(d,h,m,p){for(var q,r=p,x=m-
h>>1,v=m-h,w=d[h],y=d[h+1],z=d[m],B=d[m+1],A=h+3;A<m;A+=3){var E=d[A];var M=d[A+1],S=w,H=y,G=z-S,L=B-H;if(0!==G||0!==L){var W=((E-S)*G+(M-H)*L)/(G*G+L*L);1<W?(S=z,H=B):0<W&&(S+=G*W,H+=L*W)}E=(G=E-S)*G+(L=M-H)*L;E>r?(q=A,r=E):E===r&&(G=Math.abs(A-x),G<v&&(q=A,v=G))}r>p&&(3<q-h&&I(d,h,q,p),d[q+2]=r,3<m-q&&I(d,q,m,p))})(q,0,d,h);q[d+2]=1;q.size=Math.abs(w);q.start=0;q.end=q.size}function Bc(d,q,h,m){for(var p=0;p<d.length;p++){var r=[];Wb(d[p],r,h,m);q.push(r)}}function Sc(d){d=Math.sin(d*Math.PI/180);
d=.5-.25*Math.log((1+d)/(1-d))/Math.PI;return 0>d?0:1<d?1:d}function Ya(d,q,h,m,x,r,w,v){if(m/=q,r>=(h/=q)&&w<m)return d;if(w<h||r>=m)return null;q=[];for(r=0;r<d.length;r++){w=d[r];var p=w.geometry,y=w.type,F=0===x?w.minX:w.minY,M=0===x?w.maxX:w.maxY;if(F>=h&&M<m)q.push(w);else if(!(M<h||F>=m)){F=[];if("Point"===y||"MultiPoint"===y){M=F;for(var S=h,E=m,B=x,I=0;I<p.length;I+=3){var ma=p[I+B];ma>=S&&ma<=E&&(M.push(p[I]),M.push(p[I+1]),M.push(p[I+2]))}}else if("LineString"===y)pc(p,F,h,m,x,!1,v.lineMetrics);
else if("MultiLineString"===y)A(p,F,h,m,x,!1);else if("Polygon"===y)A(p,F,h,m,x,!0);else if("MultiPolygon"===y)for(M=0;M<p.length;M++)S=[],A(p[M],S,h,m,x,!0),S.length&&F.push(S);if(F.length)if(v.lineMetrics&&"LineString"===y)for(M=0;M<F.length;M++)q.push(ha(w.id,y,F[M],w.tags));else"LineString"!==y&&"MultiLineString"!==y||(1===F.length?(y="LineString",F=F[0]):y="MultiLineString"),"Point"!==y&&"MultiPoint"!==y||(y=3===F.length?"Point":"MultiPoint"),q.push(ha(w.id,y,F,w.tags))}}return q.length?q:null}
function pc(d,q,h,m,x,r,w){for(var p,z,y=Tc(d),F=0===x?Hb:Uc,A=d.start,S=0;S<d.length-3;S+=3){var E=d[S],B=d[S+1],I=d[S+2],ma=d[S+3],G=d[S+4],O=0===x?E:B,R=0===x?ma:G,P=!1;w&&(p=Math.sqrt(Math.pow(E-ma,2)+Math.pow(B-G,2)));if(O<h)R>h&&(z=F(y,E,B,ma,G,h),w&&(y.start=A+p*z));else if(O>m)R<m&&(z=F(y,E,B,ma,G,m),w&&(y.start=A+p*z));else{var H=y,L=B;H.push(E);H.push(L);H.push(I)}R<h&&O>=h&&(z=F(y,E,B,ma,G,h),P=!0);R>m&&O<=m&&(z=F(y,E,B,ma,G,m),P=!0);!r&&P&&(w&&(y.end=A+p*z),q.push(y),y=Tc(d));w&&(A+=p)}I=
d.length-3;E=d[I];B=d[I+1];I=d[I+2];(O=0===x?E:B)>=h&&O<=m&&(d=y,h=I,d.push(E),d.push(B),d.push(h));I=y.length-3;r&&3<=I&&(y[I]!==y[0]||y[I+1]!==y[1])&&(r=y,E=y[1],B=y[2],r.push(y[0]),r.push(E),r.push(B));y.length&&q.push(y)}function Tc(d){var p=[];return p.size=d.size,p.start=d.start,p.end=d.end,p}function A(d,q,h,m,x,r){for(var p=0;p<d.length;p++)pc(d[p],q,h,m,x,r,!1)}function Hb(d,q,h,m,x,r){q=(r-q)/(m-q);return d.push(r),d.push(h+(x-h)*q),d.push(1),q}function Uc(d,q,h,m,x,r){h=(r-h)/(x-h);return d.push(q+
(m-q)*h),d.push(r),d.push(1),h}function fb(d,q){for(var h=[],m=0;m<d.length;m++){var p=d[m],r=p.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)var w=Ib(p.geometry,q);else if("MultiLineString"===r||"Polygon"===r){w=[];for(var v=0;v<p.geometry.length;v++)w.push(Ib(p.geometry[v],q))}else if("MultiPolygon"===r)for(w=[],v=0;v<p.geometry.length;v++){for(var z=[],y=0;y<p.geometry[v].length;y++)z.push(Ib(p.geometry[v][y],q));w.push(z)}h.push(ha(p.id,r,w,p.tags))}return h}function Ib(d,q){var h=[];
h.size=d.size;void 0!==d.start&&(h.start=d.start,h.end=d.end);for(var m=0;m<d.length;m+=3)h.push(d[m]+q,d[m+1],d[m+2]);return h}function qc(d,q){if(d.transformed)return d;var h,m,p=1<<d.z,r=d.x,w=d.y;for(h=0;h<d.features.length;h++){var v=d.features[h],z=v.geometry;var y=v.type;if(v.geometry=[],1===y)for(y=0;y<z.length;y+=2)v.geometry.push([Math.round(q*(z[y]*p-r)),Math.round(q*(z[y+1]*p-w))]);else for(y=0;y<z.length;y++){var F=[];for(m=0;m<z[y].length;m+=2)F.push([Math.round(q*(z[y][m]*p-r)),Math.round(q*
(z[y][m+1]*p-w))]);v.geometry.push(F)}}return d.transformed=!0,d}function Jb(d,q,h,m,x,r){var p=m*m;if(0<m&&q.size<(x?p:m))h.numPoints+=q.length/3;else{for(var v=[],z=0;z<q.length;z+=3)(0===m||q[z+2]>p)&&(h.numSimplified++,v.push(q[z]),v.push(q[z+1])),h.numPoints++;if(x){q=m=0;h=v.length;for(x=h-2;q<h;x=q,q+=2)m+=(v[q]-v[x])*(v[q+1]+v[x+1]);if(0<m===r)for(q=0,h=v.length;q<h/2;q+=2)r=v[q],m=v[q+1],v[q]=v[h-2-q],v[q+1]=v[h-1-q],v[h-2-q]=r,v[h-1-q]=m}d.push(v)}}function G(d,q){var h=(q=this.options=
function(d,h){for(var m in h)d[m]=h[m];return d}(Object.create(this.options),q)).debug;if(h&&console.time("preprocess data"),0>q.maxZoom||24<q.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw Error("promoteId and generateId cannot be used together.");d=function(d,h){var m=[];if("FeatureCollection"===d.type)for(var p=0;p<d.features.length;p++)Vb(m,d.features[p],h,p);else"Feature"===d.type?Vb(m,d,h):Vb(m,{geometry:d},h);return m}(d,q);this.tiles={};this.tileCoords=
[];h&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(d=function(d,h){var m=h.buffer/h.extent,p=d,q=Ya(d,1,-1-m,m,0,-1,2,h),x=Ya(d,1,1-m,2+m,0,-1,2,h);return(q||x)&&(p=Ya(d,1,-m,1+m,0,-1,2,h)||[],q&&(p=fb(q,1).concat(p)),x&&(p=p.concat(fb(x,-1)))),p}(d,q)).length&&this.splitTile(d,0,0,0);h&&(d.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),
console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pa(d,q){d=d.tileID.canonical;if(!this._geoJSONIndex)return q(null,null);d=this._geoJSONIndex.getTile(d.z,d.x,d.y);if(!d)return q(null,null);d=new Fc(d.features);var h=vb(d);0===h.byteOffset&&h.byteLength===h.buffer.byteLength||(h=new Uint8Array(h));q(null,{vectorTile:d,rawData:h.buffer})}var lb=function(d){d&&this.replace(d)};lb.prototype.replace=function(d){this._layerConfigs={};this._layers=
{};this.update(d,[])};lb.prototype.update=function(p,q){for(var h=this,m=0;m<p.length;m+=1){var x=p[m];h._layerConfigs[x.id]=x;x=h._layers[x.id]=d.createStyleLayer(x);x._featureFilter=d.featureFilter(x.filter)}for(p=0;p<q.length;p+=1)m=q[p],delete h._layerConfigs[m],delete h._layers[m];this.familiesBySource={};q=0;for(p=function(h){for(var m={},p=0;p<h.length;p++){var q=h[p];for(var r="",x=0,v=d.refProperties;x<v.length;x+=1)r+="/"+gc(q[v[x]]);q=r;(r=m[q])||(r=m[q]=[]);r.push(h[p])}h=[];for(var w in m)h.push(m[w]);
return h}(d.values(this._layerConfigs));q<p.length;q+=1){m=p[q].map(function(d){return h._layers[d.id]});var r=m[0];if("none"!==r.visibility){var w=r.source||"";(x=h.familiesBySource[w])||(x=h.familiesBySource[w]={});r=r.sourceLayer||"_geojsonTileLayer";(w=x[r])||(w=x[r]=[]);w.push(m)}}};var ub=function(p,q,h,m,x,r,w,v,z,y,A,M){var F=w.top*v-z,E=w.bottom*v+z,B=w.left*v-z;w=w.right*v+z;(this.boxStartIndex=p.length,y)?(M=E-F,0<M&&(M=Math.max(10*v,M),this._addLineCollisionCircles(p,q,h,h.segment,w-B,
M,m,x,r,A))):(M&&(q=new d.Point(B,F),v=new d.Point(w,F),A=new d.Point(B,E),E=new d.Point(w,E),B=M*Math.PI/180,q._rotate(B),v._rotate(B),A._rotate(B),E._rotate(B),B=Math.min(q.x,v.x,A.x,E.x),w=Math.max(q.x,v.x,A.x,E.x),F=Math.min(q.y,v.y,A.y,E.y),E=Math.max(q.y,v.y,A.y,E.y)),p.emplaceBack(h.x,h.y,B,F,w,E,m,x,r,0,0));this.boxEndIndex=p.length};ub.prototype._addLineCollisionCircles=function(d,q,h,m,x,r,w,v,z,y){var p=r/2,A=Math.floor(x/p)||1;y=Math.floor(A*(1+.4*Math.log(y)/Math.LN2)/2);var S=-r/2,E=
h;m+=1;h=S;var B=-x/2,I=B-x/4;do{if(0>--m){if(h>B)return;m=0;break}h-=q[m].dist(E);E=q[m]}while(h>I);E=q[m].dist(q[m+1]);for(I=-y;I<A+y;I++){var G=I*p,H=B+G;if(0>G&&(H+=G),G>x&&(H+=G-x),!(H<h)){for(;h+E<H;){if(h+=E,++m+1>=q.length)return;E=q[m].dist(q[m+1])}G=H-h;var O=q[m];G=q[m+1].sub(O)._unit()._mult(G)._add(O)._round();d.emplaceBack(G.x,G.y,-r/2,-r/2,r/2,r/2,w,v,z,r/2,Math.abs(H-S)<p?0:.8*(H-S))}}};var Wd=Sa;Sa.prototype={push:function(d){this.data.push(d);this.length++;this._up(this.length-1)},
pop:function(){if(0!==this.length){var d=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),d}},peek:function(){return this.data[0]},_up:function(d){for(var p=this.data,h=this.compare,m=p[d];0<d;){var x=d-1>>1,r=p[x];if(0<=h(m,r))break;p[d]=r;d=x}p[d]=m},_down:function(d){for(var p=this.data,h=this.compare,m=this.length>>1,x=p[d];d<m;){var r=1+(d<<1),w=r+1,v=p[r];if(w<this.length&&0>h(p[w],v)&&(r=w,v=p[w]),0<=h(v,x))break;p[d]=v;d=
r}p[d]=x}};Wd.default=Sa;var W=d.createCommonjsModule(function(d){d.exports=function(d,h){var m,p;var q=3&d.length;var w=d.length-q;for(p=0;p<w;){var v=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24;++p;h=27492+(65535&(m=5*(65535&(h=(h^=461845907*(65535&(v=(v=3432918353*(65535&v)+((3432918353*(v>>>16)&65535)<<16)&4294967295)<<15|v>>>17))+((461845907*(v>>>16)&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(m>>>
16)&65535)<<16)}switch(v=0,q){case 3:v^=(255&d.charCodeAt(p+2))<<16;case 2:v^=(255&d.charCodeAt(p+1))<<8;case 1:h^=461845907*(65535&(v=(v=3432918353*(65535&(v^=255&d.charCodeAt(p)))+((3432918353*(v>>>16)&65535)<<16)&4294967295)<<15|v>>>17))+((461845907*(v>>>16)&65535)<<16)&4294967295}return h^=d.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^h>>>16)>>>0}}),Cc=d.createCommonjsModule(function(d){d.exports=
function(d,h){var m=d.length;h^=m;for(var p=0;4<=m;){var q=1540483477*(65535&(q=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+((1540483477*(q>>>16)&65535)<<16);h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(q=1540483477*(65535&(q^=q>>>24))+((1540483477*(q>>>16)&65535)<<16));m-=4;++p}switch(m){case 3:h^=(255&d.charCodeAt(p+2))<<16;case 2:h^=(255&d.charCodeAt(p+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(p)))+((1540483477*
(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^h>>>15)>>>0}}),Xb=W;Xb.murmur3=W;Xb.murmur2=Cc;var mb=65535,Dc=function(p){var q={},h=[];for(y in p){var m=p[y],x=q[y]={},r;for(r in m){var w=m[+r];if(w&&0!==w.bitmap.width&&0!==w.bitmap.height){var v={x:0,y:0,w:w.bitmap.width+2,h:w.bitmap.height+2};h.push(v);x[r]={rect:v,metrics:w.metrics}}}}h=d.potpack(h);h=new d.AlphaImage({width:h.w||1,height:h.h||1});for(var z in p){var y=p[z];for(var A in y)(m=
y[+A])&&0!==m.bitmap.width&&0!==m.bitmap.height&&(x=q[z][A].rect,d.AlphaImage.copy(m.bitmap,h,{x:0,y:0},{x:x.x+1,y:x.y+1},m.bitmap))}this.image=h;this.positions=q};d.register("GlyphAtlas",Dc);var Ec=function(p){this.tileID=new d.OverscaledTileID(p.tileID.overscaledZ,p.tileID.wrap,p.tileID.canonical.z,p.tileID.canonical.x,p.tileID.canonical.y);this.uid=p.uid;this.zoom=p.zoom;this.pixelRatio=p.pixelRatio;this.tileSize=p.tileSize;this.source=p.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=
p.showCollisionBoxes;this.collectResourceTiming=!!p.collectResourceTiming;this.returnDependencies=!!p.returnDependencies};Ec.prototype.parse=function(p,q,h,m){function x(){if(z)return m(z);if(y&&A&&M){var h=new Dc(y),p=new d.ImageAtlas(A,M),q;for(q in S){var r=S[q];r instanceof d.SymbolBucket?(Xa(r.layers,this.zoom),Td(r,y,h.positions,A,p.iconPositions,this.showCollisionBoxes)):r.hasPattern&&(r instanceof d.LineBucket||r instanceof d.FillBucket||r instanceof d.FillExtrusionBucket)&&(Xa(r.layers,this.zoom),
r.addFeatures(E,p.patternPositions))}this.status="done";m(null,{buckets:d.values(S).filter(function(d){return!d.isEmpty()}),featureIndex:v,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:h.image,imageAtlas:p,glyphMap:this.returnDependencies?y:null,iconMap:this.returnDependencies?A:null,glyphPositions:this.returnDependencies?h.positions:null})}}var r=this;this.status="parsing";this.data=p;this.collisionBoxArray=new d.CollisionBoxArray;var w=new d.DictionaryCoder(Object.keys(p.layers).sort()),
v=new d.FeatureIndex(this.tileID);v.bucketLayerIDs=[];var z,y,A,M,S={},E={featureIndex:v,iconDependencies:{},patternDependencies:{},glyphDependencies:{}};q=q.familiesBySource[this.source];for(var B in q){var I=p.layers[B];if(I){1===I.version&&d.warnOnce('Vector tile source "'+r.source+'" layer "'+B+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var G=w.encode(B),H=[],O=0;O<I.length;O++){var R=I.feature(O);H.push({feature:R,index:O,sourceLayerIndex:G})}I=0;
for(O=q[B];I<O.length;I+=1){R=O[I];var P=R[0];P.minzoom&&r.zoom<Math.floor(P.minzoom)||P.maxzoom&&r.zoom>=P.maxzoom||"none"===P.visibility||(Xa(R,r.zoom),(S[P.id]=P.createBucket({index:v.bucketLayerIDs.length,layers:R,zoom:r.zoom,pixelRatio:r.pixelRatio,overscaling:r.overscaling,collisionBoxArray:r.collisionBoxArray,sourceLayerIndex:G,sourceID:r.source})).populate(H,E),v.bucketLayerIDs.push(R.map(function(d){return d.id})))}}}p=d.mapObject(E.glyphDependencies,function(d){return Object.keys(d).map(Number)});
Object.keys(p).length?h.send("getGlyphs",{uid:this.uid,stacks:p},function(d,h){z||(z=d,y=h,x.call(r))}):y={};p=Object.keys(E.iconDependencies);p.length?h.send("getImages",{icons:p},function(d,h){z||(z=d,A=h,x.call(r))}):A={};p=Object.keys(E.patternDependencies);p.length?h.send("getImages",{icons:p},function(d,h){z||(z=d,M=h,x.call(r))}):M={};x.call(this)};var rc="undefined"!=typeof performance,Va={getEntriesByName:function(d){return!!(rc&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(d)},
mark:function(d){return!!(rc&&performance&&performance.mark)&&performance.mark(d)},measure:function(d,q,h){return!!(rc&&performance&&performance.measure)&&performance.measure(d,q,h)},clearMarks:function(d){return!!(rc&&performance&&performance.clearMarks)&&performance.clearMarks(d)},clearMeasures:function(d){return!!(rc&&performance&&performance.clearMeasures)&&performance.clearMeasures(d)}};W=function(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()};
Va.mark(this._marks.start)};W.prototype.finish=function(){Va.mark(this._marks.end);var d=Va.getEntriesByName(this._marks.measure);return 0===d.length&&(Va.measure(this._marks.measure,this._marks.start,this._marks.end),d=Va.getEntriesByName(this._marks.measure),Va.clearMarks(this._marks.start),Va.clearMarks(this._marks.end),Va.clearMeasures(this._marks.measure)),d};Va.Performance=W;var ka=function(d,q,h){this.actor=d;this.layerIndex=q;this.loadVectorData=h||ic;this.loading={};this.loaded={}};ka.prototype.loadTile=
function(p,q){var h=this,m=p.uid;this.loading||(this.loading={});var x=!!(p&&p.request&&p.request.collectResourceTiming)&&new Va.Performance(p.request),r=this.loading[m]=new Ec(p);r.abort=this.loadVectorData(p,function(p,v){if(delete h.loading[m],p||!v)return r.status="done",h.loaded[m]=r,q(p);var w=v.rawData,y={};v.expires&&(y.expires=v.expires);v.cacheControl&&(y.cacheControl=v.cacheControl);var A={};x&&(p=x.finish())&&(A.resourceTiming=JSON.parse(JSON.stringify(p)));r.vectorTile=v.vectorTile;r.parse(v.vectorTile,
h.layerIndex,h.actor,function(h,m){if(h||!m)return q(h);q(null,d.extend({rawTileData:w.slice(0)},m,y,A))});h.loaded=h.loaded||{};h.loaded[m]=r})};ka.prototype.reloadTile=function(d,q){var h=this.loaded,m=d.uid,p=this;if(h&&h[m]){var r=h[m];r.showCollisionBoxes=d.showCollisionBoxes;d=function(d,h){var m=r.reloadCallback;m&&(delete r.reloadCallback,r.parse(r.vectorTile,p.layerIndex,p.actor,m));q(d,h)};"parsing"===r.status?r.reloadCallback=d:"done"===r.status&&(r.vectorTile?r.parse(r.vectorTile,this.layerIndex,
this.actor,d):d())}};ka.prototype.abortTile=function(d,q){var h=this.loading;d=d.uid;h&&h[d]&&h[d].abort&&(h[d].abort(),delete h[d]);q()};ka.prototype.removeTile=function(d,q){var h=this.loaded;d=d.uid;h&&h[d]&&delete h[d];q()};var Zc=function(){this.loaded={}};Zc.prototype.loadTile=function(p,q){var h=p.uid;p=new d.DEMData(h,p.rawImageData,p.encoding);this.loaded=this.loaded||{};this.loaded[h]=p;q(null,p)};Zc.prototype.removeTile=function(d){var p=this.loaded;d=d.uid;p&&p[d]&&delete p[d]};var td=
{RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},$c={geometry:function h(d){var m,q=0;switch(d.type){case "Polygon":return Sb(d.coordinates);case "MultiPolygon":for(m=0;m<d.coordinates.length;m++)q+=Sb(d.coordinates[m]);return q;case "Point":case "MultiPoint":case "LineString":case "MultiLineString":return 0;case "GeometryCollection":for(m=0;m<d.geometries.length;m++)q+=h(d.geometries[m]);return q}},ring:db},ud=function x(d,m){switch(d&&d.type||null){case "FeatureCollection":return d.features=
d.features.map(Pc(x,m)),d;case "Feature":return d.geometry=x(d.geometry,m),d;case "Polygon":case "MultiPolygon":return"Polygon"===d.type?d.coordinates=Tb(d.coordinates,m):"MultiPolygon"===d.type&&(d.coordinates=d.coordinates.map(Pc(Tb,m))),d;default:return d}},Za=d.mvt.VectorTileFeature.prototype.toGeoJSON,Kb=function(h){this._feature=h;this.extent=d.EXTENT;this.type=h.type;this.properties=h.tags;"id"in h&&!isNaN(h.id)&&(this.id=parseInt(h.id,10))};Kb.prototype.loadGeometry=function(){if(1===this._feature.type){for(var h=
[],m=0,x=this._feature.geometry;m<x.length;m+=1){var r=x[m];h.push([new d.Point(r[0],r[1])])}return h}h=[];m=0;for(x=this._feature.geometry;m<x.length;m+=1){r=[];for(var w=0,v=x[m];w<v.length;w+=1){var z=v[w];r.push(new d.Point(z[0],z[1]))}h.push(r)}return h};Kb.prototype.toGeoJSON=function(d,m,x){return Za.call(this,d,m,x)};var Fc=function(h){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=d.EXTENT;this.length=h.length;this._features=h};Fc.prototype.feature=function(d){return new Kb(this._features[d])};
W=d.vectorTile.VectorTileFeature;eb.prototype.feature=function(d){return new jb(this.features[d],this.options.extent)};jb.prototype.loadGeometry=function(){var h=this.rawGeometry;this.geometry=[];for(var m=0;m<h.length;m++){for(var x=h[m],r=[],w=0;w<x.length;w++)r.push(new d.Point$1(x[w][0],x[w][1]));this.geometry.push(r)}return this.geometry};jb.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var d=this.geometry,m=1/0,x=-1/0,r=1/0,w=-1/0,v=0;v<d.length;v++)for(var z=d[v],y=0;y<z.length;y++){var A=
z[y];m=Math.min(m,A.x);x=Math.max(x,A.x);r=Math.min(r,A.y);w=Math.max(w,A.y)}return[m,r,x,w]};jb.prototype.toGeoJSON=W.prototype.toGeoJSON;var vb=jc;vb.fromVectorTileJs=jc;vb.fromGeojsonVt=function(d,m){m=m||{};var h={},r;for(r in d)h[r]=new eb(d[r].features,m),h[r].name=r,h[r].version=m.version,h[r].extent=m.extent;return jc({layers:h})};vb.GeoJSONWrapper=eb;var H=function(d){return d[0]},vd=function(d){return d[1]},Gc=function(d,m,x,r,w){void 0===m&&(m=H);void 0===x&&(x=vd);void 0===r&&(r=64);void 0===
w&&(w=Float64Array);this.nodeSize=r;this.points=d;var h=this.ids=new (65536>d.length?Uint16Array:Uint32Array)(d.length);w=this.coords=new w(2*d.length);for(var z=0;z<d.length;z++)h[z]=z,w[2*z]=m(d[z]),w[2*z+1]=x(d[z]);ea(h,w,r,0,h.length-1,0)};Gc.prototype.range=function(d,m,x,r){for(var h=this.ids,v=this.coords,z=this.nodeSize,y,A,M=[0,h.length-1,0],G=[];M.length;){var E=M.pop(),B=M.pop(),I=M.pop();if(B-I<=z)for(E=I;E<=B;E++)y=v[2*E],A=v[2*E+1],y>=d&&y<=x&&A>=m&&A<=r&&G.push(h[E]);else{var H=Math.floor((I+
B)/2);y=v[2*H];A=v[2*H+1];y>=d&&y<=x&&A>=m&&A<=r&&G.push(h[H]);var L=(E+1)%2;(0===E?d<=y:m<=A)&&(M.push(I),M.push(H-1),M.push(L));(0===E?x>=y:r>=A)&&(M.push(H+1),M.push(B),M.push(L))}}return G};Gc.prototype.within=function(d,m,x){for(var h=this.ids,w=this.coords,v=this.nodeSize,z=[0,h.length-1,0],y=[],A=x*x;z.length;){var M=z.pop(),G=z.pop(),E=z.pop();if(G-E<=v)for(M=E;M<=G;M++){E=w[2*M]-d;var B=w[2*M+1]-m;E*E+B*B<=A&&y.push(h[M])}else{B=Math.floor((E+G)/2);var I=w[2*B],H=w[2*B+1],L=I-d,O=H-m;L*L+
O*O<=A&&y.push(h[B]);L=(M+1)%2;(0===M?d-x<=I:m-x<=H)&&(z.push(E),z.push(B-1),z.push(L));(0===M?d+x>=I:m+x>=H)&&(z.push(B+1),z.push(G),z.push(L))}}return y};var Yd={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(d){return d}},Oa=function(d){this.options=Gb(Object.create(Yd),d);this.trees=Array(this.options.maxZoom+1)};Oa.prototype.load=function(d){var h=this.options,x=h.log,r=h.minZoom,w=h.maxZoom;h=h.nodeSize;x&&console.time("total time");
var v="prepare "+d.length+" points";x&&console.time(v);this.points=d;for(var z=[],y=0;y<d.length;y++)d[y].geometry&&z.push(sd(d[y],y));this.trees[w+1]=new Gc(z,Ac,Qc,h,Float32Array);x&&console.timeEnd(v);for(d=w;d>=r;d--)w=+Date.now(),z=this._cluster(z,d),this.trees[d]=new Gc(z,Ac,Qc,h,Float32Array),x&&console.log("z%d: %d clusters in %dms",d,z.length,+Date.now()-w);return x&&console.timeEnd("total time"),this};Oa.prototype.getClusters=function(d,m){var h=((d[0]+180)%360+360)%360-180,r=Math.max(-90,
Math.min(90,d[1])),w=180===d[2]?180:((d[2]+180)%360+360)%360-180,v=Math.max(-90,Math.min(90,d[3]));if(360<=d[2]-d[0])h=-180,w=180;else if(h>w)return h=this.getClusters([h,r,180,v],m),r=this.getClusters([-180,r,w,v],m),h.concat(r);m=this.trees[this._limitZoom(m)];d=[];var z=0;for(r=m.range(h/360+.5,nc(v),w/360+.5,nc(r));z<r.length;z+=1)w=m.points[r[z]],d.push(w.numPoints?Na(w):this.points[w.index]);return d};Oa.prototype.getChildren=function(d){var h=d%32,x=this.trees[h];if(!x)throw Error("No cluster with the specified id.");
var r=x.points[d>>5];if(!r)throw Error("No cluster with the specified id.");var w=[],v=0;for(h=x.within(r.x,r.y,this.options.radius/(this.options.extent*Math.pow(2,h-1)));v<h.length;v+=1)r=x.points[h[v]],r.parentId===d&&w.push(r.numPoints?Na(r):this.points[r.index]);if(0===w.length)throw Error("No cluster with the specified id.");return w};Oa.prototype.getLeaves=function(d,m,x){var h=[];return this._appendLeaves(h,d,m||10,x||0,0),h};Oa.prototype.getTile=function(d,m,x){var h=this.trees[this._limitZoom(d)];
d=Math.pow(2,d);var w=this.options;w=w.radius/w.extent;var v=(x-w)/d,z=(x+1+w)/d,y={features:[]};return this._addTileFeatures(h.range((m-w)/d,v,(m+1+w)/d,z),h.points,m,x,d,y),0===m&&this._addTileFeatures(h.range(1-w/d,v,1,z),h.points,d,x,d,y),m===d-1&&this._addTileFeatures(h.range(0,v,w/d,z),h.points,-1,x,d,y),y.features.length?y:null};Oa.prototype.getClusterExpansionZoom=function(d){for(var h=d%32-1;h<=this.options.maxZoom;){d=this.getChildren(d);if(h++,1!==d.length)break;d=d[0].properties.cluster_id}return h};
Oa.prototype._appendLeaves=function(d,m,x,r,w){var h=0;for(m=this.getChildren(m);h<m.length;h+=1){var z=m[h],y=z.properties;if(y&&y.cluster?w+y.point_count<=r?w+=y.point_count:w=this._appendLeaves(d,y.cluster_id,x,r,w):w<r?w++:d.push(z),d.length===x)break}return w};Oa.prototype._addTileFeatures=function(d,m,x,r,w,v){for(var h=0;h<d.length;h+=1){var y=m[d[h]],A={type:1,geometry:[[Math.round(this.options.extent*(y.x*w-x)),Math.round(this.options.extent*(y.y*w-r))]],tags:y.numPoints?mc(y):this.points[y.index].properties};
y=y.numPoints?y.id:this.points[y.index].id;void 0!==y&&(A.id=y);v.features.push(A)}};Oa.prototype._limitZoom=function(d){return Math.max(this.options.minZoom,Math.min(d,this.options.maxZoom+1))};Oa.prototype._cluster=function(d,m){var h=[],r=this.options,w=r.reduce,v=r.initial;r=r.radius/(r.extent*Math.pow(2,m));for(var z=0;z<d.length;z++){var y=d[z];if(!(y.zoom<=m)){y.zoom=m;var A=this.trees[m+1],M=A.within(y.x,y.y,r),G=y.numPoints||1,E=y.x*G,B=y.y*G,I=null;w&&(I=v(),this._accumulate(I,y));for(var H=
(z<<5)+(m+1),L=0;L<M.length;L+=1){var O=A.points[M[L]];if(!(O.zoom<=m)){O.zoom=m;var R=O.numPoints||1;E+=O.x*R;B+=O.y*R;G+=R;O.parentId=H;w&&this._accumulate(I,O)}}1===G?h.push(y):(y.parentId=H,h.push({x:E/G,y:B/G,zoom:1/0,id:H,parentId:-1,numPoints:G,properties:I}))}}return h};Oa.prototype._accumulate=function(d,m){var h=this.options,r=h.map;(0,h.reduce)(d,m.numPoints?m.properties:r(this.points[m.index].properties))};G.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,
buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};G.prototype.splitTile=function(d,m,x,r,w,v,z){for(var h=[d,m,x,r],A=this.options,G=A.debug;h.length;){r=h.pop();x=h.pop();m=h.pop();d=h.pop();var H=1<<m,E=32*((1<<m)*r+x)+m,B=this.tiles[E],I;if(I=!B){1<G&&console.time("creation");B=this.tiles;I=d;for(var L=A,W=m===L.maxZoom?0:L.tolerance/((1<<m)*L.extent),O={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:x,y:r,z:m,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},R=0;R<
I.length;R++){O.numFeatures++;var P=void 0,V=O,Y=I[R],da=W,ha=L,fa=Y.geometry,ia=Y.type,ka=[];if("Point"===ia||"MultiPoint"===ia)for(var ea=0;ea<fa.length;ea+=3)ka.push(fa[ea]),ka.push(fa[ea+1]),V.numPoints++,V.numSimplified++;else if("LineString"===ia)Jb(ka,fa,V,da,!1,!1);else if("MultiLineString"===ia||"Polygon"===ia)for(ea=0;ea<fa.length;ea++)Jb(ka,fa[ea],V,da,"Polygon"===ia,0===ea);else if("MultiPolygon"===ia)for(var pa=0;pa<fa.length;pa++){var la=fa[pa];for(ea=0;ea<la.length;ea++)Jb(ka,la[ea],
V,da,!0,0===ea)}if(ka.length){da=Y.tags||null;if("LineString"===ia&&ha.lineMetrics){for(P in da={},Y.tags)da[P]=Y.tags[P];da.mapbox_clip_start=fa.start/fa.size;da.mapbox_clip_end=fa.end/fa.size}P={geometry:ka,type:"Polygon"===ia||"MultiPolygon"===ia?3:"LineString"===ia||"MultiLineString"===ia?2:1,tags:da};null!==Y.id&&(P.id=Y.id);V.features.push(P)}V=I[R].minX;Y=I[R].minY;P=I[R].maxX;ha=I[R].maxY;V<O.minX&&(O.minX=V);Y<O.minY&&(O.minY=Y);P>O.maxX&&(O.maxX=P);ha>O.maxY&&(O.maxY=ha)}I=(B=B[E]=O,this.tileCoords.push({z:m,
x:x,y:r}),G)}I&&(1<G&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",m,x,r,B.numFeatures,B.numPoints,B.numSimplified),console.timeEnd("creation")),E="z"+m,this.stats[E]=(this.stats[E]||0)+1,this.total++);if(B.source=d,w){if(m===A.maxZoom||m===w)continue;E=1<<w-m;if(x!==Math.floor(v/E)||r!==Math.floor(z/E))continue}else if(m===A.indexMaxZoom||B.numPoints<=A.indexMaxPoints)continue;if(B.source=null,0!==d.length)1<G&&console.time("clipping"),R=.5*A.buffer/A.extent,V=.5-R,Y=
.5+R,P=1+R,E=I=L=W=null,O=Ya(d,H,x-R,x+Y,0,B.minX,B.maxX,A),d=Ya(d,H,x+V,x+P,0,B.minX,B.maxX,A),O&&(E=Ya(O,H,r-R,r+Y,1,B.minY,B.maxY,A),I=Ya(O,H,r+V,r+P,1,B.minY,B.maxY,A)),d&&(L=Ya(d,H,r-R,r+Y,1,B.minY,B.maxY,A),W=Ya(d,H,r+V,r+P,1,B.minY,B.maxY,A)),1<G&&console.timeEnd("clipping"),h.push(E||[],m+1,2*x,2*r),h.push(I||[],m+1,2*x,2*r+1),h.push(L||[],m+1,2*x+1,2*r),h.push(W||[],m+1,2*x+1,2*r+1)}};G.prototype.getTile=function(d,m,x){var h=this.options,w=h.extent;h=h.debug;if(0>d||24<d)return null;var v=
1<<d;v=m=(m%v+v)%v;v=32*((1<<d)*x+v)+d;if(this.tiles[v])return qc(this.tiles[v],w);1<h&&console.log("drilling down to z%d-%d-%d",d,m,x);for(var z,y=d,A=m,G=x;!z&&0<y;)y--,A=Math.floor(A/2),G=Math.floor(G/2),z=this.tiles[32*((1<<y)*G+A)+y];return z&&z.source?(1<h&&console.log("found parent tile z%d-%d-%d",y,A,G),1<h&&console.time("drilling down"),this.splitTile(z.source,y,A,G,d,m,x),1<h&&console.timeEnd("drilling down"),this.tiles[v]?qc(this.tiles[v],w):null):null};var wd=function(h){function m(d,
m,w){h.call(this,d,m,pa);w&&(this.loadGeoJSON=w)}return h&&(m.__proto__=h),m.prototype=Object.create(h&&h.prototype),m.prototype.constructor=m,m.prototype.loadData=function(d,h){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=h;this._pendingLoadDataParams=d;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},m.prototype._loadData=function(){var d=this;if(this._pendingCallback&&this._pendingLoadDataParams){var h=
this._pendingCallback,m=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;var v=!!(m&&m.request&&m.request.collectResourceTiming)&&new Va.Performance(m.request);this.loadGeoJSON(m,function(r,x){if(r||!x)return h(r);if("object"!=typeof x)return h(Error("Input data is not a valid GeoJSON object."));ud(x,!0);try{d._geoJSONIndex=m.cluster?(new Oa(m.superclusterOptions)).load(x.features):new G(x,m.geojsonVtOptions)}catch(F){return h(F)}d.loaded={};r={};v&&(x=v.finish())&&
(r.resourceTiming={},r.resourceTiming[m.source]=JSON.parse(JSON.stringify(x)));h(null,r)})}},m.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},m.prototype.reloadTile=function(d,m){var r=this.loaded,x=d.uid;return r&&r[x]?h.prototype.reloadTile.call(this,d,m):this.loadTile(d,m)},m.prototype.loadGeoJSON=function(h,m){if(h.request)d.getJSON(h.request,m);else{if("string"!=typeof h.data)return m(Error("Input data is not a valid GeoJSON object."));
try{return m(null,JSON.parse(h.data))}catch(w){return m(Error("Input data is not a valid GeoJSON object."))}}},m.prototype.removeSource=function(d,h){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});h()},m.prototype.getClusterExpansionZoom=function(d,h){h(null,this._geoJSONIndex.getClusterExpansionZoom(d.clusterId))},m.prototype.getClusterChildren=function(d,h){h(null,this._geoJSONIndex.getChildren(d.clusterId))},m.prototype.getClusterLeaves=function(d,h){h(null,this._geoJSONIndex.getLeaves(d.clusterId,
d.limit,d.offset))},m}(ka);W=function(h){var m=this;this.self=h;this.actor=new d.Actor(h,this);this.layerIndexes={};this.workerSourceTypes={vector:ka,geojson:wd};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(d,h){if(m.workerSourceTypes[d])throw Error('Worker source with name "'+d+'" already registered.');m.workerSourceTypes[d]=h};this.self.registerRTLTextPlugin=function(h){if(d.plugin.isLoaded())throw Error("RTL text plugin already registered.");d.plugin.applyArabicShaping=
h.applyArabicShaping;d.plugin.processBidirectionalText=h.processBidirectionalText;d.plugin.processStyledBidirectionalText=h.processStyledBidirectionalText}};return W.prototype.setReferrer=function(d,m){this.referrer=m},W.prototype.setLayers=function(d,m,x){this.getLayerIndex(d).replace(m);x()},W.prototype.updateLayers=function(d,m,x){this.getLayerIndex(d).update(m.layers,m.removedIds);x()},W.prototype.loadTile=function(d,m,x){this.getWorkerSource(d,m.type,m.source).loadTile(m,x)},W.prototype.loadDEMTile=
function(d,m,x){this.getDEMWorkerSource(d,m.source).loadTile(m,x)},W.prototype.reloadTile=function(d,m,x){this.getWorkerSource(d,m.type,m.source).reloadTile(m,x)},W.prototype.abortTile=function(d,m,x){this.getWorkerSource(d,m.type,m.source).abortTile(m,x)},W.prototype.removeTile=function(d,m,x){this.getWorkerSource(d,m.type,m.source).removeTile(m,x)},W.prototype.removeDEMTile=function(d,m){this.getDEMWorkerSource(d,m.source).removeTile(m)},W.prototype.removeSource=function(d,m,x){if(this.workerSources[d]&&
this.workerSources[d][m.type]&&this.workerSources[d][m.type][m.source]){var h=this.workerSources[d][m.type][m.source];delete this.workerSources[d][m.type][m.source];void 0!==h.removeSource?h.removeSource(m,x):x()}},W.prototype.loadWorkerSource=function(d,m,x){try{this.self.importScripts(m.url),x()}catch(r){x(r.toString())}},W.prototype.loadRTLTextPlugin=function(h,m,x){try{d.plugin.isLoaded()||(this.self.importScripts(m),x(d.plugin.isLoaded()?null:Error("RTL Text Plugin failed to import scripts from "+
m)))}catch(r){x(r.toString())}},W.prototype.getLayerIndex=function(d){var h=this.layerIndexes[d];return h||(h=this.layerIndexes[d]=new lb),h},W.prototype.getWorkerSource=function(d,m,x){var h=this;(this.workerSources[d]||(this.workerSources[d]={}),this.workerSources[d][m]||(this.workerSources[d][m]={}),this.workerSources[d][m][x])||(this.workerSources[d][m][x]=new this.workerSourceTypes[m]({send:function(m,r,x){h.actor.send(m,r,x,d)}},this.getLayerIndex(d)));return this.workerSources[d][m][x]},W.prototype.getDEMWorkerSource=
function(d,m){return this.demWorkerSources[d]||(this.demWorkerSources[d]={}),this.demWorkerSources[d][m]||(this.demWorkerSources[d][m]=new Zc),this.demWorkerSources[d][m]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new W(self)),W});Cb(["./shared.js"],function(d){function Wa(d){if(!Hb)return null;for(var a=0;a<d.length;a++)if(d[a]in Hb)return d[a];return d[0]}function cb(d,a,c,f,g,l){this.fontSize=d||24;this.buffer=void 0===a?3:
a;this.cutoff=f||.25;this.fontFamily=g||"sans-serif";this.fontWeight=l||"normal";this.radius=c||8;d=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=d;this.ctx=this.canvas.getContext("2d");this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(d*d);this.gridInner=new Float64Array(d*d);this.f=new Float64Array(d);this.d=new Float64Array(d);
this.z=new Float64Array(d+1);this.v=new Int16Array(d);this.middle=Math.round(d/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function Db(d,a,c,f,g,l,n){for(var t=0;t<a;t++){for(var u=0;u<c;u++)f[u]=d[u*a+t];Cb(f,g,l,n,c);for(u=0;u<c;u++)d[u*a+t]=g[u]}for(u=0;u<c;u++){for(t=0;t<a;t++)f[t]=d[u*a+t];Cb(f,g,l,n,a);for(t=0;t<a;t++)d[u*a+t]=Math.sqrt(g[t])}}function Cb(d,a,c,f,g){c[0]=0;f[0]=-1E20;f[1]=1E20;for(var l=1,n=0;l<g;l++){for(var t=(d[l]+l*l-(d[c[n]]+c[n]*c[n]))/(2*l-2*c[n]);t<=f[n];)n--,
t=(d[l]+l*l-(d[c[n]]+c[n]*c[n]))/(2*l-2*c[n]);c[++n]=l;f[n]=t;f[n+1]=1E20}for(n=l=0;l<g;l++){for(;f[n+1]<l;)n++;a[l]=(l-c[n])*(l-c[n])+d[c[n]]}}function Nc(h,a,c){var f=function(a,f){if(a)return c(a);f&&(a=d.pick(f,"tiles minzoom maxzoom attribution mapbox_logo bounds".split(" ")),f.vector_layers&&(a.vectorLayers=f.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(a){return a.id})),h.url&&(a.tiles=d.canonicalizeTileset(a,h.url)),c(null,a))};return h.url?d.getJSON(a(d.normalizeSourceURL(h.url),
d.ResourceType.Source),f):d.browser.frame(function(){return f(null,h)})}function Sa(d,a,c,f,g){var l=g.maxPitchScaleFactor();c=d.tilesIn(c,l);c.sort(pd);for(var n=[],t=0;t<c.length;t+=1){var u=c[t];n.push({wrappedTileID:u.tileID.wrapped().key,queryResults:u.tile.queryRenderedFeatures(a,d._state,u.queryGeometry,u.scale,f,g,l,d.transform.calculatePosMatrix(u.tileID.toUnwrapped()))})}a=function(a){for(var c={},f={},d=0;d<a.length;d+=1){var g=a[d],l=g.queryResults;g=g.wrappedTileID;g=f[g]=f[g]||{};for(var n in l)for(var t=
l[n],u=g[n]=g[n]||{},h=c[n]=c[n]||[],C=0;C<t.length;C+=1){var m=t[C];u[m.featureIndex]||(u[m.featureIndex]=!0,h.push(m.feature))}}return c}(n);for(var h in a)a[h].forEach(function(a){var c=d.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source;a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]);a.state=c});return a}function pd(d,a){d=d.tileID;a=a.tileID;return d.overscaledZ-a.overscaledZ||d.canonical.y-a.canonical.y||d.wrap-a.wrap||d.canonical.x-a.canonical.x}function Qa(d,
a){return d%32-a%32||a-d}function qd(d){return"raster"===d||"image"===d||"video"===d}function Rb(){return new d.window.Worker(Kd.workerUrl)}function Td(h,a){var c={},f;for(f in h)"ref"!==f&&(c[f]=h[f]);return d.refProperties.forEach(function(f){f in a&&(c[f]=a[f])}),c}function Oc(d){d=d.slice();for(var a=Object.create(null),c=0;c<d.length;c++)a[d[c].id]=d[c];for(c=0;c<d.length;c++)"ref"in d[c]&&(d[c]=Td(d[c],a[d[c].ref]));return d}function hc(h,a,c,f,g,l){for(var n in a=a||{},h=h||{})h.hasOwnProperty(n)&&
(d.isEqual(h[n],a[n])||c.push({command:l,args:[f,n,a[n],g]}));for(n in a)a.hasOwnProperty(n)&&!h.hasOwnProperty(n)&&(d.isEqual(h[n],a[n])||c.push({command:l,args:[f,n,a[n],g]}))}function rd(d){return d.id}function Xa(d,a){return d[a.id]=a,d}function ic(h,a){if(!h)return[{command:Z.setStyle,args:[a]}];var c=[];try{if(!d.isEqual(h.version,a.version))return[{command:Z.setStyle,args:[a]}];d.isEqual(h.center,a.center)||c.push({command:Z.setCenter,args:[a.center]});d.isEqual(h.zoom,a.zoom)||c.push({command:Z.setZoom,
args:[a.zoom]});d.isEqual(h.bearing,a.bearing)||c.push({command:Z.setBearing,args:[a.bearing]});d.isEqual(h.pitch,a.pitch)||c.push({command:Z.setPitch,args:[a.pitch]});d.isEqual(h.sprite,a.sprite)||c.push({command:Z.setSprite,args:[a.sprite]});d.isEqual(h.glyphs,a.glyphs)||c.push({command:Z.setGlyphs,args:[a.glyphs]});d.isEqual(h.transition,a.transition)||c.push({command:Z.setTransition,args:[a.transition]});d.isEqual(h.light,a.light)||c.push({command:Z.setLight,args:[a.light]});var f={},g=[];!function(a,
c,f,g){for(var l in c=c||{},a=a||{})if(a.hasOwnProperty(l)&&!c.hasOwnProperty(l)){var n=l,t=g;f.push({command:Z.removeSource,args:[n]});t[n]=!0}for(l in c)if(c.hasOwnProperty(l))if(a.hasOwnProperty(l)){if(!d.isEqual(a[l],c[l])){if(n="geojson"===a[l].type&&"geojson"===c[l].type)a:{n=void 0;t=a;var u=c,h=l;for(n in t[h])if(t[h].hasOwnProperty(n)&&"data"!==n&&!d.isEqual(t[h][n],u[h][n])){n=!1;break a}for(n in u[h])if(u[h].hasOwnProperty(n)&&"data"!==n&&!d.isEqual(t[h][n],u[h][n])){n=!1;break a}n=!0}if(n)f.push({command:Z.setGeoJSONSourceData,
args:[l,c[l].data]});else{n=l;t=c;u=f;h=n;var C=g;u.push({command:Z.removeSource,args:[h]});C[h]=!0;u.push({command:Z.addSource,args:[n,t[n]]})}}}else f.push({command:Z.addSource,args:[l,c[l]]})}(h.sources,a.sources,g,f);var l=[];h.layers&&h.layers.forEach(function(a){f[a.source]?c.push({command:Z.removeLayer,args:[a.id]}):l.push(a)});c=c.concat(g);(function(a,c,f){c=c||[];var g,l,n,t,u,h=(a=a||[]).map(rd),C=c.map(rd);a=a.reduce(Xa,{});var m=c.reduce(Xa,{}),p=h.slice(),q=Object.create(null);for(g=
c=0;c<h.length;c++){var r=h[c];m.hasOwnProperty(r)?g++:(f.push({command:Z.removeLayer,args:[r]}),p.splice(p.indexOf(r,g),1))}for(g=c=0;c<C.length;c++)r=C[C.length-1-c],p[p.length-1-c]!==r&&(a.hasOwnProperty(r)?(f.push({command:Z.removeLayer,args:[r]}),p.splice(p.lastIndexOf(r,p.length-g),1)):g++,t=p[p.length-c],f.push({command:Z.addLayer,args:[m[r],t]}),p.splice(p.length-c,0,r),q[r]=!0);for(c=0;c<C.length;c++)if(l=a[r=C[c]],n=m[r],!q[r]&&!d.isEqual(l,n))if(d.isEqual(l.source,n.source)&&d.isEqual(l["source-layer"],
n["source-layer"])&&d.isEqual(l.type,n.type)){for(u in hc(l.layout,n.layout,f,r,null,Z.setLayoutProperty),hc(l.paint,n.paint,f,r,null,Z.setPaintProperty),d.isEqual(l.filter,n.filter)||f.push({command:Z.setFilter,args:[r,n.filter]}),d.isEqual(l.minzoom,n.minzoom)&&d.isEqual(l.maxzoom,n.maxzoom)||f.push({command:Z.setLayerZoomRange,args:[r,n.minzoom,n.maxzoom]}),l)l.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?hc(l[u],
n[u],f,r,u.slice(6),Z.setPaintProperty):d.isEqual(l[u],n[u])||f.push({command:Z.setLayerProperty,args:[r,u,n[u]]}));for(u in n)n.hasOwnProperty(u)&&!l.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?hc(l[u],n[u],f,r,u.slice(6),Z.setPaintProperty):d.isEqual(l[u],n[u])||f.push({command:Z.setLayerProperty,args:[r,u,n[u]]}))}else f.push({command:Z.removeLayer,args:[r]}),t=p[p.lastIndexOf(r)+1],f.push({command:Z.addLayer,
args:[n,t]})})(l,a.layers,c)}catch(n){console.warn("Unable to compute style diff:",n),c=[{command:Z.setStyle,args:[a]}]}return c}function Sb(h,a,c,f,g){var l=d.identity(new Float32Array(16));return a?(d.identity(l),d.scale(l,l,[1/g,1/g,1]),c||d.rotateZ(l,l,f.angle)):(d.scale(l,l,[f.width/2,-f.height/2,1]),d.translate(l,l,[1,-1,0]),d.multiply(l,l,h)),l}function db(h,a){h=[h.x,h.y,0,1];kc(h,h,a);a=h[3];return{point:new d.Point(h[0]/a,h[1]/a),signedDistanceFromCamera:a}}function Pc(d,a,c,f,g,l,n,t,u,
h,m,p){var C=t.glyphStartIndex+t.numGlyphs,D=t.lineStartIndex,q=t.lineStartIndex+t.lineLength,K=a.getoffsetX(t.glyphStartIndex);a=a.getoffsetX(C-1);K=jb(d*K,c,f,g,l,n,t.segment,D,q,u,h,m,p);return K?(d=jb(d*a,c,f,g,l,n,t.segment,D,q,u,h,m,p))?{first:K,last:d}:null:null}function Tb(h,a,c,f){return h===d.WritingMode.horizontal&&Math.abs(c.y-a.y)>Math.abs(c.x-a.x)*f?{useVertical:!0}:(h===d.WritingMode.vertical?a.y<c.y:a.x>c.x)?{needsFlipping:!0}:null}function rb(h,a,c,f,g,l,n,t,u,m,p,q,r,v){var C=a/
24,D=h.lineOffsetX*a;a*=h.lineOffsetY;if(1<h.numGlyphs){g=h.glyphStartIndex+h.numGlyphs;var K=h.lineStartIndex,N=h.lineStartIndex+h.lineLength,x=Pc(C,t,D,a,c,p,q,h,u,l,r,!1);if(!x)return{notEnoughRoom:!0};var w=db(x.first.point,n).point;n=db(x.last.point,n).point;if(f&&!c&&(v=Tb(h.writingMode,w,n,v)))return v;v=[x.first];for(f=h.glyphStartIndex+1;f<g-1;f++)v.push(jb(C*t.getoffsetX(f),D,a,c,p,q,h.segment,K,N,u,l,r,!1));v.push(x.last)}else{if(f&&!c&&(K=db(q,g).point,N=h.lineStartIndex+h.segment+1,N=
new d.Point(u.getx(N),u.gety(N)),x=db(N,g),g=0<x.signedDistanceFromCamera?x.point:eb(q,N,K,1,g),v=Tb(h.writingMode,K,g,v)))return v;h=jb(C*t.getoffsetX(h.glyphStartIndex),D,a,c,p,q,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,u,l,r,!1);if(!h)return{notEnoughRoom:!0};v=[h]}h=0;for(c=v;h<c.length;h+=1)l=c[h],d.addDynamicAttributes(m,l.point,l.angle);return{}}function eb(d,a,c,f,g){d=db(d.add(d.sub(a)._unit()),g).point;d=c.sub(d);return c.add(d._mult(f/d.mag()))}function jb(h,a,c,f,g,l,n,
t,u,m,p,q,r){var C=f?h-a:h+a;h=0<C?1:-1;a=0;f&&(h*=-1,a=Math.PI);0>h&&(a+=Math.PI);n=f=0<h?t+n:t+n+1;var D=g,K=0,N=0;for(C=Math.abs(C);K+N<=C;){if((f+=h)<t||f>=u)return null;if(g=D,void 0===(D=q[f])){D=new d.Point(m.getx(f),m.gety(f));var v=db(D,p);0<v.signedDistanceFromCamera?D=q[f]=v.point:(v=f-h,D=eb(0===K?l:new d.Point(m.getx(v),m.gety(v)),D,g,C-K+1,p))}K+=N;N=g.dist(D)}t=(C-K)/N;l=D.sub(g);t=l.mult(t)._add(g);return t._add(l._unit()._perp()._mult(c*h)),{point:t,angle:a+Math.atan2(D.y-g.y,D.x-
g.x),tileDistance:r?{prevTileDistance:f-h===n?0:m.gettileUnitDistanceFromAnchor(f-h),lastSegmentViewportDistance:C-K}:null}}function jc(d,a){for(var c=0;c<d;c++){var f=a.length;a.resize(f+4);a.float32.set(Sd,3*f)}}function kc(d,a,c){var f=a[0];a=a[1];return d[0]=c[0]*f+c[4]*a+c[12],d[1]=c[1]*f+c[5]*a+c[13],d[3]=c[3]*f+c[7]*a+c[15],d}function fa(h,a,c){return d.EXTENT/(h.tileSize*Math.pow(2,c-h.tileID.overscaledZ))*a}function Eb(d,a,c){d.emplaceBack(a?1:0,c?1:0);d.emplaceBack(a?1:0,c?1:0);d.emplaceBack(a?
1:0,c?1:0);d.emplaceBack(a?1:0,c?1:0)}function V(d){if(0===d.opacity&&!d.placed)return 0;if(1===d.opacity&&d.placed)return 4294967295;var a=d.placed?1:0;d=Math.floor(127*d.opacity);return d*ue+a*ef+d*be+a*ff+d*xd+a*yd+d*le+a}function L(d,a){var c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f={};return{fragmentSource:d=d.replace(c,function(a,c,d,t,h){return f[h]=!0,"define"===c?"\n#ifndef HAS_UNIFORM_u_"+h+"\nvarying "+d+" "+t+" "+h+";\n#else\nuniform "+d+" "+t+" u_"+h+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+
h+"\n    "+d+" "+t+" "+h+" \x3d u_"+h+";\n#endif\n"}),vertexSource:a=a.replace(c,function(a,c,d,t,h){a="float"===t?"vec2":"vec4";var g=h.match(/color/)?"color":a;return f[h]?"define"===c?"\n#ifndef HAS_UNIFORM_u_"+h+"\nuniform lowp float a_"+h+"_t;\nattribute "+d+" "+a+" a_"+h+";\nvarying "+d+" "+t+" "+h+";\n#else\nuniform "+d+" "+t+" u_"+h+";\n#endif\n":"vec4"===g?"\n#ifndef HAS_UNIFORM_u_"+h+"\n    "+h+" \x3d a_"+h+";\n#else\n    "+d+" "+t+" "+h+" \x3d u_"+h+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+
h+"\n    "+h+" \x3d unpack_mix_"+g+"(a_"+h+", a_"+h+"_t);\n#else\n    "+d+" "+t+" "+h+" \x3d u_"+h+";\n#endif\n":"define"===c?"\n#ifndef HAS_UNIFORM_u_"+h+"\nuniform lowp float a_"+h+"_t;\nattribute "+d+" "+a+" a_"+h+";\n#else\nuniform "+d+" "+t+" u_"+h+";\n#endif\n":"vec4"===g?"\n#ifndef HAS_UNIFORM_u_"+h+"\n    "+d+" "+t+" "+h+" \x3d a_"+h+";\n#else\n    "+d+" "+t+" "+h+" \x3d u_"+h+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+h+"\n    "+d+" "+t+" "+h+" \x3d unpack_mix_"+g+"(a_"+h+", a_"+h+"_t);\n#else\n    "+
d+" "+t+" "+h+" \x3d u_"+h+";\n#endif\n"})}}function ea(h,a,c){var f=1/fa(c,1,a.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ);a=c.tileSize*Math.pow(2,a.transform.tileZoom)/g;g=a*(c.tileID.canonical.x+c.tileID.wrap*g);a*=c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d.browser.devicePixelRatio,f,h.fromScale,h.toScale],u_fade:h.t,u_pixel_coord_upper:[g>>16,a>>16],u_pixel_coord_lower:[65535&g,65535&a]}}function Y(d,a,c){return d.translatePosMatrix(a.tileID.posMatrix,
a,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}function Ub(h,a){h=h.sort(function(a,c){return a.tileID.isLessThan(c.tileID)?-1:c.tileID.isLessThan(a.tileID)?1:0});for(var c=0;c<h.length;c++){var f={},g=h[c],l=h.slice(c+1);sd(g.tileID.wrapped(),g.tileID,l,new d.OverscaledTileID(0,g.tileID.wrap+1,0,0,0),f);g.setMask(f,a)}}function sd(h,a,c,f,g){for(var l=0;l<c.length;l++){var n=c[l];if(f.isLessThan(n.tileID))break;if(a.key===n.tileID.key)return;if(n.tileID.isChildOf(a)){a=a.children(1/
0);for(n=0;n<a.length;n++)sd(h,a[n],c.slice(l),f,g);return}}c=a.overscaledZ-h.overscaledZ;h=new d.CanonicalTileID(c,a.canonical.x-(h.canonical.x<<c),a.canonical.y-(h.canonical.y<<c));g[h.key]=g[h.key]||h}function Na(d,a,c,f,g){for(var l=d.context,n=l.gl,t=g?d.useProgram("collisionCircle"):d.useProgram("collisionBox"),h=0;h<f.length;h++){var m=f[h],p=a.getTile(m),C=p.getBucket(c);C&&(C=g?C.collisionCircle:C.collisionBox)&&t.draw(l,g?n.TRIANGLES:n.LINES,la.disabled,Ca.disabled,d.colorModeForRenderPass(),
na.disabled,Yf(m.posMatrix,d.transform,p),c.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,null,d.transform.zoom,null,null,C.collisionVertexBuffer)}}function mc(h,a,c,f,g,l,n,t,u,m,p,q){var D,C,K=h.context,r=K.gl,v=h.transform;t="map"===t;u="map"===u;for(var N=t&&"point"!==c.layout.get("symbol-placement"),x=t&&!u&&!N,w=h.depthModeForSublayer(0,la.ReadOnly),y=0;y<f.length;y+=1){var z=f[y],A=a.getTile(z),B=A.getBucket(c);if(B){var E=g?B.text:B.icon;if(E&&E.segments.get().length){var F=E.programConfigurations.get(c.id),
G=g||B.sdfIcons,H=g?B.textSizeData:B.iconSizeData;D||(D=h.useProgram(G?"symbolSDF":"symbolIcon",F),C=d.evaluateSizeForZoom(H,v.zoom,vf.properties[g?"text-size":"icon-size"]));K.activeTexture.set(r.TEXTURE0);if(g)A.glyphAtlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),F=A.glyphAtlasTexture.size;else{F=1!==c.layout.get("icon-size").constantOr(0)||B.iconsNeedLinear;var I=u||0!==v.pitch;A.imageAtlasTexture.bind(G||h.options.rotating||h.options.zooming||F||I?r.LINEAR:r.NEAREST,r.CLAMP_TO_EDGE);F=A.imageAtlasTexture.size}var M=
fa(A,1,h.transform.zoom);I=Sb(z.posMatrix,u,t,h.transform,M);var L=z.posMatrix;var O=u,P=t,R=h.transform,S=d.identity(new Float32Array(16));L=(O?(d.multiply(S,S,L),d.scale(S,S,[M,M,1]),P||d.rotateZ(S,S,-R.angle)):(d.scale(S,S,[1,-1,1]),d.translate(S,S,[-1,-1,0]),d.scale(S,S,[2/R.width,2/R.height,1])),S);if(N){O=z.posMatrix;P=h;R=g;M=I;S=L;var V=u,W=m,Y=R?B.textSizeData:B.iconSizeData,ea=d.evaluateSizeForZoom(Y,P.transform.zoom,se.properties[R?"text-size":"icon-size"]),ba=[256/P.width*2+1,256/P.height*
2+1],Z=R?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Z.clear();for(var ha=B.lineVertexArray,ia=R?B.text.placedSymbolArray:B.icon.placedSymbolArray,ka=P.transform.width/P.transform.height,da=!1,ma=0;ma<ia.length;ma++){var ca=ia.get(ma);if(ca.hidden||ca.writingMode===d.WritingMode.vertical&&!da)jc(ca.numGlyphs,Z);else{da=!1;var qa=[ca.anchorX,ca.anchorY,0,1];d.transformMat4(qa,qa,O);var na=qa[0]/qa[3],pa=qa[1]/qa[3];if(na>=-ba[0]&&na<=ba[0]&&pa>=-ba[1]&&pa<=ba[1]){da=.5+qa[3]/P.transform.cameraToCenterDistance*
.5;qa=d.evaluateSizeForFeature(Y,ea,ca);qa=V?qa*da:qa/da;na=new d.Point(ca.anchorX,ca.anchorY);pa=db(na,M).point;var sa={},ra=rb(ca,qa,!1,W,O,M,S,B.glyphOffsetArray,ha,Z,pa,na,sa,ka);da=ra.useVertical;(ra.notEnoughRoom||da||ra.needsFlipping&&rb(ca,qa,!0,W,O,M,S,B.glyphOffsetArray,ha,Z,pa,na,sa,ka).notEnoughRoom)&&jc(ca.numGlyphs,Z)}else jc(ca.numGlyphs,Z)}}R?B.text.dynamicLayoutVertexBuffer.updateData(Z):B.icon.dynamicLayoutVertexBuffer.updateData(Z)}z=h.translatePosMatrix(z.posMatrix,A,l,n);I=N?
uf:I;A=h.translatePosMatrix(L,A,l,n,!0);G?(G=0!==c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1),L=u,B=h.transform,H=d.extend(sf(H.functionType,C,x,L,h,z,I,A,g,F),{u_gamma_scale:L?Math.cos(B._pitch)*B.cameraToCenterDistance:1,u_is_halo:1}),G&&nc(E,c,h,D,w,p,q,H),H.u_is_halo=0):H=sf(H.functionType,C,x,u,h,z,I,A,g,F);nc(E,c,h,D,w,p,q,H)}}}}function nc(d,a,c,f,g,l,n,h){var t=c.context;f.draw(t,t.gl.TRIANGLES,g,l,n,na.disabled,h,a.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,a.paint,
c.transform.zoom,d.programConfigurations.get(a.id),d.dynamicLayoutVertexBuffer,d.opacityVertexBuffer)}function Gb(h,a,c,f,g,l,n){var t,u,m,p=h.context.gl,q=c.paint.get("fill-pattern"),C=q&&q.constantOr(1),r=c.getCrossfadeParameters();n?(u=C&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",t=p.LINES):(u=C?"fillPattern":"fill",t=p.TRIANGLES);for(var v=0;v<f.length;v+=1){var x=f[v];var w=a.getTile(x);if(!C||w.patternsLoaded()){var y=w.getBucket(c);if(y){var z=y.programConfigurations.get(c.id),
A=h.useProgram(u,z);C&&(h.context.activeTexture.set(p.TEXTURE0),w.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),z.updatePatternPaintBuffers(r));if((m=q.constantOr(null))&&w.imageAtlas){var B=w.imageAtlas.patternPositions[m.to];m=w.imageAtlas.patternPositions[m.from];B&&m&&z.setConstantPatternPositions(B,m)}var E=h.translatePosMatrix(x.posMatrix,w,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(n){B=y.indexBuffer2;m=y.segments2;var F=[p.drawingBufferWidth,p.drawingBufferHeight];
w="fillOutlinePattern"===u&&C?d.extend(d.extend({u_matrix:E},ea(r,h,w)),{u_world:F}):{u_matrix:E,u_world:F}}else B=y.indexBuffer,m=y.segments,w=C?d.extend({u_matrix:E},ea(r,h,w)):{u_matrix:E};A.draw(h.context,t,g,h.stencilModeForClipping(x),l,na.disabled,w,c.id,y.layoutVertexBuffer,B,m,c.paint,h.transform.zoom,z)}}}}function Ac(h,a){var c=h.context,f=c.gl,g=a.viewportFrame;if(h.depthRboNeedsClear&&h.setupOffscreenDepthRenderbuffer(),!g){var l=new d.Texture(c,{width:h.width,height:h.height,data:null},
f.RGBA);l.bind(f.LINEAR,f.CLAMP_TO_EDGE);(g=a.viewportFrame=c.createFramebuffer(h.width,h.height)).colorAttachment.set(l.texture)}c.bindFramebuffer.set(g.framebuffer);g.depthAttachment.set(h.depthRbo);h.depthRboNeedsClear&&(c.clear({depth:1}),h.depthRboNeedsClear=!1);c.clear({color:d.Color.transparent});c.setStencilMode(Ca.disabled);c.setDepthMode(new la(f.LEQUAL,la.ReadWrite,[0,1]));c.setColorMode(h.colorModeForRenderPass())}function Qc(d,a,c){var f=a.viewportFrame;if(f){var g=d.context,l=g.gl;g.activeTexture.set(l.TEXTURE0);
l.bindTexture(l.TEXTURE_2D,f.colorAttachment.get());d.useProgram("extrusionTexture").draw(g,l.TRIANGLES,la.disabled,Ca.disabled,d.colorModeForRenderPass(),na.disabled,Wf(d,c,0),a.id,d.viewportBuffer,d.quadTriangleIndexBuffer,d.viewportSegments,a.paint,d.transform.zoom)}}function ha(d,a){if(d.y>a.y){var c=d;d=a;a=c}return{x0:d.x,y0:d.y,x1:a.x,y1:a.y,dx:a.x-d.x,dy:a.y-d.y}}function oc(d,a,c,f,g){c=Math.max(c,Math.floor(a.y0));f=Math.min(f,Math.ceil(a.y1));if(d.x0===a.x0&&d.y0===a.y0?d.x0+a.dy/d.dy*
d.dx<a.x1:d.x1-a.dy/d.dy*d.dx<a.x0){var l=d;d=a;a=l}l=d.dx/d.dy;for(var n=a.dx/a.dy,h=0<d.dx,u=0>a.dx;c<f;c++)g(Math.floor(n*Math.max(0,Math.min(a.dy,c+u-a.y0))+a.x0),Math.ceil(l*Math.max(0,Math.min(d.dy,c+h-d.y0))+d.x0),c)}function Vb(d,a,c,f,g,l){var n,h=ha(d,a);a=ha(a,c);d=ha(c,d);h.dy>a.dy&&(n=h,h=a,a=n);h.dy>d.dy&&(n=h,h=d,d=n);a.dy>d.dy&&(n=a,a=d,d=n);h.dy&&oc(d,h,f,g,l);a.dy&&oc(d,a,f,g,l)}function Rc(d){return d*(2-d)}function Wb(d){d.parentNode&&d.parentNode.removeChild(d)}function Bc(h,
a,c){if(h=new d.LngLat(h.lng,h.lat),a){var f=new d.LngLat(h.lng-360,h.lat),g=new d.LngLat(h.lng+360,h.lat),l=c.locationPoint(h).distSqr(a);c.locationPoint(f).distSqr(a)<l?h=f:c.locationPoint(g).distSqr(a)<l&&(h=g)}for(;180<Math.abs(h.lng-c.center.lng);){a=c.locationPoint(h);if(0<=a.x&&0<=a.y&&a.x<=c.width&&a.y<=c.height)break;h.lng>c.center.lng?h.lng-=360:h.lng+=360}return h}function Sc(d,a,c){d=d.classList;for(var f in Ee)d.remove("mapboxgl-"+c+"-anchor-"+f);d.add("mapboxgl-"+c+"-anchor-"+a)}function Ya(d,
a,c){var f,g,l,n,h,u,m=c&&c.maxWidth||100,p=d._container.clientHeight/2;d=(f=d.unproject([0,p]),g=d.unproject([m,p]),l=Math.PI/180,n=f.lat*l,h=g.lat*l,u=Math.sin(n)*Math.sin(h)+Math.cos(n)*Math.cos(h)*Math.cos((g.lng-f.lng)*l),6371E3*Math.acos(Math.min(u,1)));c&&"imperial"===c.unit?(c=3.2808*d,5280<c?pc(a,m,c/5280,"mi"):pc(a,m,c,"ft")):c&&"nautical"===c.unit?pc(a,m,d/1852,"nm"):pc(a,m,d,"m")}function pc(d,a,c,f){var g;var l=Math.pow(10,(""+Math.floor(c)).length-1);if(10<=(g=c/l))var n=10;else 5<=
g?n=5:3<=g?n=3:2<=g?n=2:1<=g?n=1:(n=Math.pow(10,Math.ceil(-Math.log(g)/Math.LN10)),n=Math.round(g*n)/n);l=(g=n,l*g);c=l/c;"m"===f&&1E3<=l&&(l/=1E3,f="km");d.style.width=a*c+"px";d.innerHTML=l+f}var Tc=d.createCommonjsModule(function(d){function a(f){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&
Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;
var a=new Blob([""],{type:"text/javascript"});a=URL.createObjectURL(a);try{var c=new Worker(a);var f=!0}catch(t){f=!1}c&&c.terminate();return URL.revokeObjectURL(a),f}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(f){if(void 0===c[f]){var d=c;var g=document.createElement("canvas");var h=Object.create(a.webGLContextAttributes);g=(h.failIfMajorPerformanceCaveat=f,g.probablySupportsContext?g.probablySupportsContext("webgl",h)||g.probablySupportsContext("experimental-webgl",h):g.supportsContext?
g.supportsContext("webgl",h)||g.supportsContext("experimental-webgl",h):g.getContext("webgl",h)||g.getContext("experimental-webgl",h));d[f]=g}return c[f]}(f&&f.failIfMajorPerformanceCaveat))}d.exports?d.exports=a:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=a);var c={};a.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),A={create:function(h,a,c){h=d.window.document.createElement(h);return a&&(h.className=a),c&&c.appendChild(h),h},createNS:function(h,a){return d.window.document.createElementNS(h,
a)}},Hb=d.window.document?d.window.document.documentElement.style:null,Uc,fb=Wa(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);A.disableDrag=function(){Hb&&fb&&(Uc=Hb[fb],Hb[fb]="none")};A.enableDrag=function(){Hb&&fb&&(Hb[fb]=Uc)};var Ib=Wa(["transform","WebkitTransform"]);A.setTransform=function(d,a){d.style[Ib]=a};var qc=!1;try{var Jb=Object.defineProperty({},"passive",{get:function(){qc=!0}});d.window.addEventListener("test",Jb,Jb);d.window.removeEventListener("test",Jb,Jb)}catch(C){qc=
!1}A.addEventListener=function(d,a,c,f){void 0===f&&(f={});"passive"in f&&qc?d.addEventListener(a,c,f):d.addEventListener(a,c,f.capture)};A.removeEventListener=function(d,a,c,f){void 0===f&&(f={});"passive"in f&&qc?d.removeEventListener(a,c,f):d.removeEventListener(a,c,f.capture)};var G=function(h){h.preventDefault();h.stopPropagation();d.window.removeEventListener("click",G,!0)};A.suppressClick=function(){d.window.addEventListener("click",G,!0);d.window.setTimeout(function(){d.window.removeEventListener("click",
G,!0)},0)};A.mousePos=function(h,a){var c=h.getBoundingClientRect();return a=a.touches?a.touches[0]:a,new d.Point(a.clientX-c.left-h.clientLeft,a.clientY-c.top-h.clientTop)};A.touchPos=function(h,a){var c=h.getBoundingClientRect(),f=[];a="touchend"===a.type?a.changedTouches:a.touches;for(var g=0;g<a.length;g++)f.push(new d.Point(a[g].clientX-c.left-h.clientLeft,a[g].clientY-c.top-h.clientTop));return f};A.mouseButton=function(h){return void 0!==d.window.InstallTrigger&&2===h.button&&h.ctrlKey&&0<=
d.window.navigator.platform.toUpperCase().indexOf("MAC")?0:h.button};A.remove=function(d){d.parentNode&&d.parentNode.removeChild(d)};var pa=function(){this.images={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new d.RGBAImage({width:1,height:1});this.dirty=!0};pa.prototype.isLoaded=function(){return this.loaded};pa.prototype.setLoaded=function(d){if(this.loaded!==d&&(this.loaded=d,d)){d=0;for(var a=this.requestors;d<a.length;d+=1){var c=a[d];this._notify(c.ids,c.callback)}this.requestors=
[]}};pa.prototype.getImage=function(d){return this.images[d]};pa.prototype.addImage=function(d,a){this.images[d]=a};pa.prototype.removeImage=function(d){delete this.images[d];delete this.patterns[d]};pa.prototype.listImages=function(){return Object.keys(this.images)};pa.prototype.getImages=function(d,a){var c=!0;if(!this.isLoaded())for(var f=0;f<d.length;f+=1)this.images[d[f]]||(c=!1);this.isLoaded()||c?this._notify(d,a):this.requestors.push({ids:d,callback:a})};pa.prototype._notify=function(d,a){for(var c=
{},f=0;f<d.length;f+=1){var g=d[f],l=this.images[g];l&&(c[g]={data:l.data.clone(),pixelRatio:l.pixelRatio,sdf:l.sdf})}a(null,c)};pa.prototype.getPixelSize=function(){var d=this.atlasImage;return{width:d.width,height:d.height}};pa.prototype.getPattern=function(h){var a=this.patterns[h];if(a)return a.position;var c=this.getImage(h);if(!c)return null;a={w:c.data.width+2,h:c.data.height+2,x:0,y:0};c=new d.ImagePosition(a,c);return this.patterns[h]={bin:a,position:c},this._updatePatternAtlas(),c};pa.prototype.bind=
function(h){var a=h.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new d.Texture(h,this.atlasImage,a.RGBA);this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)};pa.prototype._updatePatternAtlas=function(){var h=[];for(a in this.patterns)h.push(this.patterns[a].bin);h=d.potpack(h);var a=h.w;var c=h.h;h=this.atlasImage;for(var f in h.resize({width:a||1,height:c||1}),this.patterns){c=this.patterns[f].bin;a=c.x+1;c=c.y+1;var g=this.images[f].data,
l=g.width,n=g.height;d.RGBAImage.copy(g,h,{x:0,y:0},{x:a,y:c},{width:l,height:n});d.RGBAImage.copy(g,h,{x:0,y:n-1},{x:a,y:c-1},{width:l,height:1});d.RGBAImage.copy(g,h,{x:0,y:0},{x:a,y:c+n},{width:l,height:1});d.RGBAImage.copy(g,h,{x:l-1,y:0},{x:a-1,y:c},{width:1,height:n});d.RGBAImage.copy(g,h,{x:0,y:0},{x:a+l,y:c},{width:1,height:n})}this.dirty=!0};cb.prototype.draw=function(d){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(d,this.buffer,this.middle);d=this.ctx.getImageData(0,0,this.size,
this.size);for(var a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var f=d.data[4*c+3]/255;this.gridOuter[c]=1===f?0:0===f?1E20:Math.pow(Math.max(0,.5-f),2);this.gridInner[c]=1===f?1E20:0===f?0:Math.pow(Math.max(0,f-.5),2)}Db(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);Db(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(c=0;c<this.size*this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/
this.radius+this.cutoff))));return a};var lb=function(d,a){this.requestTransform=d;this.localIdeographFontFamily=a;this.entries={}};lb.prototype.setURL=function(d){this.url=d};lb.prototype.getGlyphs=function(h,a){var c=this,f=[],g;for(g in h)for(var l=0,n=h[g];l<n.length;l+=1)f.push({stack:g,id:n[l]});d.asyncAll(f,function(a,f){var d=a.stack,g=a.id,l=c.entries[d];l||(l=c.entries[d]={glyphs:{},requests:{}});a=l.glyphs[g];if(void 0===a)if(a=c._tinySDF(l,d,g))f(null,{stack:d,id:g,glyph:a});else{var n=
Math.floor(g/256);if(65535<256*n)f(Error("glyphs \x3e 65535 not supported"));else{var h=l.requests[n];h||(h=l.requests[n]=[],lb.loadGlyphRange(d,n,c.url,c.requestTransform,function(a,c){if(c)for(var f in c)l.glyphs[+f]=c[+f];f=0;for(var d=h;f<d.length;f+=1)(0,d[f])(a,c);delete l.requests[n]}));h.push(function(a,c){a?f(a):c&&f(null,{stack:d,id:g,glyph:c[g]||null})})}}else f(null,{stack:d,id:g,glyph:a})},function(c,f){if(c)a(c);else if(f){c={};for(var d=0;d<f.length;d+=1){var g=f[d],l=g.stack,n=g.id;
g=g.glyph;(c[l]||(c[l]={}))[n]=g&&{id:g.id,bitmap:g.bitmap.clone(),metrics:g.metrics}}a(null,c)}})};lb.prototype._tinySDF=function(h,a,c){var f=this.localIdeographFontFamily;if(f&&(d.isChar["CJK Unified Ideographs"](c)||d.isChar["Hangul Syllables"](c))){var g=h.tinySDF;g||(g="400",/bold/i.test(a)?g="900":/medium/i.test(a)?g="500":/light/i.test(a)&&(g="200"),g=h.tinySDF=new lb.TinySDF(24,3,8,.25,f,g));return{id:c,bitmap:new d.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(c))),metrics:{width:24,
height:24,left:0,top:-8,advance:24}}}};lb.loadGlyphRange=function(h,a,c,f,g){a*=256;var l=a+255;h=f(d.normalizeGlyphsURL(c).replace("{fontstack}",h).replace("{range}",a+"-"+l),d.ResourceType.Glyphs);d.getArrayBuffer(h,function(a,c){if(a)g(a);else if(c){a={};var f=0;for(c=d.parseGlyphPBF(c);f<c.length;f+=1){var l=c[f];a[l.id]=l}g(null,a)}})};lb.TinySDF=cb;var ub=function(){this.specification=d.styleSpec.light.position};ub.prototype.possiblyEvaluate=function(h,a){return d.sphericalToCartesian(h.expression.evaluate(a))};
ub.prototype.interpolate=function(h,a,c){return{x:d.number(h.x,a.x,c),y:d.number(h.y,a.y,c),z:d.number(h.z,a.z,c)}};var Wd=new d.Properties({anchor:new d.DataConstantProperty(d.styleSpec.light.anchor),position:new ub,color:new d.DataConstantProperty(d.styleSpec.light.color),intensity:new d.DataConstantProperty(d.styleSpec.light.intensity)}),W=function(h){function a(a){h.call(this);this._transitionable=new d.Transitionable(Wd);this.setLight(a);this._transitioning=this._transitionable.untransitioned()}
return h&&(a.__proto__=h),a.prototype=Object.create(h&&h.prototype),a.prototype.constructor=a,a.prototype.getLight=function(){return this._transitionable.serialize()},a.prototype.setLight=function(a,f){if(void 0===f&&(f={}),!this._validate(d.validateLight,a,f))for(var c in a)f=a[c],d.endsWith(c,"-transition")?this._transitionable.setTransition(c.slice(0,-11),f):this._transitionable.setValue(c,f)},a.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},
a.prototype.hasTransition=function(){return this._transitioning.hasTransition()},a.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},a.prototype._validate=function(a,f,g){return(!g||!1!==g.validate)&&d.emitValidationErrors(this,a.call(d.validateStyle,d.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:d.styleSpec})))},a}(d.Evented),Cc=function(d,a){this.width=d;this.height=a;this.nextRow=0;this.bytes=4;this.data=new Uint8Array(this.width*this.height*this.bytes);
this.positions={}};Cc.prototype.getDash=function(d,a){var c=d.join(",")+String(a);return this.positions[c]||(this.positions[c]=this.addDash(d,a)),this.positions[c]};Cc.prototype.addDash=function(h,a){var c=a?7:0,f=2*c+1;if(this.nextRow+f>this.height)return d.warnOnce("LineAtlas out of space"),null;for(var g=0,l=0;l<h.length;l++)g+=h[l];l=this.width/g;for(var n=l/2,t=1==h.length%2,u=-c;u<=c;u++)for(var m=this.width*(this.nextRow+c+u),p=t?-h[h.length-1]:0,q=h[0],r=1,v=0;v<this.width;v++){for(;q<v/l;)p=
q,q+=h[r],t&&r===h.length-1&&(q+=h[0]),r++;var x=Math.min(Math.abs(v-p*l),Math.abs(v-q*l)),w=1==r%2;if(a){var y=c?u/c*(n+1):0;w?(w=n-Math.abs(y),x=Math.sqrt(x*x+w*w)):x=n-Math.sqrt(x*x+y*y)}else x*=w?1:-1;this.data[3+4*(m+v)]=Math.max(0,Math.min(255,x+128))}h={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:g};return this.nextRow+=f,this.dirty=!0,h};Cc.prototype.bind=function(d){d=d.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,
0,0,0,this.width,this.height,d.RGBA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,this.width,this.height,0,d.RGBA,d.UNSIGNED_BYTE,this.data))};var Xb=function f(a,c){this.workerPool=
a;this.actors=[];this.currentActor=0;this.id=d.uniqueId();a=this.workerPool.acquire(this.id);for(var g=0;g<a.length;g++){var l=new f.Actor(a[g],c,this.id);l.name="Worker "+g;this.actors.push(l)}};Xb.prototype.broadcast=function(a,c,f){d.asyncAll(this.actors,function(d,f){d.send(a,c,f)},f||function(){})};Xb.prototype.send=function(a,c,d,g){return("number"!=typeof g||isNaN(g))&&(g=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[g].send(a,c,d),g};Xb.prototype.remove=function(){this.actors.forEach(function(a){a.remove()});
this.actors=[];this.workerPool.release(this.id)};Xb.Actor=d.Actor;var mb=function(a,c,f){this.bounds=d.LngLatBounds.convert(this.validateBounds(a));this.minzoom=c||0;this.maxzoom=f||24};mb.prototype.validateBounds=function(a){return Array.isArray(a)&&4===a.length?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]};mb.prototype.contains=function(a){var c=Math.pow(2,a.z),f=Math.floor(d.mercatorXfromLng(this.bounds.getWest())*c),g=Math.floor(d.mercatorYfromLat(this.bounds.getNorth())*
c),l=Math.ceil(d.mercatorXfromLng(this.bounds.getEast())*c);c=Math.ceil(d.mercatorYfromLat(this.bounds.getSouth())*c);return a.x>=f&&a.x<l&&a.y>=g&&a.y<c};var Dc=function(a){function c(c,g,l,n){if(a.call(this),this.id=c,this.dispatcher=l,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,d.extend(this,d.pick(g,["url","scheme","tileSize"])),this._options=d.extend({type:"vector"},g),this._collectResourceTiming=g.collectResourceTiming,
512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this.fire(new d.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=Nc(this._options,this.map._transformRequest,function(c,f){a._tileJSONRequest=null;c?a.fire(new d.ErrorEvent(c)):f&&(d.extend(a,f),f.bounds&&(a.tileBounds=new mb(f.bounds,a.minzoom,
a.maxzoom)),d.postTurnstileEvent(f.tiles),d.postMapLoadEvent(f.tiles,a.map._getMapId()),a.fire(new d.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new d.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},c.prototype.onAdd=function(a){this.map=a;this.load()},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},
c.prototype.serialize=function(){return d.extend({},this._options)},c.prototype.loadTile=function(a,c){function f(d,f){return a.aborted?c(null):d&&404!==d.status?c(d):(f&&f.resourceTiming&&(a.resourceTiming=f.resourceTiming),this.map._refreshExpiredTiles&&f&&a.setExpiryData(f),a.loadVectorData(f,this.map.painter),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}var g=d.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.url);g={request:this.map._transformRequest(g,
d.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:d.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};g.request.collectResourceTiming=this._collectResourceTiming;void 0===a.workerID||"expired"===a.state?a.workerID=this.dispatcher.send("loadTile",g,f.bind(this)):"loading"===a.state?a.reloadCallback=c:this.dispatcher.send("reloadTile",g,f.bind(this),a.workerID)},c.prototype.abortTile=
function(a){this.dispatcher.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0,a.workerID)},c.prototype.unloadTile=function(a){a.unloadVectorData();this.dispatcher.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0,a.workerID)},c.prototype.hasTransition=function(){return!1},c}(d.Evented),Ec=function(a){function c(c,g,l,n){a.call(this);this.id=c;this.dispatcher=l;this.setEventedParent(n);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme=
"xyz";this.tileSize=512;this._loaded=!1;this._options=d.extend({},g);d.extend(this,d.pick(g,["url","scheme","tileSize"]))}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this.fire(new d.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=Nc(this._options,this.map._transformRequest,function(c,f){a._tileJSONRequest=null;c?a.fire(new d.ErrorEvent(c)):f&&(d.extend(a,f),f.bounds&&(a.tileBounds=new mb(f.bounds,
a.minzoom,a.maxzoom)),d.postTurnstileEvent(f.tiles),d.postMapLoadEvent(f.tiles,a.map._getMapId()),a.fire(new d.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new d.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.onAdd=function(a){this.map=a;this.load()},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},c.prototype.serialize=function(){return d.extend({},this._options)},c.prototype.hasTile=
function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},c.prototype.loadTile=function(a,c){var f=this,g=d.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);a.request=d.getImage(this.map._transformRequest(g,d.ResourceType.Tile),function(g,l){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(g)a.state="errored",c(g);else if(l){f.map._refreshExpiredTiles&&a.setExpiryData(l);delete l.cacheControl;delete l.expires;g=f.map.painter.context;
var n=g.gl;a.texture=f.map.painter.getTileTexture(l.width);a.texture?a.texture.update(l,{useMipmap:!0}):(a.texture=new d.Texture(g,l,n.RGBA,{useMipmap:!0}),a.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax));a.state="loaded";c(null)}})},c.prototype.abortTile=function(a,c){a.request&&(a.request.cancel(),delete a.request);c()},c.prototype.unloadTile=
function(a,c){a.texture&&this.map.painter.saveTileTexture(a.texture);c()},c.prototype.hasTransition=function(){return!1},c}(d.Evented),rc=function(a){function c(c,g,l,n){a.call(this,c,g,l,n);this.type="raster-dem";this.maxzoom=22;this._options=d.extend({},g);this.encoding=g.encoding||"mapbox"}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,
encoding:this.encoding}},c.prototype.loadTile=function(a,c){var f=d.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);a.request=d.getImage(this.map._transformRequest(f,d.ResourceType.Tile),function(f,g){(delete a.request,a.aborted)?(a.state="unloaded",c(null)):f?(a.state="errored",c(f)):g&&(this.map._refreshExpiredTiles&&a.setExpiryData(g),delete g.cacheControl,delete g.expires,f=d.browser.getImageData(g),f={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:f,
encoding:this.encoding},a.workerID&&"expired"!==a.state||(a.workerID=this.dispatcher.send("loadDEMTile",f,function(d,f){d&&(a.state="errored",c(d));f&&(a.dem=f,a.needsHillshadePrepare=!0,a.state="loaded",c(null))}.bind(this))))}.bind(this));a.neighboringTiles=this._getNeighboringTiles(a.tileID)},c.prototype._getNeighboringTiles=function(a){var c=a.canonical,f=Math.pow(2,c.z),n=(c.x-1+f)%f,h=0===c.x?a.wrap-1:a.wrap,u=(c.x+1+f)%f,m=c.x+1===f?a.wrap+1:a.wrap,p={};return p[(new d.OverscaledTileID(a.overscaledZ,
h,c.z,n,c.y)).key]={backfilled:!1},p[(new d.OverscaledTileID(a.overscaledZ,m,c.z,u,c.y)).key]={backfilled:!1},0<c.y&&(p[(new d.OverscaledTileID(a.overscaledZ,h,c.z,n,c.y-1)).key]={backfilled:!1},p[(new d.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1)).key]={backfilled:!1},p[(new d.OverscaledTileID(a.overscaledZ,m,c.z,u,c.y-1)).key]={backfilled:!1}),c.y+1<f&&(p[(new d.OverscaledTileID(a.overscaledZ,h,c.z,n,c.y+1)).key]={backfilled:!1},p[(new d.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+
1)).key]={backfilled:!1},p[(new d.OverscaledTileID(a.overscaledZ,m,c.z,u,c.y+1)).key]={backfilled:!1}),p},c.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture);a.fbo&&(a.fbo.destroy(),delete a.fbo);a.dem&&delete a.dem;delete a.neighboringTiles;a.state="unloaded";this.dispatcher.send("removeDEMTile",{uid:a.uid,source:this.id},void 0,a.workerID)},c}(Ec),Va=function(a){function c(c,g,l,n){a.call(this);this.id=c;this.type="geojson";this.minzoom=0;this.maxzoom=
18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._removed=!1;this.dispatcher=l;this.setEventedParent(n);this._data=g.data;this._options=d.extend({},g);this._collectResourceTiming=g.collectResourceTiming;this._resourceTiming=[];void 0!==g.maxzoom&&(this.maxzoom=g.maxzoom);g.type&&(this.type=g.type);g.attribution&&(this.attribution=g.attribution);c=d.EXTENT/this.tileSize;this.workerOptions=d.extend({source:this.id,cluster:g.cluster||!1,geojsonVtOptions:{buffer:(void 0!==g.buffer?
g.buffer:128)*c,tolerance:(void 0!==g.tolerance?g.tolerance:.375)*c,extent:d.EXTENT,maxZoom:this.maxzoom,lineMetrics:g.lineMetrics||!1,generateId:g.generateId||!1},superclusterOptions:{maxZoom:void 0!==g.clusterMaxZoom?Math.min(g.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:d.EXTENT,radius:(g.clusterRadius||50)*c,log:!1}},g.workerOptions)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this.fire(new d.Event("dataloading",
{dataType:"source"}));this._updateWorkerData(function(c){c?a.fire(new d.ErrorEvent(c)):(c={dataType:"source",sourceDataType:"metadata"},a._collectResourceTiming&&a._resourceTiming&&0<a._resourceTiming.length&&(c.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new d.Event("data",c)))})},c.prototype.onAdd=function(a){this.map=a;this.load()},c.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new d.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(a){a?
c.fire(new d.ErrorEvent(a)):(a={dataType:"source",sourceDataType:"content"},c._collectResourceTiming&&c._resourceTiming&&0<c._resourceTiming.length&&(a.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new d.Event("data",a)))}),this},c.prototype.getClusterExpansionZoom=function(a,c){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},c,this.workerID),this},c.prototype.getClusterChildren=function(a,c){return this.dispatcher.send("geojson.getClusterChildren",
{clusterId:a,source:this.id},c,this.workerID),this},c.prototype.getClusterLeaves=function(a,c,d,n){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:c,offset:d},n,this.workerID),this},c.prototype._updateWorkerData=function(a){var c=this,f=d.extend({},this.workerOptions),n=this._data;"string"==typeof n?(f.request=this.map._transformRequest(d.browser.resolveURL(n),d.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(n);
this.workerID=this.dispatcher.send(this.type+".loadData",f,function(d,g){c._removed||g&&g.abandoned||(c._loaded=!0,g&&g.resourceTiming&&g.resourceTiming[c.id]&&(c._resourceTiming=g.resourceTiming[c.id].slice(0)),c.dispatcher.send(c.type+".coalesce",{source:f.source},null,c.workerID),a(d))},this.workerID)},c.prototype.loadTile=function(a,c){var f=this,g=void 0===a.workerID?"loadTile":"reloadTile";a.workerID=this.dispatcher.send(g,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,
maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:d.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes},function(d,l){return a.unloadVectorData(),a.aborted?c(null):d?c(d):(a.loadVectorData(l,f.map.painter,"reloadTile"===g),c(null))},this.workerID)},c.prototype.abortTile=function(a){a.aborted=!0},c.prototype.unloadTile=function(a){a.unloadVectorData();this.dispatcher.send("removeTile",{uid:a.uid,type:this.type,source:this.id},null,a.workerID)},c.prototype.onRemove=
function(){this._removed=!0;this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},c.prototype.serialize=function(){return d.extend({},this._options,{type:this.type,data:this._data})},c.prototype.hasTransition=function(){return!1},c}(d.Evented),ka=function(a){function c(c,d,l,n){a.call(this);this.id=c;this.dispatcher=l;this.coordinates=d.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this.setEventedParent(n);this.options=
d}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(a,c){var f=this;this.fire(new d.Event("dataloading",{dataType:"source"}));this.url=this.options.url;d.getImage(this.map._transformRequest(this.url,d.ResourceType.Image),function(g,l){g?f.fire(new d.ErrorEvent(g)):l&&(f.image=l,a&&(f.coordinates=a),c&&c(),f._finishLoading())})},c.prototype.updateImage=function(a){var c=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,
function(){c.texture=null}),this):this},c.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new d.Event("data",{dataType:"source",sourceDataType:"metadata"})))},c.prototype.onAdd=function(a){this.map=a;this.load()},c.prototype.setCoordinates=function(a){var c=this;this.coordinates=a;a=a.map(d.MercatorCoordinate.fromLngLat);this.tileID=function(a){for(var c=1/0,f=1/0,g=-1/0,l=-1/0,h=0;h<a.length;h+=1){var m=a[h];c=Math.min(c,m.x);f=Math.min(f,m.y);g=Math.max(g,
m.x);l=Math.max(l,m.y)}a=Math.max(0,Math.floor(-Math.log(Math.max(g-c,l-f))/Math.LN2));h=Math.pow(2,a);return new d.CanonicalTileID(a,Math.floor((c+g)/2*h),Math.floor((f+l)/2*h))}(a);this.minzoom=this.maxzoom=this.tileID.z;a=a.map(function(a){return c.tileID.getTilePoint(a)._round()});return this._boundsArray=new d.StructArrayLayout4i8,this._boundsArray.emplaceBack(a[0].x,a[0].y,0,0),this._boundsArray.emplaceBack(a[1].x,a[1].y,d.EXTENT,0),this._boundsArray.emplaceBack(a[3].x,a[3].y,0,d.EXTENT),this._boundsArray.emplaceBack(a[2].x,
a[2].y,d.EXTENT,d.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new d.Event("data",{dataType:"source",sourceDataType:"content"})),this},c.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var a=this.map.painter.context,c=a.gl,l;for(l in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,d.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=d.SegmentVector.simpleSegment(0,0,
4,2)),this.texture||(this.texture=new d.Texture(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles)a=this.tiles[l],"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}},c.prototype.loadTile=function(a,c){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},c(null)):(a.state="errored",c(null))},c.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},c.prototype.hasTransition=
function(){return!1},c}(d.Evented),Zc=function(a){function c(c,d,l,n){a.call(this,c,d,l,n);this.roundZoom=!0;this.type="video";this.options=d}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this,c=this.options;this.urls=[];var l=0;for(c=c.urls;l<c.length;l+=1)a.urls.push(a.map._transformRequest(c[l],d.ResourceType.Source).url);d.getVideo(this.urls,function(c,f){c?a.fire(new d.ErrorEvent(c)):f&&(a.video=f,a.video.loop=
!0,a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},c.prototype.getVideo=function(){return this.video},c.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},c.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var a=this.map.painter.context,c=a.gl,l;for(l in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,
d.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=d.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new d.Texture(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles)a=this.tiles[l],"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}},c.prototype.serialize=function(){return{type:"video",
urls:this.urls,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this.video&&!this.video.paused},c}(ka),td=function(a){function c(c,g,l,n){a.call(this,c,g,l,n);g.coordinates?Array.isArray(g.coordinates)&&4===g.coordinates.length&&!g.coordinates.some(function(a){return!Array.isArray(a)||2!==a.length||a.some(function(a){return"number"!=typeof a})})||this.fire(new d.ErrorEvent(new d.ValidationError("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):
this.fire(new d.ErrorEvent(new d.ValidationError("sources."+c,null,'missing required property "coordinates"')));g.animate&&"boolean"!=typeof g.animate&&this.fire(new d.ErrorEvent(new d.ValidationError("sources."+c,null,'optional "animate" property must be a boolean value')));g.canvas?"string"==typeof g.canvas||g.canvas instanceof d.window.HTMLCanvasElement||this.fire(new d.ErrorEvent(new d.ValidationError("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):
this.fire(new d.ErrorEvent(new d.ValidationError("sources."+c,null,'missing required property "canvas"')));this.options=g;this.animate=void 0===g.animate||g.animate}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof d.window.HTMLCanvasElement?this.options.canvas:d.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;
this._hasInvalidDimensions()?this.fire(new d.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},c.prototype.getCanvas=function(){return this.canvas},c.prototype.onAdd=function(a){this.map=a;this.load();this.canvas&&this.animate&&this.play()},c.prototype.onRemove=function(){this.pause()},c.prototype.prepare=function(){var a=!1;if(this.canvas.width!==
this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var c=this.map.painter.context,l=c.gl,n;for(n in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,d.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=d.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):
this.texture=new d.Texture(c,this.canvas,l.RGBA,{premultiply:!0}),this.tiles)a=this.tiles[n],"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}},c.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this._playing},c.prototype._hasInvalidDimensions=function(){for(var a=0,c=[this.canvas.width,this.canvas.height];a<c.length;a+=1){var d=c[a];if(isNaN(d)||0>=d)return!0}return!1},c}(ka),$c={vector:Dc,raster:Ec,"raster-dem":rc,
geojson:Va,video:Zc,image:ka,canvas:td},ud=function(a,c,f,g){c=new $c[c.type](a,c,f,g);if(c.id!==a)throw Error("Expected Source id to be "+a+" instead of "+c.id);return d.bindAll(["load","abort","unload","serialize","prepare"],c),c},Za=function(a,c){this.max=a;this.onRemove=c;this.reset()};Za.prototype.reset=function(){for(var a in this.data)for(var c=0,d=this.data[a];c<d.length;c+=1){var g=d[c];g.timeout&&clearTimeout(g.timeout);this.onRemove(g.value)}return this.data={},this.order=[],this};Za.prototype.add=
function(a,c,d){var f=this,l=a.wrapped().key;void 0===this.data[l]&&(this.data[l]=[]);var n={value:c,timeout:void 0};(void 0!==d&&(n.timeout=setTimeout(function(){f.remove(a,n)},d)),this.data[l].push(n),this.order.push(l),this.order.length>this.max)&&(c=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(c);return this};Za.prototype.has=function(a){return a.wrapped().key in this.data};Za.prototype.getAndRemove=function(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null};Za.prototype._getAndRemoveByKey=
function(a){var c=this.data[a].shift();return c.timeout&&clearTimeout(c.timeout),0===this.data[a].length&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),c.value};Za.prototype.get=function(a){return this.has(a)?this.data[a.wrapped().key][0].value:null};Za.prototype.remove=function(a,c){if(!this.has(a))return this;a=a.wrapped().key;c=void 0===c?0:this.data[a].indexOf(c);var d=this.data[a][c];return this.data[a].splice(c,1),d.timeout&&clearTimeout(d.timeout),0===this.data[a].length&&
delete this.data[a],this.onRemove(d.value),this.order.splice(this.order.indexOf(a),1),this};Za.prototype.setMaxSize=function(a){for(this.max=a;this.order.length>this.max;)(a=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(a);return this};var Kb=function(a,c,d){this.context=a;var f=a.gl;this.buffer=f.createBuffer();this.dynamicDraw=!!d;this.context.unbindVAO();a.bindElementBuffer.set(this.buffer);f.bufferData(f.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW);
this.dynamicDraw||delete c.arrayBuffer};Kb.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};Kb.prototype.updateData=function(a){var c=this.context.gl;this.context.unbindVAO();this.bind();c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)};Kb.prototype.destroy=function(){var a=this.context.gl;this.buffer&&(a.deleteBuffer(this.buffer),delete this.buffer)};var Fc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",
Float32:"FLOAT"},vb=function(a,c,d,g){this.length=c.length;this.attributes=d;this.itemSize=c.bytesPerElement;this.dynamicDraw=g;this.context=a;d=a.gl;this.buffer=d.createBuffer();a.bindVertexBuffer.set(this.buffer);d.bufferData(d.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW);this.dynamicDraw||delete c.arrayBuffer};vb.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};vb.prototype.updateData=function(a){var c=this.context.gl;this.bind();c.bufferSubData(c.ARRAY_BUFFER,
0,a.arrayBuffer)};vb.prototype.enableAttributes=function(a,c){for(var d=0;d<this.attributes.length;d++){var g=c.attributes[this.attributes[d].name];void 0!==g&&a.enableVertexAttribArray(g)}};vb.prototype.setVertexAttribPointers=function(a,c,d){for(var f=0;f<this.attributes.length;f++){var l=this.attributes[f],n=c.attributes[l.name];void 0!==n&&a.vertexAttribPointer(n,l.components,a[Fc[l.type]],!1,this.itemSize,l.offset+this.itemSize*(d||0))}};vb.prototype.destroy=function(){var a=this.context.gl;
this.buffer&&(a.deleteBuffer(this.buffer),delete this.buffer)};var H=function(a){this.gl=a.gl;this.current=this.default=this.getDefault();this.dirty=!1};H.prototype.get=function(){return this.current};H.prototype.set=function(a){};H.prototype.getDefault=function(){return this.default};H.prototype.setDefault=function(){this.set(this.default)};var vd=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=
function(){return d.Color.transparent},c.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},c}(H),Gc=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 1},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=
a,this.dirty=!1)},c}(H),Yd=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 0},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},c}(H),Oa=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=
function(){return[!0,!0,!0,!0]},c.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},c}(H),wd=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!0},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=
a,this.dirty=!1)},c}(H),p=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 255},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},c}(H),q=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=
function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},c.prototype.set=function(a){var c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},c}(H),h=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},c.prototype.set=function(a){var c=
this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},c}(H),m=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST);this.current=a;this.dirty=!1}},c}(H),x=function(a){function c(){a.apply(this,
arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return[0,1]},c.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},c}(H),r=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=
function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);this.current=a;this.dirty=!1}},c}(H),w=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.LESS},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},c}(H),v=function(a){function c(){a.apply(this,
arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND);this.current=a;this.dirty=!1}},c}(H),z=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){var a=this.gl;return[a.ONE,
a.ZERO]},c.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},c}(H),y=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return d.Color.transparent},c.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,
a.b,a.a),this.current=a,this.dirty=!1)},c}(H),F=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.FUNC_ADD},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},c}(H),M=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=
c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);this.current=a;this.dirty=!1}},c}(H),S=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.BACK},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,
this.dirty=!1)},c}(H),E=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.CCW},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},c}(H),B=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=
function(){return null},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},c}(H),I=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.TEXTURE0},c.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},c}(H),ma=function(a){function c(){a.apply(this,
arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},c.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},c}(H),Ba=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&
a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a);this.current=a;this.dirty=!1}},c}(H),O=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,
a);this.current=a;this.dirty=!1}},c}(H),R=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,a);this.current=a;this.dirty=!1}},c}(H),P=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=
c,c.prototype.getDefault=function(){return null},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a);this.current=a;this.dirty=!1}},c}(H),gb=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(a){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a);this.current=a;this.dirty=!1},c}(H),
wb=function(a){function c(c){a.call(this,c);this.vao=c.extVertexArrayObject}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},c}(H),da=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,
c.prototype.getDefault=function(){return 4},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a);this.current=a;this.dirty=!1}},c}(H),Ra=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
a);this.current=a;this.dirty=!1}},c}(H),Lb=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a);this.current=a;this.dirty=!1}},c}(H),ia=function(a){function c(c,d){a.call(this,c);this.context=c;this.parent=d}return a&&(c.__proto__=a),c.prototype=Object.create(a&&
a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c}(H),xb=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.setDirty=function(){this.dirty=!0},c.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0);this.current=a;this.dirty=
!1}},c}(ia),od=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a);this.current=a;this.dirty=!1}},c}(ia),Zd=function(a,c,d){this.context=a;this.width=c;this.height=d;c=this.framebuffer=a.gl.createFramebuffer();this.colorAttachment=
new xb(a,c);this.depthAttachment=new od(a,c)};Zd.prototype.destroy=function(){var a=this.context.gl,c=this.colorAttachment.get();c&&a.deleteTexture(c);(c=this.depthAttachment.get())&&a.deleteRenderbuffer(c);a.deleteFramebuffer(this.framebuffer)};var la=function(a,c,d){this.func=a;this.mask=c;this.range=d};la.ReadOnly=!1;la.ReadWrite=!0;la.disabled=new la(519,la.ReadOnly,[0,1]);var Ca=function(a,c,d,g,l,n){this.test=a;this.ref=c;this.mask=d;this.fail=g;this.depthFail=l;this.pass=n};Ca.disabled=new Ca({func:519,
mask:0},0,0,7680,7680,7680);var Ha=function(a,c,d){this.blendFunction=a;this.blendColor=c;this.mask=d};Ha.Replace=[1,0];Ha.disabled=new Ha(Ha.Replace,d.Color.transparent,[!1,!1,!1,!1]);Ha.unblended=new Ha(Ha.Replace,d.Color.transparent,[!0,!0,!0,!0]);Ha.alphaBlended=new Ha([1,771],d.Color.transparent,[!0,!0,!0,!0]);var na=function(a,c,d){this.enable=a;this.mode=c;this.frontFace=d};na.disabled=new na(!1,1029,2305);na.backCCW=new na(!0,1029,2305);var $a=function(a){this.gl=a;this.extVertexArrayObject=
this.gl.getExtension("OES_vertex_array_object");this.clearColor=new vd(this);this.clearDepth=new Gc(this);this.clearStencil=new Yd(this);this.colorMask=new Oa(this);this.depthMask=new wd(this);this.stencilMask=new p(this);this.stencilFunc=new q(this);this.stencilOp=new h(this);this.stencilTest=new m(this);this.depthRange=new x(this);this.depthTest=new r(this);this.depthFunc=new w(this);this.blend=new v(this);this.blendFunc=new z(this);this.blendColor=new y(this);this.blendEquation=new F(this);this.cullFace=
new M(this);this.cullFaceSide=new S(this);this.frontFace=new E(this);this.program=new B(this);this.activeTexture=new I(this);this.viewport=new ma(this);this.bindFramebuffer=new Ba(this);this.bindRenderbuffer=new O(this);this.bindTexture=new R(this);this.bindVertexBuffer=new P(this);this.bindElementBuffer=new gb(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new wb(this);this.pixelStoreUnpack=new da(this);this.pixelStoreUnpackPremultiplyAlpha=new Ra(this);this.pixelStoreUnpackFlipY=new Lb(this);
(this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=a.getExtension("OES_texture_half_float"))&&a.getExtension("OES_texture_half_float_linear")};$a.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=
!0;this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=
!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};$a.prototype.createIndexBuffer=function(a,c){return new Kb(this,a,c)};$a.prototype.createVertexBuffer=function(a,c,d){return new vb(this,a,c,d)};$a.prototype.createRenderbuffer=function(a,c,d){var f=this.gl,
l=f.createRenderbuffer();return this.bindRenderbuffer.set(l),f.renderbufferStorage(f.RENDERBUFFER,a,c,d),this.bindRenderbuffer.set(null),l};$a.prototype.createFramebuffer=function(a,c){return new Zd(this,a,c)};$a.prototype.clear=function(a){var c=a.color;a=a.depth;var d=this.gl,g=0;c&&(g|=d.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0]));void 0!==a&&(g|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0));d.clear(g)};$a.prototype.setCullFace=
function(a){!1===a.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))};$a.prototype.setDepthMode=function(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)};$a.prototype.setStencilMode=function(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,
a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)};$a.prototype.setColorMode=function(a){d.isEqual(a.blendFunction,Ha.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor));this.colorMask.set(a.mask)};$a.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var sc=function(a){function c(c,g,l){var f=this;a.call(this);this.id=c;this.dispatcher=
l;this.on("data",function(a){"source"===a.dataType&&"metadata"===a.sourceDataType&&(f._sourceLoaded=!0);f._sourceLoaded&&!f._paused&&"source"===a.dataType&&"content"===a.sourceDataType&&(f.reload(),f.transform&&f.update(f.transform))});this.on("error",function(){f._sourceErrored=!0});this._source=ud(c,g,l,this);this._tiles={};this._cache=new Za(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._coveredTiles={};this._state=new d.SourceFeatureState}
return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(a){this._maxTileCacheSize=(this.map=a)?a._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(a)},c.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},c.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var a in this._tiles){var c=this._tiles[a];if("loaded"!==c.state&&
"errored"!==c.state)return!1}return!0},c.prototype.getSource=function(){return this._source},c.prototype.pause=function(){this._paused=!0},c.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;a&&this.reload();this.transform&&this.update(this.transform)}},c.prototype._loadTile=function(a,c){return this._source.loadTile(a,c)},c.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},
c.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},c.prototype.serialize=function(){return this._source.serialize()},c.prototype.prepare=function(a){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[c].upload(a)},c.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(Qa)},c.prototype.getRenderableIds=function(a){var c=
this,f=[],n;for(n in c._tiles)c._isIdRenderable(+n,a)&&f.push(+n);return a?f.sort(function(a,f){a=c._tiles[a].tileID;f=c._tiles[f].tileID;var g=(new d.Point(a.canonical.x,a.canonical.y))._rotate(c.transform.angle),l=(new d.Point(f.canonical.x,f.canonical.y))._rotate(c.transform.angle);return a.overscaledZ-f.overscaledZ||l.y-g.y||l.x-g.x}):f.sort(Qa)},c.prototype.hasRenderableParent=function(a){a=this.findLoadedParent(a,0);return!!a&&this._isIdRenderable(a.tileID.key)},c.prototype._isIdRenderable=
function(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())},c.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)"errored"!==this._tiles[a].state&&this._reloadTile(a,"reloading")},c.prototype._reloadTile=function(a,c){var d=this._tiles[a];d&&("loading"!==d.state&&(d.state=c),this._loadTile(d,this._tileLoaded.bind(this,d,a,c)))},c.prototype._tileLoaded=function(a,
c,l,n){if(n)return a.state="errored",void(404!==n.status?this._source.fire(new d.ErrorEvent(n,{tile:a})):this.update(this.transform));a.timeAdded=d.browser.now();"expired"===l&&(a.refreshedUponExpiration=!0);this._setTileReloadTimer(c,a);"raster-dem"===this.getSource().type&&a.dem&&this._backfillDEM(a);this._state.initializeTileState(a,this.map?this.map.painter:null);this._source.fire(new d.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},c.prototype._backfillDEM=function(a){function c(a,
c){a.needsHillshadePrepare=!0;var d=c.tileID.canonical.x-a.tileID.canonical.x,f=c.tileID.canonical.y-a.tileID.canonical.y,g=Math.pow(2,a.tileID.canonical.z),l=c.tileID.key;0===d&&0===f||1<Math.abs(f)||(1<Math.abs(d)&&(1===Math.abs(d+g)?d+=g:1===Math.abs(d-g)&&(d-=g)),c.dem&&a.dem&&(a.dem.backfillBorder(c.dem,d,f),a.neighboringTiles&&a.neighboringTiles[l]&&(a.neighboringTiles[l].backfilled=!0)))}for(var d=this.getRenderableIds(),f=0;f<d.length;f++){var h=d[f];a.neighboringTiles&&a.neighboringTiles[h]&&
(h=this.getTileByID(h),c(a,h),c(h,a))}},c.prototype.getTile=function(a){return this.getTileByID(a.key)},c.prototype.getTileByID=function(a){return this._tiles[a]},c.prototype.getZoom=function(a){return a.zoom+a.scaleZoom(a.tileSize/this._source.tileSize)},c.prototype._retainLoadedChildren=function(a,c,d,n){for(var f in this._tiles){var g=this._tiles[f];if(!(n[f]||!g.hasData()||g.tileID.overscaledZ<=c||g.tileID.overscaledZ>d)){for(var l=g.tileID;g&&g.tileID.overscaledZ>c+1;){var h=g.tileID.scaledTo(g.tileID.overscaledZ-
1);(g=this._tiles[h.key])&&g.hasData()&&(l=h)}for(g=l;g.overscaledZ>c;)if(a[(g=g.scaledTo(g.overscaledZ-1)).key]){n[l.key]=l;break}}}},c.prototype.findLoadedParent=function(a,c){for(var d=a.overscaledZ-1;d>=c;d--){var f=a.scaledTo(d);if(!f)break;var g=this._tiles[String(f.key)];if(g&&g.hasData())return g;if(this._cache.has(f))return this._cache.get(f)}},c.prototype.updateCacheSize=function(a){a=Math.floor(5*(Math.ceil(a.width/this._source.tileSize)+1)*(Math.ceil(a.height/this._source.tileSize)+1));
this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a)},c.prototype.handleWrapJump=function(a){var c=Math.round((a-(void 0===this._prevLng?a:this._prevLng))/360);if(this._prevLng=a,c){a={};for(var d in this._tiles){var f=this._tiles[d];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+c);a[f.tileID.key]=f}for(var h in this._tiles=a,this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(var u in this._tiles)this._setTileReloadTimer(u,this._tiles[u])}},
c.prototype.update=function(a){var f=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var l;this.updateCacheSize(a);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?l=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(a){return new d.OverscaledTileID(a.canonical.z,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y)}):(l=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,
roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(l=l.filter(function(a){return f._source.hasTile(a)}))):l=[];a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(a));var n=Math.max(a-c.maxOverzooming,this._source.minzoom),h=Math.max(a+c.maxUnderzooming,this._source.minzoom);l=this._updateRetainedTiles(l,a);if(qd(this._source.type)){for(var u={},m={},p=0,q=Object.keys(l);p<q.length;p+=1){var r=q[p],v=l[r],x=f._tiles[r];!x||x.fadeEndTime&&
x.fadeEndTime<=d.browser.now()||((x=f.findLoadedParent(v,n))&&(f._addTile(x.tileID),u[x.tileID.key]=x.tileID),m[r]=v)}for(var w in this._retainLoadedChildren(m,a,h,l),u)l[w]||(f._coveredTiles[w]=!0,l[w]=u[w])}for(var y in l)f._tiles[y].clearFadeHold();w=0;for(y=d.keysDifference(this._tiles,l);w<y.length;w+=1)a=y[w],n=f._tiles[a],n.hasSymbolBuckets&&!n.holdingForFade()?n.setHoldDuration(f.map._fadeDuration):n.hasSymbolBuckets&&!n.symbolFadeFinished()||f._removeTile(a)}},c.prototype.releaseSymbolFadeTiles=
function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},c.prototype._updateRetainedTiles=function(a,d){for(var f={},g={},h=Math.max(d-c.maxOverzooming,this._source.minzoom),u=Math.max(d+c.maxUnderzooming,this._source.minzoom),m={},p=0;p<a.length;p+=1){var q=a[p],r=this._addTile(q);f[q.key]=q;r.hasData()||d<this._source.maxzoom&&(m[q.key]=q)}this._retainLoadedChildren(m,d,u,f);for(u=0;u<a.length;u+=1)if(m=a[u],p=this._tiles[m.key],!p.hasData()){if(d+1>this._source.maxzoom){if(q=
m.children(this._source.maxzoom)[0],(r=this.getTile(q))&&r.hasData()){f[q.key]=q;continue}}else if(q=m.children(this._source.maxzoom),f[q[0].key]&&f[q[1].key]&&f[q[2].key]&&f[q[3].key])continue;q=p.wasRequested();for(r=m.overscaledZ-1;r>=h;--r){var v=m.scaledTo(r);if(g[v.key])break;if(g[v.key]=!0,!(p=this.getTile(v))&&q&&(p=this._addTile(v)),p&&(f[v.key]=v,q=p.wasRequested(),p.hasData()))break}}return f},c.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&
(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));var f=!!c;return f||(c=new d.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,f||this._source.fire(new d.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),
c):null},c.prototype._setTileReloadTimer=function(a,c){var d=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);(c=c.getExpiryTimeout())&&(this._timers[a]=setTimeout(function(){d._reloadTile(a,"expired");delete d._timers[a]},c))},c.prototype._removeTile=function(a){var c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),0<c.uses||(c.hasData()?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=
!0,this._abortTile(c),this._unloadTile(c))))},c.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},c.prototype.tilesIn=function(a,c){for(var f=[],g=this.getIds(),h=1/0,u=1/0,m=-1/0,p=-1/0,q=0;q<a.length;q++){var r=a[q];h=Math.min(h,r.x);u=Math.min(u,r.y);m=Math.max(m,r.x);p=Math.max(p,r.y)}for(q=0;q<g.length;q++)if(r=this._tiles[g[q]],!r.holdingForFade()){var v=r.tileID,x=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),
w=c*r.queryPadding*d.EXTENT/r.tileSize/x,y=[v.getTilePoint(new d.MercatorCoordinate(h,u)),v.getTilePoint(new d.MercatorCoordinate(m,p))];if(y[0].x-w<d.EXTENT&&y[0].y-w<d.EXTENT&&0<=y[1].x+w&&0<=y[1].y+w){w=[];for(y=0;y<a.length;y++)w.push(v.getTilePoint(a[y]));f.push({tile:r,tileID:v,queryGeometry:[w],scale:x})}}return f},c.prototype.getVisibleCoordinates=function(a){var c=this;a=this.getRenderableIds(a).map(function(a){return c._tiles[a].tileID});for(var d=0;d<a.length;d+=1){var f=a[d];f.posMatrix=
c.transform.calculatePosMatrix(f.toUnwrapped())}return a},c.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(qd(this._source.type))for(var a in this._tiles){var c=this._tiles[a];if(void 0!==c.fadeEndTime&&c.fadeEndTime>=d.browser.now())return!0}return!1},c.prototype.setFeatureState=function(a,c,d){this._state.updateState(a||"_geojsonTileLayer",c,d)},c.prototype.getFeatureState=function(a,c){return a=a||"_geojsonTileLayer",this._state.getState(a,c)},c}(d.Evented);sc.maxOverzooming=
10;sc.maxUnderzooming=3;var ab=function(){this.active={}};ab.prototype.acquire=function(a){if(!this.workers)for(this.workers=[];this.workers.length<ab.workerCount;)this.workers.push(new Rb);return this.active[a]=!0,this.workers.slice()};ab.prototype.release=function(a){delete this.active[a];0===Object.keys(this.active).length&&(this.workers.forEach(function(a){a.terminate()}),this.workers=null)};var cd;ab.workerCount=Math.max(Math.min(Math.floor(d.browser.hardwareConcurrency/2),6),1);var Z={setStyle:"setStyle",
addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Da=function(a,
c,d){var f=this.boxCells=[],l=this.circleCells=[];this.xCellCount=Math.ceil(a/d);this.yCellCount=Math.ceil(c/d);for(d=0;d<this.xCellCount*this.yCellCount;d++)f.push([]),l.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=a;this.height=c;this.xScale=this.xCellCount/a;this.yScale=this.yCellCount/c;this.circleUid=this.boxUid=0};Da.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};Da.prototype.insert=function(a,c,d,g,l){this._forEachCell(c,
d,g,l,this._insertBoxCell,this.boxUid++);this.boxKeys.push(a);this.bboxes.push(c);this.bboxes.push(d);this.bboxes.push(g);this.bboxes.push(l)};Da.prototype.insertCircle=function(a,c,d,g){this._forEachCell(c-g,d-g,c+g,d+g,this._insertCircleCell,this.circleUid++);this.circleKeys.push(a);this.circles.push(c);this.circles.push(d);this.circles.push(g)};Da.prototype._insertBoxCell=function(a,c,d,g,l,h){this.boxCells[l].push(h)};Da.prototype._insertCircleCell=function(a,c,d,g,l,h){this.circleCells[l].push(h)};
Da.prototype._query=function(a,c,d,g,l,h){if(0>d||a>this.width||0>g||c>this.height)return!l&&[];var f=[];if(0>=a&&0>=c&&this.width<=d&&this.height<=g){if(l)return!0;for(a=0;a<this.boxKeys.length;a++)f.push({key:this.boxKeys[a],x1:this.bboxes[4*a],y1:this.bboxes[4*a+1],x2:this.bboxes[4*a+2],y2:this.bboxes[4*a+3]});for(a=0;a<this.circleKeys.length;a++)c=this.circles[3*a],d=this.circles[3*a+1],g=this.circles[3*a+2],f.push({key:this.circleKeys[a],x1:c-g,y1:d-g,x2:c+g,y2:d+g});return h?f.filter(h):f}return this._forEachCell(a,
c,d,g,this._queryCell,f,{hitTest:l,seenUids:{box:{},circle:{}}},h),l?0<f.length:f};Da.prototype._queryCircle=function(a,c,d,g,l){var f=a-d,h=a+d,u=c-d,m=c+d;if(0>h||f>this.width||0>m||u>this.height)return!g&&[];var p=[];return this._forEachCell(f,u,h,m,this._queryCellCircle,p,{hitTest:g,circle:{x:a,y:c,radius:d},seenUids:{box:{},circle:{}}},l),g?0<p.length:p};Da.prototype.query=function(a,c,d,g,l){return this._query(a,c,d,g,!1,l)};Da.prototype.hitTest=function(a,c,d,g,l){return this._query(a,c,d,
g,!0,l)};Da.prototype.hitTestCircle=function(a,c,d,g){return this._queryCircle(a,c,d,!0,g)};Da.prototype._queryCell=function(a,c,d,g,l,h,t,u){var f=t.seenUids,n=this.boxCells[l];if(null!==n)for(var m=this.bboxes,p=0;p<n.length;p+=1){var q=n[p];if(!f.box[q]){f.box[q]=!0;var r=4*q;if(a<=m[r+2]&&c<=m[r+3]&&d>=m[r+0]&&g>=m[r+1]&&(!u||u(this.boxKeys[q]))){if(t.hitTest)return h.push(!0),!0;h.push({key:this.boxKeys[q],x1:m[r],y1:m[r+1],x2:m[r+2],y2:m[r+3]})}}}l=this.circleCells[l];if(null!==l)for(n=this.circles,
m=0;m<l.length;m+=1)if(p=l[m],!f.circle[p]){f.circle[p]=!0;var v=3*p;if(this._circleAndRectCollide(n[v],n[v+1],n[v+2],a,c,d,g)&&(!u||u(this.circleKeys[p]))){if(t.hitTest)return h.push(!0),!0;q=n[v];r=n[v+1];v=n[v+2];h.push({key:this.circleKeys[p],x1:q-v,y1:r-v,x2:q+v,y2:r+v})}}};Da.prototype._queryCellCircle=function(a,c,d,g,l,h,t,u){a=t.circle;t=t.seenUids;c=this.boxCells[l];if(null!==c)for(d=this.bboxes,g=0;g<c.length;g+=1){var f=c[g];if(!t.box[f]){t.box[f]=!0;var n=4*f;if(this._circleAndRectCollide(a.x,
a.y,a.radius,d[n+0],d[n+1],d[n+2],d[n+3])&&(!u||u(this.boxKeys[f])))return h.push(!0),!0}}l=this.circleCells[l];if(null!==l)for(c=this.circles,d=0;d<l.length;d+=1)if(g=l[d],!t.circle[g]&&(t.circle[g]=!0,f=3*g,this._circlesCollide(c[f],c[f+1],c[f+2],a.x,a.y,a.radius)&&(!u||u(this.circleKeys[g]))))return h.push(!0),!0};Da.prototype._forEachCell=function(a,c,d,g,l,h,t,u){for(var f=this._convertToXCellCoord(a),n=this._convertToYCellCoord(c),m=this._convertToXCellCoord(d),p=this._convertToYCellCoord(g);f<=
m;f++)for(var q=n;q<=p;q++)if(l.call(this,a,c,d,g,this.xCellCount*q+f,h,t,u))return};Da.prototype._convertToXCellCoord=function(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))};Da.prototype._convertToYCellCoord=function(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))};Da.prototype._circlesCollide=function(a,c,d,g,l,h){a=g-a;c=l-c;d+=h;return d*d>a*a+c*c};Da.prototype._circleAndRectCollide=function(a,c,d,g,l,h,t){h=(h-g)/2;a=Math.abs(a-(g+h));
if(a>h+d)return!1;t=(t-l)/2;c=Math.abs(c-(l+t));if(c>t+d)return!1;if(a<=h||c<=t)return!0;l=a-h;c-=t;return l*l+c*c<=d*d};var se=d.properties.layout,Sd=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),ba=function(a,c,d){void 0===c&&(c=new Da(a.width+200,a.height+200,25));void 0===d&&(d=new Da(a.width+200,a.height+200,25));this.transform=a;this.grid=c;this.ignoredGrid=d;this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance;this.screenRightBoundary=a.width+100;this.screenBottomBoundary=
a.height+100;this.gridRightBoundary=a.width+200;this.gridBottomBoundary=a.height+200};ba.prototype.placeCollisionBox=function(a,c,d,g,l){g=this.projectAndGetPerspectiveRatio(g,a.anchorPointX,a.anchorPointY);var f=d*g.perspectiveRatio;d=a.x1*f+g.point.x;var h=a.y1*f+g.point.y,u=a.x2*f+g.point.x;a=a.y2*f+g.point.y;return!this.isInsideGrid(d,h,u,a)||!c&&this.grid.hitTest(d,h,u,a,l)?{box:[],offscreen:!1}:{box:[d,h,u,a],offscreen:this.isOffscreen(d,h,u,a)}};ba.prototype.approximateTileDistance=function(a,
c,d,g,l){d*=a.lastSegmentViewportDistance;return a.prevTileDistance+d+((l?1:g/this.pitchfactor)-1)*d*Math.abs(Math.sin(c))};ba.prototype.placeCollisionCircles=function(a,c,f,g,l,h,t,u,m,p,q,r,v){var n=[],D=this.projectAnchor(m,l.anchorX,l.anchorY),x=u/24,w=l.lineOffsetX*u;u*=l.lineOffsetY;var y=new d.Point(l.anchorX,l.anchorY);l=Pc(x,t,w,u,!1,db(y,p).point,y,l,h,p,{},!0);t=h=!1;p=!0;x=D.perspectiveRatio*g;w=1/(g*f);g=f=0;l&&(f=this.approximateTileDistance(l.first.tileDistance,l.first.angle,w,D.cameraDistance,
r),g=this.approximateTileDistance(l.last.tileDistance,l.last.angle,w,D.cameraDistance,r));for(r=0;r<a.length;r+=5)if(D=a[r],u=a[r+1],w=a[r+2],y=a[r+3],!l||y<-f||y>g)a[r+4]=0;else{D=this.projectPoint(m,D,u);w*=x;if(0<n.length&&(u=D.x-n[n.length-4],y=D.y-n[n.length-3],w*w*2>u*u+y*y&&r+8<a.length&&(u=a[r+8],u>-f&&u<g))){a[r+4]=0;continue}n.push(D.x,D.y,w,r/5);a[r+4]=1;u=D.x-w;y=D.y-w;var K=D.x+w,z=D.y+w;if(p=p&&this.isOffscreen(u,y,K,z),t=t||this.isInsideGrid(u,y,K,z),!c&&this.grid.hitTestCircle(D.x,
D.y,w,v)){if(!q)return{circles:[],offscreen:!1};h=!0}}return{circles:h||!t?[]:n,offscreen:p}};ba.prototype.queryRenderedSymbols=function(a){if(0===a.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var c=[],f=1/0,g=1/0,l=-1/0,h=-1/0,t=0;t<a.length;t+=1){var u=a[t];u=new d.Point(u.x+100,u.y+100);f=Math.min(f,u.x);g=Math.min(g,u.y);l=Math.max(l,u.x);h=Math.max(h,u.y);c.push(u)}a={};t={};u=0;for(f=this.grid.query(f,g,l,h).concat(this.ignoredGrid.query(f,g,l,h));u<f.length;u+=
1)l=f[u],g=l.key,(void 0===a[g.bucketInstanceId]&&(a[g.bucketInstanceId]={}),a[g.bucketInstanceId][g.featureIndex])||(l=[new d.Point(l.x1,l.y1),new d.Point(l.x2,l.y1),new d.Point(l.x2,l.y2),new d.Point(l.x1,l.y2)],d.polygonIntersectsPolygon(c,l)&&(a[g.bucketInstanceId][g.featureIndex]=!0,void 0===t[g.bucketInstanceId]&&(t[g.bucketInstanceId]=[]),t[g.bucketInstanceId].push(g.featureIndex)));return t};ba.prototype.insertCollisionBox=function(a,c,d,g,l){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,
featureIndex:g,collisionGroupID:l},a[0],a[1],a[2],a[3])};ba.prototype.insertCollisionCircles=function(a,c,d,g,l){c=c?this.ignoredGrid:this.grid;d={bucketInstanceId:d,featureIndex:g,collisionGroupID:l};for(g=0;g<a.length;g+=4)c.insertCircle(d,a[g],a[g+1],a[g+2])};ba.prototype.projectAnchor=function(a,c,d){c=[c,d,0,1];return kc(c,c,a),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5,cameraDistance:c[3]}};ba.prototype.projectPoint=function(a,c,f){c=[c,f,0,1];return kc(c,c,a),new d.Point((c[0]/
c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100)};ba.prototype.projectAndGetPerspectiveRatio=function(a,c,f){c=[c,f,0,1];return kc(c,c,a),{point:new d.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}};ba.prototype.isOffscreen=function(a,c,d,g){return 100>d||a>=this.screenRightBoundary||100>g||c>this.screenBottomBoundary};ba.prototype.isInsideGrid=function(a,c,
d,g){return 0<=d&&a<this.gridRightBoundary&&0<=g&&c<this.gridBottomBoundary};var $d=function(a,c,d,g){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?c:-c))):g&&d?1:0;this.placed=d};$d.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var tc=function(a,c,d,g,l){this.text=new $d(a?a.text:null,c,d,l);this.icon=new $d(a?a.icon:null,c,g,l)};tc.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var te=function(a,c,d){this.text=a;this.icon=c;this.skipFade=
d},df=function(a,c,d,g,l){this.bucketInstanceId=a;this.featureIndex=c;this.sourceLayerIndex=d;this.bucketIndex=g;this.tileID=l},ae=function(a){this.crossSourceCollisions=a;this.maxGroupID=0;this.collisionGroups={}};ae.prototype.get=function(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){var c=++this.maxGroupID;this.collisionGroups[a]={ID:c,predicate:function(a){return a.collisionGroupID===c}}}return this.collisionGroups[a]};var yb=function(a,c,d){this.transform=
a.clone();this.collisionIndex=new ba(this.transform);this.placements={};this.opacities={};this.stale=!1;this.commitTime=0;this.fadeDuration=c;this.retainedQueryData={};this.collisionGroups=new ae(d)};yb.prototype.placeLayerTile=function(a,c,f,g){var l=c.getBucket(a),h=c.latestFeatureIndex;if(l&&h&&a.id===l.layerIds[0]){a=c.collisionBoxArray;var t=l.layers[0].layout,u=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),m=c.tileSize/d.EXTENT,p=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),
q=Sb(p,"map"===t.get("text-pitch-alignment"),"map"===t.get("text-rotation-alignment"),this.transform,fa(c,1,this.transform.zoom));t=Sb(p,"map"===t.get("icon-pitch-alignment"),"map"===t.get("icon-rotation-alignment"),this.transform,fa(c,1,this.transform.zoom));this.retainedQueryData[l.bucketInstanceId]=new df(l.bucketInstanceId,h,l.sourceLayerIndex,l.index,c.tileID);this.placeLayerBucket(l,p,q,t,u,m,f,c.holdingForFade(),g,a)}};yb.prototype.placeLayerBucket=function(a,c,f,g,l,h,t,u,m,p){g=a.layers[0].layout;
var n=d.evaluateSizeForZoom(a.textSizeData,this.transform.zoom,d.properties.layout.properties["text-size"]),q=g.get("text-optional"),r=g.get("icon-optional"),D=g.get("text-allow-overlap"),v=g.get("icon-allow-overlap"),w=D&&(v||!a.hasIconData()||r);D=v&&(D||!a.hasTextData()||q);v=this.collisionGroups.get(a.sourceID);!a.collisionArrays&&p&&a.deserializeCollisionBoxes(p);for(p=0;p<a.symbolInstances.length;p++){var x=a.symbolInstances.get(p);if(!m[x.crossTileID])if(u)this.placements[x.crossTileID]=new te(!1,
!1,!1);else{var y=!1,K=!1,z=!0,A=null,B=null,E=null,F=0,G=0,H=a.collisionArrays[p];H.textFeatureIndex&&(F=H.textFeatureIndex);H.textBox&&(y=0<(A=this.collisionIndex.placeCollisionBox(H.textBox,g.get("text-allow-overlap"),h,c,v.predicate)).box.length,z=z&&A.offscreen);var I=H.textCircles;I&&(y=a.text.placedSymbolArray.get(x.horizontalPlacedTextSymbolIndex),B=d.evaluateSizeForFeature(a.textSizeData,n,y),B=this.collisionIndex.placeCollisionCircles(I,g.get("text-allow-overlap"),l,h,y,a.lineVertexArray,
a.glyphOffsetArray,B,c,f,t,"map"===g.get("text-pitch-alignment"),v.predicate),y=g.get("text-allow-overlap")||0<B.circles.length,z=z&&B.offscreen);H.iconFeatureIndex&&(G=H.iconFeatureIndex);H.iconBox&&(K=0<(E=this.collisionIndex.placeCollisionBox(H.iconBox,g.get("icon-allow-overlap"),h,c,v.predicate)).box.length,z=z&&E.offscreen);H=q||0===x.numGlyphVertices&&0===x.numVerticalGlyphVertices;I=r||0===x.numIconVertices;H||I?I?H||(K=K&&y):y=K&&y:K=y=K&&y;y&&A&&this.collisionIndex.insertCollisionBox(A.box,
g.get("text-ignore-placement"),a.bucketInstanceId,F,v.ID);K&&E&&this.collisionIndex.insertCollisionBox(E.box,g.get("icon-ignore-placement"),a.bucketInstanceId,G,v.ID);y&&B&&this.collisionIndex.insertCollisionCircles(B.circles,g.get("text-ignore-placement"),a.bucketInstanceId,F,v.ID);this.placements[x.crossTileID]=new te(y||w,K||D,z||a.justReloaded);m[x.crossTileID]=!0}}a.justReloaded=!1};yb.prototype.commit=function(a,c){this.commitTime=c;var d=!1,g=a&&0!==this.fadeDuration?(this.commitTime-a.commitTime)/
this.fadeDuration:1,l=a?a.opacities:{};for(m in this.placements){var h=this.placements[m],t=l[m];t?(this.opacities[m]=new tc(t,g,h.text,h.icon),d=d||h.text!==t.text.placed||h.icon!==t.icon.placed):(this.opacities[m]=new tc(null,g,h.text,h.icon,h.skipFade),d=d||h.text||h.icon)}for(var u in l){var m=l[u];this.opacities[u]||(h=new tc(m,g,!1,!1),h.isHidden()||(this.opacities[u]=h,d=d||m.text.placed||m.icon.placed))}d?this.lastPlacementChangeTime=c:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=
a?a.lastPlacementChangeTime:c)};yb.prototype.updateLayerOpacities=function(a,c){for(var d={},g=0;g<c.length;g+=1){var l=c[g],h=l.getBucket(a);h&&l.latestFeatureIndex&&a.id===h.layerIds[0]&&this.updateBucketOpacities(h,d,l.collisionBoxArray)}};yb.prototype.updateBucketOpacities=function(a,c,d){a.hasTextData()&&a.text.opacityVertexArray.clear();a.hasIconData()&&a.icon.opacityVertexArray.clear();a.hasCollisionBoxData()&&a.collisionBox.collisionVertexArray.clear();a.hasCollisionCircleData()&&a.collisionCircle.collisionVertexArray.clear();
var f=a.layers[0].layout,l=new tc(null,0,!1,!1,!0),h=f.get("text-allow-overlap"),t=f.get("icon-allow-overlap");f=new tc(null,0,h&&(t||!a.hasIconData()||f.get("icon-optional")),t&&(h||!a.hasTextData()||f.get("text-optional")),!0);!a.collisionArrays&&d&&(a.hasCollisionBoxData()||a.hasCollisionCircleData())&&a.deserializeCollisionBoxes(d);for(d=0;d<a.symbolInstances.length;d++){var u=a.symbolInstances.get(d);h=c[u.crossTileID];t=this.opacities[u.crossTileID];h?t=l:t||(t=f,this.opacities[u.crossTileID]=
t);c[u.crossTileID]=!0;var m=0<u.numIconVertices;if(0<u.numGlyphVertices||0<u.numVerticalGlyphVertices){for(var p=V(t.text),q=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,r=0;r<q;r++)a.text.opacityVertexArray.emplaceBack(p);a.text.placedSymbolArray.get(u.horizontalPlacedTextSymbolIndex).hidden=t.text.isHidden();0<=u.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).hidden=t.text.isHidden())}if(m){m=V(t.icon);for(p=0;p<u.numIconVertices/4;p++)a.icon.opacityVertexArray.emplaceBack(m);
a.icon.placedSymbolArray.get(d).hidden=t.icon.isHidden()}if(a.hasCollisionBoxData()||a.hasCollisionCircleData())if(u=a.collisionArrays[d])if(u.textBox&&Eb(a.collisionBox.collisionVertexArray,t.text.placed,!1),u.iconBox&&Eb(a.collisionBox.collisionVertexArray,t.icon.placed,!1),(u=u.textCircles)&&a.hasCollisionCircleData())for(m=0;m<u.length;m+=5)Eb(a.collisionCircle.collisionVertexArray,t.text.placed,h||0===u[m+4])}a.sortFeatures(this.transform.angle);this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=
a.featureSortOrder);a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray);a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray);a.hasCollisionBoxData()&&a.collisionBox.collisionVertexBuffer&&a.collisionBox.collisionVertexBuffer.updateData(a.collisionBox.collisionVertexArray);a.hasCollisionCircleData()&&a.collisionCircle.collisionVertexBuffer&&a.collisionCircle.collisionVertexBuffer.updateData(a.collisionCircle.collisionVertexArray)};
yb.prototype.symbolFadeChange=function(a){return 0===this.fadeDuration?1:(a-this.commitTime)/this.fadeDuration};yb.prototype.hasTransitions=function(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration};yb.prototype.stillRecent=function(a){return this.commitTime+this.fadeDuration>a};yb.prototype.setStale=function(){this.stale=!0};var ue=Math.pow(2,25),ef=Math.pow(2,24),be=Math.pow(2,17),ff=Math.pow(2,16),xd=Math.pow(2,9),yd=Math.pow(2,8),le=Math.pow(2,1),gf=function(){this._currentTileIndex=
0;this._seenCrossTileIDs={}};gf.prototype.continuePlacement=function(a,c,d,g,l){for(;this._currentTileIndex<a.length;)if(c.placeLayerTile(g,a[this._currentTileIndex],d,this._seenCrossTileIDs),this._currentTileIndex++,l())return!0};var fd=function(a,c,d,g,l,h){this.placement=new yb(a,l,h);this._currentPlacementIndex=c.length-1;this._forceFullPlacement=d;this._showCollisionBoxes=g;this._done=!1};fd.prototype.isDone=function(){return this._done};fd.prototype.continuePlacement=function(a,c,f){for(var g=
this,l=d.browser.now(),h=function(){var a=d.browser.now()-l;return!g._forceFullPlacement&&2<a};0<=this._currentPlacementIndex;){var t=c[a[g._currentPlacementIndex]],u=g.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=u)&&(!t.maxzoom||t.maxzoom>u)){if(g._inProgressLayer||(g._inProgressLayer=new gf),g._inProgressLayer.continuePlacement(f[t.source],g.placement,g._showCollisionBoxes,t,h))return;delete g._inProgressLayer}g._currentPlacementIndex--}this._done=!0};fd.prototype.commit=
function(a,c){return this.placement.commit(a,c),this.placement};var Eh=512/d.EXTENT/2,vc=function(a,c,d){this.tileID=a;this.indexedSymbolInstances={};this.bucketInstanceId=d;for(d=0;d<c.length;d++){var f=c.get(d),l=f.key;this.indexedSymbolInstances[l]||(this.indexedSymbolInstances[l]=[]);this.indexedSymbolInstances[l].push({crossTileID:f.crossTileID,coord:this.getScaledCoordinates(f,a)})}};vc.prototype.getScaledCoordinates=function(a,c){var f=Eh/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*
d.EXTENT+a.anchorX)*f),y:Math.floor((c.canonical.y*d.EXTENT+a.anchorY)*f)}};vc.prototype.findMatches=function(a,c,d){for(var f=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),l=0;l<a.length;l++){var h=a.get(l);if(!h.crossTileID){var t=this.indexedSymbolInstances[h.key];if(t)for(var u=this.getScaledCoordinates(h,c),m=0;m<t.length;m+=1){var p=t[m];if(Math.abs(p.coord.x-u.x)<=f&&Math.abs(p.coord.y-u.y)<=f&&!d[p.crossTileID]){d[p.crossTileID]=!0;h.crossTileID=
p.crossTileID;break}}}}};var hf=function(){this.maxCrossTileID=0};hf.prototype.generate=function(){return++this.maxCrossTileID};var Aa=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Aa.prototype.handleWrapJump=function(a){var c=Math.round((a-this.lng)/360);if(0!==c)for(var d in this.indexes){var g=this.indexes[d],l={},h;for(h in g){var t=g[h];t.tileID=t.tileID.unwrapTo(t.tileID.wrap+c);l[t.tileID.key]=t}this.indexes[d]=l}this.lng=a};Aa.prototype.addBucket=function(a,c,d){if(this.indexes[a.overscaledZ]&&
this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(var f=0;f<c.symbolInstances.length;f++)c.symbolInstances.get(f).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});f=this.usedCrossTileIDs[a.overscaledZ];for(var l in this.indexes){var h=this.indexes[l];if(Number(l)>a.overscaledZ)for(var t in h){var u=h[t];
u.tileID.isChildOf(a)&&u.findMatches(c.symbolInstances,a,f)}else(h=h[a.scaledTo(Number(l)).key])&&h.findMatches(c.symbolInstances,a,f)}for(l=0;l<c.symbolInstances.length;l++)t=c.symbolInstances.get(l),t.crossTileID||(t.crossTileID=d.generate(),f[t.crossTileID]=!0);return void 0===this.indexes[a.overscaledZ]&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new vc(a,c.symbolInstances,c.bucketInstanceId),!0};Aa.prototype.removeBucketCrossTileIDs=function(a,c){for(var d in c.indexedSymbolInstances)for(var g=
0,l=c.indexedSymbolInstances[d];g<l.length;g+=1)delete this.usedCrossTileIDs[a][l[g].crossTileID]};Aa.prototype.removeStaleBuckets=function(a){var c=!1,d;for(d in this.indexes){var g=this.indexes[d],l;for(l in g)a[g[l].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,g[l]),delete g[l],c=!0)}return c};var Mb=function(){this.layerIndexes={};this.crossTileIDs=new hf;this.maxBucketInstanceId=0;this.bucketsInCurrentPlacement={}};Mb.prototype.addLayer=function(a,c,d){var f=this.layerIndexes[a.id];void 0===
f&&(f=this.layerIndexes[a.id]=new Aa);var l=!1,h={};f.handleWrapJump(d);for(d=0;d<c.length;d+=1){var t=c[d],u=t.getBucket(a);u&&a.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(t.tileID,u,this.crossTileIDs)&&(l=!0),h[u.bucketInstanceId]=!0)}return f.removeStaleBuckets(h)&&(l=!0),l};Mb.prototype.pruneUnusedLayers=function(a){var c={},d;for(d in a.forEach(function(a){c[a]=!0}),this.layerIndexes)c[d]||delete this.layerIndexes[d]};var zd=function(a,
c){return d.emitValidationErrors(a,c&&c.filter(function(a){return"source.canvas"!==a.identifier}))},Ad=d.pick(Z,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),jf=d.pick(Z,["setCenter","setZoom","setBearing","setPitch"]),ed=function(a){function c(f,g){var l=this;void 0===g&&(g={});a.call(this);this.map=f;this.dispatcher=new Xb((cd||(cd=new ab),cd),this);this.imageManager=new pa;this.glyphManager=
new lb(f._transformRequest,g.localIdeographFontFamily);this.lineAtlas=new Cc(256,512);this.crossTileSymbolIndex=new Mb;this._layers={};this._order=[];this.sourceCaches={};this.zoomHistory=new d.ZoomHistory;this._loaded=!1;this._resetUpdates();this.dispatcher.broadcast("setReferrer",d.getReferrer());var h=this;this._rtlTextPluginCallback=c.registerForPluginAvailability(function(a){for(var c in h.dispatcher.broadcast("loadRTLTextPlugin",a.pluginURL,a.completionCallback),h.sourceCaches)h.sourceCaches[c].reload()});
this.on("data",function(a){if("source"===a.dataType&&"metadata"===a.sourceDataType&&(a=l.sourceCaches[a.sourceId])&&(a=a.getSource())&&a.vectorLayerIds)for(var c in l._layers){var d=l._layers[c];d.source===a.id&&l._validateLayer(d)}})}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.loadURL=function(a,c){var f=this;void 0===c&&(c={});this.fire(new d.Event("dataloading",{dataType:"style"}));var g="boolean"==typeof c.validate?c.validate:!d.isMapboxURL(a);
a=d.normalizeStyleURL(a,c.accessToken);a=this.map._transformRequest(a,d.ResourceType.Style);this._request=d.getJSON(a,function(a,c){f._request=null;a?f.fire(new d.ErrorEvent(a)):c&&f._load(c,g)})},c.prototype.loadJSON=function(a,c){var f=this;void 0===c&&(c={});this.fire(new d.Event("dataloading",{dataType:"style"}));this._request=d.browser.frame(function(){f._request=null;f._load(a,!1!==c.validate)})},c.prototype._load=function(a,c){var f=this;if(!c||!zd(this,d.validateStyle(a))){for(var g in this._loaded=
!0,this.stylesheet=a,a.sources)f.addSource(g,a.sources[g],{validate:!1});a.sprite?this._spriteRequest=function(a,c,f){function g(){if(n)f(n);else if(l&&h){var a=d.browser.getImageData(h),c={},g;for(g in l){var t=l[g],u=t.width,m=t.height,p=t.x,q=t.y,r=t.sdf;t=t.pixelRatio;var v=new d.RGBAImage({width:u,height:m});d.RGBAImage.copy(a,v,{x:p,y:q},{x:0,y:0},{width:u,height:m});c[g]={data:v,pixelRatio:t,sdf:r}}f(null,c)}}var l,h,n,t=1<d.browser.devicePixelRatio?"@2x":"",u=d.getJSON(c(d.normalizeSpriteURL(a,
t,".json"),d.ResourceType.SpriteJSON),function(a,c){u=null;n||(n=a,l=c,g())}),m=d.getImage(c(d.normalizeSpriteURL(a,t,".png"),d.ResourceType.SpriteImage),function(a,c){m=null;n||(n=a,h=c,g())});return{cancel:function(){u&&(u.cancel(),u=null);m&&(m.cancel(),m=null)}}}(a.sprite,this.map._transformRequest,function(a,c){if(f._spriteRequest=null,a)f.fire(new d.ErrorEvent(a));else if(c)for(var g in c)f.imageManager.addImage(g,c[g]);f.imageManager.setLoaded(!0);f.fire(new d.Event("data",{dataType:"style"}))}):
this.imageManager.setLoaded(!0);this.glyphManager.setURL(a.glyphs);a=Oc(this.stylesheet.layers);this._order=a.map(function(a){return a.id});this._layers={};for(c=0;c<a.length;c+=1)g=a[c],(g=d.createStyleLayer(g)).setEventedParent(f,{layer:{id:g.id}}),f._layers[g.id]=g;this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new W(this.stylesheet.light);this.fire(new d.Event("data",{dataType:"style"}));this.fire(new d.Event("style.load"))}},c.prototype._validateLayer=function(a){var c=
this.sourceCaches[a.source];if(c){var f=a.sourceLayer;f&&(c=c.getSource(),("geojson"===c.type||c.vectorLayerIds&&-1===c.vectorLayerIds.indexOf(f))&&this.fire(new d.ErrorEvent(Error('Source layer "'+f+'" does not exist on source "'+c.id+'" as specified by style layer "'+a.id+'"'))))}},c.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},c.prototype._serializeLayers=
function(a){for(var c=[],d=0;d<a.length;d+=1){var f=this._layers[a[d]];"custom"!==f.type&&c.push(f.serialize())}return c},c.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},c.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},c.prototype.update=function(a){if(this._loaded){var c=
this._changed;if(this._changed){var f=Object.keys(this._updatedLayers),h=Object.keys(this._removedLayers);for(m in(f.length||h.length)&&this._updateWorkerLayers(f,h),this._updatedSources)f=this._updatedSources[m],"reload"===f?this._reloadSource(m):"clear"===f&&this._clearSource(m);for(var t in this._updatedPaintProps)this._layers[t].updateTransitions(a);this.light.updateTransitions(a);this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;var m=0;for(t=this._order;m<t.length;m+=
1)u=this._layers[t[m]],u.recalculate(a),!u.isHidden(a.zoom)&&u.source&&(this.sourceCaches[u.source].used=!0);this.light.recalculate(a);this.z=a.zoom;c&&this.fire(new d.Event("data",{dataType:"style"}))}},c.prototype._updateWorkerLayers=function(a,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:c})},c.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={}},c.prototype.setState=
function(a){var c=this;if(this._checkLoaded(),zd(this,d.validateStyle(a)))return!1;(a=d.clone(a)).layers=Oc(a.layers);var f=ic(this.serialize(),a).filter(function(a){return!(a.command in jf)});if(0===f.length)return!1;var h=f.filter(function(a){return!(a.command in Ad)});if(0<h.length)throw Error("Unimplemented: "+h.map(function(a){return a.command}).join(", ")+".");return f.forEach(function(a){"setTransition"!==a.command&&c[a.command].apply(c,a.args)}),this.stylesheet=a,!0},c.prototype.addImage=
function(a,c){if(this.getImage(a))return this.fire(new d.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(a,c);this.fire(new d.Event("data",{dataType:"style"}))},c.prototype.getImage=function(a){return this.imageManager.getImage(a)},c.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new d.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(a);this.fire(new d.Event("data",{dataType:"style"}))},c.prototype.listImages=
function(){return this._checkLoaded(),this.imageManager.listImages()},c.prototype.addSource=function(a,c,l){var f=this;if(void 0===l&&(l={}),this._checkLoaded(),void 0!==this.sourceCaches[a])throw Error("There is already a source with this ID");if(!c.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(c.type)&&this._validate(d.validateStyle.source,"sources."+
a,c,null,l))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var g=this.sourceCaches[a]=new sc(a,c,this.dispatcher);g.style=this;g.setEventedParent(this,function(){return{isSourceLoaded:f.loaded(),source:g.serialize(),sourceId:a}});g.onAdd(this.map);this._changed=!0}},c.prototype.removeSource=function(a){if(this._checkLoaded(),void 0===this.sourceCaches[a])throw Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new d.ErrorEvent(Error('Source "'+
a+'" cannot be removed while layer "'+c+'" is using it.')));c=this.sourceCaches[a];delete this.sourceCaches[a];delete this._updatedSources[a];c.fire(new d.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a}));c.setEventedParent(null);c.clearTiles();c.onRemove&&c.onRemove(this.map);this._changed=!0},c.prototype.setGeoJSONSourceData=function(a,c){this._checkLoaded();this.sourceCaches[a].getSource().setData(c);this._changed=!0},c.prototype.getSource=function(a){return this.sourceCaches[a]&&
this.sourceCaches[a].getSource()},c.prototype.addLayer=function(a,c,l){void 0===l&&(l={});this._checkLoaded();var f=a.id;if(this.getLayer(f))this.fire(new d.ErrorEvent(Error('Layer with id "'+f+'" already exists on this map')));else{if("custom"===a.type){if(zd(this,d.validateCustomStyleLayer(a)))return;a=d.createStyleLayer(a)}else{if("object"==typeof a.source&&(this.addSource(f,a.source),a=d.clone(a),a=d.extend(a,{source:f})),this._validate(d.validateStyle.layer,"layers."+f,a,{arrayIndex:-1},l))return;
a=d.createStyleLayer(a);this._validateLayer(a);a.setEventedParent(this,{layer:{id:f}})}l=c?this._order.indexOf(c):this._order.length;if(c&&-1===l)this.fire(new d.ErrorEvent(Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(l,0,f),this._layerOrderChanged=!0,this._layers[f]=a,this._removedLayers[f]&&a.source&&"custom"!==a.type)c=this._removedLayers[f],delete this._removedLayers[f],c.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]=
"reload",this.sourceCaches[a.source].pause());this._updateLayer(a);a.onAdd&&a.onAdd(this.map)}}},c.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var f=this._order.indexOf(a);this._order.splice(f,1);f=c?this._order.indexOf(c):this._order.length;c&&-1===f?this.fire(new d.ErrorEvent(Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(f,0,a),this._layerOrderChanged=!0)}}else this.fire(new d.ErrorEvent(Error("The layer '"+
a+"' does not exist in the map's style and cannot be moved.")))},c.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var f=this._order.indexOf(a);this._order.splice(f,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[a]=c;delete this._layers[a];delete this._updatedLayers[a];delete this._updatedPaintProps[a];c.onRemove&&c.onRemove(this.map)}else this.fire(new d.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},
c.prototype.getLayer=function(a){return this._layers[a]},c.prototype.setLayerZoomRange=function(a,c,l){this._checkLoaded();var f=this.getLayer(a);f?f.minzoom===c&&f.maxzoom===l||(null!=c&&(f.minzoom=c),null!=l&&(f.maxzoom=l),this._updateLayer(f)):this.fire(new d.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},c.prototype.setFilter=function(a,c,l){void 0===l&&(l={});this._checkLoaded();var f=this.getLayer(a);if(f){if(!d.isEqual(f.filter,c))return null==
c?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(d.validateStyle.filter,"layers."+f.id+".filter",c,null,l)||(f.filter=d.clone(c),this._updateLayer(f)))}else this.fire(new d.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},c.prototype.getFilter=function(a){return d.clone(this.getLayer(a).filter)},c.prototype.setLayoutProperty=function(a,c,l,h){void 0===h&&(h={});this._checkLoaded();var f=this.getLayer(a);f?d.isEqual(f.getLayoutProperty(c),
l)||(f.setLayoutProperty(c,l,h),this._updateLayer(f)):this.fire(new d.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},c.prototype.getLayoutProperty=function(a,c){var f=this.getLayer(a);if(f)return f.getLayoutProperty(c);this.fire(new d.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style.")))},c.prototype.setPaintProperty=function(a,c,l,h){void 0===h&&(h={});this._checkLoaded();var f=this.getLayer(a);f?d.isEqual(f.getPaintProperty(c),
l)||(f.setPaintProperty(c,l,h)&&this._updateLayer(f),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new d.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},c.prototype.getPaintProperty=function(a,c){return this.getLayer(a).getPaintProperty(c)},c.prototype.setFeatureState=function(a,c){this._checkLoaded();var f=a.source,g=a.sourceLayer,h=this.sourceCaches[f];a=parseInt(a.id,10);void 0!==h?"vector"!==h.getSource().type||g?isNaN(a)||0>a?this.fire(new d.ErrorEvent(Error("The feature id parameter must be provided and non-negative."))):
h.setFeatureState(g,a,c):this.fire(new d.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new d.ErrorEvent(Error("The source '"+f+"' does not exist in the map's style.")))},c.prototype.getFeatureState=function(a){this._checkLoaded();var c=a.source,f=a.sourceLayer,h=this.sourceCaches[c];a=parseInt(a.id,10);if(void 0!==h)if("vector"!==h.getSource().type||f){if(!(isNaN(a)||0>a))return h.getFeatureState(f,a);this.fire(new d.ErrorEvent(Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new d.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));
else this.fire(new d.ErrorEvent(Error("The source '"+c+"' does not exist in the map's style.")))},c.prototype.getTransition=function(){return d.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},c.prototype.serialize=function(){return d.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,
sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:d.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return void 0!==a})},c.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0;a.source&&!this._updatedSources[a.source]&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause());this._changed=!0},c.prototype._flattenRenderedFeatures=function(a){for(var c=
[],d=this._order.length-1;0<=d;d--)for(var f=this._order[d],h=0,u=a;h<u.length;h+=1){var m=u[h][f];if(m)for(var p=0;p<m.length;p+=1)c.push(m[p])}return c},c.prototype.queryRenderedFeatures=function(a,c,l){c&&c.filter&&this._validate(d.validateStyle.filter,"queryRenderedFeatures.filter",c.filter);var f={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new d.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var g=0,h=c.layers;g<h.length;g+=1){var m=h[g],p=this._layers[m];
if(!p)return this.fire(new d.ErrorEvent(Error("The layer '"+m+"' does not exist in the map's style and cannot be queried for features."))),[];f[p.source]=!0}}g=[];h=a.map(function(a){return l.pointCoordinate(a)});for(var q in this.sourceCaches)c.layers&&!f[q]||g.push(Sa(this.sourceCaches[q],this._layers,h,c,l));return this.placement&&g.push(function(a,c,d,f,g,l){var h={},n=g.queryRenderedSymbols(d);d=[];g=0;for(var t=Object.keys(n).map(Number);g<t.length;g+=1)d.push(l[t[g]]);d.sort(pd);l=function(){var c=
m[u],d=c.featureIndex.lookupSymbolFeatures(n[c.bucketInstanceId],c.bucketIndex,c.sourceLayerIndex,f.filter,f.layers,a),g;for(g in d){var l=h[g]=h[g]||[],t=d[g];t.sort(function(a,d){var f=c.featureSortOrder;return f?(a=f.indexOf(a.featureIndex),f.indexOf(d.featureIndex)-a):d.featureIndex-a.featureIndex});for(var p=0;p<t.length;p+=1)l.push(t[p].feature)}};for(var u=0,m=d;u<m.length;u+=1)l();l=function(d){h[d].forEach(function(f){var g=c[a[d].source].getFeatureState(f.layer["source-layer"],f.id);f.source=
f.layer.source;f.layer["source-layer"]&&(f.sourceLayer=f.layer["source-layer"]);f.state=g})};for(var p in h)l(p);return h}(this._layers,this.sourceCaches,a,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(g)},c.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(d.validateStyle.filter,"querySourceFeatures.filter",c.filter);return(a=this.sourceCaches[a])?function(a,c){for(var d=a.getRenderableIds().map(function(c){return a.getTileByID(c)}),
f=[],g={},l=0;l<d.length;l++){var h=d[l],n=h.tileID.canonical.key;g[n]||(g[n]=!0,h.querySourceFeatures(f,c))}return f}(a,c):[]},c.prototype.addSourceType=function(a,d,l){return c.getSourceType(a)?l(Error('A source type called "'+a+'" already exists.')):(c.setSourceType(a,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:d.workerSourceURL},l):l(null,null))},c.prototype.getLight=function(){return this.light.getLight()},c.prototype.setLight=function(a,c){void 0===c&&
(c={});this._checkLoaded();var f=this.light.getLight(),g=!1,h;for(h in a)if(!d.isEqual(a[h],f[h])){g=!0;break}g&&(f={now:d.browser.now(),transition:d.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(a,c),this.light.updateTransitions(f))},c.prototype._validate=function(a,c,l,h,t){return void 0===t&&(t={}),(!t||!1!==t.validate)&&zd(this,a.call(d.validateStyle,d.extend({key:c,style:this.serialize(),value:l,styleSpec:d.styleSpec},h)))},c.prototype._remove=function(){for(var a in this._request&&
(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),d.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[a].clearTiles();this.dispatcher.remove()},c.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},c.prototype._reloadSource=function(a){this.sourceCaches[a].resume();this.sourceCaches[a].reload()},c.prototype._updateSources=function(a){for(var c in this.sourceCaches)this.sourceCaches[c].update(a)},
c.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},c.prototype._updatePlacement=function(a,c,l,h){for(var f=!1,g=!1,n={},m=0,p=this._order;m<p.length;m+=1){var q=this._layers[p[m]];if("symbol"===q.type){if(!n[q.source]){var r=this.sourceCaches[q.source];n[q.source]=r.getRenderableIds(!0).map(function(a){return r.getTileByID(a)}).sort(function(a,c){return c.tileID.overscaledZ-a.tileID.overscaledZ||(a.tileID.isLessThan(c.tileID)?-1:1)})}q=this.crossTileSymbolIndex.addLayer(q,
n[q.source],a.center.lng);f=f||q}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);m=this._layerOrderChanged||0===l;if((m||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(d.browser.now()))&&(this.pauseablePlacement=new fd(a,this._order,m,c,l,h),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,n),this.pauseablePlacement.isDone()&&(this.placement=
this.pauseablePlacement.commit(this.placement,d.browser.now()),g=!0),f&&this.pauseablePlacement.placement.setStale()),g||f)for(a=0,c=this._order;a<c.length;a+=1)l=this._layers[c[a]],"symbol"===l.type&&this.placement.updateLayerOpacities(l,n[l.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(d.browser.now())},c.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},c.prototype.getImages=function(a,c,
d){this.imageManager.getImages(c.icons,d)},c.prototype.getGlyphs=function(a,c,d){this.glyphManager.getGlyphs(c.stacks,d)},c}(d.Evented);ed.getSourceType=function(a){return $c[a]};ed.setSourceType=function(a,c){$c[a]=c};ed.registerForPluginAvailability=d.registerForPluginAvailability;var uc=d.createLayout([{name:"a_pos",type:"Int16",components:2}]),Bd=L("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif",
"#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
ve=L("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),kf=L("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
Cd=L("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
Fh=L("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),we=L("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
Nf=L("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),xe=
L("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3da_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
ye=L("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha\x3d0.5;vec4 color\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {color\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {color*\x3d.2;}float extrude_scale_length\x3dlength(v_extrude_scale);float extrude_length\x3dlength(v_extrude)*extrude_scale_length;float stroke_width\x3d15.0*extrude_scale_length/u_overscale_factor;float radius\x3dv_radius*extrude_scale_length;float distance_to_edge\x3dabs(extrude_length-radius);float opacity_t\x3dsmoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor\x3dopacity_t*color;}",
"attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor\x3d1.2;gl_Position.xy+\x3da_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;v_radius\x3dabs(a_extrude.y);v_extrude\x3da_extrude*padding_factor;v_extrude_scale\x3du_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),
Dd=L("uniform highp vec4 u_color;void main() {gl_FragColor\x3du_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Pf=L("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),
gd=L("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
Qf=L("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float pixelRatio\x3du_scale.x;float tileRatio\x3du_scale.y;float fromScale\x3du_scale.z;float toScale\x3du_scale.w;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3dvec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b\x3dvec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
lf=L("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float pixelRatio\x3du_scale.x;float tileZoomRatio\x3du_scale.y;float fromScale\x3du_scale.z;float toScale\x3du_scale.w;vec2 display_size_a\x3dvec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b\x3dvec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
Rf=L("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"),
Sf=L("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float pixelRatio\x3du_scale.x;float tileRatio\x3du_scale.y;float fromScale\x3du_scale.z;float toScale\x3du_scale.w;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3dvec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b\x3dvec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"),
ze=L("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor\x3dtexture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),Tf=L("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(a_texture_pos/8192.0)/2.0+0.25;}"),Ae=L("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),ce=L("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3da_pos_normal.xy;mediump vec2 normal\x3da_pos_normal.zw;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Be=L("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3da_pos_normal.xy;mediump vec2 normal\x3da_pos_normal.zw;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
mf=L("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float pixelRatio\x3du_scale.x;float tileZoomRatio\x3du_scale.y;float fromScale\x3du_scale.z;float toScale\x3du_scale.w;vec2 display_size_a\x3dvec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b\x3dvec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x,1.0);float y_a\x3d0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b\x3d0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3da_pos_normal.xy;mediump vec2 normal\x3da_pos_normal.zw;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);}"),
ra=L("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3da_pos_normal.xy;mediump vec2 normal\x3da_pos_normal.zw;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
Yb=L("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),nf=L("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size[0]/256.0;} else if (!u_is_size_zoom_constant \x26\x26 u_is_size_feature_constant) {size\x3du_size;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
Uf=L("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size[0]/256.0;} else if (!u_is_size_zoom_constant \x26\x26 u_is_size_feature_constant) {size\x3du_size;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3dvec2(tex.x,tex.y);v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
Vf=Object.freeze({prelude:Bd,background:ve,backgroundPattern:kf,circle:Cd,clippingMask:Fh,heatmap:we,heatmapTexture:Nf,collisionBox:xe,collisionCircle:ye,debug:Dd,fill:Pf,fillOutline:gd,fillOutlinePattern:Qf,fillPattern:lf,fillExtrusion:Rf,fillExtrusionPattern:Sf,extrusionTexture:ze,hillshadePrepare:Tf,hillshade:Ae,line:ce,lineGradient:Be,linePattern:mf,lineSDF:ra,raster:Yb,symbolIcon:nf,symbolSDF:Uf}),de=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};de.prototype.bind=function(a,c,d,g,l,h,t,m){this.context=a;for(var f=this.boundPaintVertexBuffers.length!==g.length,n=0;!f&&n<g.length;n++)this.boundPaintVertexBuffers[n]!==g[n]&&(f=!0);f=!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==d||f||this.boundIndexBuffer!==l||this.boundVertexOffset!==h||this.boundDynamicVertexBuffer!==t||this.boundDynamicVertexBuffer2!==m;!a.extVertexArrayObject||
f?this.freshBind(c,d,g,l,h,t,m):(a.bindVertexArrayOES.set(this.vao),t&&t.bind(),l&&l.dynamicDraw&&l.bind(),m&&m.bind())};de.prototype.freshBind=function(a,c,d,g,l,h,t){var f=a.numAttributes,n=this.context,m=n.gl;if(n.extVertexArrayObject)this.vao&&this.destroy(),this.vao=n.extVertexArrayObject.createVertexArrayOES(),n.bindVertexArrayOES.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=g,this.boundVertexOffset=l,this.boundDynamicVertexBuffer=
h,this.boundDynamicVertexBuffer2=t;else{var p=n.currentNumAttributes||0;for(var q=f;q<p;q++)m.disableVertexAttribArray(q)}c.enableAttributes(m,a);for(p=0;p<d.length;p+=1)d[p].enableAttributes(m,a);h&&h.enableAttributes(m,a);t&&t.enableAttributes(m,a);c.bind();c.setVertexAttribPointers(m,a,l);for(c=0;c<d.length;c+=1)p=d[c],p.bind(),p.setVertexAttribPointers(m,a,l);h&&(h.bind(),h.setVertexAttribPointers(m,a,l));g&&g.bind();t&&(t.bind(),t.setVertexAttribPointers(m,a,l));n.currentNumAttributes=f};de.prototype.destroy=
function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var of=function(a,c,f,g,l){var h=a.gl;this.program=h.createProgram();var t=f.defines().concat("#define DEVICE_PIXEL_RATIO "+d.browser.devicePixelRatio.toFixed(1));l&&t.push("#define OVERDRAW_INSPECTOR;");l=t.concat(Bd.fragmentSource,c.fragmentSource).join("\n");c=t.concat(Bd.vertexSource,c.vertexSource).join("\n");t=h.createShader(h.FRAGMENT_SHADER);h.shaderSource(t,l);h.compileShader(t);h.attachShader(this.program,
t);l=h.createShader(h.VERTEX_SHADER);h.shaderSource(l,c);h.compileShader(l);h.attachShader(this.program,l);l=f.layoutAttributes||[];for(c=0;c<l.length;c++)h.bindAttribLocation(this.program,c,l[c].name);h.linkProgram(this.program);this.numAttributes=h.getProgramParameter(this.program,h.ACTIVE_ATTRIBUTES);this.attributes={};l={};for(c=0;c<this.numAttributes;c++)(t=h.getActiveAttrib(this.program,c))&&(this.attributes[t.name]=h.getAttribLocation(this.program,t.name));c=h.getProgramParameter(this.program,
h.ACTIVE_UNIFORMS);for(t=0;t<c;t++){var m=h.getActiveUniform(this.program,t);m&&(l[m.name]=h.getUniformLocation(this.program,m.name))}this.fixedUniforms=g(a,l);this.binderUniforms=f.getUniforms(a,l)};of.prototype.draw=function(a,c,d,g,l,h,m,u,p,q,r,v,x,w,y,z){var f,n=a.gl,t;for(t in a.program.set(this.program),a.setDepthMode(d),a.setStencilMode(g),a.setColorMode(l),a.setCullFace(h),this.fixedUniforms)this.fixedUniforms[t].set(m[t]);w&&w.setUniforms(a,this.binderUniforms,v,{zoom:x});d=(f={},f[n.LINES]=
2,f[n.TRIANGLES]=3,f[n.LINE_STRIP]=1,f)[c];f=0;for(r=r.get();f<r.length;f+=1)g=r[f],l=g.vaos||(g.vaos={}),(l[u]||(l[u]=new de)).bind(a,this,p,w?w.getPaintVertexBuffers():[],q,g.vertexOffset,y,z),n.drawElements(c,g.primitiveLength*d,n.UNSIGNED_SHORT,g.primitiveOffset*d*2)};var pf=function(a,c,f){var g=c.style.light,l=g.properties.get("position");l=[l.x,l.y,l.z];var h=d.create$2();"viewport"===g.properties.get("anchor")&&d.fromRotation(h,-c.transform.angle);d.transformMat3(l,l,h);c=g.properties.get("color");
return{u_matrix:a,u_lightpos:l,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+f}},Wf=function(a,c,f){var g=d.create();d.ortho(g,0,a.width,a.height,0,0,1);a=a.context.gl;return{u_matrix:g,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:f,u_opacity:c}},Xf=function(a,c,d,g){var f=a.transform;if("map"===g.paint.get("circle-pitch-alignment")){var h=fa(d,1,f.zoom);var m=!0;h=[h,h]}else m=!1,h=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,
u_scale_with_map:+("map"===g.paint.get("circle-pitch-scale")),u_matrix:a.translatePosMatrix(c.posMatrix,d,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_extrude_scale:h}},qf=function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_camera_to_center_distance:new d.Uniform1f(a,c.u_camera_to_center_distance),u_pixels_to_tile_units:new d.Uniform1f(a,c.u_pixels_to_tile_units),u_extrude_scale:new d.Uniform2f(a,c.u_extrude_scale),u_overscale_factor:new d.Uniform1f(a,
c.u_overscale_factor)}},Yf=function(a,c,d){var f=fa(d,1,c.zoom),l=Math.pow(2,c.zoom-d.tileID.overscaledZ);d=d.tileID.overscaleFactor();return{u_matrix:a,u_camera_to_center_distance:c.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[c.pixelsToGLUnits[0]/(f*l),c.pixelsToGLUnits[1]/(f*l)],u_overscale_factor:d}},hd=function(a,c){return{u_matrix:a,u_color:c}},id=function(a,c,d,g){return{u_matrix:a,u_extrude_scale:fa(c,1,d),u_intensity:g}},rf=function(a,c,f,g){var l=d.create();d.ortho(l,
0,a.width,a.height,0,0,1);a=a.context.gl;return{u_matrix:l,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:f,u_color_ramp:g,u_opacity:c.paint.get("heatmap-opacity")}},Zf=function(a,c){var f=a.dem.dim,g=d.create();return d.ortho(g,0,d.EXTENT,-d.EXTENT,0,0,1),d.translate(g,g,[0,-d.EXTENT,0]),{u_matrix:g,u_image:1,u_dimension:[2*f,2*f],u_zoom:a.tileID.overscaledZ,u_maxzoom:c}},Ce=function(a,c,d){var f=a.transform;return{u_matrix:Y(a,c,d),u_ratio:1/fa(c,1,f.zoom),u_gl_units_to_pixels:[1/
f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},sf=function(a,c,d,g,l,h,m,u,p,q){var f=l.transform;return{u_is_size_zoom_constant:+("constant"===a||"source"===a),u_is_size_feature_constant:+("constant"===a||"camera"===a),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:f.width/f.height,u_fade_change:l.options.fadeDuration?l.symbolFadeChange:1,u_matrix:h,u_label_plane_matrix:m,u_gl_coord_matrix:u,
u_is_text:+p,u_pitch_with_map:+g,u_texsize:q,u_texture:0}},tf=function(a,c,f,g,l,h){return d.extend(function(a,c,d,f){var g=d.imageManager.getPattern(a.from);a=d.imageManager.getPattern(a.to);var l=d.imageManager.getPixelSize(),h=Math.pow(2,f.tileID.overscaledZ),n=f.tileSize*Math.pow(2,d.transform.tileZoom)/h;h=n*(f.tileID.canonical.x+f.tileID.wrap*h);n*=f.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:g.tl,u_pattern_br_a:g.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[l.width,l.height],
u_mix:c.t,u_pattern_size_a:g.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:c.fromScale,u_scale_b:c.toScale,u_tile_units_to_pixels:1/fa(f,1,d.transform.tileZoom),u_pixel_coord_upper:[h>>16,n>>16],u_pixel_coord_lower:[65535&h,65535&n]}}(g,h,f,l),{u_matrix:a,u_opacity:c})},De={fillExtrusion:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_lightpos:new d.Uniform3f(a,c.u_lightpos),u_lightintensity:new d.Uniform1f(a,c.u_lightintensity),u_lightcolor:new d.Uniform3f(a,c.u_lightcolor),
u_vertical_gradient:new d.Uniform1f(a,c.u_vertical_gradient)}},fillExtrusionPattern:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_lightpos:new d.Uniform3f(a,c.u_lightpos),u_lightintensity:new d.Uniform1f(a,c.u_lightintensity),u_lightcolor:new d.Uniform3f(a,c.u_lightcolor),u_vertical_gradient:new d.Uniform1f(a,c.u_vertical_gradient),u_height_factor:new d.Uniform1f(a,c.u_height_factor),u_image:new d.Uniform1i(a,c.u_image),u_texsize:new d.Uniform2f(a,c.u_texsize),u_pixel_coord_upper:new d.Uniform2f(a,
c.u_pixel_coord_upper),u_pixel_coord_lower:new d.Uniform2f(a,c.u_pixel_coord_lower),u_scale:new d.Uniform4f(a,c.u_scale),u_fade:new d.Uniform1f(a,c.u_fade)}},extrusionTexture:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_world:new d.Uniform2f(a,c.u_world),u_image:new d.Uniform1i(a,c.u_image),u_opacity:new d.Uniform1f(a,c.u_opacity)}},fill:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix)}},fillPattern:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),
u_image:new d.Uniform1i(a,c.u_image),u_texsize:new d.Uniform2f(a,c.u_texsize),u_pixel_coord_upper:new d.Uniform2f(a,c.u_pixel_coord_upper),u_pixel_coord_lower:new d.Uniform2f(a,c.u_pixel_coord_lower),u_scale:new d.Uniform4f(a,c.u_scale),u_fade:new d.Uniform1f(a,c.u_fade)}},fillOutline:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_world:new d.Uniform2f(a,c.u_world)}},fillOutlinePattern:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_world:new d.Uniform2f(a,
c.u_world),u_image:new d.Uniform1i(a,c.u_image),u_texsize:new d.Uniform2f(a,c.u_texsize),u_pixel_coord_upper:new d.Uniform2f(a,c.u_pixel_coord_upper),u_pixel_coord_lower:new d.Uniform2f(a,c.u_pixel_coord_lower),u_scale:new d.Uniform4f(a,c.u_scale),u_fade:new d.Uniform1f(a,c.u_fade)}},circle:function(a,c){return{u_camera_to_center_distance:new d.Uniform1f(a,c.u_camera_to_center_distance),u_scale_with_map:new d.Uniform1i(a,c.u_scale_with_map),u_pitch_with_map:new d.Uniform1i(a,c.u_pitch_with_map),u_extrude_scale:new d.Uniform2f(a,
c.u_extrude_scale),u_matrix:new d.UniformMatrix4f(a,c.u_matrix)}},collisionBox:qf,collisionCircle:qf,debug:function(a,c){return{u_color:new d.UniformColor(a,c.u_color),u_matrix:new d.UniformMatrix4f(a,c.u_matrix)}},clippingMask:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix)}},heatmap:function(a,c){return{u_extrude_scale:new d.Uniform1f(a,c.u_extrude_scale),u_intensity:new d.Uniform1f(a,c.u_intensity),u_matrix:new d.UniformMatrix4f(a,c.u_matrix)}},heatmapTexture:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,
c.u_matrix),u_world:new d.Uniform2f(a,c.u_world),u_image:new d.Uniform1i(a,c.u_image),u_color_ramp:new d.Uniform1i(a,c.u_color_ramp),u_opacity:new d.Uniform1f(a,c.u_opacity)}},hillshade:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_image:new d.Uniform1i(a,c.u_image),u_latrange:new d.Uniform2f(a,c.u_latrange),u_light:new d.Uniform2f(a,c.u_light),u_shadow:new d.UniformColor(a,c.u_shadow),u_highlight:new d.UniformColor(a,c.u_highlight),u_accent:new d.UniformColor(a,c.u_accent)}},
hillshadePrepare:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_image:new d.Uniform1i(a,c.u_image),u_dimension:new d.Uniform2f(a,c.u_dimension),u_zoom:new d.Uniform1f(a,c.u_zoom),u_maxzoom:new d.Uniform1f(a,c.u_maxzoom)}},line:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_ratio:new d.Uniform1f(a,c.u_ratio),u_gl_units_to_pixels:new d.Uniform2f(a,c.u_gl_units_to_pixels)}},lineGradient:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_ratio:new d.Uniform1f(a,
c.u_ratio),u_gl_units_to_pixels:new d.Uniform2f(a,c.u_gl_units_to_pixels),u_image:new d.Uniform1i(a,c.u_image)}},linePattern:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_texsize:new d.Uniform2f(a,c.u_texsize),u_ratio:new d.Uniform1f(a,c.u_ratio),u_image:new d.Uniform1i(a,c.u_image),u_gl_units_to_pixels:new d.Uniform2f(a,c.u_gl_units_to_pixels),u_scale:new d.Uniform4f(a,c.u_scale),u_fade:new d.Uniform1f(a,c.u_fade)}},lineSDF:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,
c.u_matrix),u_ratio:new d.Uniform1f(a,c.u_ratio),u_gl_units_to_pixels:new d.Uniform2f(a,c.u_gl_units_to_pixels),u_patternscale_a:new d.Uniform2f(a,c.u_patternscale_a),u_patternscale_b:new d.Uniform2f(a,c.u_patternscale_b),u_sdfgamma:new d.Uniform1f(a,c.u_sdfgamma),u_image:new d.Uniform1i(a,c.u_image),u_tex_y_a:new d.Uniform1f(a,c.u_tex_y_a),u_tex_y_b:new d.Uniform1f(a,c.u_tex_y_b),u_mix:new d.Uniform1f(a,c.u_mix)}},raster:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_tl_parent:new d.Uniform2f(a,
c.u_tl_parent),u_scale_parent:new d.Uniform1f(a,c.u_scale_parent),u_buffer_scale:new d.Uniform1f(a,c.u_buffer_scale),u_fade_t:new d.Uniform1f(a,c.u_fade_t),u_opacity:new d.Uniform1f(a,c.u_opacity),u_image0:new d.Uniform1i(a,c.u_image0),u_image1:new d.Uniform1i(a,c.u_image1),u_brightness_low:new d.Uniform1f(a,c.u_brightness_low),u_brightness_high:new d.Uniform1f(a,c.u_brightness_high),u_saturation_factor:new d.Uniform1f(a,c.u_saturation_factor),u_contrast_factor:new d.Uniform1f(a,c.u_contrast_factor),
u_spin_weights:new d.Uniform3f(a,c.u_spin_weights)}},symbolIcon:function(a,c){return{u_is_size_zoom_constant:new d.Uniform1i(a,c.u_is_size_zoom_constant),u_is_size_feature_constant:new d.Uniform1i(a,c.u_is_size_feature_constant),u_size_t:new d.Uniform1f(a,c.u_size_t),u_size:new d.Uniform1f(a,c.u_size),u_camera_to_center_distance:new d.Uniform1f(a,c.u_camera_to_center_distance),u_pitch:new d.Uniform1f(a,c.u_pitch),u_rotate_symbol:new d.Uniform1i(a,c.u_rotate_symbol),u_aspect_ratio:new d.Uniform1f(a,
c.u_aspect_ratio),u_fade_change:new d.Uniform1f(a,c.u_fade_change),u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_label_plane_matrix:new d.UniformMatrix4f(a,c.u_label_plane_matrix),u_gl_coord_matrix:new d.UniformMatrix4f(a,c.u_gl_coord_matrix),u_is_text:new d.Uniform1f(a,c.u_is_text),u_pitch_with_map:new d.Uniform1i(a,c.u_pitch_with_map),u_texsize:new d.Uniform2f(a,c.u_texsize),u_texture:new d.Uniform1i(a,c.u_texture)}},symbolSDF:function(a,c){return{u_is_size_zoom_constant:new d.Uniform1i(a,c.u_is_size_zoom_constant),
u_is_size_feature_constant:new d.Uniform1i(a,c.u_is_size_feature_constant),u_size_t:new d.Uniform1f(a,c.u_size_t),u_size:new d.Uniform1f(a,c.u_size),u_camera_to_center_distance:new d.Uniform1f(a,c.u_camera_to_center_distance),u_pitch:new d.Uniform1f(a,c.u_pitch),u_rotate_symbol:new d.Uniform1i(a,c.u_rotate_symbol),u_aspect_ratio:new d.Uniform1f(a,c.u_aspect_ratio),u_fade_change:new d.Uniform1f(a,c.u_fade_change),u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_label_plane_matrix:new d.UniformMatrix4f(a,
c.u_label_plane_matrix),u_gl_coord_matrix:new d.UniformMatrix4f(a,c.u_gl_coord_matrix),u_is_text:new d.Uniform1f(a,c.u_is_text),u_pitch_with_map:new d.Uniform1i(a,c.u_pitch_with_map),u_texsize:new d.Uniform2f(a,c.u_texsize),u_texture:new d.Uniform1i(a,c.u_texture),u_gamma_scale:new d.Uniform1f(a,c.u_gamma_scale),u_is_halo:new d.Uniform1f(a,c.u_is_halo)}},background:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_opacity:new d.Uniform1f(a,c.u_opacity),u_color:new d.UniformColor(a,
c.u_color)}},backgroundPattern:function(a,c){return{u_matrix:new d.UniformMatrix4f(a,c.u_matrix),u_opacity:new d.Uniform1f(a,c.u_opacity),u_image:new d.Uniform1i(a,c.u_image),u_pattern_tl_a:new d.Uniform2f(a,c.u_pattern_tl_a),u_pattern_br_a:new d.Uniform2f(a,c.u_pattern_br_a),u_pattern_tl_b:new d.Uniform2f(a,c.u_pattern_tl_b),u_pattern_br_b:new d.Uniform2f(a,c.u_pattern_br_b),u_texsize:new d.Uniform2f(a,c.u_texsize),u_mix:new d.Uniform1f(a,c.u_mix),u_pattern_size_a:new d.Uniform2f(a,c.u_pattern_size_a),
u_pattern_size_b:new d.Uniform2f(a,c.u_pattern_size_b),u_scale_a:new d.Uniform1f(a,c.u_scale_a),u_scale_b:new d.Uniform1f(a,c.u_scale_b),u_pixel_coord_upper:new d.Uniform2f(a,c.u_pixel_coord_upper),u_pixel_coord_lower:new d.Uniform2f(a,c.u_pixel_coord_lower),u_tile_units_to_pixels:new d.Uniform1f(a,c.u_tile_units_to_pixels)}}},uf=d.identity(new Float32Array(16)),vf=d.properties.layout,wf={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,
25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"\x26":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,
20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,
4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],
7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"\x3c":[24,[20,18,4,9,20,0]],"\x3d":[26,[4,12,
22,12,-1,-1,4,6,22,6]],"\x3e":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,
4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,
3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,
21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,
17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,
[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,
8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,
26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,
21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,
2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},ee={symbol:function(a,c,d,g){if("translucent"===a.renderPass){var f=Ca.disabled,h=a.colorModeForRenderPass();0!==d.paint.get("icon-opacity").constantOr(1)&&
mc(a,c,d,g,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),f,h);0!==d.paint.get("text-opacity").constantOr(1)&&mc(a,c,d,g,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),f,h);c.map.showCollisionBoxes&&(Na(a,c,d,g,!1),Na(a,c,d,g,!0))}},
circle:function(a,c,d,g){if("translucent"===a.renderPass){var f=d.paint.get("circle-opacity"),h=d.paint.get("circle-stroke-width"),m=d.paint.get("circle-stroke-opacity");if(0!==f.constantOr(1)||0!==h.constantOr(1)&&0!==m.constantOr(1)){f=a.context;h=f.gl;m=a.depthModeForSublayer(0,la.ReadOnly);for(var u=Ca.disabled,p=a.colorModeForRenderPass(),q=0;q<g.length;q++){var r=g[q],v=c.getTile(r),x=v.getBucket(d);if(x){var w=x.programConfigurations.get(d.id);a.useProgram("circle",w).draw(f,h.TRIANGLES,m,
u,p,na.disabled,Xf(a,r,v,d),d.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,d.paint,a.transform.zoom,w)}}}}},heatmap:function(a,c,f,g){if(0!==f.paint.get("heatmap-opacity"))if("offscreen"===a.renderPass){var l=a.context,h=l.gl,m=a.depthModeForSublayer(0,la.ReadOnly),u=Ca.disabled,p=new Ha([h.ONE,h.ONE],d.Color.transparent,[!0,!0,!0,!0]);!function(a,c,d){var f=a.gl;a.activeTexture.set(f.TEXTURE1);a.viewport.set([0,0,c.width/4,c.height/4]);var g=d.heatmapFbo;if(g)f.bindTexture(f.TEXTURE_2D,g.colorAttachment.get()),
a.bindFramebuffer.set(g.framebuffer);else{var l=f.createTexture();f.bindTexture(f.TEXTURE_2D,l);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);g=d.heatmapFbo=a.createFramebuffer(c.width/4,c.height/4);(function Ua(a,c,d,f){var g=a.gl;g.texImage2D(g.TEXTURE_2D,0,g.RGBA,c.width/4,c.height/4,0,g.RGBA,a.extTextureHalfFloat?
a.extTextureHalfFloat.HALF_FLOAT_OES:g.UNSIGNED_BYTE,null);f.colorAttachment.set(d);a.extTextureHalfFloat&&g.checkFramebufferStatus(g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE&&(a.extTextureHalfFloat=null,f.colorAttachment.setDirty(),Ua(a,c,d,f))})(a,c,l,g)}}(l,a,f);l.clear({color:d.Color.transparent});for(var q=0;q<g.length;q++){var r=g[q];if(!c.hasRenderableParent(r)){var v=c.getTile(r),x=v.getBucket(f);if(x){var w=x.programConfigurations.get(f.id);a.useProgram("heatmap",w).draw(l,h.TRIANGLES,m,u,p,
na.disabled,id(r.posMatrix,v,a.transform.zoom,f.paint.get("heatmap-intensity")),f.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,f.paint,a.transform.zoom,w)}}}l.viewport.set([0,0,a.width,a.height])}else"translucent"===a.renderPass&&(a.context.setColorMode(a.colorModeForRenderPass()),function(a,c){var f=a.context,g=f.gl,l=c.heatmapFbo;l&&(f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,l.colorAttachment.get()),f.activeTexture.set(g.TEXTURE1),(l=c.colorRampTexture)||(l=c.colorRampTexture=
new d.Texture(f,c.colorRamp,g.RGBA)),l.bind(g.LINEAR,g.CLAMP_TO_EDGE),a.useProgram("heatmapTexture").draw(f,g.TRIANGLES,la.disabled,Ca.disabled,a.colorModeForRenderPass(),na.disabled,rf(a,c,0,1),c.id,a.viewportBuffer,a.quadTriangleIndexBuffer,a.viewportSegments,c.paint,a.transform.zoom))}(a,f))},line:function(a,c,f,g){if("translucent"===a.renderPass){var l=f.paint.get("line-opacity"),h=f.paint.get("line-width");if(0!==l.constantOr(1)&&0!==h.constantOr(1)){l=a.depthModeForSublayer(0,la.ReadOnly);h=
a.colorModeForRenderPass();var m=f.paint.get("line-dasharray"),u=f.paint.get("line-pattern"),p=u.constantOr(1),q=f.paint.get("line-gradient"),r=f.getCrossfadeParameters(),v=m?"lineSDF":p?"linePattern":q?"lineGradient":"line",x=a.context,w=x.gl,y=!0;if(q){x.activeTexture.set(w.TEXTURE0);var z=f.gradientTexture;if(!f.gradient)return;z||(z=f.gradientTexture=new d.Texture(x,f.gradient,w.RGBA));z.bind(w.LINEAR,w.CLAMP_TO_EDGE)}for(z=0;z<g.length;z+=1){var A=g[z],B=c.getTile(A);if(!p||B.patternsLoaded()){var E=
B.getBucket(f);if(E){var F=E.programConfigurations.get(f.id),G=a.context.program.get(),H=a.useProgram(v,F);y=y||H.program!==G;var I=u.constantOr(null);I&&B.imageAtlas&&(G=B.imageAtlas.patternPositions[I.to],I=B.imageAtlas.patternPositions[I.from],G&&I&&F.setConstantPatternPositions(G,I));if(m){G=a;I=B;var M=f,L=m,O=r,P=G.lineAtlas,S=1/fa(I,1,G.transform.tileZoom),R="round"===M.layout.get("line-cap"),V=P.getDash(L.from,R);L=P.getDash(L.to,R);R=V.width*O.fromScale;var W=L.width*O.toScale;G=d.extend(Ce(G,
I,M),{u_patternscale_a:[S/R,-V.height/2],u_patternscale_b:[S/W,-L.height/2],u_sdfgamma:P.width/(256*Math.min(R,W)*d.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:L.y,u_mix:O.t})}else p?(G=a,I=B,M=f,O=r,P=G.transform,S=1/fa(I,1,P.tileZoom),G={u_matrix:Y(G,I,M),u_texsize:I.imageAtlasTexture.size,u_ratio:1/fa(I,1,P.zoom),u_image:0,u_scale:[d.browser.devicePixelRatio,S,O.fromScale,O.toScale],u_fade:O.t,u_gl_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}):G=q?d.extend(Ce(a,
B,f),{u_image:0}):Ce(a,B,f);m&&(y||a.lineAtlas.dirty)?(x.activeTexture.set(w.TEXTURE0),a.lineAtlas.bind(x)):p&&(x.activeTexture.set(w.TEXTURE0),B.imageAtlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),F.updatePatternPaintBuffers(r));H.draw(x,w.TRIANGLES,l,a.stencilModeForClipping(A),h,na.disabled,G,f.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,f.paint,a.transform.zoom,F);y=!1}}}}}},fill:function(a,c,f,g){var l=f.paint.get("fill-color"),h=f.paint.get("fill-opacity");if(0!==h.constantOr(1)){var m=a.colorModeForRenderPass();
l=f.paint.get("fill-pattern").constantOr(1)||1!==l.constantOr(d.Color.transparent).a||1!==h.constantOr(0)?"translucent":"opaque";a.renderPass===l&&(l=a.depthModeForSublayer(1,"opaque"===a.renderPass?la.ReadWrite:la.ReadOnly),Gb(a,c,f,g,l,m,!1));"translucent"===a.renderPass&&f.paint.get("fill-antialias")&&(l=a.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,la.ReadOnly),Gb(a,c,f,g,l,m,!0))}},"fill-extrusion":function(a,c,f,g){if(0!==f.paint.get("fill-extrusion-opacity"))if("offscreen"===
a.renderPass){Ac(a,f);for(var l=new la(a.context.gl.LEQUAL,la.ReadWrite,[0,1]),h=Ca.disabled,m=a.colorModeForRenderPass(),u=a.context,p=u.gl,q=f.paint.get("fill-extrusion-pattern"),r=q.constantOr(1),v=f.getCrossfadeParameters(),x=0;x<g.length;x+=1){var w=g[x],y=c.getTile(w),z=y.getBucket(f);if(z){var A=z.programConfigurations.get(f.id),B=a.useProgram(r?"fillExtrusionPattern":"fillExtrusion",A);r&&(a.context.activeTexture.set(p.TEXTURE0),y.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),A.updatePatternPaintBuffers(v));
var E=q.constantOr(null);if(E&&y.imageAtlas){var G=y.imageAtlas.patternPositions[E.to];E=y.imageAtlas.patternPositions[E.from];G&&E&&A.setConstantPatternPositions(G,E)}G=a.translatePosMatrix(w.posMatrix,y,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor"));E=f.paint.get("fill-extrusion-vertical-gradient");if(r){var F=a,H=v;y=d.extend(pf(G,F,E),ea(H,F,y),{u_height_factor:-Math.pow(2,w.overscaledZ)/y.tileSize/8})}else y=pf(G,a,E);B.draw(u,u.gl.TRIANGLES,l,h,m,na.backCCW,
y,f.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,f.paint,a.transform.zoom,A)}}!0}else"translucent"===a.renderPass&&Qc(a,f,f.paint.get("fill-extrusion-opacity"))},hillshade:function(a,c,f,g){if("offscreen"===a.renderPass||"translucent"===a.renderPass){for(var l=a.context,h=c.getSource().maxzoom,m=a.depthModeForSublayer(0,la.ReadOnly),u=Ca.disabled,p=a.colorModeForRenderPass(),q=0;q<g.length;q+=1){var r=c.getTile(g[q]);if(r.needsHillshadePrepare&&"offscreen"===a.renderPass){var v=a,x=f,w=h,y=m,
z=u,A=p,B=v.context,E=B.gl;if(r.dem&&r.dem.data){var G=r.dem.dim,F=r.dem.stride,H=r.dem.getPixels();(B.activeTexture.set(E.TEXTURE1),B.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(F),r.demTexture)?(F=r.demTexture,F.update(H,{premultiply:!1}),F.bind(E.NEAREST,E.CLAMP_TO_EDGE)):(r.demTexture=new d.Texture(B,H,E.RGBA,{premultiply:!1}),r.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE));B.activeTexture.set(E.TEXTURE0);H=r.fbo;H||(F=new d.Texture(B,{width:G,height:G,data:null},
E.RGBA),F.bind(E.LINEAR,E.CLAMP_TO_EDGE),(H=r.fbo=B.createFramebuffer(G,G)).colorAttachment.set(F.texture));B.bindFramebuffer.set(H.framebuffer);B.viewport.set([0,0,G,G]);v.useProgram("hillshadePrepare").draw(B,E.TRIANGLES,y,z,A,na.disabled,Zf(r,w),x.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments);r.needsHillshadePrepare=!1}}else if("translucent"===a.renderPass&&(v=a,x=f,w=m,y=u,z=p,A=v.context,B=A.gl,G=r.fbo)){E=v.useProgram("hillshade");A.activeTexture.set(B.TEXTURE0);
B.bindTexture(B.TEXTURE_2D,G.colorAttachment.get());F=H=G=void 0;var I=v;var M=r,L=x,O=L.paint.get("hillshade-shadow-color"),P=L.paint.get("hillshade-highlight-color"),S=L.paint.get("hillshade-accent-color"),R=L.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===L.paint.get("hillshade-illumination-anchor")&&(R-=I.transform.angle);var V=!I.options.moving;I={u_matrix:I.transform.calculatePosMatrix(M.tileID.toUnwrapped(),V),u_image:0,u_latrange:(F=M.tileID,H=Math.pow(2,F.canonical.z),
G=F.canonical.y,[(new d.MercatorCoordinate(0,G/H)).toLngLat().lat,(new d.MercatorCoordinate(0,(G+1)/H)).toLngLat().lat]),u_light:[L.paint.get("hillshade-exaggeration"),R],u_shadow:O,u_highlight:P,u_accent:S};r.maskedBoundsBuffer&&r.maskedIndexBuffer&&r.segments?E.draw(A,B.TRIANGLES,w,y,z,na.disabled,I,x.id,r.maskedBoundsBuffer,r.maskedIndexBuffer,r.segments):E.draw(A,B.TRIANGLES,w,y,z,na.disabled,I,x.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}}l.viewport.set([0,0,a.width,
a.height])}},raster:function(a,c,f,g){if("translucent"===a.renderPass&&0!==f.paint.get("raster-opacity"))for(var l=a.context,h=l.gl,m=c.getSource(),u=a.useProgram("raster"),p=Ca.disabled,q=a.colorModeForRenderPass(),r=g.length&&g[0].overscaledZ,v=!a.options.moving,x=0;x<g.length;x+=1){var w=g[x],y=a.depthModeForSublayer(w.overscaledZ-r,1===f.paint.get("raster-opacity")?la.ReadWrite:la.ReadOnly,h.LESS),z=c.getTile(w),B=a.transform.calculatePosMatrix(w.toUnwrapped(),v);z.registerFadeDuration(f.paint.get("raster-fade-duration"));
w=c.findLoadedParent(w,0);var A=z,E=w,G=c,F=a.transform;var H=f.paint.get("raster-fade-duration");if(0<H){var I=d.browser.now(),L=(I-A.timeAdded)/H;H=E?(I-E.timeAdded)/H:-1;G=G.getSource();F=F.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom});F=(F=!E||Math.abs(E.tileID.overscaledZ-F)>Math.abs(A.tileID.overscaledZ-F))&&A.refreshedUponExpiration?1:d.clamp(F?L:1-H,0,1);H=(A.refreshedUponExpiration&&1<=L&&(A.refreshedUponExpiration=!1),E?{opacity:1,mix:1-F}:{opacity:F,mix:0})}else H={opacity:1,
mix:0};L=E=void 0;A="nearest"===f.paint.get("raster-resampling")?h.NEAREST:h.LINEAR;l.activeTexture.set(h.TEXTURE0);z.texture.bind(A,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST);l.activeTexture.set(h.TEXTURE1);w?(w.texture.bind(A,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST),E=Math.pow(2,w.tileID.overscaledZ-z.tileID.overscaledZ),L=[z.tileID.canonical.x*E%1,z.tileID.canonical.y*E%1]):z.texture.bind(A,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST);A=F=void 0;w=L||[0,0];E=E||1;var M=f;L=H.mix;H=H.opacity*M.paint.get("raster-opacity");
G=M.paint.get("raster-brightness-min");I=M.paint.get("raster-brightness-max");var O=(F=M.paint.get("raster-saturation"),0<F?1-1/(1.001-F):-F);F=(A=M.paint.get("raster-contrast"),0<A?1/(1-A):1+A);M=M.paint.get("raster-hue-rotate");M*=Math.PI/180;A=Math.sin(M);M=Math.cos(M);B={u_matrix:B,u_tl_parent:w,u_scale_parent:E,u_buffer_scale:1,u_fade_t:L,u_opacity:H,u_image0:0,u_image1:1,u_brightness_low:G,u_brightness_high:I,u_saturation_factor:O,u_contrast_factor:F,u_spin_weights:[(2*M+1)/3,(-Math.sqrt(3)*
A-M+1)/3,(Math.sqrt(3)*A-M+1)/3]};m instanceof ka?u.draw(l,h.TRIANGLES,y,p,q,na.disabled,B,f.id,m.boundsBuffer,a.quadTriangleIndexBuffer,m.boundsSegments):z.maskedBoundsBuffer&&z.maskedIndexBuffer&&z.segments?u.draw(l,h.TRIANGLES,y,p,q,na.disabled,B,f.id,z.maskedBoundsBuffer,z.maskedIndexBuffer,z.segments,f.paint,a.transform.zoom):u.draw(l,h.TRIANGLES,y,p,q,na.disabled,B,f.id,a.rasterBoundsBuffer,a.quadTriangleIndexBuffer,a.rasterBoundsSegments)}},background:function(a,c,d){c=d.paint.get("background-color");
var f=d.paint.get("background-opacity");if(0!==f){var l=a.context,h=l.gl,m=a.transform,u=m.tileSize,p=d.paint.get("background-pattern");if(!a.isPatternMissing(p)){var q=p||1!==c.a||1!==f?"translucent":"opaque";if(a.renderPass===q){var r=Ca.disabled;q=a.depthModeForSublayer(0,"opaque"===q?la.ReadWrite:la.ReadOnly);var v=a.colorModeForRenderPass(),w=a.useProgram(p?"backgroundPattern":"background");m=m.coveringTiles({tileSize:u});p&&(l.activeTexture.set(h.TEXTURE0),a.imageManager.bind(a.context));for(var x=
d.getCrossfadeParameters(),y=0;y<m.length;y+=1){var z=m[y],A=a.transform.calculatePosMatrix(z.toUnwrapped());z=p?tf(A,f,a,p,{tileID:z,tileSize:u},x):{u_matrix:A,u_opacity:f,u_color:c};w.draw(l,h.TRIANGLES,q,r,v,na.disabled,z,d.id,a.tileExtentBuffer,a.quadTriangleIndexBuffer,a.tileExtentSegments)}}}}},debug:function(a,c,f){for(var g=0;g<f.length;g++){var l=void 0,h=void 0,m,u,p,q=a,r=c,v=f[g],w=q.context,x=w.gl,y=v.posMatrix,z=q.useProgram("debug"),A=la.disabled,B=Ca.disabled,E=q.colorModeForRenderPass();
z.draw(w,x.LINE_STRIP,A,B,E,na.disabled,hd(y,d.Color.red),"$debug",q.debugBuffer,q.tileBorderIndexBuffer,q.debugSegments);var F=v.toString(),G=50,H=5;H=H||1;var I=[];var M=0;for(p=F.length;M<p;M++)if(m=wf[F[M]]){var L=null;var O=0;for(u=m[1].length;O<u;O+=2)-1===m[1][O]&&-1===m[1][O+1]?L=null:(h=G+m[1][O]*H,l=200-m[1][O+1]*H,L&&I.push(L.x,L.y,h,l),L={x:h,y:l});G+=m[0]*H}l=new d.StructArrayLayout2i4;L=new d.StructArrayLayout2ui4;for(h=0;h<I.length;h+=2)l.emplaceBack(I[h],I[h+1]),L.emplaceBack(h,h+
1);I=w.createVertexBuffer(l,uc.members);L=w.createIndexBuffer(L);l=d.SegmentVector.simpleSegment(0,0,l.length/2,l.length/2);r=r.getTile(v).tileSize;q=d.EXTENT/(Math.pow(2,q.transform.zoom-v.overscaledZ)*r);v=[[-1,-1],[-1,1],[1,-1],[1,1]];for(r=0;r<v.length;r++)h=v[r],z.draw(w,x.LINES,A,B,E,na.disabled,hd(d.translate([],y,[q*h[0],q*h[1],0]),d.Color.white),"$debug",I,L,l);z.draw(w,x.LINES,A,B,E,na.disabled,hd(y,d.Color.black),"$debug",I,L,l)}},custom:function(a,c,d){c=a.context;var f=d.implementation;
if("offscreen"===a.renderPass){var h=f.prerender;h&&(a.setCustomLayerDefaults(),h.call(f,c.gl,a.transform.customLayerMatrix()),c.setDirty(),a.setBaseState());"3d"===f.renderingMode&&(a.setCustomLayerDefaults(),Ac(a,d),f.render(c.gl,a.transform.customLayerMatrix()),c.setDirty(),a.setBaseState())}else"translucent"===a.renderPass&&("3d"===f.renderingMode?Qc(a,d,1):(a.setCustomLayerDefaults(),c.setColorMode(a.colorModeForRenderPass()),c.setStencilMode(Ca.disabled),d=a.depthModeForSublayer(0,la.ReadOnly),
c.setDepthMode(d),f.render(c.gl,a.transform.customLayerMatrix()),c.setDirty(),a.setBaseState(),c.bindFramebuffer.set(null)))}},La=function(a,c){this.context=new $a(a);this.transform=c;this._tileTextures={};this.setup();this.numSublayers=sc.maxUnderzooming+sc.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.depthRboNeedsClear=!0;this.emptyProgramConfiguration=new d.ProgramConfiguration;this.crossTileSymbolIndex=new Mb};La.prototype.resize=function(a,c){var f=this.context.gl;if(this.width=a*
d.browser.devicePixelRatio,this.height=c*d.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(a=0,c=this.style._order;a<c.length;a+=1)this.style._layers[c[a]].resize();this.depthRbo&&(f.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)};La.prototype.setup=function(){var a=this.context,c=new d.StructArrayLayout2i4;c.emplaceBack(0,0);c.emplaceBack(d.EXTENT,0);c.emplaceBack(0,d.EXTENT);c.emplaceBack(d.EXTENT,d.EXTENT);this.tileExtentBuffer=a.createVertexBuffer(c,
uc.members);this.tileExtentSegments=d.SegmentVector.simpleSegment(0,0,4,2);c=new d.StructArrayLayout2i4;c.emplaceBack(0,0);c.emplaceBack(d.EXTENT,0);c.emplaceBack(0,d.EXTENT);c.emplaceBack(d.EXTENT,d.EXTENT);this.debugBuffer=a.createVertexBuffer(c,uc.members);this.debugSegments=d.SegmentVector.simpleSegment(0,0,4,5);c=new d.StructArrayLayout4i8;c.emplaceBack(0,0,0,0);c.emplaceBack(d.EXTENT,0,d.EXTENT,0);c.emplaceBack(0,d.EXTENT,0,d.EXTENT);c.emplaceBack(d.EXTENT,d.EXTENT,d.EXTENT,d.EXTENT);this.rasterBoundsBuffer=
a.createVertexBuffer(c,d.rasterBoundsAttributes.members);this.rasterBoundsSegments=d.SegmentVector.simpleSegment(0,0,4,2);c=new d.StructArrayLayout2i4;c.emplaceBack(0,0);c.emplaceBack(1,0);c.emplaceBack(0,1);c.emplaceBack(1,1);this.viewportBuffer=a.createVertexBuffer(c,uc.members);this.viewportSegments=d.SegmentVector.simpleSegment(0,0,4,2);c=new d.StructArrayLayout1ui2;c.emplaceBack(0);c.emplaceBack(1);c.emplaceBack(3);c.emplaceBack(2);c.emplaceBack(0);this.tileBorderIndexBuffer=a.createIndexBuffer(c);
c=new d.StructArrayLayout3ui6;c.emplaceBack(0,1,2);c.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=a.createIndexBuffer(c);a=this.context.gl;this.stencilClearMode=new Ca({func:a.ALWAYS,mask:0},0,255,a.ZERO,a.ZERO,a.ZERO)};La.prototype.clearStencil=function(){var a=this.context,c=a.gl,f=d.create();d.ortho(f,0,this.width,this.height,0,0,1);d.scale(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(a,c.TRIANGLES,la.disabled,this.stencilClearMode,Ha.disabled,na.disabled,
{u_matrix:f},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};La.prototype._renderTileClippingMasks=function(a){var c=this.context,d=c.gl;c.setColorMode(Ha.disabled);c.setDepthMode(la.disabled);var g=this.useProgram("clippingMask"),h=1;this._tileClippingMaskIDs={};for(var n=0;n<a.length;n+=1){var m=a[n],u=this._tileClippingMaskIDs[m.key]=h++;g.draw(c,d.TRIANGLES,la.disabled,new Ca({func:d.ALWAYS,mask:0},u,255,d.KEEP,d.KEEP,d.REPLACE),Ha.disabled,na.disabled,{u_matrix:m.posMatrix},
"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}};La.prototype.stencilModeForClipping=function(a){var c=this.context.gl;return new Ca({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,c.KEEP,c.KEEP,c.REPLACE)};La.prototype.colorModeForRenderPass=function(){var a=this.context.gl;return this._showOverdrawInspector?new Ha([a.CONSTANT_COLOR,a.ONE],new d.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ha.unblended:Ha.alphaBlended};La.prototype.depthModeForSublayer=
function(a,c,d){a=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new la(d||this.context.gl.LEQUAL,c,[a,a])};La.prototype.render=function(a,c){this.style=a;this.options=c;this.lineAtlas=a.lineAtlas;this.imageManager=a.imageManager;this.glyphManager=a.glyphManager;this.symbolFadeChange=a.placement.symbolFadeChange(d.browser.now());var f=this.style._order,g=this.style.sourceCaches;for(n in g){var h=g[n];h.used&&h.prepare(this.context)}var n={};h={};var m={};for(q in g){var u=
g[q];n[q]=u.getVisibleCoordinates();h[q]=n[q].slice().reverse();m[q]=u.getVisibleCoordinates(!0).reverse()}for(var p in g){var q=g[p];u=q.getSource();if("raster"===u.type||"raster-dem"===u.type){u=[];for(var r=0,v=n[p];r<v.length;r+=1)u.push(q.getTile(v[r]));Ub(u,this.context)}}this.renderPass="offscreen";this.depthRboNeedsClear=!0;for(p=0;p<f.length;p+=1)q=this.style._layers[f[p]],q.hasOffscreenPass()&&!q.isHidden(this.transform.zoom)&&(u=h[q.source],("custom"===q.type||u.length)&&this.renderLayer(this,
g[q.source],q,u));this.context.bindFramebuffer.set(null);this.context.clear({color:c.showOverdrawInspector?d.Color.black:d.Color.transparent,depth:1});this._showOverdrawInspector=c.showOverdrawInspector;this.depthRange=(a._order.length+2)*this.numSublayers*this.depthEpsilon;this.renderPass="opaque";for(this.currentLayer=f.length-1;0<=this.currentLayer;this.currentLayer--){a=this.style._layers[f[this.currentLayer]];c=g[a.source];p=n[a.source];a.source!==w&&c&&(this.clearStencil(),c.getSource().isTileClipped&&
this._renderTileClippingMasks(p));this.renderLayer(this,c,a,p);var w=a.source}this.renderPass="translucent";this.currentLayer=0;for(w=null;this.currentLayer<f.length;this.currentLayer++)a=this.style._layers[f[this.currentLayer]],c=g[a.source],p=("symbol"===a.type?m:h)[a.source],a.source!==w&&c&&(this.clearStencil(),c.getSource().isTileClipped&&this._renderTileClippingMasks(n[a.source])),this.renderLayer(this,c,a,p),w=a.source;if(this.options.showTileBoundaries)for(var x in g){ee.debug(this,g[x],n[x]);
break}this.setCustomLayerDefaults()};La.prototype.setupOffscreenDepthRenderbuffer=function(){var a=this.context;this.depthRbo||(this.depthRbo=a.createRenderbuffer(a.gl.DEPTH_COMPONENT16,this.width,this.height))};La.prototype.renderLayer=function(a,c,d,g){d.isHidden(this.transform.zoom)||("background"===d.type||"custom"===d.type||g.length)&&(this.id=d.id,ee[d.type](a,c,d,g))};La.prototype.translatePosMatrix=function(a,c,f,g,h){if(!f[0]&&!f[1])return a;var l=h?"map"===g?this.transform.angle:0:"viewport"===
g?-this.transform.angle:0;l&&(g=Math.sin(l),l=Math.cos(l),f=[f[0]*l-f[1]*g,f[0]*g+f[1]*l]);c=[h?f[0]:fa(c,f[0],this.transform.zoom),h?f[1]:fa(c,f[1],this.transform.zoom),0];f=new Float32Array(16);return d.translate(f,a,c),f};La.prototype.saveTileTexture=function(a){var c=this._tileTextures[a.size[0]];c?c.push(a):this._tileTextures[a.size[0]]=[a]};La.prototype.getTileTexture=function(a){return(a=this._tileTextures[a])&&0<a.length?a.pop():null};La.prototype.isPatternMissing=function(a){if(!a)return!1;
var c=this.imageManager.getPattern(a.from);a=this.imageManager.getPattern(a.to);return!c||!a};La.prototype.useProgram=function(a,c){void 0===c&&(c=this.emptyProgramConfiguration);this.cache=this.cache||{};var d=""+a+(c.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[d]||(this.cache[d]=new of(this.context,Vf[a],c,De[a],this._showOverdrawInspector)),this.cache[d]};La.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();
this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};La.prototype.setBaseState=function(){var a=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(a.FUNC_ADD)};var ca=function(a,c,f){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===f||f;this._minZoom=
a||0;this._maxZoom=c||22;this.setMaxBounds();this.height=this.width=0;this._center=new d.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._posMatrixCache={};this._alignedPosMatrixCache={}},za={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},
center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ca.prototype.clone=function(){var a=new ca(this._minZoom,this._maxZoom,this._renderWorldCopies);return a.tileSize=this.tileSize,a.latRange=this.latRange,a.width=this.width,a.height=this.height,a._center=this._center,a.zoom=this.zoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._unmodified=this._unmodified,a._calcMatrices(),a};za.minZoom.get=function(){return this._minZoom};za.minZoom.set=function(a){this._minZoom!==
a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))};za.maxZoom.get=function(){return this._maxZoom};za.maxZoom.set=function(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))};za.renderWorldCopies.get=function(){return this._renderWorldCopies};za.renderWorldCopies.set=function(a){void 0===a?a=!0:null===a&&(a=!1);this._renderWorldCopies=a};za.worldSize.get=function(){return this.tileSize*this.scale};za.centerPoint.get=function(){return this.size._div(2)};za.size.get=function(){return new d.Point(this.width,
this.height)};za.bearing.get=function(){return-this.angle/Math.PI*180};za.bearing.set=function(a){a=-d.wrap(a,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=d.create$4(),d.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};za.pitch.get=function(){return this._pitch/Math.PI*180};za.pitch.set=function(a){a=d.clamp(a,0,60)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())};za.fov.get=function(){return this._fov/
Math.PI*180};za.fov.set=function(a){a=Math.max(.01,Math.min(60,a));this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())};za.zoom.get=function(){return this._zoom};za.zoom.set=function(a){a=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom,this._constrain(),this._calcMatrices())};za.center.get=function(){return this._center};za.center.set=
function(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())};ca.prototype.coveringZoomLevel=function(a){return(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize))};ca.prototype.getVisibleUnwrappedCoordinates=function(a){var c=[new d.UnwrappedTileID(0,a)];if(this._renderWorldCopies){var f=this.pointCoordinate(new d.Point(0,0)),g=this.pointCoordinate(new d.Point(this.width,0)),h=this.pointCoordinate(new d.Point(this.width,
this.height)),n=this.pointCoordinate(new d.Point(0,this.height)),m=Math.floor(Math.max(f.x,g.x,h.x,n.x));for(f=Math.floor(Math.min(f.x,g.x,h.x,n.x))-1;f<=m+1;f++)0!==f&&c.push(new d.UnwrappedTileID(f,a))}return c};ca.prototype.coveringTiles=function(a){var c=this.coveringZoomLevel(a),f=c;if(void 0!==a.minzoom&&c<a.minzoom)return[];void 0!==a.maxzoom&&c>a.maxzoom&&(c=a.maxzoom);var g=d.MercatorCoordinate.fromLngLat(this.center),h=Math.pow(2,c),n=new d.Point(h*g.x-.5,h*g.y-.5);return function(a,c,f,
g){function h(c,h,m){var u;if(0<=m&&m<=l)for(;c<h;c++){var p=Math.floor(c/l);var t=(c%l+l)%l;0!==p&&!0!==g||(u=new d.OverscaledTileID(f,p,a,t,m),n[u.key]=u)}}void 0===g&&(g=!0);var l=1<<a,n={};c=c.map(function(a){return(new d.Point(a.x,a.y))._mult(l)});return Vb(c[0],c[1],c[2],0,l,h),Vb(c[2],c[3],c[0],0,l,h),Object.keys(n).map(function(a){return n[a]})}(c,[this.pointCoordinate(new d.Point(0,0)),this.pointCoordinate(new d.Point(this.width,0)),this.pointCoordinate(new d.Point(this.width,this.height)),
this.pointCoordinate(new d.Point(0,this.height))],a.reparseOverscaled?f:c,this._renderWorldCopies).sort(function(a,c){return n.dist(a.canonical)-n.dist(c.canonical)})};ca.prototype.resize=function(a,c){this.width=a;this.height=c;this.pixelsToGLUnits=[2/a,-2/c];this._constrain();this._calcMatrices()};za.unmodified.get=function(){return this._unmodified};ca.prototype.zoomScale=function(a){return Math.pow(2,a)};ca.prototype.scaleZoom=function(a){return Math.log(a)/Math.LN2};ca.prototype.project=function(a){var c=
d.clamp(a.lat,-this.maxValidLatitude,this.maxValidLatitude);return new d.Point(d.mercatorXfromLng(a.lng)*this.worldSize,d.mercatorYfromLat(c)*this.worldSize)};ca.prototype.unproject=function(a){return(new d.MercatorCoordinate(a.x/this.worldSize,a.y/this.worldSize)).toLngLat()};za.point.get=function(){return this.project(this.center)};ca.prototype.setLocationAtPoint=function(a,c){c=this.pointCoordinate(c);var f=this.pointCoordinate(this.centerPoint);a=this.locationCoordinate(a);a=new d.MercatorCoordinate(a.x-
(c.x-f.x),a.y-(c.y-f.y));this.center=this.coordinateLocation(a);this._renderWorldCopies&&(this.center=this.center.wrap())};ca.prototype.locationPoint=function(a){return this.coordinatePoint(this.locationCoordinate(a))};ca.prototype.pointLocation=function(a){return this.coordinateLocation(this.pointCoordinate(a))};ca.prototype.locationCoordinate=function(a){return d.MercatorCoordinate.fromLngLat(a)};ca.prototype.coordinateLocation=function(a){return a.toLngLat()};ca.prototype.pointCoordinate=function(a){var c=
[a.x,a.y,0,1];a=[a.x,a.y,1,1];d.transformMat4(c,c,this.pixelMatrixInverse);d.transformMat4(a,a,this.pixelMatrixInverse);var f=c[3],g=a[3],h=c[1]/f,n=a[1]/g,m=c[2]/f,u=a[2]/g;m=m===u?0:(0-m)/(u-m);return new d.MercatorCoordinate(d.number(c[0]/f,a[0]/g,m)/this.worldSize,d.number(h,n,m)/this.worldSize)};ca.prototype.coordinatePoint=function(a){a=[a.x*this.worldSize,a.y*this.worldSize,0,1];return d.transformMat4(a,a,this.pixelMatrix),new d.Point(a[0]/a[3],a[1]/a[3])};ca.prototype.getBounds=function(){return(new d.LngLatBounds).extend(this.pointLocation(new d.Point(0,
0))).extend(this.pointLocation(new d.Point(this.width,0))).extend(this.pointLocation(new d.Point(this.width,this.height))).extend(this.pointLocation(new d.Point(0,this.height)))};ca.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new d.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};ca.prototype.setMaxBounds=function(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),
a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};ca.prototype.calculatePosMatrix=function(a,c){void 0===c&&(c=!1);var f=a.key,g=c?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];var h=a.canonical,n=this.worldSize/this.zoomScale(h.z);a=h.x+Math.pow(2,h.z)*a.wrap;var m=d.identity(new Float64Array(16));return d.translate(m,m,[a*n,h.y*n,0]),d.scale(m,m,[n/d.EXTENT,n/d.EXTENT,1]),d.multiply(m,c?this.alignedProjMatrix:
this.projMatrix,m),g[f]=new Float32Array(m),g[f]};ca.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};ca.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var a,c,f=-90,g=90,h=-180,n=180,m=this.size,u=this._unmodified;if(this.latRange){var p=this.latRange;f=d.mercatorYfromLat(p[1])*this.worldSize;var q=(g=d.mercatorYfromLat(p[0])*this.worldSize)-f<m.y?m.y/(g-f):0}if(this.lngRange){p=this.lngRange;h=d.mercatorXfromLng(p[0])*
this.worldSize;var r=(n=d.mercatorXfromLng(p[1])*this.worldSize)-h<m.x?m.x/(n-h):0}p=this.point;var v=Math.max(r||0,q||0);if(v)return this.center=this.unproject(new d.Point(r?(n+h)/2:p.x,q?(g+f)/2:p.y)),this.zoom+=this.scaleZoom(v),this._unmodified=u,void(this._constraining=!1);this.latRange&&(q=p.y,r=m.y/2,q-r<f&&(c=f+r),q+r>g&&(c=g-r));this.lngRange&&(f=p.x,m=m.x/2,f-m<h&&(a=h+m),f+m>n&&(a=n-m));void 0===a&&void 0===c||(this.center=this.unproject(new d.Point(void 0!==a?a:p.x,void 0!==c?c:p.y)));
this._unmodified=u;this._constraining=!1}};ca.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var a=this._fov/2,c=this.point,f=c.x;c=c.y;var g=1.01*(Math.sin(a)*this.cameraToCenterDistance/Math.sin(Math.PI-(Math.PI/2+this._pitch)-a)*Math.cos(Math.PI/2-this._pitch)+this.cameraToCenterDistance);a=new Float64Array(16);d.perspective(a,this._fov,this.width/this.height,1,g);d.scale(a,a,[1,-1,1]);d.translate(a,a,[0,0,-this.cameraToCenterDistance]);
d.rotateX(a,a,this._pitch);d.rotateZ(a,a,this.angle);d.translate(a,a,[-f,-c,0]);this.mercatorMatrix=d.scale([],a,[this.worldSize,this.worldSize,this.worldSize]);d.scale(a,a,[1,1,d.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=a;g=this.width%2/2;var h=this.height%2/2,n=Math.cos(this.angle),m=Math.sin(this.angle);f=f-Math.round(f)+n*g+m*h;c=c-Math.round(c)+n*h+m*g;g=new Float64Array(a);if(d.translate(g,g,[.5<f?f-1:f,.5<c?c-1:c,0]),this.alignedProjMatrix=g,a=d.create(),
d.scale(a,a,[this.width/2,-this.height/2,1]),d.translate(a,a,[1,-1,0]),this.pixelMatrix=d.multiply(new Float64Array(16),a,this.projMatrix),!(a=d.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=a;this._posMatrixCache={};this._alignedPosMatrixCache={}}};ca.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var a=this.pointCoordinate(new d.Point(0,0));a=[a.x*this.worldSize,a.y*this.worldSize,0,1];return d.transformMat4(a,
a,this.pixelMatrix)[3]/this.cameraToCenterDistance};Object.defineProperties(ca.prototype,za);var Hc=function(){var a,c,f,g;d.bindAll(["_onHashChange","_updateHash"],this);this._updateHash=(a=this._updateHashUnthrottled.bind(this),c=!1,f=0,g=function(){f=0;c&&(a(),f=setTimeout(g,300),c=!1)},function(){return c=!0,f||g(),f})};Hc.prototype.addTo=function(a){return this._map=a,d.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};Hc.prototype.remove=
function(){return d.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};Hc.prototype.getHashString=function(a){var c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,g=Math.pow(10,Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10)),h=Math.round(c.lng*g)/g;c=Math.round(c.lat*g)/g;g=this._map.getBearing();var n=this._map.getPitch(),m="";return m+=a?"#/"+h+"/"+c+"/"+d:"#"+d+
"/"+c+"/"+h,(g||n)&&(m+="/"+Math.round(10*g)/10),n&&(m+="/"+Math.round(n)),m};Hc.prototype._onHashChange=function(){var a=d.window.location.hash.replace("#","").split("/");return 3<=a.length&&(this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:+(a[3]||0),pitch:+(a[4]||0)}),!0)};Hc.prototype._updateHashUnthrottled=function(){var a=this.getHashString();try{d.window.history.replaceState(d.window.history.state,"",a)}catch(c){}};var bb=function(a){function c(c,f,h,m){void 0===m&&(m={});var g=A.mousePos(f.getCanvasContainer(),
h),l=f.unproject(g);a.call(this,c,d.extend({point:g,lngLat:l,originalEvent:h},m));this._defaultPrevented=!1;this.target=f}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var f={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,f),c}(d.Event),Gd=function(a){function c(c,f,h){var g=A.touchPos(f.getCanvasContainer(),
h),l=g.map(function(a){return f.unproject(a)}),n=g.reduce(function(a,c,d,f){return a.add(c.div(f.length))},new d.Point(0,0)),m=f.unproject(n);a.call(this,c,{points:g,point:n,lngLats:l,lngLat:m,originalEvent:h});this._defaultPrevented=!1}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var f={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},
Object.defineProperties(c.prototype,f),c}(d.Event),Xe=function(a){function c(c,d,f){a.call(this,c,{originalEvent:f});this._defaultPrevented=!1}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var d={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},d.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,d),c}(d.Event),sa=function(a){this._map=a;this._el=a.getCanvasContainer();
this._delta=0;d.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};sa.prototype.isEnabled=function(){return!!this._enabled};sa.prototype.isActive=function(){return!!this._active};sa.prototype.isZooming=function(){return!!this._zooming};sa.prototype.enable=function(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=a&&"center"===a.around)};sa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};sa.prototype.onWheel=function(a){if(this.isEnabled()){var c=
a.deltaMode===d.window.WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY,f=d.browser.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f;0!==c&&0==c%4.000244140625?this._type="wheel":0!==c&&4>Math.abs(c)?this._type="trackpad":400<g?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=200>Math.abs(g*c)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue));a.shiftKey&&c&&(c/=4);this._type&&
(this._lastWheelEvent=a,this._delta-=c,this.isActive()||this._start(a));a.preventDefault()}};sa.prototype._onTimeout=function(a){this._type="wheel";this._delta-=this._lastValue;this.isActive()||this._start(a)};sa.prototype._start=function(a){this._delta&&(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._zooming=this._active=!0,this._map.fire(new d.Event("movestart",{originalEvent:a})),this._map.fire(new d.Event("zoomstart",{originalEvent:a})),this._finishTimeout&&
clearTimeout(this._finishTimeout),a=A.mousePos(this._el,a),this._around=d.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)))};sa.prototype._onScrollFrame=function(){var a=this;if(this._frameId=null,this.isActive()){var c=this._map.transform;if(0!==this._delta){var f=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&
4.000244140625<Math.abs(this._delta)?1/450:.01))));0>this._delta&&0!==f&&(f=1/f);var g="number"==typeof this._targetZoom?c.zoomScale(this._targetZoom):c.scale;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(g*f)));"wheel"===this._type&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}f="number"==typeof this._targetZoom?this._targetZoom:c.zoom;g=this._startZoom;var h=this._easing,n=!1;if("wheel"===this._type&&g&&h){var m=Math.min((d.browser.now()-this._lastWheelEventTime)/
200,1);h=h(m);c.zoom=d.number(g,f,h);1>m?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):n=!0}else c.zoom=f,n=!0;c.setLocationAtPoint(this._around,this._aroundPoint);this._map.fire(new d.Event("move",{originalEvent:this._lastWheelEvent}));this._map.fire(new d.Event("zoom",{originalEvent:this._lastWheelEvent}));n&&(this._active=!1,this._finishTimeout=setTimeout(function(){a._zooming=!1;a._map.fire(new d.Event("zoomend",{originalEvent:a._lastWheelEvent}));a._map.fire(new d.Event("moveend",
{originalEvent:a._lastWheelEvent}));delete a._targetZoom},200))}};sa.prototype._smoothOutEasing=function(a){var c=d.ease;if(this._prevEase){c=this._prevEase;var f=(d.browser.now()-c.start)/c.duration;c=c.easing(f+.01)-c.easing(f);c=.27/Math.sqrt(c*c+1E-4)*.01;c=d.bezier(c,Math.sqrt(.0729-c*c),.25,1)}return this._prevEase={start:d.browser.now(),duration:a,easing:c},c};var zb=function(a,c){this._map=a;this._el=a.getCanvasContainer();this._container=a.getContainer();this._clickTolerance=c.clickTolerance||
1;d.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};zb.prototype.isEnabled=function(){return!!this._enabled};zb.prototype.isActive=function(){return!!this._active};zb.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};zb.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};zb.prototype.onMouseDown=function(a){this.isEnabled()&&a.shiftKey&&0===a.button&&(d.window.document.addEventListener("mousemove",this._onMouseMove,!1),d.window.document.addEventListener("keydown",
this._onKeyDown,!1),d.window.document.addEventListener("mouseup",this._onMouseUp,!1),A.disableDrag(),this._startPos=this._lastPos=A.mousePos(this._el,a),this._active=!0)};zb.prototype._onMouseMove=function(a){var c=A.mousePos(this._el,a);if(!(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)){var d=this._startPos;this._lastPos=c;this._box||(this._box=A.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",
a));a=Math.min(d.x,c.x);var g=Math.max(d.x,c.x),h=Math.min(d.y,c.y);c=Math.max(d.y,c.y);A.setTransform(this._box,"translate("+a+"px,"+h+"px)");this._box.style.width=g-a+"px";this._box.style.height=c-h+"px"}};zb.prototype._onMouseUp=function(a){if(0===a.button){var c=this._startPos,f=A.mousePos(this._el,a);this._finish();A.suppressClick();c.x===f.x&&c.y===f.y?this._fireEvent("boxzoomcancel",a):this._map.fitScreenCoordinates(c,f,this._map.getBearing(),{linear:!0}).fire(new d.Event("boxzoomend",{originalEvent:a}))}};
zb.prototype._onKeyDown=function(a){27===a.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",a))};zb.prototype._finish=function(){this._active=!1;d.window.document.removeEventListener("mousemove",this._onMouseMove,!1);d.window.document.removeEventListener("keydown",this._onKeyDown,!1);d.window.document.removeEventListener("mouseup",this._onMouseUp,!1);this._container.classList.remove("mapboxgl-crosshair");this._box&&(A.remove(this._box),this._box=null);A.enableDrag();delete this._startPos;
delete this._lastPos};zb.prototype._fireEvent=function(a,c){return this._map.fire(new d.Event(a,{originalEvent:c}))};var xf=d.bezier(0,0,.25,1),Ma=function(a,c){this._map=a;this._el=c.element||a.getCanvasContainer();this._state="disabled";this._button=c.button||"right";this._bearingSnap=c.bearingSnap||0;this._pitchWithRotate=!1!==c.pitchWithRotate;d.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Ma.prototype.isEnabled=function(){return"disabled"!==this._state};
Ma.prototype.isActive=function(){return"active"===this._state};Ma.prototype.enable=function(){this.isEnabled()||(this._state="enabled")};Ma.prototype.disable=function(){if(this.isEnabled())switch(this._state){case "active":this._state="disabled";this._unbind();this._deactivate();this._fireEvent("rotateend");this._pitchWithRotate&&this._fireEvent("pitchend");this._fireEvent("moveend");break;case "pending":this._state="disabled";this._unbind();break;default:this._state="disabled"}};Ma.prototype.onMouseDown=
function(a){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=A.mouseButton(a),this._eventButton!==(a.ctrlKey?0:2))return}else{if(a.ctrlKey||0!==A.mouseButton(a))return;this._eventButton=0}A.disableDrag();d.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0});d.window.document.addEventListener("mouseup",this._onMouseUp);d.window.addEventListener("blur",this._onBlur);this._state="pending";this._inertia=[[d.browser.now(),this._map.getBearing()]];this._startPos=
this._lastPos=A.mousePos(this._el,a);this._center=this._map.transform.centerPoint;a.preventDefault()}};Ma.prototype._onMouseMove=function(a){var c=A.mousePos(this._el,a);this._lastPos.equals(c)||(this._lastMoveEvent=a,this._lastPos=c,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",a),this._fireEvent("movestart",a),this._pitchWithRotate&&this._fireEvent("pitchstart",a)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))};Ma.prototype._onDragFrame=
function(){this._frameId=null;var a=this._lastMoveEvent;if(a){var c=this._map.transform,f=this._startPos,g=this._lastPos,h=c.bearing-.8*(f.x-g.x);f=c.pitch- -.5*(f.y-g.y);g=this._inertia;var n=g[g.length-1];this._drainInertiaBuffer();g.push([d.browser.now(),this._map._normalizeBearing(h,n[1])]);c.bearing=h;this._pitchWithRotate&&(this._fireEvent("pitch",a),c.pitch=f);this._fireEvent("rotate",a);this._fireEvent("move",a);delete this._lastMoveEvent;this._startPos=this._lastPos}};Ma.prototype._onMouseUp=
function(a){if(A.mouseButton(a)===this._eventButton)switch(this._state){case "active":this._state="enabled";A.suppressClick();this._unbind();this._deactivate();this._inertialRotate(a);break;case "pending":this._state="enabled",this._unbind()}};Ma.prototype._onBlur=function(a){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._fireEvent("rotateend",a);this._pitchWithRotate&&this._fireEvent("pitchend",a);this._fireEvent("moveend",a);break;case "pending":this._state=
"enabled",this._unbind()}};Ma.prototype._unbind=function(){d.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0});d.window.document.removeEventListener("mouseup",this._onMouseUp);d.window.removeEventListener("blur",this._onBlur);A.enableDrag()};Ma.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null);delete this._lastMoveEvent;delete this._startPos;delete this._lastPos};Ma.prototype._inertialRotate=function(a){var c=
this;this._fireEvent("rotateend",a);this._drainInertiaBuffer();var d=this._map,g=d.getBearing(),h=this._inertia,n=function(){Math.abs(g)<c._bearingSnap?d.resetNorth({noMoveStart:!0},{originalEvent:a}):c._fireEvent("moveend",a);c._pitchWithRotate&&c._fireEvent("pitchend",a)};if(2>h.length)n();else{var m=h[0],p=h[h.length-1];h=d._normalizeBearing(g,h[h.length-2][1]);var q=p[1]-m[1],r=0>q?-1:1;m=(p[0]-m[0])/1E3;0!==q&&0!==m?(n=Math.abs(.25/m*q),180<n&&(n=180),m=n/180,h+=m/2*n*r,Math.abs(d._normalizeBearing(h,
0))<this._bearingSnap&&(h=d._normalizeBearing(0,h)),d.rotateTo(h,{duration:1E3*m,easing:xf,noMoveStart:!0},{originalEvent:a})):n()}};Ma.prototype._fireEvent=function(a,c){return this._map.fire(new d.Event(a,c?{originalEvent:c}:{}))};Ma.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,c=d.browser.now();0<a.length&&160<c-a[0][0];)a.shift()};var Hd=d.bezier(0,0,.3,1),xa=function(a,c){this._map=a;this._el=a.getCanvasContainer();this._state="disabled";this._clickTolerance=c.clickTolerance||
1;d.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};xa.prototype.isEnabled=function(){return"disabled"!==this._state};xa.prototype.isActive=function(){return"active"===this._state};xa.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")};xa.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case "active":this._state="disabled";this._unbind();
this._deactivate();this._fireEvent("dragend");this._fireEvent("moveend");break;case "pending":this._state="disabled";this._unbind();break;default:this._state="disabled"}};xa.prototype.onMouseDown=function(a){"enabled"===this._state&&(a.ctrlKey||0!==A.mouseButton(a)||(A.addEventListener(d.window.document,"mousemove",this._onMove,{capture:!0}),A.addEventListener(d.window.document,"mouseup",this._onMouseUp),this._start(a)))};xa.prototype.onTouchStart=function(a){"enabled"===this._state&&(1<a.touches.length||
(A.addEventListener(d.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),A.addEventListener(d.window.document,"touchend",this._onTouchEnd),this._start(a)))};xa.prototype._start=function(a){d.window.addEventListener("blur",this._onBlur);this._state="pending";this._startPos=this._mouseDownPos=this._lastPos=A.mousePos(this._el,a);this._inertia=[[d.browser.now(),this._startPos]]};xa.prototype._onMove=function(a){a.preventDefault();var c=A.mousePos(this._el,a);this._lastPos.equals(c)||"pending"===
this._state&&c.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=a,this._lastPos=c,this._drainInertiaBuffer(),this._inertia.push([d.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",a),this._fireEvent("movestart",a)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))};xa.prototype._onDragFrame=function(){this._frameId=null;var a=this._lastMoveEvent;if(a){var c=this._map.transform;c.setLocationAtPoint(c.pointLocation(this._startPos),
this._lastPos);this._fireEvent("drag",a);this._fireEvent("move",a);this._startPos=this._lastPos;delete this._lastMoveEvent}};xa.prototype._onMouseUp=function(a){if(0===A.mouseButton(a))switch(this._state){case "active":this._state="enabled";A.suppressClick();this._unbind();this._deactivate();this._inertialPan(a);break;case "pending":this._state="enabled",this._unbind()}};xa.prototype._onTouchEnd=function(a){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();
this._inertialPan(a);break;case "pending":this._state="enabled",this._unbind()}};xa.prototype._onBlur=function(a){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._fireEvent("dragend",a);this._fireEvent("moveend",a);break;case "pending":this._state="enabled",this._unbind()}};xa.prototype._unbind=function(){A.removeEventListener(d.window.document,"touchmove",this._onMove,{capture:!0,passive:!1});A.removeEventListener(d.window.document,"touchend",this._onTouchEnd);
A.removeEventListener(d.window.document,"mousemove",this._onMove,{capture:!0});A.removeEventListener(d.window.document,"mouseup",this._onMouseUp);A.removeEventListener(d.window,"blur",this._onBlur)};xa.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null);delete this._lastMoveEvent;delete this._startPos;delete this._mouseDownPos;delete this._lastPos};xa.prototype._inertialPan=function(a){this._fireEvent("dragend",a);this._drainInertiaBuffer();
var c=this._inertia;if(2>c.length)this._fireEvent("moveend",a);else{var d=c[c.length-1];c=c[0];var g=d[1].sub(c[1]),h=(d[0]-c[0])/1E3;0===h||d[1].equals(c[1])?this._fireEvent("moveend",a):(d=g.mult(.3/h),c=d.mag(),1400<c&&(c=1400,d._unit()._mult(c)),c/=750,d=d.mult(-c/2),this._map.panBy(d,{duration:1E3*c,easing:Hd,noMoveStart:!0},{originalEvent:a}))}};xa.prototype._fireEvent=function(a,c){return this._map.fire(new d.Event(a,c?{originalEvent:c}:{}))};xa.prototype._drainInertiaBuffer=function(){for(var a=
this._inertia,c=d.browser.now();0<a.length&&160<c-a[0][0];)a.shift()};var Id=function(a){this._map=a;this._el=a.getCanvasContainer();d.bindAll(["_onKeyDown"],this)};Id.prototype.isEnabled=function(){return!!this._enabled};Id.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)};Id.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)};Id.prototype._onKeyDown=function(a){if(!(a.altKey||
a.ctrlKey||a.metaKey)){var c=0,d=0,g=0,h=0,n=0;switch(a.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:a.shiftKey?d=-1:(a.preventDefault(),h=-1);break;case 39:a.shiftKey?d=1:(a.preventDefault(),h=1);break;case 38:a.shiftKey?g=1:(a.preventDefault(),n=-1);break;case 40:a.shiftKey?g=-1:(n=1,a.preventDefault());break;default:return}var m=this._map,p=m.getZoom();c={duration:300,delayEndEvents:500,easing:Rc,zoom:c?Math.round(p)+c*(a.shiftKey?2:1):p,bearing:m.getBearing()+
15*d,pitch:m.getPitch()+10*g,offset:[100*-h,100*-n],center:m.getCenter()};m.easeTo(c,{originalEvent:a})}};var Zb=function(a){this._map=a;d.bindAll(["_onDblClick","_onZoomEnd"],this)};Zb.prototype.isEnabled=function(){return!!this._enabled};Zb.prototype.isActive=function(){return!!this._active};Zb.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};Zb.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Zb.prototype.onTouchStart=function(a){var c=this;this.isEnabled()&&
(1<a.points.length||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(a)):this._tapped=setTimeout(function(){c._tapped=null},300)))};Zb.prototype.onDblClick=function(a){this.isEnabled()&&(a.originalEvent.preventDefault(),this._zoom(a))};Zb.prototype._zoom=function(a){this._active=!0;this._map.on("zoomend",this._onZoomEnd);this._map.zoomTo(this._map.getZoom()+(a.originalEvent.shiftKey?-1:1),{around:a.lngLat},a)};Zb.prototype._onZoomEnd=function(){this._active=!1;this._map.off("zoomend",
this._onZoomEnd)};var ag=d.bezier(0,0,.15,1),Pa=function(a){this._map=a;this._el=a.getCanvasContainer();d.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Pa.prototype.isEnabled=function(){return!!this._enabled};Pa.prototype.enable=function(a){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!a&&"center"===a.around)};Pa.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=
!1)};Pa.prototype.disableRotation=function(){this._rotationDisabled=!0};Pa.prototype.enableRotation=function(){this._rotationDisabled=!1};Pa.prototype.onStart=function(a){if(this.isEnabled()&&2===a.touches.length){var c=A.mousePos(this._el,a.touches[0]);a=A.mousePos(this._el,a.touches[1]);var f=c.add(a).div(2);this._startVec=c.sub(a);this._startAround=this._map.transform.pointLocation(f);this._gestureIntent=void 0;this._inertia=[];A.addEventListener(d.window.document,"touchmove",this._onMove,{passive:!1});
A.addEventListener(d.window.document,"touchend",this._onEnd)}};Pa.prototype._getTouchEventData=function(a){var c=A.mousePos(this._el,a.touches[0]);a=A.mousePos(this._el,a.touches[1]);var d=c.sub(a);return{vec:d,center:c.add(a).div(2),scale:d.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*d.angleWith(this._startVec)/Math.PI}};Pa.prototype._onMove=function(a){if(2===a.touches.length){var c=this._getTouchEventData(a),f=c.vec,g=c.scale;c=c.bearing;this._gestureIntent||(g=this._rotationDisabled&&
1!==g||.15<Math.abs(1-g),10<Math.abs(c)?this._gestureIntent="rotate":g&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new d.Event(this._gestureIntent+"start",{originalEvent:a})),this._map.fire(new d.Event("movestart",{originalEvent:a})),this._startVec=f));this._lastTouchEvent=a;this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame));a.preventDefault()}};Pa.prototype._onTouchFrame=function(){this._frameId=null;var a=this._gestureIntent;if(a){var c=this._map.transform;
this._startScale||(this._startScale=c.scale,this._startBearing=c.bearing);var f=this._getTouchEventData(this._lastTouchEvent),g=f.center,h=f.bearing;f=f.scale;var n=c.pointLocation(g);n=c.locationPoint(n);"rotate"===a&&(c.bearing=this._startBearing+h);c.zoom=c.scaleZoom(this._startScale*f);c.setLocationAtPoint(this._startAround,n);this._map.fire(new d.Event(a,{originalEvent:this._lastTouchEvent}));this._map.fire(new d.Event("move",{originalEvent:this._lastTouchEvent}));this._drainInertiaBuffer();
this._inertia.push([d.browser.now(),f,g])}};Pa.prototype._onEnd=function(a){A.removeEventListener(d.window.document,"touchmove",this._onMove,{passive:!1});A.removeEventListener(d.window.document,"touchend",this._onEnd);var c=this._gestureIntent,f=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,c){this._map.fire(new d.Event(c+"end",{originalEvent:a}));
this._drainInertiaBuffer();var g=this._inertia;c=this._map;if(2>g.length)c.snapToNorth({},{originalEvent:a});else{var h=g[g.length-1],n=g[0];g=c.transform.scaleZoom(f*h[1]);f=c.transform.scaleZoom(f*n[1]);var m=g-f;n=(h[0]-n[0])/1E3;h=h[2];0!==n&&g!==f?(m=.15*m/n,2.5<Math.abs(m)&&(m=0<m?2.5:-2.5),f=1E3*Math.abs(m/(12*.15)),g+=m*f/2E3,0>g&&(g=0),c.easeTo({zoom:g,duration:f,easing:ag,around:this._aroundCenter?c.getCenter():c.unproject(h),noMoveStart:!0},{originalEvent:a})):c.snapToNorth({},{originalEvent:a})}}};
Pa.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,c=d.browser.now();2<a.length&&160<c-a[0][0];)a.shift()};var Ka={scrollZoom:sa,boxZoom:zb,dragRotate:Ma,dragPan:xa,keyboard:Id,doubleClickZoom:Zb,touchZoomRotate:Pa},ne=function(a){function c(c,g){a.call(this);this._zooming=this._moving=!1;this.transform=c;this._bearingSnap=g.bearingSnap;d.bindAll(["_renderFrameCallback"],this)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getCenter=
function(){return this.transform.center},c.prototype.setCenter=function(a,c){return this.jumpTo({center:a},c)},c.prototype.panBy=function(a,c,h){return a=d.Point.convert(a).mult(-1),this.panTo(this.transform.center,d.extend({offset:a},c),h)},c.prototype.panTo=function(a,c,h){return this.easeTo(d.extend({center:a},c),h)},c.prototype.getZoom=function(){return this.transform.zoom},c.prototype.setZoom=function(a,c){return this.jumpTo({zoom:a},c),this},c.prototype.zoomTo=function(a,c,h){return this.easeTo(d.extend({zoom:a},
c),h)},c.prototype.zoomIn=function(a,c){return this.zoomTo(this.getZoom()+1,a,c),this},c.prototype.zoomOut=function(a,c){return this.zoomTo(this.getZoom()-1,a,c),this},c.prototype.getBearing=function(){return this.transform.bearing},c.prototype.setBearing=function(a,c){return this.jumpTo({bearing:a},c),this},c.prototype.rotateTo=function(a,c,h){return this.easeTo(d.extend({bearing:a},c),h)},c.prototype.resetNorth=function(a,c){return this.rotateTo(0,d.extend({duration:1E3},a),c),this},c.prototype.snapToNorth=
function(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this},c.prototype.getPitch=function(){return this.transform.pitch},c.prototype.setPitch=function(a,c){return this.jumpTo({pitch:a},c),this},c.prototype.cameraForBounds=function(a,c){return a=d.LngLatBounds.convert(a),this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),0,c)},c.prototype._cameraForBoxAndBearing=function(a,c,h,n){if("number"==typeof(n=d.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,
0],maxZoom:this.transform.maxZoom},n)).padding){var f=n.padding;n.padding={top:f,bottom:f,right:f,left:f}}if(d.isEqual(Object.keys(n.padding).sort(function(a,c){return a<c?-1:a>c?1:0}),["bottom","left","right","top"])){f=this.transform;a=f.project(d.LngLat.convert(a));c=f.project(d.LngLat.convert(c));var g=a.rotate(-h*Math.PI/180),l=c.rotate(-h*Math.PI/180),m=new d.Point(Math.max(g.x,l.x),Math.max(g.y,l.y));g=new d.Point(Math.min(g.x,l.x),Math.min(g.y,l.y));g=m.sub(g);m=(f.width-n.padding.left-n.padding.right)/
g.x;g=(f.height-n.padding.top-n.padding.bottom)/g.y;if(!(0>g||0>m))return m=Math.min(f.scaleZoom(f.scale*Math.min(m,g)),n.maxZoom),g=d.Point.convert(n.offset),n=(new d.Point(g.x+(n.padding.left-n.padding.right)/2,g.y+(n.padding.top-n.padding.bottom)/2)).mult(f.scale/f.zoomScale(m)),{center:f.unproject(a.add(c).div(2).sub(n)),zoom:m,bearing:h};d.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else d.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},
c.prototype.fitBounds=function(a,c,d){return this._fitInternal(this.cameraForBounds(a,c),c,d)},c.prototype.fitScreenCoordinates=function(a,c,h,n,m){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(d.Point.convert(a)),this.transform.pointLocation(d.Point.convert(c)),h,n),n,m)},c.prototype._fitInternal=function(a,c,h){return a?(c=d.extend(a,c)).linear?this.easeTo(c,h):this.flyTo(c,h):this},c.prototype.jumpTo=function(a,c){this.stop();var f=this.transform,g=!1,h=!1,
m=!1;return"zoom"in a&&f.zoom!==+a.zoom&&(g=!0,f.zoom=+a.zoom),void 0!==a.center&&(f.center=d.LngLat.convert(a.center)),"bearing"in a&&f.bearing!==+a.bearing&&(h=!0,f.bearing=+a.bearing),"pitch"in a&&f.pitch!==+a.pitch&&(m=!0,f.pitch=+a.pitch),this.fire(new d.Event("movestart",c)).fire(new d.Event("move",c)),g&&this.fire(new d.Event("zoomstart",c)).fire(new d.Event("zoom",c)).fire(new d.Event("zoomend",c)),h&&this.fire(new d.Event("rotatestart",c)).fire(new d.Event("rotate",c)).fire(new d.Event("rotateend",
c)),m&&this.fire(new d.Event("pitchstart",c)).fire(new d.Event("pitch",c)).fire(new d.Event("pitchend",c)),this.fire(new d.Event("moveend",c))},c.prototype.easeTo=function(a,c){var f=this;this.stop();!1===(a=d.extend({offset:[0,0],duration:500,easing:d.ease},a)).animate&&(a.duration=0);var g=this.transform,h=this.getZoom(),m=this.getBearing(),p=this.getPitch(),q="zoom"in a?+a.zoom:h,r="bearing"in a?this._normalizeBearing(a.bearing,m):m,v="pitch"in a?+a.pitch:p,w=g.centerPoint.add(d.Point.convert(a.offset)),
x=g.pointLocation(w),y=d.LngLat.convert(a.center||x);this._normalizeCenter(y);var z,A,B=g.project(x),E=g.project(y).sub(B),F=g.zoomScale(q-h);return a.around&&(z=d.LngLat.convert(a.around),A=g.locationPoint(z)),this._zooming=q!==h,this._rotating=m!==r,this._pitching=v!==p,this._prepareEase(c,a.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(a){if(f._zooming&&(g.zoom=d.number(h,q,a)),f._rotating&&(g.bearing=d.number(m,r,a)),f._pitching&&(g.pitch=d.number(p,v,a)),z)g.setLocationAtPoint(z,
A);else{var l=g.zoomScale(g.zoom-h);a=g.unproject(B.add(E.mult(a*Math.pow(q>h?Math.min(2,F):Math.max(.5,F),1-a))).mult(l));g.setLocationAtPoint(g.renderWorldCopies?a.wrap():a,w)}f._fireMoveEvents(c)},function(){a.delayEndEvents?f._easeEndTimeoutID=setTimeout(function(){return f._afterEase(c)},a.delayEndEvents):f._afterEase(c)},a),this},c.prototype._prepareEase=function(a,c){this._moving=!0;c||this.fire(new d.Event("movestart",a));this._zooming&&this.fire(new d.Event("zoomstart",a));this._rotating&&
this.fire(new d.Event("rotatestart",a));this._pitching&&this.fire(new d.Event("pitchstart",a))},c.prototype._fireMoveEvents=function(a){this.fire(new d.Event("move",a));this._zooming&&this.fire(new d.Event("zoom",a));this._rotating&&this.fire(new d.Event("rotate",a));this._pitching&&this.fire(new d.Event("pitch",a))},c.prototype._afterEase=function(a){var c=this._zooming,f=this._rotating,h=this._pitching;this._pitching=this._rotating=this._zooming=this._moving=!1;c&&this.fire(new d.Event("zoomend",
a));f&&this.fire(new d.Event("rotateend",a));h&&this.fire(new d.Event("pitchend",a));this.fire(new d.Event("moveend",a))},c.prototype.flyTo=function(a,c){function f(a){a=(I*I-H*H+(a?-1:1)*M*M*L*L)/(2*(a?I:H)*M*L);return Math.log(Math.sqrt(a*a+1)-a)}function g(a){return(Math.exp(a)+Math.exp(-a))/2}var h=this;this.stop();a=d.extend({offset:[0,0],speed:1.2,curve:1.42,easing:d.ease},a);var m=this.transform,p=this.getZoom(),q=this.getBearing(),r=this.getPitch(),v="zoom"in a?d.clamp(+a.zoom,m.minZoom,m.maxZoom):
p,w="bearing"in a?this._normalizeBearing(a.bearing,q):q,x="pitch"in a?+a.pitch:r,y=m.zoomScale(v-p),z=m.centerPoint.add(d.Point.convert(a.offset)),A=m.pointLocation(z),B=d.LngLat.convert(a.center||A);this._normalizeCenter(B);var E=m.project(A),F=m.project(B).sub(E),G=a.curve,H=Math.max(m.width,m.height),I=H/y,L=F.mag();"minZoom"in a&&(y=d.clamp(Math.min(a.minZoom,p,v),m.minZoom,m.maxZoom),y=H/m.zoomScale(y-p),G=Math.sqrt(y/L*2));var M=G*G,O=f(0),P=function(a){return g(O)/g(O+G*a)},S=function(a){var c=
g(O);a=d=O+G*a;return H*((c*((Math.exp(a)-Math.exp(-a))/2/g(d))-(Math.exp(O)-Math.exp(-O))/2)/M)/L;var d},R=(f(1)-O)/G;if(1E-6>Math.abs(L)||!isFinite(R)){if(1E-6>Math.abs(H-I))return this.easeTo(a,c);var V=I<H?-1:1;R=Math.abs(Math.log(I/H))/G;S=function(){return 0};P=function(a){return Math.exp(V*G*a)}}a.duration="duration"in a?+a.duration:1E3*R/("screenSpeed"in a?+a.screenSpeed/G:+a.speed);return a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=q!==w,this._pitching=
x!==r,this._prepareEase(c,!1),this._ease(function(a){var f=a*R,g=1/P(f);m.zoom=1===a?v:p+m.scaleZoom(g);h._rotating&&(m.bearing=d.number(q,w,a));h._pitching&&(m.pitch=d.number(r,x,a));a=1===a?B:m.unproject(E.add(F.mult(S(f))).mult(g));m.setLocationAtPoint(m.renderWorldCopies?a.wrap():a,z);h._fireMoveEvents(c)},function(){return h._afterEase(c)},a),this},c.prototype.isEasing=function(){return!!this._easeFrameId},c.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),
delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var a=this._onEaseEnd;delete this._onEaseEnd;a.call(this)}return this},c.prototype._ease=function(a,c,h){!1===h.animate||0===h.duration?(a(1),c()):(this._easeStart=d.browser.now(),this._easeOptions=h,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},c.prototype._renderFrameCallback=function(){var a=Math.min((d.browser.now()-this._easeStart)/this._easeOptions.duration,1);
this._onEaseFrame(this._easeOptions.easing(a));1>a?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},c.prototype._normalizeBearing=function(a,c){a=d.wrap(a,-180,180);var f=Math.abs(a-c);return Math.abs(a-360-c)<f&&(a-=360),Math.abs(a+360-c)<f&&(a+=360),a},c.prototype._normalizeCenter=function(a){var c=this.transform;c.renderWorldCopies&&!c.lngRange&&(c=a.lng-c.center.lng,a.lng+=180<c?-360:-180>c?360:0)},c}(d.Evented),qb=function(a){void 0===a&&(a={});this.options=
a;d.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};qb.prototype.getDefaultPosition=function(){return"bottom-right"};qb.prototype.onAdd=function(a){var c=this.options&&this.options.compact;return this._map=a,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=A.create("div","mapboxgl-ctrl-attrib-inner",this._container),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",
this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===c&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};qb.prototype.onRemove=function(){A.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._map=void 0};qb.prototype._updateEditLink=function(){var a=
this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));var c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:d.config.ACCESS_TOKEN}];if(a){var f=c.reduce(function(a,d,f){return d.value&&(a+=d.key+"\x3d"+d.value+(f<c.length-1?"\x26":"")),a},"?");a.href="https://www.mapbox.com/feedback/"+f+(this._map._hash?this._map._hash.getHashString(!0):"")}};qb.prototype._updateData=function(a){!a||"metadata"!==a.sourceDataType&&"style"!==
a.dataType||(this._updateAttributions(),this._updateEditLink())};qb.prototype._updateAttributions=function(){if(this._map.style){var a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(function(a){return"string"!=typeof a?"":a})):"string"==typeof this.options.customAttribution&&a.push(this.options.customAttribution)),this._map.style.stylesheet){var c=this._map.style.stylesheet;this.styleOwner=c.owner;this.styleId=c.id}c=
this._map.style.sourceCaches;for(var d in c){var g=c[d];g.used&&(g=g.getSource(),g.attribution&&0>a.indexOf(g.attribution)&&a.push(g.attribution))}a.sort(function(a,c){return a.length-c.length});(a=a.filter(function(c,d){for(d+=1;d<a.length;d++)if(0<=a[d].indexOf(c))return!1;return!0})).length?(this._innerContainer.innerHTML=a.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty");this._editLink=null}};qb.prototype._updateCompact=
function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var $b=function(){d.bindAll(["_updateLogo"],this);d.bindAll(["_updateCompact"],this)};$b.prototype.onAdd=function(a){this._map=a;this._container=A.create("div","mapboxgl-ctrl");a=A.create("a","mapboxgl-ctrl-logo");return a.target="_blank",a.href="https://www.mapbox.com/",a.setAttribute("aria-label","Mapbox logo"),a.setAttribute("rel","noopener"),
this._container.appendChild(a),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container};$b.prototype.onRemove=function(){A.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};$b.prototype.getDefaultPosition=function(){return"bottom-left"};$b.prototype._updateLogo=function(a){a&&"metadata"!==a.sourceDataType||(this._container.style.display=
this._logoRequired()?"block":"none")};$b.prototype._logoRequired=function(){if(this._map.style){var a=this._map.style.sourceCaches,c;for(c in a)if(a[c].getSource().mapbox_logo)return!0;return!1}};$b.prototype._updateCompact=function(){var a=this._container.children;a.length&&(a=a[0],250>this._map.getCanvasContainer().offsetWidth?a.classList.add("mapboxgl-compact"):a.classList.remove("mapboxgl-compact"))};var Jd=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};Jd.prototype.add=
function(a){var c=++this._id;return this._queue.push({callback:a,id:c,cancelled:!1}),c};Jd.prototype.remove=function(a){var c=this._currentlyRunning,d=0;for(c=c?this._queue.concat(c):this._queue;d<c.length;d+=1){var g=c[d];if(g.id===a)return void(g.cancelled=!0)}};Jd.prototype.run=function(){var a=this._currentlyRunning=this._queue;this._queue=[];for(var c=0;c<a.length;c+=1){var d=a[c];if(!d.cancelled&&(d.callback(),this._cleared))break}this._currentlyRunning=this._cleared=!1};Jd.prototype.clear=
function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var bg=d.window.HTMLImageElement,cg=d.window.HTMLElement,Kf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,
transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Ic=function(a){function c(c){var f=this;if(null!=(c=d.extend({},Kf,c)).minZoom&&null!=c.maxZoom&&c.minZoom>c.maxZoom)throw Error("maxZoom must be greater than minZoom");var g=new ca(c.minZoom,c.maxZoom,c.renderWorldCopies);a.call(this,g,c);this._interactive=c.interactive;this._maxTileCacheSize=c.maxTileCacheSize;this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat;this._preserveDrawingBuffer=c.preserveDrawingBuffer;this._trackResize=
c.trackResize;this._bearingSnap=c.bearingSnap;this._refreshExpiredTiles=c.refreshExpiredTiles;this._fadeDuration=c.fadeDuration;this._crossSourceCollisions=c.crossSourceCollisions;this._crossFadingFactor=1;this._collectResourceTiming=c.collectResourceTiming;this._renderTaskQueue=new Jd;this._controls=[];this._mapId=d.uniqueId();var h=c.transformRequest;if(this._transformRequest=h?function(a,c){return h(a,c)||{url:a}}:function(a){return{url:a}},"string"==typeof c.container){if(this._container=d.window.document.getElementById(c.container),
!this._container)throw Error("Container '"+c.container+"' not found.");}else{if(!(c.container instanceof cg))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),d.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return f._update(!1)});
this.on("moveend",function(){return f._update(!1)});this.on("zoom",function(){return f._update(!0)});void 0!==d.window&&(d.window.addEventListener("online",this._onWindowOnline,!1),d.window.addEventListener("resize",this._onWindowResize,!1));(function(a,c){var d=a.getCanvasContainer(),f=null,g=!1,h=null,l;for(l in Ka)a[l]=new Ka[l](a,c),c.interactive&&c[l]&&a[l].enable(c[l]);A.addEventListener(d,"mouseout",function(c){a.fire(new bb("mouseout",a,c))});A.addEventListener(d,"mousedown",function(f){g=
!0;h=A.mousePos(d,f);var l=new bb("mousedown",a,f);a.fire(l);l.defaultPrevented||(c.interactive&&!a.doubleClickZoom.isActive()&&a.stop(),a.boxZoom.onMouseDown(f),a.boxZoom.isActive()||a.dragPan.isActive()||a.dragRotate.onMouseDown(f),a.boxZoom.isActive()||a.dragRotate.isActive()||a.dragPan.onMouseDown(f))});A.addEventListener(d,"mouseup",function(c){var d=a.dragRotate.isActive();f&&!d&&a.fire(new bb("contextmenu",a,f));f=null;g=!1;a.fire(new bb("mouseup",a,c))});A.addEventListener(d,"mousemove",function(c){if(!a.dragPan.isActive()&&
!a.dragRotate.isActive()){for(var f=c.target;f&&f!==d;)f=f.parentNode;f===d&&a.fire(new bb("mousemove",a,c))}});A.addEventListener(d,"mouseover",function(c){for(var f=c.target;f&&f!==d;)f=f.parentNode;f===d&&a.fire(new bb("mouseover",a,c))});A.addEventListener(d,"touchstart",function(d){var f=new Gd("touchstart",a,d);a.fire(f);f.defaultPrevented||(c.interactive&&a.stop(),a.boxZoom.isActive()||a.dragRotate.isActive()||a.dragPan.onTouchStart(d),a.touchZoomRotate.onStart(d),a.doubleClickZoom.onTouchStart(f))},
{passive:!1});A.addEventListener(d,"touchmove",function(c){a.fire(new Gd("touchmove",a,c))},{passive:!1});A.addEventListener(d,"touchend",function(c){a.fire(new Gd("touchend",a,c))});A.addEventListener(d,"touchcancel",function(c){a.fire(new Gd("touchcancel",a,c))});A.addEventListener(d,"click",function(f){var g=A.mousePos(d,f);(g.equals(h)||g.dist(h)<c.clickTolerance)&&a.fire(new bb("click",a,f))});A.addEventListener(d,"dblclick",function(c){c=new bb("dblclick",a,c);a.fire(c);c.defaultPrevented||
a.doubleClickZoom.onDblClick(c)});A.addEventListener(d,"contextmenu",function(c){var d=a.dragRotate.isActive();g||d?g&&(f=c):a.fire(new bb("contextmenu",a,c));(a.dragRotate.isEnabled()||a.listens("contextmenu"))&&c.preventDefault()});A.addEventListener(d,"wheel",function(d){c.interactive&&a.stop();var f=new Xe("wheel",a,d);a.fire(f);f.defaultPrevented||a.scrollZoom.onWheel(d)},{passive:!1})})(this,c);(this._hash=c.hash&&(new Hc).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:c.center,
zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,{duration:0})));this.resize();c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily});c.attributionControl&&this.addControl(new qb({customAttribution:c.customAttribution}));this.addControl(new $b,c.logoPosition);this.on("style.load",function(){f.transform.unmodified&&f.jumpTo(f.style.stylesheet)});this.on("data",function(a){f._update("style"===a.dataType);f.fire(new d.Event(a.dataType+
"data",a))});this.on("dataloading",function(a){f.fire(new d.Event(a.dataType+"dataloading",a))})}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var f={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return c.prototype._getMapId=function(){return this._mapId},c.prototype.addControl=function(a,c){if(void 0===c&&a.getDefaultPosition&&(c=a.getDefaultPosition()),
void 0===c&&(c="top-right"),!a||!a.onAdd)return this.fire(new d.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var f=a.onAdd(this);this._controls.push(a);a=this._controlPositions[c];return-1!==c.indexOf("bottom")?a.insertBefore(f,a.firstChild):a.appendChild(f),this},c.prototype.removeControl=function(a){if(!a||!a.onRemove)return this.fire(new d.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));
var c=this._controls.indexOf(a);return-1<c&&this._controls.splice(c,1),a.onRemove(this),this},c.prototype.resize=function(a){var c=this._containerDimensions(),f=c[0];c=c[1];return this._resizeCanvas(f,c),this.transform.resize(f,c),this.painter.resize(f,c),this.fire(new d.Event("movestart",a)).fire(new d.Event("move",a)).fire(new d.Event("resize",a)).fire(new d.Event("moveend",a)),this},c.prototype.getBounds=function(){return this.transform.getBounds()},c.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},
c.prototype.setMaxBounds=function(a){return this.transform.setMaxBounds(d.LngLatBounds.convert(a)),this._update()},c.prototype.setMinZoom=function(a){if(0<=(a=null==a?0:a)&&a<=this.transform.maxZoom)return this.transform.minZoom=a,this._update(),this.getZoom()<a&&this.setZoom(a),this;throw Error("minZoom must be between 0 and the current maxZoom, inclusive");},c.prototype.getMinZoom=function(){return this.transform.minZoom},c.prototype.setMaxZoom=function(a){if((a=null==a?22:a)>=this.transform.minZoom)return this.transform.maxZoom=
a,this._update(),this.getZoom()>a&&this.setZoom(a),this;throw Error("maxZoom must be greater than the current minZoom");},c.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},c.prototype.setRenderWorldCopies=function(a){return this.transform.renderWorldCopies=a,this._update()},c.prototype.getMaxZoom=function(){return this.transform.maxZoom},c.prototype.project=function(a){return this.transform.locationPoint(d.LngLat.convert(a))},c.prototype.unproject=function(a){return this.transform.pointLocation(d.Point.convert(a))},
c.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},c.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},c.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},c.prototype.on=function(c,d,f){var g,h=this;if(void 0===f)return a.prototype.on.call(this,c,d);var l=function(){if("mouseenter"===c||"mouseover"===c){var a=!1;return{layer:d,listener:f,delegates:{mousemove:function(g){var l=
h.getLayer(d)?h.queryRenderedFeatures(g.point,{layers:[d]}):[];l.length?a||(a=!0,f.call(h,new bb(c,h,g.originalEvent,{features:l}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===c||"mouseout"===c){var l=!1;return{layer:d,listener:f,delegates:{mousemove:function(a){(h.getLayer(d)?h.queryRenderedFeatures(a.point,{layers:[d]}):[]).length?l=!0:l&&(l=!1,f.call(h,new bb(c,h,a.originalEvent)))},mouseout:function(a){l&&(l=!1,f.call(h,new bb(c,h,a.originalEvent)))}}}}return{layer:d,listener:f,delegates:(g=
{},g[c]=function(a){var c=h.getLayer(d)?h.queryRenderedFeatures(a.point,{layers:[d]}):[];c.length&&(a.features=c,f.call(h,a),delete a.features)},g)}}(),m;for(m in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(l),l.delegates)h.on(m,l.delegates[m]);return this},c.prototype.off=function(c,d,f){if(void 0===f)return a.prototype.off.call(this,c,d);if(this._delegatedListeners&&this._delegatedListeners[c]){c=
this._delegatedListeners[c];for(var g=0;g<c.length;g++){var h=c[g];if(h.layer===d&&h.listener===f){for(var l in h.delegates)this.off(l,h.delegates[l]);return c.splice(g,1),this}}}return this},c.prototype.queryRenderedFeatures=function(a,c){if(!this.style)return[];if(void 0!==c||void 0===a||a instanceof d.Point||Array.isArray(a)||(c=a,a=void 0),c=c||{},(a=a||[[0,0],[this.transform.width,this.transform.height]])instanceof d.Point||"number"==typeof a[0])var f=[d.Point.convert(a)];else f=d.Point.convert(a[0]),
a=d.Point.convert(a[1]),f=[f,new d.Point(a.x,f.y),a,new d.Point(f.x,a.y),f];return this.style.queryRenderedFeatures(f,c,this.transform)},c.prototype.querySourceFeatures=function(a,c){return this.style.querySourceFeatures(a,c)},c.prototype.setStyle=function(a,c){return(!c||!1!==c.diff&&!c.localIdeographFontFamily)&&this.style&&a?(this._diffStyle(a,c),this):this._updateStyle(a,c)},c.prototype._updateStyle=function(a,c){return this.style&&(this.style.setEventedParent(null),this.style._remove()),a?(this.style=
new ed(this,c||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof a?this.style.loadURL(a):this.style.loadJSON(a),this):(delete this.style,this)},c.prototype._diffStyle=function(a,c){var f=this;"string"==typeof a?(a=d.normalizeStyleURL(a),a=this._transformRequest(a,d.ResourceType.Style),d.getJSON(a,function(a,g){a?f.fire(new d.ErrorEvent(a)):g&&f._updateDiff(g,c)})):"object"==typeof a&&this._updateDiff(a,c)},c.prototype._updateDiff=function(a,c){try{this.style.setState(a)&&this._update(!0)}catch(n){d.warnOnce("Unable to perform style diff: "+
(n.message||n.error||n)+".  Rebuilding the style from scratch."),this._updateStyle(a,c)}},c.prototype.getStyle=function(){if(this.style)return this.style.serialize()},c.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():d.warnOnce("There is no style added to the map.")},c.prototype.addSource=function(a,c){return this.style.addSource(a,c),this._update(!0)},c.prototype.isSourceLoaded=function(a){var c=this.style&&this.style.sourceCaches[a];if(void 0!==c)return c.loaded();this.fire(new d.ErrorEvent(Error("There is no source with ID '"+
a+"'")))},c.prototype.areTilesLoaded=function(){var a=this.style&&this.style.sourceCaches,c;for(c in a){var d=a[c]._tiles,f;for(f in d){var h=d[f];if("loaded"!==h.state&&"errored"!==h.state)return!1}}return!0},c.prototype.addSourceType=function(a,c,d){return this.style.addSourceType(a,c,d)},c.prototype.removeSource=function(a){return this.style.removeSource(a),this._update(!0)},c.prototype.getSource=function(a){return this.style.getSource(a)},c.prototype.addImage=function(a,c,f){void 0===f&&(f={});
var g=f.pixelRatio;void 0===g&&(g=1);f=f.sdf;if(void 0===f&&(f=!1),c instanceof bg)c=d.browser.getImageData(c),this.style.addImage(a,{data:new d.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:g,sdf:f});else{if(void 0===c.width||void 0===c.height)return this.fire(new d.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(a,
{data:new d.RGBAImage({width:c.width,height:c.height},new Uint8Array(c.data)),pixelRatio:g,sdf:f})}},c.prototype.hasImage=function(a){return a?!!this.style.getImage(a):(this.fire(new d.ErrorEvent(Error("Missing required image id"))),!1)},c.prototype.removeImage=function(a){this.style.removeImage(a)},c.prototype.loadImage=function(a,c){d.getImage(this._transformRequest(a,d.ResourceType.Image),c)},c.prototype.listImages=function(){return this.style.listImages()},c.prototype.addLayer=function(a,c){return this.style.addLayer(a,
c),this._update(!0)},c.prototype.moveLayer=function(a,c){return this.style.moveLayer(a,c),this._update(!0)},c.prototype.removeLayer=function(a){return this.style.removeLayer(a),this._update(!0)},c.prototype.getLayer=function(a){return this.style.getLayer(a)},c.prototype.setFilter=function(a,c,d){return void 0===d&&(d={}),this.style.setFilter(a,c,d),this._update(!0)},c.prototype.setLayerZoomRange=function(a,c,d){return this.style.setLayerZoomRange(a,c,d),this._update(!0)},c.prototype.getFilter=function(a){return this.style.getFilter(a)},
c.prototype.setPaintProperty=function(a,c,d,f){return void 0===f&&(f={}),this.style.setPaintProperty(a,c,d,f),this._update(!0)},c.prototype.getPaintProperty=function(a,c){return this.style.getPaintProperty(a,c)},c.prototype.setLayoutProperty=function(a,c,d,f){return void 0===f&&(f={}),this.style.setLayoutProperty(a,c,d,f),this._update(!0)},c.prototype.getLayoutProperty=function(a,c){return this.style.getLayoutProperty(a,c)},c.prototype.setLight=function(a,c){return void 0===c&&(c={}),this.style.setLight(a,
c),this._update(!0)},c.prototype.getLight=function(){return this.style.getLight()},c.prototype.setFeatureState=function(a,c){return this.style.setFeatureState(a,c),this._update()},c.prototype.getFeatureState=function(a){return this.style.getFeatureState(a)},c.prototype.getContainer=function(){return this._container},c.prototype.getCanvasContainer=function(){return this._canvasContainer},c.prototype.getCanvas=function(){return this._canvas},c.prototype._containerDimensions=function(){var a=0,c=0;return this._container&&
(a=this._container.clientWidth||400,c=this._container.clientHeight||300),[a,c]},c.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==d.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&d.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},c.prototype._setupContainer=function(){var a=
this._container;a.classList.add("mapboxgl-map");(this._missingCSSCanary=A.create("div","mapboxgl-canary",a)).style.visibility="hidden";this._detectMissingCSS();var c=this._canvasContainer=A.create("div","mapboxgl-canvas-container",a);this._interactive&&c.classList.add("mapboxgl-interactive");this._canvas=A.create("canvas","mapboxgl-canvas",c);this._canvas.style.position="absolute";this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",
this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");c=this._containerDimensions();this._resizeCanvas(c[0],c[1]);var d=this._controlContainer=A.create("div","mapboxgl-control-container",a),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(a){f[a]=A.create("div","mapboxgl-ctrl-"+a,d)})},c.prototype._resizeCanvas=function(a,c){var f=d.window.devicePixelRatio||1;this._canvas.width=f*a;this._canvas.height=
f*c;this._canvas.style.width=a+"px";this._canvas.style.height=c+"px"},c.prototype._setupPainter=function(){var a=d.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},Tc.webGLContextAttributes);(a=this._canvas.getContext("webgl",a)||this._canvas.getContext("experimental-webgl",a))?(this.painter=new La(a,this.transform),d.webpSupported.testSupport(a)):this.fire(new d.ErrorEvent(Error("Failed to initialize WebGL")))},c.prototype._contextLost=
function(a){a.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new d.Event("webglcontextlost",{originalEvent:a}))},c.prototype._contextRestored=function(a){this._setupPainter();this.resize();this._update();this.fire(new d.Event("webglcontextrestored",{originalEvent:a}))},c.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},c.prototype._update=function(a){return this.style?(this._styleDirty=this._styleDirty||a,
this._sourcesDirty=!0,this.triggerRepaint(),this):this},c.prototype._requestRenderFrame=function(a){return this._update(),this._renderTaskQueue.add(a)},c.prototype._cancelRenderFrame=function(a){this._renderTaskQueue.remove(a)},c.prototype._render=function(){this.painter.context.setDirty();this.painter.setBaseState();this._renderTaskQueue.run();var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var c=this.transform.zoom,f=d.browser.now();this.style.zoomHistory.update(c,f);c=new d.EvaluationParameters(c,
{now:f,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});f=c.crossFadingFactor();1===f&&f===this._crossFadingFactor||(a=!0,this._crossFadingFactor=f);this.style.update(c)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,
{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new d.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new d.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||
this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new d.Event("idle")),this},c.prototype.remove=function(){this._hash&&this._hash.remove();for(var a=0,c=this._controls;a<c.length;a+=1)c[a].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.setStyle(null);void 0!==d.window&&(d.window.removeEventListener("resize",this._onWindowResize,!1),d.window.removeEventListener("online",this._onWindowOnline,
!1));(a=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&a.loseContext();Wb(this._canvasContainer);Wb(this._controlContainer);Wb(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this.fire(new d.Event("remove"))},c.prototype.triggerRepaint=function(){var a=this;this.style&&!this._frame&&(this._frame=d.browser.frame(function(){a._frame=null;a._render()}))},c.prototype._onWindowOnline=function(){this._update()},c.prototype._onWindowResize=function(){this._trackResize&&
this.resize()._update()},f.showTileBoundaries.get=function(){return!!this._showTileBoundaries},f.showTileBoundaries.set=function(a){this._showTileBoundaries!==a&&(this._showTileBoundaries=a,this._update())},f.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},f.showCollisionBoxes.set=function(a){this._showCollisionBoxes!==a&&(this._showCollisionBoxes=a,a?this.style._generateCollisionBoxes():this._update())},f.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},
f.showOverdrawInspector.set=function(a){this._showOverdrawInspector!==a&&(this._showOverdrawInspector=a,this._update())},f.repaint.get=function(){return!!this._repaint},f.repaint.set=function(a){this._repaint=a;this._update()},f.vertices.get=function(){return!!this._vertices},f.vertices.set=function(a){this._vertices=a;this._update()},Object.defineProperties(c.prototype,f),c}(ne),eg={showCompass:!0,showZoom:!0},jd=function(a){var c=this;this.options=d.extend({},eg,a);this._container=A.create("div",
"mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(a){return a.preventDefault()});this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return c._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return c._map.zoomOut()}));this.options.showCompass&&(d.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass",
"Reset bearing to north",function(){return c._map.resetNorth()}),this._compassArrow=A.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};jd.prototype._rotateCompassArrow=function(){this._compassArrow.style.transform="rotate("+180/Math.PI*this._map.transform.angle+"deg)"};jd.prototype.onAdd=function(a){return this._map=a,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ma(a,{button:"left",element:this._compass}),A.addEventListener(this._compass,
"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container};jd.prototype.onRemove=function(){A.remove(this._container);this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),A.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler);delete this._map};jd.prototype._createButton=function(a,c,d){a=A.create("button",a,this._container);return a.type="button",a.title=c,a.setAttribute("aria-label",c),a.addEventListener("click",
d),a};var Ee={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Jc,yf=function(a){function c(c,g){if(a.call(this),(c instanceof d.window.HTMLElement||g)&&(c=d.extend({element:c},g)),d.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=c&&
c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._draggable=c&&c.draggable||!1,this._state="inactive",c&&c.element)this._element=c.element,this._offset=d.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0;this._element=A.create("div");g=A.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"height","41px");g.setAttributeNS(null,"width","27px");g.setAttributeNS(null,"viewBox","0 0 27 41");var f=A.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"stroke",
"none");f.setAttributeNS(null,"stroke-width","1");f.setAttributeNS(null,"fill","none");f.setAttributeNS(null,"fill-rule","evenodd");f=A.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill-rule","nonzero");var h=A.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"transform","translate(3.0, 29.0)");h.setAttributeNS(null,"fill","#000000");for(var m=0,p=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",
ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];m<p.length;m+=1){var q=p[m],r=A.createNS("http://www.w3.org/2000/svg","ellipse");r.setAttributeNS(null,"opacity","0.04");r.setAttributeNS(null,"cx","10.5");r.setAttributeNS(null,"cy","5.80029008");r.setAttributeNS(null,"rx",q.rx);r.setAttributeNS(null,"ry",q.ry);h.appendChild(r)}m=A.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"fill",this._color);p=A.createNS("http://www.w3.org/2000/svg",
"path");p.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");m.appendChild(p);p=A.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25");p.setAttributeNS(null,"fill","#000000");q=A.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
p.appendChild(q);q=A.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(6.0, 7.0)");q.setAttributeNS(null,"fill","#FFFFFF");r=A.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=A.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000");v.setAttributeNS(null,"opacity","0.25");v.setAttributeNS(null,"cx","5.5");v.setAttributeNS(null,"cy","5.5");v.setAttributeNS(null,"r","5.4999962");
var w=A.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#FFFFFF");w.setAttributeNS(null,"cx","5.5");w.setAttributeNS(null,"cy","5.5");w.setAttributeNS(null,"r","5.4999962");r.appendChild(v);r.appendChild(w);f.appendChild(h);f.appendChild(m);f.appendChild(p);f.appendChild(q);f.appendChild(r);g.appendChild(f);this._element.appendChild(g);this._offset=d.Point.convert(c&&c.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");this._popup=null}return a&&(c.__proto__=
a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},c.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",
this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=function(a){return this._lngLat=d.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},c.prototype.getElement=function(){return this._element},c.prototype.setPopup=
function(a){if(this._popup&&(this._popup.remove(),this._popup=null),a){if(!("offset"in a.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a;this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},c.prototype._onMapClick=function(a){a=a.originalEvent.target;var c=this._element;
this._popup&&(a===c||c.contains(a))&&this.togglePopup()},c.prototype.getPopup=function(){return this._popup},c.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},c.prototype._update=function(a){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Bc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),a&&"moveend"!==a.type||(this._pos=this._pos.round()),A.setTransform(this._element,
Ee[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),Sc(this._element,this._anchor,"marker"))},c.prototype.getOffset=function(){return this._offset},c.prototype.setOffset=function(a){return this._offset=d.Point.convert(a),this._update(),this},c.prototype._onMove=function(a){this._pos=a.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new d.Event("dragstart")));
this.fire(new d.Event("drag"))},c.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===this._state&&this.fire(new d.Event("dragend"));this._state="inactive"},c.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",
this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},c.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},c.prototype.isDraggable=function(){return this._draggable},c}(d.Evented),zf={positionOptions:{enableHighAccuracy:!1,
maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Af=function(a){function c(c){a.call(this);this.options=d.extend({},zf,c);d.bindAll("_onSuccess _onError _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(a){var c;return this._map=a,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,void 0!==
Jc?c(Jc):void 0!==d.window.navigator.permissions?d.window.navigator.permissions.query({name:"geolocation"}).then(function(a){Jc="denied"!==a.state;c(Jc)}):(Jc=!!d.window.navigator.geolocation,c(Jc)),this._container},c.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(d.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();A.remove(this._container);
this._map=void 0},c.prototype._onSuccess=function(a){if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState=
"BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(a);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(a);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");
this.fire(new d.Event("geolocate",a));this._finish()},c.prototype._updateCamera=function(a){var c=new d.LngLat(a.coords.longitude,a.coords.latitude);this._map.fitBounds(c.toBounds(a.coords.accuracy),this.options.fitBoundsOptions,{geolocateSource:!0})},c.prototype._updateMarker=function(a){a?this._userLocationDotMarker.setLngLat([a.coords.longitude,a.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},c.prototype._onError=function(a){if(this.options.trackUserLocation)if(1===a.code)this._watchState=
"OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case "WAITING_ACTIVE":this._watchState=
"ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new d.Event("error",a));this._finish()},c.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},
c.prototype._setupUI=function(a){var c=this;!1!==a?(this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this._geolocateButton=A.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=
A.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new yf(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(a){a.geolocateSource||"ACTIVE_LOCK"!==c._watchState||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),
c.fire(new d.Event("trackuserlocationend")))})):d.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},c.prototype.trigger=function(){if(!this._setup)return d.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new d.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":this._watchState=
"OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new d.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),
this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new d.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed",
"true"),this._geolocationWatchID=d.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else d.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},c.prototype._clearWatch=function(){d.window.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},c}(d.Evented),Bf={maxWidth:100,unit:"metric"},wc=function(a){this.options=d.extend({},Bf,a);d.bindAll(["_onMove","setUnit"],this)};wc.prototype.getDefaultPosition=function(){return"bottom-left"};wc.prototype._onMove=function(){Ya(this._map,this._container,this.options)};wc.prototype.onAdd=function(a){return this._map=a,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",
a.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};wc.prototype.onRemove=function(){A.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};wc.prototype.setUnit=function(a){this.options.unit=a;Ya(this._map,this._container,this.options)};var ac=function(a){this._fullscreen=!1;a&&a.container&&(a.container instanceof d.window.HTMLElement?this._container=a.container:d.warnOnce("Full screen control 'container' must be a DOM element."));d.bindAll(["_onClickFullscreen",
"_changeIcon"],this);"onfullscreenchange"in d.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in d.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in d.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in d.window.document&&(this._fullscreenchange="MSFullscreenChange");this._className="mapboxgl-ctrl"};ac.prototype.onAdd=function(a){return this._map=a,this._container||(this._container=this._map.getContainer()),
this._controlContainer=A.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",d.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};ac.prototype.onRemove=function(){A.remove(this._controlContainer);this._map=null;d.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};ac.prototype._checkFullscreenSupport=function(){return!!(d.window.document.fullscreenEnabled||
d.window.document.mozFullScreenEnabled||d.window.document.msFullscreenEnabled||d.window.document.webkitFullscreenEnabled)};ac.prototype._setupUI=function(){var a=this._fullscreenButton=A.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);a.setAttribute("aria-label","Toggle fullscreen");a.type="button";this._fullscreenButton.addEventListener("click",this._onClickFullscreen);d.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};ac.prototype._isFullscreen=
function(){return this._fullscreen};ac.prototype._changeIcon=function(){(d.window.document.fullscreenElement||d.window.document.mozFullScreenElement||d.window.document.webkitFullscreenElement||d.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))};ac.prototype._onClickFullscreen=function(){this._isFullscreen()?
d.window.document.exitFullscreen?d.window.document.exitFullscreen():d.window.document.mozCancelFullScreen?d.window.document.mozCancelFullScreen():d.window.document.msExitFullscreen?d.window.document.msExitFullscreen():d.window.document.webkitCancelFullScreen&&d.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():
this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var dg={closeButton:!0,closeOnClick:!0,className:""},Fe=function(a){function c(c){a.call(this);this.options=d.extend(Object.create(dg),c);d.bindAll(["_update","_onClickClose"],this)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.addTo=function(a){return this._map=a,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),
this._update(),this.fire(new d.Event("open")),this},c.prototype.isOpen=function(){return!!this._map},c.prototype.remove=function(){return this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new d.Event("close")),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=function(a){return this._lngLat=d.LngLat.convert(a),
this._pos=null,this._update(),this},c.prototype.setText=function(a){return this.setDOMContent(d.window.document.createTextNode(a))},c.prototype.setHTML=function(a){var c=d.window.document.createDocumentFragment(),f=d.window.document.createElement("body");for(f.innerHTML=a;a=f.firstChild;)c.appendChild(a);return this.setDOMContent(c)},c.prototype.setDOMContent=function(a){return this._createContent(),this._content.appendChild(a),this._update(),this},c.prototype._createContent=function(){this._content&&
A.remove(this._content);this._content=A.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=A.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",this._onClickClose))},c.prototype._update=function(){var a=this;if(this._map&&this._lngLat&&this._content){this._container||
(this._container=A.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=A.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(c){return a._container.classList.add(c)}));this._map.transform.renderWorldCopies&&(this._lngLat=Bc(this._lngLat,this._pos,this._map.transform));var c=this._pos=this._map.project(this._lngLat),h=this.options.anchor,m=function K(a){if(a){if("number"==
typeof a){var c=Math.round(Math.sqrt(.5*Math.pow(a,2)));return{center:new d.Point(0,0),top:new d.Point(0,a),"top-left":new d.Point(c,c),"top-right":new d.Point(-c,c),bottom:new d.Point(0,-a),"bottom-left":new d.Point(c,-c),"bottom-right":new d.Point(-c,-c),left:new d.Point(a,0),right:new d.Point(-a,0)}}return a instanceof d.Point||Array.isArray(a)?(a=d.Point.convert(a),{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}):{center:d.Point.convert(a.center||
[0,0]),top:d.Point.convert(a.top||[0,0]),"top-left":d.Point.convert(a["top-left"]||[0,0]),"top-right":d.Point.convert(a["top-right"]||[0,0]),bottom:d.Point.convert(a.bottom||[0,0]),"bottom-left":d.Point.convert(a["bottom-left"]||[0,0]),"bottom-right":d.Point.convert(a["bottom-right"]||[0,0]),left:d.Point.convert(a.left||[0,0]),right:d.Point.convert(a.right||[0,0])}}return K(new d.Point(0,0))}(this.options.offset);if(!h){h=this._container.offsetWidth;var p=this._container.offsetHeight;p=c.y+m.bottom.y<
p?["top"]:c.y>this._map.transform.height-p?["bottom"]:[];c.x<h/2?p.push("left"):c.x>this._map.transform.width-h/2&&p.push("right");h=0===p.length?"bottom":p.join("-")}c=c.add(m[h]).round();A.setTransform(this._container,Ee[h]+" translate("+c.x+"px,"+c.y+"px)");Sc(this._container,h,"popup")}},c.prototype._onClickClose=function(){this.remove()},c}(d.Evented),Kd={version:d.version,supported:Tc,setRTLTextPlugin:d.setRTLTextPlugin,Map:Ic,NavigationControl:jd,GeolocateControl:Af,AttributionControl:qb,ScaleControl:wc,
FullscreenControl:ac,Popup:Fe,Marker:yf,Style:ed,LngLat:d.LngLat,LngLatBounds:d.LngLatBounds,Point:d.Point,MercatorCoordinate:d.MercatorCoordinate,Evented:d.Evented,config:d.config,get accessToken(){return d.config.ACCESS_TOKEN},set accessToken(a){d.config.ACCESS_TOKEN=a},get baseApiUrl(){return d.config.API_URL},set baseApiUrl(a){d.config.API_URL=a},get workerCount(){return ab.workerCount},set workerCount(a){ab.workerCount=a},get maxParallelImageRequests(){return d.config.MAX_PARALLEL_IMAGE_REQUESTS},
set maxParallelImageRequests(a){d.config.MAX_PARALLEL_IMAGE_REQUESTS=a},workerUrl:""};return Kd});return od})};
var f,aa=this;
function t(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}var ba="closure_uid_"+(1E9*Math.random()>>>0),ca=0;function ea(a,b){this.D=[];this.F=b;for(var c=!0,d=a.length-1;0<=d;d--){var e=a[d]|0;c&&e==b||(this.D[d]=e,c=!1)}}var ha={};function ia(a){if(-128<=a&&128>a){var b=ha[a];if(b)return b}b=new ea([a|0],0>a?-1:0);-128<=a&&128>a&&(ha[a]=b);return b}function ja(a){if(isNaN(a)||!isFinite(a))return la;if(0>a)return ma(ja(-a));for(var b=[],c=1,d=0;a>=c;d++)b[d]=a/c|0,c*=oa;return new ea(b,0)}var oa=4294967296,la=ia(0),qa=ia(1),sa=ia(16777216);
function ta(a){if(-1==a.F)return-ta(ma(a));for(var b=0,c=1,d=0;d<a.D.length;d++){var e=w(a,d);b+=(0<=e?e:oa+e)*c;c*=oa}return b}f=ea.prototype;f.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(ua(this))return"0";if(-1==this.F)return"-"+ma(this).toString(a);for(var b=ja(Math.pow(a,6)),c=this,d="";;){var e=va(c,b),g=e.multiply(b);c=c.add(ma(g));g=((0<c.D.length?c.D[0]:c.F)>>>0).toString(a);c=e;if(ua(c))return g+d;for(;6>g.length;)g="0"+g;d=""+g+d}};
function w(a,b){return 0>b?0:b<a.D.length?a.D[b]:a.F}function ua(a){if(0!=a.F)return!1;for(var b=0;b<a.D.length;b++)if(0!=a.D[b])return!1;return!0}f.equals=function(a){if(this.F!=a.F)return!1;for(var b=Math.max(this.D.length,a.D.length),c=0;c<b;c++)if(w(this,c)!=w(a,c))return!1;return!0};f.compare=function(a){a=this.add(ma(a));return-1==a.F?-1:ua(a)?0:1};function ma(a){for(var b=a.D.length,c=[],d=0;d<b;d++)c[d]=~a.D[d];return(new ea(c,~a.F)).add(qa)}
f.add=function(a){for(var b=Math.max(this.D.length,a.D.length),c=[],d=0,e=0;e<=b;e++){var g=d+(w(this,e)&65535)+(w(a,e)&65535),h=(g>>>16)+(w(this,e)>>>16)+(w(a,e)>>>16);d=h>>>16;g&=65535;h&=65535;c[e]=h<<16|g}return new ea(c,c[c.length-1]&-2147483648?-1:0)};
f.multiply=function(a){if(ua(this)||ua(a))return la;if(-1==this.F)return-1==a.F?ma(this).multiply(ma(a)):ma(ma(this).multiply(a));if(-1==a.F)return ma(this.multiply(ma(a)));if(0>this.compare(sa)&&0>a.compare(sa))return ja(ta(this)*ta(a));for(var b=this.D.length+a.D.length,c=[],d=0;d<2*b;d++)c[d]=0;for(d=0;d<this.D.length;d++)for(var e=0;e<a.D.length;e++){var g=w(this,d)>>>16,h=w(this,d)&65535,k=w(a,e)>>>16,l=w(a,e)&65535;c[2*d+2*e]+=h*l;wa(c,2*d+2*e);c[2*d+2*e+1]+=g*l;wa(c,2*d+2*e+1);c[2*d+2*e+1]+=
h*k;wa(c,2*d+2*e+1);c[2*d+2*e+2]+=g*k;wa(c,2*d+2*e+2)}for(d=0;d<b;d++)c[d]=c[2*d+1]<<16|c[2*d];for(d=b;d<2*b;d++)c[d]=0;return new ea(c,0)};function wa(a,b){for(;(a[b]&65535)!=a[b];)a[b+1]+=a[b]>>>16,a[b]&=65535,b++}
function va(a,b){if(ua(b))throw Error("division by zero");if(ua(a))return la;if(-1==a.F)return-1==b.F?va(ma(a),ma(b)):ma(va(ma(a),b));if(-1==b.F)return ma(va(a,ma(b)));if(30<a.D.length){if(-1==a.F||-1==b.F)throw Error("slowDivide_ only works with positive integers.");for(var c=qa;0>=b.compare(a);)c=c.shiftLeft(1),b=b.shiftLeft(1);var d=za(c,1),e=za(b,1);b=za(b,2);for(c=za(c,2);!ua(b);){var g=e.add(b);0>=g.compare(a)&&(d=d.add(c),e=g);b=za(b,1);c=za(c,1)}return d}for(c=la;0<=a.compare(b);){d=Math.max(1,
Math.floor(ta(a)/ta(b)));e=Math.ceil(Math.log(d)/Math.LN2);e=48>=e?1:Math.pow(2,e-48);g=ja(d);for(var h=g.multiply(b);-1==h.F||0<h.compare(a);)d-=e,g=ja(d),h=g.multiply(b);ua(g)&&(g=qa);c=c.add(g);a=a.add(ma(h))}return c}f.and=function(a){for(var b=Math.max(this.D.length,a.D.length),c=[],d=0;d<b;d++)c[d]=w(this,d)&w(a,d);return new ea(c,this.F&a.F)};f.or=function(a){for(var b=Math.max(this.D.length,a.D.length),c=[],d=0;d<b;d++)c[d]=w(this,d)|w(a,d);return new ea(c,this.F|a.F)};
f.xor=function(a){for(var b=Math.max(this.D.length,a.D.length),c=[],d=0;d<b;d++)c[d]=w(this,d)^w(a,d);return new ea(c,this.F^a.F)};f.shiftLeft=function(a){var b=a>>5;a%=32;for(var c=this.D.length+b+(0<a?1:0),d=[],e=0;e<c;e++)d[e]=0<a?w(this,e-b)<<a|w(this,e-b-1)>>>32-a:w(this,e-b);return new ea(d,this.F)};function za(a,b){var c=b>>5;b%=32;for(var d=a.D.length-c,e=[],g=0;g<d;g++)e[g]=0<b?w(a,g+c)>>>b|w(a,g+c+1)<<32-b:w(a,g+c);return new ea(e,a.F)};function Ba(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};function Ca(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};function Da(a,b){null!=a&&this.append.apply(this,arguments)}f=Da.prototype;f.Ja="";f.set=function(a){this.Ja=""+a};f.append=function(a,b,c){this.Ja+=String(a);if(null!=b)for(var d=1;d<arguments.length;d++)this.Ja+=arguments[d];return this};f.clear=function(){this.Ja=""};f.toString=function(){return this.Ja};var Fa={},Ga={},Ia;if("undefined"===typeof Fa||"undefined"===typeof Ga||"undefined"===typeof y)var y={};if("undefined"===typeof Fa||"undefined"===typeof Ga||"undefined"===typeof Ja)var Ja=null;if("undefined"===typeof Fa||"undefined"===typeof Ga||"undefined"===typeof Ka)var Ka=null;var La=null;if("undefined"===typeof Fa||"undefined"===typeof Ga||"undefined"===typeof Ma)var Ma=null;function Na(){return new Oa(null,5,[Pa,!0,Ra,!0,Sa,!1,Ta,!1,Ua,null],null)}
function Wa(){Ja=function(){return console.log.apply(console,Ca(arguments))};Ka=function(){return console.error.apply(console,Ca(arguments))}}function z(a){return null!=a&&!1!==a}function Xa(a){return a instanceof Array}function Ya(a){return null==a?!0:!1===a?!0:!1}function B(a,b){return a[t(null==b?null:b)]?!0:a._?!0:!1}function D(a,b){var c=null==b?null:b.constructor;c=z(z(c)?c.nb:c)?c.$a:t(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}
function Za(a){var b=a.$a;return z(b)?b:F.a(a)}var $a="undefined"!==typeof Symbol&&"function"===t(Symbol)?Symbol.iterator:"@@iterator";function ab(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function bb(){}var cb=function cb(a){if(null!=a&&null!=a.aa)return a.aa(a);var c=cb[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=cb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("ICounted.-count",a);};function db(){}
var eb=function eb(a,b){if(null!=a&&null!=a.T)return a.T(a,b);var d=eb[t(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=eb._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw D("ICollection.-conj",a);};function fb(){}var G=function G(a){switch(arguments.length){case 2:return G.b(arguments[0],arguments[1]);case 3:return G.g(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}};
G.b=function(a,b){if(null!=a&&null!=a.K)return a.K(a,b);var c=G[t(null==a?null:a)];if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);c=G._;if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);throw D("IIndexed.-nth",a);};G.g=function(a,b,c){if(null!=a&&null!=a.V)return a.V(a,b,c);var d=G[t(null==a?null:a)];if(null!=d)return d.g?d.g(a,b,c):d.call(null,a,b,c);d=G._;if(null!=d)return d.g?d.g(a,b,c):d.call(null,a,b,c);throw D("IIndexed.-nth",a);};G.R=3;
var H=function H(a){if(null!=a&&null!=a.ca)return a.ca(a);var c=H[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=H._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("ISeq.-first",a);},I=function I(a){if(null!=a&&null!=a.da)return a.da(a);var c=I[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=I._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("ISeq.-rest",a);};function gb(){}function ib(){}
var jb=function jb(a){switch(arguments.length){case 2:return jb.b(arguments[0],arguments[1]);case 3:return jb.g(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}};jb.b=function(a,b){if(null!=a&&null!=a.M)return a.M(a,b);var c=jb[t(null==a?null:a)];if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);c=jb._;if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);throw D("ILookup.-lookup",a);};
jb.g=function(a,b,c){if(null!=a&&null!=a.u)return a.u(a,b,c);var d=jb[t(null==a?null:a)];if(null!=d)return d.g?d.g(a,b,c):d.call(null,a,b,c);d=jb._;if(null!=d)return d.g?d.g(a,b,c):d.call(null,a,b,c);throw D("ILookup.-lookup",a);};jb.R=3;var kb=function kb(a,b,c){if(null!=a&&null!=a.oa)return a.oa(a,b,c);var e=kb[t(null==a?null:a)];if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);e=kb._;if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);throw D("IAssociative.-assoc",a);};function lb(){}
var mb=function mb(a){if(null!=a&&null!=a.vb)return a.key;var c=mb[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=mb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IMapEntry.-key",a);},nb=function nb(a){if(null!=a&&null!=a.wb)return a.G;var c=nb[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=nb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IMapEntry.-val",a);};function ob(){}
var pb=function pb(a){if(null!=a&&null!=a.bb)return a.bb(a);var c=pb[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=pb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IDeref.-deref",a);};function qb(){}
var rb=function rb(a){if(null!=a&&null!=a.N)return a.N(a);var c=rb[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=rb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IMeta.-meta",a);},sb=function sb(a,b){if(null!=a&&null!=a.S)return a.S(a,b);var d=sb[t(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=sb._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw D("IWithMeta.-with-meta",a);};function tb(){}
var vb=function vb(a){switch(arguments.length){case 2:return vb.b(arguments[0],arguments[1]);case 3:return vb.g(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}};vb.b=function(a,b){if(null!=a&&null!=a.X)return a.X(a,b);var c=vb[t(null==a?null:a)];if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);c=vb._;if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);throw D("IReduce.-reduce",a);};
vb.g=function(a,b,c){if(null!=a&&null!=a.Y)return a.Y(a,b,c);var d=vb[t(null==a?null:a)];if(null!=d)return d.g?d.g(a,b,c):d.call(null,a,b,c);d=vb._;if(null!=d)return d.g?d.g(a,b,c):d.call(null,a,b,c);throw D("IReduce.-reduce",a);};vb.R=3;function wb(){}
var xb=function xb(a,b,c){if(null!=a&&null!=a.Xa)return a.Xa(a,b,c);var e=xb[t(null==a?null:a)];if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);e=xb._;if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);throw D("IKVReduce.-kv-reduce",a);},yb=function yb(a,b){if(null!=a&&null!=a.H)return a.H(a,b);var d=yb[t(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=yb._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw D("IEquiv.-equiv",a);},zb=function zb(a){if(null!=a&&null!=a.J)return a.J(a);
var c=zb[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=zb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IHash.-hash",a);};function Ab(){}var Bb=function Bb(a){if(null!=a&&null!=a.I)return a.I(a);var c=Bb[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Bb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("ISeqable.-seq",a);};function Cb(){}function Db(){}function Eb(){}
var J=function J(a,b){if(null!=a&&null!=a.mb)return a.mb(a,b);var d=J[t(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=J._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw D("IWriter.-write",a);};function Fb(){}
var Gb=function Gb(a,b,c){if(null!=a&&null!=a.O)return a.O(a,b,c);var e=Gb[t(null==a?null:a)];if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);e=Gb._;if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);throw D("IPrintWithWriter.-pr-writer",a);},Hb=function Hb(a,b,c){if(null!=a&&null!=a.lb)return a.lb(a,b,c);var e=Hb[t(null==a?null:a)];if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);e=Hb._;if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);throw D("IWatchable.-notify-watches",a);},Ib=function Ib(a){if(null!=
a&&null!=a.Oa)return a.Oa(a);var c=Ib[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Ib._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IEditableCollection.-as-transient",a);},Jb=function Jb(a,b){if(null!=a&&null!=a.Pa)return a.Pa(a,b);var d=Jb[t(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=Jb._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw D("ITransientCollection.-conj!",a);},Kb=function Kb(a){if(null!=a&&null!=a.Za)return a.Za(a);var c=Kb[t(null==
a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Kb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("ITransientCollection.-persistent!",a);},Mb=function Mb(a,b,c){if(null!=a&&null!=a.Ka)return a.Ka(a,b,c);var e=Mb[t(null==a?null:a)];if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);e=Mb._;if(null!=e)return e.g?e.g(a,b,c):e.call(null,a,b,c);throw D("ITransientAssociative.-assoc!",a);},Nb=function Nb(a){if(null!=a&&null!=a.hb)return a.hb(a);var c=Nb[t(null==a?null:a)];if(null!=c)return c.a?
c.a(a):c.call(null,a);c=Nb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IChunk.-drop-first",a);},Ob=function Ob(a){if(null!=a&&null!=a.ab)return a.ab(a);var c=Ob[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Ob._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IChunkedSeq.-chunked-first",a);},Pb=function Pb(a){if(null!=a&&null!=a.Va)return a.Va(a);var c=Pb[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Pb._;if(null!=c)return c.a?c.a(a):c.call(null,
a);throw D("IChunkedSeq.-chunked-rest",a);},Qb=function Qb(a,b){if(null!=a&&null!=a.Ab)return a.Ab(a,b);var d=Qb[t(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=Qb._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw D("IReset.-reset!",a);},Rb=function Rb(a){switch(arguments.length){case 2:return Rb.b(arguments[0],arguments[1]);case 3:return Rb.g(arguments[0],arguments[1],arguments[2]);case 4:return Rb.w(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Rb.U(arguments[0],
arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}};Rb.b=function(a,b){if(null!=a&&null!=a.Cb)return a.Cb(a,b);var c=Rb[t(null==a?null:a)];if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);c=Rb._;if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);throw D("ISwap.-swap!",a);};
Rb.g=function(a,b,c){if(null!=a&&null!=a.Db)return a.Db(a,b,c);var d=Rb[t(null==a?null:a)];if(null!=d)return d.g?d.g(a,b,c):d.call(null,a,b,c);d=Rb._;if(null!=d)return d.g?d.g(a,b,c):d.call(null,a,b,c);throw D("ISwap.-swap!",a);};Rb.w=function(a,b,c,d){if(null!=a&&null!=a.Eb)return a.Eb(a,b,c,d);var e=Rb[t(null==a?null:a)];if(null!=e)return e.w?e.w(a,b,c,d):e.call(null,a,b,c,d);e=Rb._;if(null!=e)return e.w?e.w(a,b,c,d):e.call(null,a,b,c,d);throw D("ISwap.-swap!",a);};
Rb.U=function(a,b,c,d,e){if(null!=a&&null!=a.Fb)return a.Fb(a,b,c,d,e);var g=Rb[t(null==a?null:a)];if(null!=g)return g.U?g.U(a,b,c,d,e):g.call(null,a,b,c,d,e);g=Rb._;if(null!=g)return g.U?g.U(a,b,c,d,e):g.call(null,a,b,c,d,e);throw D("ISwap.-swap!",a);};Rb.R=5;function Sb(){}var Tb=function Tb(a){if(null!=a&&null!=a.Ea)return a.Ea(a);var c=Tb[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Tb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IIterable.-iterator",a);};
function Ub(a){this.Jb=a;this.h=1073741824;this.o=0}Ub.prototype.mb=function(a,b){return this.Jb.append(b)};function Vb(a){var b=new Da;a.O(null,new Ub(b),Na());return F.a(b)}var Wb="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function Xb(a){a=Wb(a|0,-862048943);return Wb(a<<15|a>>>-15,461845907)}
function Yb(a,b){a=(a|0)^(b|0);return Wb(a<<13|a>>>-13,5)+-430675100|0}function Zb(a,b){a=(a|0)^b;a=Wb(a^a>>>16,-2048144789);a=Wb(a^a>>>13,-1028477387);return a^a>>>16}function $b(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=Yb(c,Xb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}}return Zb(1===(a.length&1)?b^Xb(a.charCodeAt(a.length-1)):b,Wb(2,a.length))}var bc={},cc=0;
function dc(a){255<cc&&(bc={},cc=0);if(null==a)return 0;var b=bc[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=Wb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;bc[a]=b;cc+=1;a=b}return a}
function ec(a){if(null!=a&&(a.h&4194304||y===a.Pb))return a.J(null)^0;if("number"===typeof a){if(z(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=dc(a),a=0===a?a:Zb(Yb(0,Xb(a)),4)):a=a instanceof Date?a.valueOf()^0:null==a?0:zb(a)^0,a}function fc(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function gc(a,b,c,d,e){this.Ua=a;this.name=b;this.Ia=c;this._hash=d;this.ga=e;this.h=2154168321;this.o=4096}f=gc.prototype;f.toString=function(){return this.Ia};f.H=function(a,b){return b instanceof gc?this.Ia===b.Ia:!1};
f.call=function(){function a(a,b,c){return K.g?K.g(b,this,c):K.call(null,b,this,c)}function b(a,b){return K.b?K.b(b,this):K.call(null,b,this)}var c=null;c=function(c,e,g){switch(arguments.length){case 2:return b.call(this,c,e);case 3:return a.call(this,c,e,g)}throw Error("Invalid arity: "+(arguments.length-1));};c.b=b;c.g=a;return c}();f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.a=function(a){return K.b?K.b(a,this):K.call(null,a,this)};
f.b=function(a,b){return K.g?K.g(a,this,b):K.call(null,a,this,b)};f.N=function(){return this.ga};f.S=function(a,b){return new gc(this.Ua,this.name,this.Ia,this._hash,b)};f.J=function(){var a=this._hash;return null!=a?a:this._hash=a=fc($b(this.name),dc(this.Ua))};f.O=function(a,b){return J(b,this.Ia)};function hc(a){return null!=a?a.o&131072||y===a.Qb?!0:a.o?!1:B(Sb,a):B(Sb,a)}
function M(a){if(null==a)return null;if(null!=a&&(a.h&8388608||y===a.Bb))return a.I(null);if(Xa(a)||"string"===typeof a)return 0===a.length?null:new O(a,0,null);if(B(Ab,a))return Bb(a);throw Error([F.a(a)," is not ISeqable"].join(""));}function P(a){if(null==a)return null;if(null!=a&&(a.h&64||y===a.ma))return a.ca(null);a=M(a);return null==a?null:H(a)}function ic(a){return null!=a?null!=a&&(a.h&64||y===a.ma)?a.da(null):(a=M(a))?a.da(null):jc:jc}
function Q(a){return null==a?null:null!=a&&(a.h&128||y===a.Ya)?a.ba():M(ic(a))}var kc=function kc(a){switch(arguments.length){case 1:return kc.a(arguments[0]);case 2:return kc.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return kc.A(arguments[0],arguments[1],new O(c.slice(2),0,null))}};kc.a=function(){return!0};kc.b=function(a,b){return null==a?null==b:a===b||yb(a,b)};
kc.A=function(a,b,c){for(;;)if(kc.b(a,b))if(Q(c))a=b,b=P(c),c=Q(c);else return kc.b(b,P(c));else return!1};kc.P=function(a){var b=P(a),c=Q(a);a=P(c);c=Q(c);return this.A(b,a,c)};kc.R=2;function lc(a){this.v=a}lc.prototype.next=function(){if(null!=this.v){var a=P(this.v);this.v=Q(this.v);return{value:a,done:!1}}return{value:null,done:!0}};function mc(a){return new lc(M(a))}function nc(a){var b=0,c=1;for(a=M(a);;)if(null!=a)b+=1,c=Wb(31,c)+ec(P(a))|0,a=Q(a);else return Zb(Yb(0,Xb(c)),b)}
var oc=Zb(Yb(0,Xb(1)),0);function pc(a){var b=0,c=0;for(a=M(a);;)if(null!=a)b+=1,c=c+ec(P(a))|0,a=Q(a);else return Zb(Yb(0,Xb(c)),b)}var qc=Zb(Yb(0,Xb(0)),0);bb["null"]=!0;cb["null"]=function(){return 0};Date.prototype.H=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};yb.number=function(a,b){return a===b};qb["function"]=!0;rb["function"]=function(){return null};zb._=function(a){return a[ba]||(a[ba]=++ca)};function rc(){this.G=!1;this.h=32768;this.o=0}rc.prototype.bb=function(){return this.G};
function sc(a){return a instanceof rc}function tc(a){return pb(a)}function uc(a,b){var c=a.length;if(0===a.length)return b.C?b.C():b.call(null);for(var d=a[0],e=1;;)if(e<c){var g=a[e];d=b.b?b.b(d,g):b.call(null,d,g);if(sc(d))return pb(d);e+=1}else return d}function vc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var g=a[c];e=b.b?b.b(e,g):b.call(null,e,g);if(sc(e))return pb(e);c+=1}else return e}
function wc(a,b,c,d){for(var e=a.length;;)if(d<e){var g=a[d];c=b.b?b.b(c,g):b.call(null,c,g);if(sc(c))return pb(c);d+=1}else return c}function xc(a){return null!=a?a.h&2||y===a.qb?!0:a.h?!1:B(bb,a):B(bb,a)}function zc(a){return null!=a?a.h&16||y===a.jb?!0:a.h?!1:B(fb,a):B(fb,a)}function R(a,b,c){var d=S.a?S.a(a):S.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(kc.b(Ac?Ac(a,c):Bc.call(null,a,c),b))return c;c+=1}else return-1}
function T(a,b,c){var d=S.a?S.a(a):S.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(kc.b(Ac?Ac(a,c):Bc.call(null,a,c),b))return c;--c}else return-1}function Cc(a,b){this.c=a;this.j=b}Cc.prototype.ea=function(){return this.j<this.c.length};Cc.prototype.next=function(){var a=this.c[this.j];this.j+=1;return a};function O(a,b,c){this.c=a;this.j=b;this.m=c;this.h=166592766;this.o=139264}f=O.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S.a?S.a(this):S.call(null,this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.K=function(a,b){a=b+this.j;if(0<=a&&a<this.c.length)return this.c[a];throw Error("Index out of bounds");};f.V=function(a,b,c){a=b+this.j;return 0<=a&&a<this.c.length?this.c[a]:c};
f.Ea=function(){return new Cc(this.c,this.j)};f.N=function(){return this.m};f.ba=function(){return this.j+1<this.c.length?new O(this.c,this.j+1,null):null};f.aa=function(){var a=this.c.length-this.j;return 0>a?0:a};f.J=function(){return nc(this)};f.H=function(a,b){return Dc.b?Dc.b(this,b):Dc.call(null,this,b)};f.X=function(a,b){return wc(this.c,b,this.c[this.j],this.j+1)};f.Y=function(a,b,c){return wc(this.c,b,c,this.j)};f.ca=function(){return this.c[this.j]};
f.da=function(){return this.j+1<this.c.length?new O(this.c,this.j+1,null):jc};f.I=function(){return this.j<this.c.length?this:null};f.S=function(a,b){return new O(this.c,this.j,b)};f.T=function(a,b){return V.b?V.b(b,this):V.call(null,b,this)};O.prototype[$a]=function(){return mc(this)};function Ec(a){return 0<a.length?new O(a,0,null):null}yb._=function(a,b){return a===b};
var Fc=function Fc(a){switch(arguments.length){case 0:return Fc.C();case 1:return Fc.a(arguments[0]);case 2:return Fc.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Fc.A(arguments[0],arguments[1],new O(c.slice(2),0,null))}};Fc.C=function(){return Gc};Fc.a=function(a){return a};Fc.b=function(a,b){return null!=a?eb(a,b):new Hc(null,b,null,1,null)};
Fc.A=function(a,b,c){for(;;)if(z(c))a=Fc.b(a,b),b=P(c),c=Q(c);else return Fc.b(a,b)};Fc.P=function(a){var b=P(a),c=Q(a);a=P(c);c=Q(c);return this.A(b,a,c)};Fc.R=2;function S(a){if(null!=a)if(null!=a&&(a.h&2||y===a.qb))a=a.aa(null);else if(Xa(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.h&8388608||y===a.Bb))a:{a=M(a);for(var b=0;;){if(xc(a)){a=b+cb(a);break a}a=Q(a);b+=1}}else a=cb(a);else a=0;return a}
function Ic(a,b,c){for(;;){if(null==a)return c;if(0===b)return M(a)?P(a):c;if(zc(a))return G.g(a,b,c);if(M(a))a=Q(a),--b;else return c}}function Bc(a){switch(arguments.length){case 2:return Ac(arguments[0],arguments[1]);case 3:return Jc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}}
function Ac(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.h&16||y===a.jb))return a.K(null,b);if(Xa(a)){if(0<=b&&b<a.length)return a[b];throw Error("Index out of bounds");}if("string"===typeof a){if(0<=b&&b<a.length)return a.charAt(b);throw Error("Index out of bounds");}if(null!=a&&(a.h&64||y===a.ma)||null!=a&&(a.h&16777216||y===a.kb)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(M(a)){a=P(a);break a}throw Error("Index out of bounds");}if(zc(a)){a=G.b(a,b);break a}if(M(a))a=Q(a),--b;else throw Error("Index out of bounds");}return a}if(B(fb,a))return G.b(a,b);throw Error(["nth not supported on this type ",F.a(Za(null==a?null:a.constructor))].join(""));}
function Jc(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.h&16||y===a.jb))return a.V(null,b,c);if(Xa(a))return 0<=b&&b<a.length?a[b]:c;if("string"===typeof a)return 0<=b&&b<a.length?a.charAt(b):c;if(null!=a&&(a.h&64||y===a.ma)||null!=a&&(a.h&16777216||y===a.kb))return 0>b?c:Ic(a,b,c);if(B(fb,a))return G.g(a,b,c);throw Error(["nth not supported on this type ",F.a(Za(null==a?null:a.constructor))].join(""));}
var K=function K(a){switch(arguments.length){case 2:return K.b(arguments[0],arguments[1]);case 3:return K.g(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}};K.b=function(a,b){return null==a?null:null!=a&&(a.h&256||y===a.ub)?a.M(null,b):Xa(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&b<a.length?a.charAt(b|0):null:B(ib,a)?jb.b(a,b):null};
K.g=function(a,b,c){return null!=a?null!=a&&(a.h&256||y===a.ub)?a.u(null,b,c):Xa(a)?null!=b&&0<=b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&0<=b&&b<a.length?a.charAt(b|0):c:B(ib,a)?jb.g(a,b,c):c:c};K.R=3;var Kc=function Kc(a){switch(arguments.length){case 3:return Kc.g(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Kc.A(arguments[0],arguments[1],arguments[2],new O(c.slice(3),0,null))}};
Kc.g=function(a,b,c){if(null!=a)a=kb(a,b,c);else{a=[b,c];b=[];for(c=0;;)if(c<a.length){var d=a[c],e=a[c+1],g=Lc(b,d);-1===g?(g=b,g.push(d),g.push(e)):b[g+1]=e;c+=2}else break;a=new Oa(null,b.length/2,b,null)}return a};Kc.A=function(a,b,c,d){for(;;)if(a=Kc.g(a,b,c),z(d))b=P(d),c=P(Q(d)),d=Q(Q(d));else return a};Kc.P=function(a){var b=P(a),c=Q(a);a=P(c);var d=Q(c);c=P(d);d=Q(d);return this.A(b,a,c,d)};Kc.R=3;function Mc(a,b){this.f=a;this.m=b;this.h=393217;this.o=0}f=Mc.prototype;f.N=function(){return this.m};
f.S=function(a,b){return new Mc(this.f,b)};
f.call=function(){function a(a,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E,N,C,U){a=this;return Nc.Wa?Nc.Wa(a.f,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E,N,C,U):Nc.call(null,a.f,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E,N,C,U)}function b(a,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E,N,C){a=this;return a.f.za?a.f.za(b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E,N,C):a.f.call(null,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E,N,C)}function c(a,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E,N){a=this;return a.f.ya?a.f.ya(b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E,
N):a.f.call(null,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E,N)}function d(a,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E){a=this;return a.f.xa?a.f.xa(b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E):a.f.call(null,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A,E)}function e(a,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A){a=this;return a.f.wa?a.f.wa(b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A):a.f.call(null,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x,A)}function g(a,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x){a=this;return a.f.va?a.f.va(b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x):a.f.call(null,
b,c,d,e,g,h,k,l,p,m,n,q,r,u,v,x)}function h(a,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v){a=this;return a.f.ua?a.f.ua(b,c,d,e,g,h,k,l,p,m,n,q,r,u,v):a.f.call(null,b,c,d,e,g,h,k,l,p,m,n,q,r,u,v)}function k(a,b,c,d,e,g,h,k,l,p,m,n,q,r,u){a=this;return a.f.ta?a.f.ta(b,c,d,e,g,h,k,l,p,m,n,q,r,u):a.f.call(null,b,c,d,e,g,h,k,l,p,m,n,q,r,u)}function l(a,b,c,d,e,g,h,k,l,p,m,n,q,r){a=this;return a.f.sa?a.f.sa(b,c,d,e,g,h,k,l,p,m,n,q,r):a.f.call(null,b,c,d,e,g,h,k,l,p,m,n,q,r)}function m(a,b,c,d,e,g,h,k,l,p,m,n,q){a=this;
return a.f.ra?a.f.ra(b,c,d,e,g,h,k,l,p,m,n,q):a.f.call(null,b,c,d,e,g,h,k,l,p,m,n,q)}function n(a,b,c,d,e,g,h,k,l,p,m,n){a=this;return a.f.qa?a.f.qa(b,c,d,e,g,h,k,l,p,m,n):a.f.call(null,b,c,d,e,g,h,k,l,p,m,n)}function p(a,b,c,d,e,g,h,k,l,p,m){a=this;return a.f.pa?a.f.pa(b,c,d,e,g,h,k,l,p,m):a.f.call(null,b,c,d,e,g,h,k,l,p,m)}function q(a,b,c,d,e,g,h,k,l,p){a=this;return a.f.Da?a.f.Da(b,c,d,e,g,h,k,l,p):a.f.call(null,b,c,d,e,g,h,k,l,p)}function r(a,b,c,d,e,g,h,k,l){a=this;return a.f.Ca?a.f.Ca(b,c,
d,e,g,h,k,l):a.f.call(null,b,c,d,e,g,h,k,l)}function u(a,b,c,d,e,g,h,k){a=this;return a.f.Ba?a.f.Ba(b,c,d,e,g,h,k):a.f.call(null,b,c,d,e,g,h,k)}function v(a,b,c,d,e,g,h){a=this;return a.f.Aa?a.f.Aa(b,c,d,e,g,h):a.f.call(null,b,c,d,e,g,h)}function x(a,b,c,d,e,g){a=this;return a.f.U?a.f.U(b,c,d,e,g):a.f.call(null,b,c,d,e,g)}function A(a,b,c,d,e){a=this;return a.f.w?a.f.w(b,c,d,e):a.f.call(null,b,c,d,e)}function E(a,b,c,d){a=this;return a.f.g?a.f.g(b,c,d):a.f.call(null,b,c,d)}function N(a,b,c){a=this;
return a.f.b?a.f.b(b,c):a.f.call(null,b,c)}function U(a,b){a=this;return a.f.a?a.f.a(b):a.f.call(null,b)}function ya(a){a=this;return a.f.C?a.f.C():a.f.call(null)}var C=null;C=function(C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va,hb,ub,Lb,ac,yc,Zc,Cd,Ee,vf){switch(arguments.length){case 1:return ya.call(this,C);case 2:return U.call(this,C,da);case 3:return N.call(this,C,da,fa);case 4:return E.call(this,C,da,fa,ka);case 5:return A.call(this,C,da,fa,ka,na);case 6:return x.call(this,C,da,fa,ka,na,pa);case 7:return v.call(this,
C,da,fa,ka,na,pa,ra);case 8:return u.call(this,C,da,fa,ka,na,pa,ra,xa);case 9:return r.call(this,C,da,fa,ka,na,pa,ra,xa,Aa);case 10:return q.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea);case 11:return p.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha);case 12:return n.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa);case 13:return m.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va);case 14:return l.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va,hb);case 15:return k.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,
Va,hb,ub);case 16:return h.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va,hb,ub,Lb);case 17:return g.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va,hb,ub,Lb,ac);case 18:return e.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va,hb,ub,Lb,ac,yc);case 19:return d.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va,hb,ub,Lb,ac,yc,Zc);case 20:return c.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va,hb,ub,Lb,ac,yc,Zc,Cd);case 21:return b.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va,hb,ub,Lb,ac,yc,Zc,Cd,
Ee);case 22:return a.call(this,C,da,fa,ka,na,pa,ra,xa,Aa,Ea,Ha,Qa,Va,hb,ub,Lb,ac,yc,Zc,Cd,Ee,vf)}throw Error("Invalid arity: "+(arguments.length-1));};C.a=ya;C.b=U;C.g=N;C.w=E;C.U=A;C.Aa=x;C.Ba=v;C.Ca=u;C.Da=r;C.pa=q;C.qa=p;C.ra=n;C.sa=m;C.ta=l;C.ua=k;C.va=h;C.wa=g;C.xa=e;C.ya=d;C.za=c;C.tb=b;C.Wa=a;return C}();f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.C=function(){return this.f.C?this.f.C():this.f.call(null)};
f.a=function(a){return this.f.a?this.f.a(a):this.f.call(null,a)};f.b=function(a,b){return this.f.b?this.f.b(a,b):this.f.call(null,a,b)};f.g=function(a,b,c){return this.f.g?this.f.g(a,b,c):this.f.call(null,a,b,c)};f.w=function(a,b,c,d){return this.f.w?this.f.w(a,b,c,d):this.f.call(null,a,b,c,d)};f.U=function(a,b,c,d,e){return this.f.U?this.f.U(a,b,c,d,e):this.f.call(null,a,b,c,d,e)};f.Aa=function(a,b,c,d,e,g){return this.f.Aa?this.f.Aa(a,b,c,d,e,g):this.f.call(null,a,b,c,d,e,g)};
f.Ba=function(a,b,c,d,e,g,h){return this.f.Ba?this.f.Ba(a,b,c,d,e,g,h):this.f.call(null,a,b,c,d,e,g,h)};f.Ca=function(a,b,c,d,e,g,h,k){return this.f.Ca?this.f.Ca(a,b,c,d,e,g,h,k):this.f.call(null,a,b,c,d,e,g,h,k)};f.Da=function(a,b,c,d,e,g,h,k,l){return this.f.Da?this.f.Da(a,b,c,d,e,g,h,k,l):this.f.call(null,a,b,c,d,e,g,h,k,l)};f.pa=function(a,b,c,d,e,g,h,k,l,m){return this.f.pa?this.f.pa(a,b,c,d,e,g,h,k,l,m):this.f.call(null,a,b,c,d,e,g,h,k,l,m)};
f.qa=function(a,b,c,d,e,g,h,k,l,m,n){return this.f.qa?this.f.qa(a,b,c,d,e,g,h,k,l,m,n):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n)};f.ra=function(a,b,c,d,e,g,h,k,l,m,n,p){return this.f.ra?this.f.ra(a,b,c,d,e,g,h,k,l,m,n,p):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n,p)};f.sa=function(a,b,c,d,e,g,h,k,l,m,n,p,q){return this.f.sa?this.f.sa(a,b,c,d,e,g,h,k,l,m,n,p,q):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q)};
f.ta=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r){return this.f.ta?this.f.ta(a,b,c,d,e,g,h,k,l,m,n,p,q,r):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r)};f.ua=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u){return this.f.ua?this.f.ua(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,u)};f.va=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v){return this.f.va?this.f.va(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v)};
f.wa=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x){return this.f.wa?this.f.wa(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x)};f.xa=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A){return this.f.xa?this.f.xa(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A)};
f.ya=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E){return this.f.ya?this.f.ya(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E)};f.za=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N){return this.f.za?this.f.za(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N):this.f.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N)};
f.tb=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N,U){return Nc.Wa?Nc.Wa(this.f,a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N,U):Nc.call(null,this.f,a,b,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N,U)};function Oc(a,b){return"function"==t(a)?new Mc(a,b):null==a?null:sb(a,b)}function Pc(a){var b=null!=a;return(b?null!=a?a.h&131072||y===a.xb||(a.h?0:B(qb,a)):B(qb,a):b)?rb(a):null}function Qc(a){return null!=a?a.h&16777216||y===a.kb?!0:a.h?!1:B(Cb,a):B(Cb,a)}
function Rc(a){return null==a?!1:null!=a?a.h&1024||y===a.Tb?!0:a.h?!1:B(lb,a):B(lb,a)}function Sc(a){return null!=a?a.h&67108864||y===a.Vb?!0:a.h?!1:B(Eb,a):B(Eb,a)}function Tc(a){return null!=a?a.h&16384||y===a.Wb?!0:a.h?!1:B(ob,a):B(ob,a)}function Uc(a){return null!=a?a.o&512||y===a.Mb?!0:!1:!1}function Vc(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var Wc={};function Xc(a){return null==a?!1:!1===a?!1:!0}
function Yc(a,b){var c=M(b);return c?(b=P(c),c=Q(c),$c?$c(a,b,c):ad.call(null,a,b,c)):a.C?a.C():a.call(null)}function bd(a,b,c){for(c=M(c);;)if(c){var d=P(c);b=a.b?a.b(b,d):a.call(null,b,d);if(sc(b))return pb(b);c=Q(c)}else return b}function cd(a,b){a=Tb(a);if(z(a.ea()))for(var c=a.next();;)if(a.ea()){var d=a.next();c=b.b?b.b(c,d):b.call(null,c,d);if(sc(c))return pb(c)}else return c;else return b.C?b.C():b.call(null)}
function dd(a,b,c){for(a=Tb(a);;)if(a.ea()){var d=a.next();c=b.b?b.b(c,d):b.call(null,c,d);if(sc(c))return pb(c)}else return c}function ad(a){switch(arguments.length){case 2:var b=arguments[0],c=arguments[1];return null!=c&&(c.h&524288||y===c.zb)?c.X(null,b):Xa(c)?uc(c,b):"string"===typeof c?uc(c,b):B(tb,c)?vb.b(c,b):hc(c)?cd(c,b):Yc(b,c);case 3:return $c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}}
function $c(a,b,c){return null!=c&&(c.h&524288||y===c.zb)?c.Y(null,a,b):Xa(c)?vc(c,a,b):"string"===typeof c?vc(c,a,b):B(tb,c)?vb.g(c,a,b):hc(c)?dd(c,a,b):bd(a,b,c)}function ed(a,b){return null!=b?xb(b,a,!0):!0}function fd(a){return a}function gd(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}function hd(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}
var F=function F(a){switch(arguments.length){case 0:return F.C();case 1:return F.a(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return F.A(arguments[0],new O(c.slice(1),0,null))}};F.C=function(){return""};F.a=function(a){return null==a?"":[a].join("")};F.A=function(a,b){for(a=new Da(F.a(a));;)if(z(b))a=a.append(F.a(P(b))),b=Q(b);else return a.toString()};F.P=function(a){var b=P(a);a=Q(a);return this.A(b,a)};F.R=1;
function Dc(a,b){if(Qc(b))if(xc(a)&&xc(b)&&S(a)!==S(b))a=!1;else a:for(a=M(a),b=M(b);;){if(null==a){a=null==b;break a}if(null!=b&&kc.b(P(a),P(b)))a=Q(a),b=Q(b);else{a=!1;break a}}else a=null;return Xc(a)}function Hc(a,b,c,d,e){this.m=a;this.first=b;this.Fa=c;this.count=d;this.l=e;this.h=65937646;this.o=8192}f=Hc.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,this.count)}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.m};f.ba=function(){return 1===this.count?null:this.Fa};f.aa=function(){return this.count};f.J=function(){var a=this.l;return null!=a?a:this.l=a=nc(this)};f.H=function(a,b){return Dc(this,b)};
f.X=function(a,b){return Yc(b,this)};f.Y=function(a,b,c){return bd(b,c,this)};f.ca=function(){return this.first};f.da=function(){return 1===this.count?jc:this.Fa};f.I=function(){return this};f.S=function(a,b){return new Hc(b,this.first,this.Fa,this.count,this.l)};f.T=function(a,b){return new Hc(this.m,b,this,this.count+1,null)};Hc.prototype[$a]=function(){return mc(this)};function id(a){this.m=a;this.h=65937614;this.o=8192}f=id.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.m};f.ba=function(){return null};f.aa=function(){return 0};f.J=function(){return oc};f.H=function(a,b){return(null!=b?b.h&33554432||y===b.Sb||(b.h?0:B(Db,b)):B(Db,b))||Qc(b)?null==M(b):!1};
f.X=function(a,b){return Yc(b,this)};f.Y=function(a,b,c){return bd(b,c,this)};f.ca=function(){return null};f.da=function(){return jc};f.I=function(){return null};f.S=function(a,b){return new id(b)};f.T=function(a,b){return new Hc(this.m,b,null,1,null)};var jc=new id(null);id.prototype[$a]=function(){return mc(this)};function jd(a,b,c,d){this.m=a;this.first=b;this.Fa=c;this.l=d;this.h=65929452;this.o=8192}f=jd.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.m};f.ba=function(){return null==this.Fa?null:M(this.Fa)};f.J=function(){var a=this.l;return null!=a?a:this.l=a=nc(this)};f.H=function(a,b){return Dc(this,b)};f.X=function(a,b){return Yc(b,this)};
f.Y=function(a,b,c){return bd(b,c,this)};f.ca=function(){return this.first};f.da=function(){return null==this.Fa?jc:this.Fa};f.I=function(){return this};f.S=function(a,b){return new jd(b,this.first,this.Fa,this.l)};f.T=function(a,b){return new jd(null,b,this,null)};jd.prototype[$a]=function(){return mc(this)};function V(a,b){return null==b||null!=b&&(b.h&64||y===b.ma)?new jd(null,a,b,null):new jd(null,a,M(b),null)}
function W(a,b,c,d){this.Ua=a;this.name=b;this.Ha=c;this._hash=d;this.h=2153775105;this.o=4096}f=W.prototype;f.toString=function(){return[":",F.a(this.Ha)].join("")};f.H=function(a,b){return b instanceof W?this.Ha===b.Ha:!1};f.call=function(){var a=null;a=function(a,c,d){switch(arguments.length){case 2:return K.b(c,this);case 3:return K.g(c,this,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(a,c){return K.b(c,this)};a.g=function(a,c,d){return K.g(c,this,d)};return a}();
f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.a=function(a){return K.b(a,this)};f.b=function(a,b){return K.g(a,this,b)};f.J=function(){var a=this._hash;return null!=a?a:this._hash=a=fc($b(this.name),dc(this.Ua))+2654435769|0};f.O=function(a,b){return J(b,[":",F.a(this.Ha)].join(""))};
var kd=function kd(a){switch(arguments.length){case 1:return kd.a(arguments[0]);case 2:return kd.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}};
kd.a=function(a){if(a instanceof W)return a;if(a instanceof gc){if(null!=a&&(a.o&4096||y===a.yb))var b=a.Ua;else throw Error(["Doesn't support namespace: ",F.a(a)].join(""));return new W(b,ld.a?ld.a(a):ld.call(null,a),a.Ia,null)}return"string"===typeof a?(b=a.split("/"),2===b.length?new W(b[0],b[1],a,null):new W(null,b[0],a,null)):null};
kd.b=function(a,b){a=a instanceof W?ld.a?ld.a(a):ld.call(null,a):a instanceof gc?ld.a?ld.a(a):ld.call(null,a):a;b=b instanceof W?ld.a?ld.a(b):ld.call(null,b):b instanceof gc?ld.a?ld.a(b):ld.call(null,b):b;return new W(a,b,[F.a(z(a)?[F.a(a),"/"].join(""):null),F.a(b)].join(""),null)};kd.R=2;function md(a,b,c){this.m=a;this.Qa=b;this.v=null;this.l=c;this.h=32374988;this.o=1}f=md.prototype;f.toString=function(){return Vb(this)};
function nd(a){null!=a.Qa&&(a.v=a.Qa.C?a.Qa.C():a.Qa.call(null),a.Qa=null);return a.v}f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.m};f.ba=function(){this.I(null);return null==this.v?null:Q(this.v)};f.J=function(){var a=this.l;return null!=a?a:this.l=a=nc(this)};f.H=function(a,b){return Dc(this,b)};
f.X=function(a,b){return Yc(b,this)};f.Y=function(a,b,c){return bd(b,c,this)};f.ca=function(){this.I(null);return null==this.v?null:P(this.v)};f.da=function(){this.I(null);return null!=this.v?ic(this.v):jc};f.I=function(){nd(this);if(null==this.v)return null;for(var a=this.v;;)if(a instanceof md)a=nd(a);else return this.v=a,M(this.v)};f.S=function(a,b){return new md(b,function(a){return function(){return a.I(null)}}(this),this.l)};f.T=function(a,b){return V(b,this)};md.prototype[$a]=function(){return mc(this)};
function od(a){this.buf=a;this.end=0;this.h=2;this.o=0}od.prototype.add=function(a){this.buf[this.end]=a;return this.end+=1};od.prototype.na=function(){var a=new pd(this.buf,0,this.end);this.buf=null;return a};od.prototype.aa=function(){return this.end};function pd(a,b,c){this.c=a;this.off=b;this.end=c;this.h=524306;this.o=0}f=pd.prototype;f.aa=function(){return this.end-this.off};f.K=function(a,b){return this.c[this.off+b]};
f.V=function(a,b,c){return 0<=b&&b<this.end-this.off?this.c[this.off+b]:c};f.hb=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new pd(this.c,this.off+1,this.end)};f.X=function(a,b){return wc(this.c,b,this.c[this.off],this.off+1)};f.Y=function(a,b,c){return wc(this.c,b,c,this.off)};function qd(a,b,c,d){this.na=a;this.ja=b;this.m=c;this.l=d;this.h=31850732;this.o=1536}f=qd.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.m};f.ba=function(){return 1<cb(this.na)?new qd(Nb(this.na),this.ja,this.m,null):null==this.ja?null:Bb(this.ja)};f.J=function(){var a=this.l;return null!=a?a:this.l=a=nc(this)};
f.H=function(a,b){return Dc(this,b)};f.ca=function(){return G.b(this.na,0)};f.da=function(){return 1<cb(this.na)?new qd(Nb(this.na),this.ja,this.m,null):null==this.ja?jc:this.ja};f.I=function(){return this};f.ab=function(){return this.na};f.Va=function(){return null==this.ja?jc:this.ja};f.S=function(a,b){return new qd(this.na,this.ja,b,this.l)};f.T=function(a,b){return V(b,this)};f.ib=function(){return null==this.ja?null:this.ja};qd.prototype[$a]=function(){return mc(this)};
function rd(a,b){return 0===cb(a)?b:new qd(a,b,null,null)}function sd(a,b){a.add(b)}function td(a,b){if(xc(b))return S(b);var c=0;for(b=M(b);;)if(null!=b&&c<a)c+=1,b=Q(b);else return c}
var ud=function ud(a){if(null==a)return null;var c=Q(a);return null==c?M(P(a)):V(P(a),ud.a?ud.a(c):ud.call(null,c))},vd=function vd(a){switch(arguments.length){case 0:return vd.C();case 1:return vd.a(arguments[0]);case 2:return vd.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return vd.A(arguments[0],arguments[1],new O(c.slice(2),0,null))}};vd.C=function(){return Ib(Gc)};vd.a=function(a){return a};
vd.b=function(a,b){return Jb(a,b)};vd.A=function(a,b,c){for(;;)if(a=Jb(a,b),z(c))b=P(c),c=Q(c);else return a};vd.P=function(a){var b=P(a),c=Q(a);a=P(c);c=Q(c);return this.A(b,a,c)};vd.R=2;
function wd(a,b,c){var d=M(c);if(0===b)return a.C?a.C():a.call(null);c=H(d);var e=I(d);if(1===b)return a.a?a.a(c):a.call(null,c);d=H(e);var g=I(e);if(2===b)return a.b?a.b(c,d):a.call(null,c,d);e=H(g);var h=I(g);if(3===b)return a.g?a.g(c,d,e):a.call(null,c,d,e);g=H(h);var k=I(h);if(4===b)return a.w?a.w(c,d,e,g):a.call(null,c,d,e,g);h=H(k);var l=I(k);if(5===b)return a.U?a.U(c,d,e,g,h):a.call(null,c,d,e,g,h);k=H(l);var m=I(l);if(6===b)return a.Aa?a.Aa(c,d,e,g,h,k):a.call(null,c,d,e,g,h,k);l=H(m);var n=
I(m);if(7===b)return a.Ba?a.Ba(c,d,e,g,h,k,l):a.call(null,c,d,e,g,h,k,l);m=H(n);var p=I(n);if(8===b)return a.Ca?a.Ca(c,d,e,g,h,k,l,m):a.call(null,c,d,e,g,h,k,l,m);n=H(p);var q=I(p);if(9===b)return a.Da?a.Da(c,d,e,g,h,k,l,m,n):a.call(null,c,d,e,g,h,k,l,m,n);p=H(q);var r=I(q);if(10===b)return a.pa?a.pa(c,d,e,g,h,k,l,m,n,p):a.call(null,c,d,e,g,h,k,l,m,n,p);q=H(r);var u=I(r);if(11===b)return a.qa?a.qa(c,d,e,g,h,k,l,m,n,p,q):a.call(null,c,d,e,g,h,k,l,m,n,p,q);r=H(u);var v=I(u);if(12===b)return a.ra?a.ra(c,
d,e,g,h,k,l,m,n,p,q,r):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r);u=H(v);var x=I(v);if(13===b)return a.sa?a.sa(c,d,e,g,h,k,l,m,n,p,q,r,u):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,u);v=H(x);var A=I(x);if(14===b)return a.ta?a.ta(c,d,e,g,h,k,l,m,n,p,q,r,u,v):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,u,v);x=H(A);var E=I(A);if(15===b)return a.ua?a.ua(c,d,e,g,h,k,l,m,n,p,q,r,u,v,x):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x);A=H(E);var N=I(E);if(16===b)return a.va?a.va(c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A):a.call(null,c,d,e,
g,h,k,l,m,n,p,q,r,u,v,x,A);E=H(N);var U=I(N);if(17===b)return a.wa?a.wa(c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E);N=H(U);var ya=I(U);if(18===b)return a.xa?a.xa(c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N);U=H(ya);ya=I(ya);if(19===b)return a.ya?a.ya(c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N,U):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N,U);var C=H(ya);I(ya);if(20===b)return a.za?a.za(c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N,
U,C):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,u,v,x,A,E,N,U,C);throw Error("Only up to 20 arguments supported on functions");}function xd(a,b,c){return null==c?a.a?a.a(b):a.call(a,b):yd(a,b,H(c),Q(c))}function yd(a,b,c,d){return null==d?a.b?a.b(b,c):a.call(a,b,c):zd(a,b,c,H(d),Q(d))}function zd(a,b,c,d,e){return null==e?a.g?a.g(b,c,d):a.call(a,b,c,d):Ad(a,b,c,d,H(e),Q(e))}
function Ad(a,b,c,d,e,g){if(null==g)return a.w?a.w(b,c,d,e):a.call(a,b,c,d,e);var h=H(g),k=Q(g);if(null==k)return a.U?a.U(b,c,d,e,h):a.call(a,b,c,d,e,h);g=H(k);var l=Q(k);if(null==l)return a.Aa?a.Aa(b,c,d,e,h,g):a.call(a,b,c,d,e,h,g);k=H(l);var m=Q(l);if(null==m)return a.Ba?a.Ba(b,c,d,e,h,g,k):a.call(a,b,c,d,e,h,g,k);l=H(m);var n=Q(m);if(null==n)return a.Ca?a.Ca(b,c,d,e,h,g,k,l):a.call(a,b,c,d,e,h,g,k,l);m=H(n);var p=Q(n);if(null==p)return a.Da?a.Da(b,c,d,e,h,g,k,l,m):a.call(a,b,c,d,e,h,g,k,l,m);
n=H(p);var q=Q(p);if(null==q)return a.pa?a.pa(b,c,d,e,h,g,k,l,m,n):a.call(a,b,c,d,e,h,g,k,l,m,n);p=H(q);var r=Q(q);if(null==r)return a.qa?a.qa(b,c,d,e,h,g,k,l,m,n,p):a.call(a,b,c,d,e,h,g,k,l,m,n,p);q=H(r);var u=Q(r);if(null==u)return a.ra?a.ra(b,c,d,e,h,g,k,l,m,n,p,q):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q);r=H(u);var v=Q(u);if(null==v)return a.sa?a.sa(b,c,d,e,h,g,k,l,m,n,p,q,r):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r);u=H(v);var x=Q(v);if(null==x)return a.ta?a.ta(b,c,d,e,h,g,k,l,m,n,p,q,r,u):a.call(a,b,c,d,
e,h,g,k,l,m,n,p,q,r,u);v=H(x);var A=Q(x);if(null==A)return a.ua?a.ua(b,c,d,e,h,g,k,l,m,n,p,q,r,u,v):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,u,v);x=H(A);var E=Q(A);if(null==E)return a.va?a.va(b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x);A=H(E);var N=Q(E);if(null==N)return a.wa?a.wa(b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x,A):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x,A);E=H(N);var U=Q(N);if(null==U)return a.xa?a.xa(b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x,A,E):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,
r,u,v,x,A,E);N=H(U);var ya=Q(U);if(null==ya)return a.ya?a.ya(b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x,A,E,N):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x,A,E,N);U=H(ya);ya=Q(ya);if(null==ya)return a.za?a.za(b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x,A,E,N,U):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x,A,E,N,U);b=[b,c,d,e,h,g,k,l,m,n,p,q,r,u,v,x,A,E,N,U];for(c=ya;;)if(c)b.push(H(c)),c=Q(c);else break;return a.apply(a,b)}
function Nc(a){switch(arguments.length){case 2:return Bd(arguments[0],arguments[1]);case 3:return Dd(arguments[0],arguments[1],arguments[2]);case 4:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3];b.P?(c=V(c,V(d,e)),d=b.R,e=2+td(d-1,e),b=e<=d?wd(b,e,c):b.P(c)):b=yd(b,c,d,M(e));return b;case 5:return Ed(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:e=[];b=arguments.length;for(c=0;;)if(c<b)e.push(arguments[c]),c+=1;else break;b=arguments[0];c=arguments[1];
d=arguments[2];var g=arguments[3],h=arguments[4];e=new O(e.slice(5),0,null);b.P?(e=ud(e),c=V(c,V(d,V(g,V(h,e)))),d=b.R,e=4+td(d-3,e),b=e<=d?wd(b,e,c):b.P(c)):b=Ad(b,c,d,g,h,ud(e));return b}}function Bd(a,b){if(a.P){var c=a.R,d=td(c+1,b);return d<=c?wd(a,d,b):a.P(b)}b=M(b);return null==b?a.C?a.C():a.call(a):xd(a,H(b),Q(b))}function Dd(a,b,c){if(a.P){b=V(b,c);var d=a.R;c=td(d,c)+1;return c<=d?wd(a,c,b):a.P(b)}return xd(a,b,M(c))}
function Ed(a,b,c,d,e){return a.P?(b=V(b,V(c,V(d,e))),c=a.R,e=3+td(c-2,e),e<=c?wd(a,e,b):a.P(b)):zd(a,b,c,d,M(e))}
function Fd(){if("undefined"===typeof Fa||"undefined"===typeof Ga||"undefined"===typeof Ia)Ia=function(a){this.Ib=a;this.h=393216;this.o=0},Ia.prototype.S=function(a,b){return new Ia(b)},Ia.prototype.N=function(){return this.Ib},Ia.prototype.ea=function(){return!1},Ia.prototype.next=function(){return Error("No such element")},Ia.prototype.remove=function(){return Error("Unsupported operation")},Ia.Xb=function(){return new Gd(null,1,5,Hd,[Id],null)},Ia.nb=!0,Ia.$a="cljs.core/t_cljs$core12289",Ia.Gb=
function(a){return J(a,"cljs.core/t_cljs$core12289")};return new Ia(Jd)}function Kd(a,b){for(;;){if(null==M(b))return!0;var c=P(b);c=a.a?a.a(c):a.call(null,c);if(z(c))b=Q(b);else return!1}}function Ld(a){this.state=a;this.pb=this.Lb=this.m=null;this.o=16386;this.h=6455296}f=Ld.prototype;f.H=function(a,b){return this===b};f.bb=function(){return this.state};f.N=function(){return this.m};
f.lb=function(a,b,c){a=M(this.pb);for(var d=null,e=0,g=0;;)if(g<e){var h=d.K(null,g),k=Jc(h,0,null);h=Jc(h,1,null);h.w?h.w(k,this,b,c):h.call(null,k,this,b,c);g+=1}else if(a=M(a))Uc(a)?(d=Ob(a),a=Pb(a),k=d,e=S(d),d=k):(d=P(a),k=Jc(d,0,null),h=Jc(d,1,null),h.w?h.w(k,this,b,c):h.call(null,k,this,b,c),a=Q(a),d=null,e=0),g=0;else return null};f.J=function(){return this[ba]||(this[ba]=++ca)};
function Md(a,b){if(a instanceof Ld){var c=a.Lb;if(null!=c&&!z(c.a?c.a(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;null!=a.pb&&Hb(a,c,b);return b}return Qb(a,b)}
var Nd=function Nd(a){switch(arguments.length){case 2:return Nd.b(arguments[0],arguments[1]);case 3:return Nd.g(arguments[0],arguments[1],arguments[2]);case 4:return Nd.w(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Nd.A(arguments[0],arguments[1],arguments[2],arguments[3],new O(c.slice(4),0,null))}};
Nd.b=function(a,b){if(a instanceof Ld){var c=a.state;b=b.a?b.a(c):b.call(null,c);a=Md(a,b)}else a=Rb.b(a,b);return a};Nd.g=function(a,b,c){if(a instanceof Ld){var d=a.state;b=b.b?b.b(d,c):b.call(null,d,c);a=Md(a,b)}else a=Rb.g(a,b,c);return a};Nd.w=function(a,b,c,d){if(a instanceof Ld){var e=a.state;b=b.g?b.g(e,c,d):b.call(null,e,c,d);a=Md(a,b)}else a=Rb.w(a,b,c,d);return a};Nd.A=function(a,b,c,d,e){return a instanceof Ld?Md(a,Ed(b,a.state,c,d,e)):Rb.U(a,b,c,d,e)};
Nd.P=function(a){var b=P(a),c=Q(a);a=P(c);var d=Q(c);c=P(d);var e=Q(d);d=P(e);e=Q(e);return this.A(b,a,c,d,e)};Nd.R=4;
var X=function X(a){switch(arguments.length){case 1:return X.a(arguments[0]);case 2:return X.b(arguments[0],arguments[1]);case 3:return X.g(arguments[0],arguments[1],arguments[2]);case 4:return X.w(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return X.A(arguments[0],arguments[1],arguments[2],arguments[3],new O(c.slice(4),0,null))}};
X.a=function(a){return function(b){return function(){function c(c,d){d=a.a?a.a(d):a.call(null,d);return b.b?b.b(c,d):b.call(null,c,d)}function d(a){return b.a?b.a(a):b.call(null,a)}function e(){return b.C?b.C():b.call(null)}var g=null,h=function(){function c(a,b,c){var e=null;if(2<arguments.length){e=0;for(var g=Array(arguments.length-2);e<g.length;)g[e]=arguments[e+2],++e;e=new O(g,0,null)}return d.call(this,a,b,e)}function d(c,d,e){d=Dd(a,d,e);return b.b?b.b(c,d):b.call(null,c,d)}c.R=2;c.P=function(a){var b=
P(a);a=Q(a);var c=P(a);a=ic(a);return d(b,c,a)};c.A=d;return c}();g=function(a,b,g){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,a);case 2:return c.call(this,a,b);default:var k=null;if(2<arguments.length){k=0;for(var l=Array(arguments.length-2);k<l.length;)l[k]=arguments[k+2],++k;k=new O(l,0,null)}return h.A(a,b,k)}throw Error("Invalid arity: "+arguments.length);};g.R=2;g.P=h.P;g.C=e;g.a=d;g.b=c;g.A=h.A;return g}()}};
X.b=function(a,b){return new md(null,function(){var c=M(b);if(c){if(Uc(c)){for(var d=Ob(c),e=S(d),g=new od(Array(e)),h=0;;)if(h<e)sd(g,function(){var b=G.b(d,h);return a.a?a.a(b):a.call(null,b)}()),h+=1;else break;return rd(g.na(),X.b(a,Pb(c)))}return V(function(){var b=P(c);return a.a?a.a(b):a.call(null,b)}(),X.b(a,ic(c)))}return null},null)};
X.g=function(a,b,c){return new md(null,function(){var d=M(b),e=M(c);if(d&&e){var g=V;var h=P(d);var k=P(e);h=a.b?a.b(h,k):a.call(null,h,k);d=g(h,X.g(a,ic(d),ic(e)))}else d=null;return d},null)};X.w=function(a,b,c,d){return new md(null,function(){var e=M(b),g=M(c),h=M(d);if(e&&g&&h){var k=V;var l=P(e);var m=P(g),n=P(h);l=a.g?a.g(l,m,n):a.call(null,l,m,n);e=k(l,X.w(a,ic(e),ic(g),ic(h)))}else e=null;return e},null)};
X.A=function(a,b,c,d,e){var g=function l(a){return new md(null,function(){var b=X.b(M,a);return Kd(fd,b)?V(X.b(P,b),l(X.b(ic,b))):null},null)};return X.b(function(){return function(b){return Bd(a,b)}}(g),g(Fc.A(e,d,Ec([c,b]))))};X.P=function(a){var b=P(a),c=Q(a);a=P(c);var d=Q(c);c=P(d);var e=Q(d);d=P(e);e=Q(e);return this.A(b,a,c,d,e)};X.R=4;function Od(a,b){this.B=a;this.c=b}
function Pd(a){return new Od(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function Qd(a){a=a.i;return 32>a?0:a-1>>>5<<5}function Rd(a,b,c){for(;;){if(0===b)return c;var d=Pd(a);d.c[0]=c;c=d;b-=5}}var Sd=function Sd(a,b,c,d){var g=new Od(c.B,ab(c.c)),h=a.i-1>>>b&31;5===b?g.c[h]=d:(c=c.c[h],null!=c?(b-=5,a=Sd.w?Sd.w(a,b,c,d):Sd.call(null,a,b,c,d)):a=Rd(null,b-5,d),g.c[h]=a);return g};
function Td(a,b){if(b>=Qd(a))return a.$;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.c[b>>>a&31];a=d}else return c.c}function Ud(a,b){if(0<=b&&b<a.i)b=Td(a,b);else throw a=a.i,Error(["No item ",F.a(b)," in vector of length ",F.a(a)].join(""));return b}var Vd=function Vd(a,b,c,d,e){var h=new Od(c.B,ab(c.c));if(0===b)h.c[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.c[k];a=Vd.U?Vd.U(a,b,c,d,e):Vd.call(null,a,b,c,d,e);h.c[k]=a}return h};
function Wd(a,b,c){this.base=this.j=0;this.c=a;this.Kb=b;this.start=0;this.end=c}Wd.prototype.ea=function(){return this.j<this.end};Wd.prototype.next=function(){32===this.j-this.base&&(this.c=Td(this.Kb,this.j),this.base+=32);var a=this.c[this.j&31];this.j+=1;return a};function Xd(a,b,c,d){return c<d?Yd(a,b,Ac(a,c),c+1,d):b.C?b.C():b.call(null)}
function Yd(a,b,c,d,e){var g=c;c=d;for(d=Td(a,d);;)if(c<e){var h=c&31;d=0===h?Td(a,c):d;h=d[h];g=b.b?b.b(g,h):b.call(null,g,h);if(sc(g))return pb(g);c+=1}else return g}function Gd(a,b,c,d,e,g){this.m=a;this.i=b;this.shift=c;this.root=d;this.$=e;this.l=g;this.h=167666463;this.o=139268}f=Gd.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.M=function(a,b){return this.u(null,b,null)};f.u=function(a,b,c){return"number"===typeof b?this.V(null,b,c):c};
f.Xa=function(a,b,c){a=0;for(var d=c;;)if(a<this.i){var e=Td(this,a);c=e.length;a:for(var g=0;;)if(g<c){var h=g+a,k=e[g];d=b.g?b.g(d,h,k):b.call(null,d,h,k);if(sc(d)){e=d;break a}g+=1}else{e=d;break a}if(sc(e))return pb(e);a+=c;d=e}else return d};f.K=function(a,b){return Ud(this,b)[b&31]};f.V=function(a,b,c){return 0<=b&&b<this.i?Td(this,b)[b&31]:c};
f.cb=function(a,b){if(0<=a&&a<this.i){if(Qd(this)<=a){var c=ab(this.$);c[a&31]=b;return new Gd(this.m,this.i,this.shift,this.root,c,null)}return new Gd(this.m,this.i,this.shift,Vd(this,this.shift,this.root,a,b),this.$,null)}if(a===this.i)return this.T(null,b);throw Error(["Index ",F.a(a)," out of bounds  [0,",F.a(this.i),"]"].join(""));};f.Ea=function(){var a=this.i;return new Wd(0<S(this)?Td(this,0):null,this,a)};f.N=function(){return this.m};f.aa=function(){return this.i};
f.J=function(){var a=this.l;return null!=a?a:this.l=a=nc(this)};f.H=function(a,b){if(b instanceof Gd)if(this.i===S(b))for(a=this.Ea(null),b=Tb(b);;)if(a.ea()){var c=a.next(),d=b.next();if(!kc.b(c,d))return!1}else return!0;else return!1;else return Dc(this,b)};f.Oa=function(){return new Zd(this.i,this.shift,$d.a?$d.a(this.root):$d.call(null,this.root),ae.a?ae.a(this.$):ae.call(null,this.$))};f.X=function(a,b){return Xd(this,b,0,this.i)};
f.Y=function(a,b,c){a=0;for(var d=c;;)if(a<this.i){var e=Td(this,a);c=e.length;a:for(var g=0;;)if(g<c){var h=e[g];d=b.b?b.b(d,h):b.call(null,d,h);if(sc(d)){e=d;break a}g+=1}else{e=d;break a}if(sc(e))return pb(e);a+=c;d=e}else return d};f.oa=function(a,b,c){if("number"===typeof b)return this.cb(b,c);throw Error("Vector's key for assoc must be a number.");};
f.I=function(){if(0===this.i)return null;if(32>=this.i)return new O(this.$,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.c[0];else{a=a.c;break a}}return be?be(this,a,0,0):ce.call(null,this,a,0,0)};f.S=function(a,b){return new Gd(b,this.i,this.shift,this.root,this.$,this.l)};
f.T=function(a,b){if(32>this.i-Qd(this)){a=this.$.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.$[d],d+=1;else break;c[a]=b;return new Gd(this.m,this.i+1,this.shift,this.root,c,null)}a=(c=this.i>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=Pd(null),c.c[0]=this.root,d=Rd(null,this.shift,new Od(null,this.$)),c.c[1]=d):c=Sd(this,this.shift,this.root,new Od(null,this.$));return new Gd(this.m,this.i+1,a,c,[b],null)};
f.call=function(){var a=null;a=function(a,c,d){switch(arguments.length){case 2:return this.K(null,c);case 3:return this.V(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(a,c){return this.K(null,c)};a.g=function(a,c,d){return this.V(null,c,d)};return a}();f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.a=function(a){return this.K(null,a)};f.b=function(a,b){return this.V(null,a,b)};
var Hd=new Od(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Gc=new Gd(null,0,5,Hd,[],oc);Gd.prototype[$a]=function(){return mc(this)};function de(a,b,c,d,e){this.vec=a;this.node=b;this.j=c;this.off=d;this.m=e;this.l=null;this.h=32375020;this.o=1536}f=de.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.m};f.ba=function(){if(this.off+1<this.node.length){var a=this.vec;var b=this.node,c=this.j,d=this.off+1;a=be?be(a,b,c,d):ce.call(null,a,b,c,d);return null==a?null:a}return this.ib()};
f.J=function(){var a=this.l;return null!=a?a:this.l=a=nc(this)};f.H=function(a,b){return Dc(this,b)};f.X=function(a,b){return Xd(this.vec,b,this.j+this.off,S(this.vec))};f.Y=function(a,b,c){return Yd(this.vec,b,c,this.j+this.off,S(this.vec))};f.ca=function(){return this.node[this.off]};f.da=function(){if(this.off+1<this.node.length){var a=this.vec;var b=this.node,c=this.j,d=this.off+1;a=be?be(a,b,c,d):ce.call(null,a,b,c,d);return null==a?jc:a}return this.Va(null)};f.I=function(){return this};
f.ab=function(){var a=this.node;return new pd(a,this.off,a.length)};f.Va=function(){var a=this.j+this.node.length;if(a<cb(this.vec)){var b=this.vec,c=Td(this.vec,a);return be?be(b,c,a,0):ce.call(null,b,c,a,0)}return jc};f.S=function(a,b){return ee?ee(this.vec,this.node,this.j,this.off,b):ce.call(null,this.vec,this.node,this.j,this.off,b)};f.T=function(a,b){return V(b,this)};
f.ib=function(){var a=this.j+this.node.length;if(a<cb(this.vec)){var b=this.vec,c=Td(this.vec,a);return be?be(b,c,a,0):ce.call(null,b,c,a,0)}return null};de.prototype[$a]=function(){return mc(this)};
function ce(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new de(b,Ud(b,c),c,d,null);case 4:return be(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return ee(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}}function be(a,b,c,d){return new de(a,b,c,d,null)}function ee(a,b,c,d,e){return new de(a,b,c,d,e)}
function fe(a,b){return a===b.B?b:new Od(a,ab(b.c))}function $d(a){return new Od({},ab(a.c))}function ae(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Vc(a,0,b,0,a.length);return b}var ge=function ge(a,b,c,d){c=fe(a.root.B,c);var g=a.i-1>>>b&31;if(5===b)a=d;else{var h=c.c[g];null!=h?(b-=5,a=ge.w?ge.w(a,b,h,d):ge.call(null,a,b,h,d)):a=Rd(a.root.B,b-5,d)}c.c[g]=a;return c};
function Zd(a,b,c,d){this.i=a;this.shift=b;this.root=c;this.$=d;this.o=88;this.h=275}f=Zd.prototype;
f.Pa=function(a,b){if(this.root.B){if(32>this.i-Qd(this))this.$[this.i&31]=b;else{a=new Od(this.root.B,this.$);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.$=c;this.i>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+5,b[0]=
this.root,b[1]=Rd(this.root.B,this.shift,a),this.root=new Od(this.root.B,b),this.shift=c):this.root=ge(this,this.shift,this.root,a)}this.i+=1;return this}throw Error("conj! after persistent!");};f.Za=function(){if(this.root.B){this.root.B=null;var a=this.i-Qd(this),b=Array(a);Vc(this.$,0,b,0,a);return new Gd(null,this.i,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
f.Ka=function(a,b,c){if("number"===typeof b)return he(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function he(a,b,c){if(a.root.B){if(0<=b&&b<a.i){if(Qd(a)<=b)a.$[b&31]=c;else{var d=function(){return function(){return function k(d,h){h=fe(a.root.B,h);if(0===d)h.c[b&31]=c;else{var g=b>>>d&31;d=k(d-5,h.c[g]);h.c[g]=d}return h}}(a)(a.shift,a.root)}();a.root=d}return a}if(b===a.i)return a.Pa(null,c);throw Error(["Index ",F.a(b)," out of bounds for TransientVector of length",F.a(a.i)].join(""));}throw Error("assoc! after persistent!");}
f.aa=function(){if(this.root.B)return this.i;throw Error("count after persistent!");};f.K=function(a,b){if(this.root.B)return Ud(this,b)[b&31];throw Error("nth after persistent!");};f.V=function(a,b,c){return 0<=b&&b<this.i?this.K(null,b):c};f.M=function(a,b){return this.u(null,b,null)};f.u=function(a,b,c){return"number"===typeof b?this.V(null,b,c):c};
f.call=function(){var a=null;a=function(a,c,d){switch(arguments.length){case 2:return this.M(null,c);case 3:return this.u(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(a,c){return this.M(null,c)};a.g=function(a,c,d){return this.u(null,c,d)};return a}();f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.a=function(a){return this.M(null,a)};f.b=function(a,b){return this.u(null,a,b)};function ie(){this.h=2097152;this.o=0}ie.prototype.H=function(){return!1};
var je=new ie;function ke(a,b){return Xc(Rc(b)&&!Sc(b)?S(a)===S(b)?(null!=a?a.h&1048576||y===a.Rb||(a.h?0:B(wb,a)):B(wb,a))?ed(function(a,d,e){return kc.b(K.g(b,d,je),e)?!0:new rc},a):Kd(function(a){return kc.b(K.g(b,P(a),je),P(Q(a)))},a):null:null)}function le(a){this.v=a}le.prototype.next=function(){if(null!=this.v){var a=P(this.v),b=Jc(a,0,null);a=Jc(a,1,null);this.v=Q(this.v);return{value:[b,a],done:!1}}return{value:null,done:!0}};
function Lc(a,b){if(b instanceof W)a:{var c=a.length;b=b.Ha;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof W&&b===a[d].Ha){a=d;break a}d+=2}}else if("string"==typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof gc)a:for(c=a.length,b=b.Ia,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof gc&&b===a[d].Ia){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(kc.b(b,a[d])){a=d;break a}d+=2}return a}function me(a,b){this.key=a;this.G=b;this.l=null;this.h=166619935;this.o=0}f=me.prototype;f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.M=function(a,b){return this.V(null,b,null)};f.u=function(a,b,c){return this.V(null,b,c)};f.K=function(a,b){if(0===b)return this.key;if(1===b)return this.G;throw Error("Index out of bounds");};
f.V=function(a,b,c){return 0===b?this.key:1===b?this.G:c};f.cb=function(a,b){return(new Gd(null,2,5,Hd,[this.key,this.G],null)).cb(a,b)};f.N=function(){return null};f.aa=function(){return 2};f.vb=function(){return this.key};f.wb=function(){return this.G};f.J=function(){var a=this.l;return null!=a?a:this.l=a=nc(this)};f.H=function(a,b){return Dc(this,b)};
f.X=function(a,b){a:if(a=cb(this),0===a)b=b.C?b.C():b.call(null);else for(var c=G.b(this,0),d=1;;)if(d<a){var e=G.b(this,d);c=b.b?b.b(c,e):b.call(null,c,e);if(sc(c)){b=pb(c);break a}d+=1}else{b=c;break a}return b};f.Y=function(a,b,c){a:{a=cb(this);var d=c;for(c=0;;)if(c<a){var e=G.b(this,c);d=b.b?b.b(d,e):b.call(null,d,e);if(sc(d)){b=pb(d);break a}c+=1}else{b=d;break a}}return b};f.oa=function(a,b,c){return Kc.g(new Gd(null,2,5,Hd,[this.key,this.G],null),b,c)};
f.I=function(){return new O([this.key,this.G],0,null)};f.S=function(a,b){return Oc(new Gd(null,2,5,Hd,[this.key,this.G],null),b)};f.T=function(a,b){return new Gd(null,3,5,Hd,[this.key,this.G,b],null)};f.call=function(){var a=null;a=function(a,c,d){switch(arguments.length){case 2:return this.K(null,c);case 3:return this.V(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(a,c){return this.K(null,c)};a.g=function(a,c,d){return this.V(null,c,d)};return a}();
f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.a=function(a){return this.K(null,a)};f.b=function(a,b){return this.V(null,a,b)};function ne(a){return null!=a?a.h&2048||y===a.Ub?!0:!1:!1}function oe(a,b,c){this.c=a;this.j=b;this.ga=c;this.h=32374990;this.o=0}f=oe.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.ga};f.ba=function(){return this.j<this.c.length-2?new oe(this.c,this.j+2,this.ga):null};f.aa=function(){return(this.c.length-this.j)/2};f.J=function(){return nc(this)};
f.H=function(a,b){return Dc(this,b)};f.X=function(a,b){return Yc(b,this)};f.Y=function(a,b,c){return bd(b,c,this)};f.ca=function(){return new me(this.c[this.j],this.c[this.j+1])};f.da=function(){return this.j<this.c.length-2?new oe(this.c,this.j+2,this.ga):jc};f.I=function(){return this};f.S=function(a,b){return new oe(this.c,this.j,b)};f.T=function(a,b){return V(b,this)};oe.prototype[$a]=function(){return mc(this)};function pe(a,b){this.c=a;this.j=0;this.i=b}
pe.prototype.ea=function(){return this.j<this.i};pe.prototype.next=function(){var a=new me(this.c[this.j],this.c[this.j+1]);this.j+=2;return a};function Oa(a,b,c,d){this.m=a;this.i=b;this.c=c;this.l=d;this.h=16647951;this.o=139268}f=Oa.prototype;f.toString=function(){return Vb(this)};f.keys=function(){return mc(qe.a?qe.a(this):qe.call(null,this))};f.entries=function(){return new le(M(M(this)))};f.values=function(){return mc(re.a?re.a(this):re.call(null,this))};
f.has=function(a){return K.g(this,a,Wc)===Wc?!1:!0};f.get=function(a,b){return this.u(null,a,b)};f.forEach=function(a){for(var b=M(this),c=null,d=0,e=0;;)if(e<d){var g=c.K(null,e),h=Jc(g,0,null);g=Jc(g,1,null);a.b?a.b(g,h):a.call(null,g,h);e+=1}else if(b=M(b))Uc(b)?(c=Ob(b),b=Pb(b),h=c,d=S(c),c=h):(c=P(b),h=Jc(c,0,null),g=Jc(c,1,null),a.b?a.b(g,h):a.call(null,g,h),b=Q(b),c=null,d=0),e=0;else return null};f.M=function(a,b){return this.u(null,b,null)};
f.u=function(a,b,c){a=Lc(this.c,b);return-1===a?c:this.c[a+1]};f.Xa=function(a,b,c){a=this.c.length;for(var d=0;;)if(d<a){var e=this.c[d],g=this.c[d+1];c=b.g?b.g(c,e,g):b.call(null,c,e,g);if(sc(c))return pb(c);d+=2}else return c};f.Ea=function(){return new pe(this.c,2*this.i)};f.N=function(){return this.m};f.aa=function(){return this.i};f.J=function(){var a=this.l;return null!=a?a:this.l=a=pc(this)};
f.H=function(a,b){if(Rc(b)&&!Sc(b))if(a=this.c.length,this.i===b.aa(null))for(var c=0;;)if(c<a){var d=b.u(null,this.c[c],Wc);if(d!==Wc)if(kc.b(this.c[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};f.Oa=function(){return new se(this.c.length,ab(this.c))};f.X=function(a,b){return cd(this,b)};f.Y=function(a,b,c){return dd(this,b,c)};
f.oa=function(a,b,c){a=Lc(this.c,b);if(-1===a){if(this.i<te){a=this.c;for(var d=a.length,e=Array(d+2),g=0;;)if(g<d)e[g]=a[g],g+=1;else break;e[d]=b;e[d+1]=c;return new Oa(this.m,this.i+1,e,null)}a=ue;a=null!=a?null!=a&&(a.o&4||y===a.Ob)?sb(Kb($c(Jb,Ib(a),this)),Pc(a)):$c(eb,a,this):$c(Fc,jc,this);return sb(kb(a,b,c),this.m)}if(c===this.c[a+1])return this;b=ab(this.c);b[a+1]=c;return new Oa(this.m,this.i,b,null)};f.I=function(){var a=this.c;return 0<=a.length-2?new oe(a,0,null):null};
f.S=function(a,b){return new Oa(b,this.i,this.c,this.l)};f.T=function(a,b){if(Tc(b))return this.oa(null,G.b(b,0),G.b(b,1));a=this;for(b=M(b);;){if(null==b)return a;var c=P(b);if(Tc(c))a=a.oa(null,G.b(c,0),G.b(c,1)),b=Q(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
f.call=function(){var a=null;a=function(a,c,d){switch(arguments.length){case 2:return this.M(null,c);case 3:return this.u(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(a,c){return this.M(null,c)};a.g=function(a,c,d){return this.u(null,c,d)};return a}();f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.a=function(a){return this.M(null,a)};f.b=function(a,b){return this.u(null,a,b)};var Jd=new Oa(null,0,[],qc),te=8;Oa.prototype[$a]=function(){return mc(this)};
function se(a,b){this.Na={};this.len=a;this.c=b;this.h=259;this.o=56}f=se.prototype;f.aa=function(){if(z(this.Na))return gd(this.len);throw Error("count after persistent!");};f.M=function(a,b){return this.u(null,b,null)};f.u=function(a,b,c){if(z(this.Na))return a=Lc(this.c,b),-1===a?c:this.c[a+1];throw Error("lookup after persistent!");};
f.Pa=function(a,b){if(z(this.Na)){if(ne(b))return this.Ka(null,ve.a?ve.a(b):ve.call(null,b),we.a?we.a(b):we.call(null,b));if(Tc(b))return this.Ka(null,b.a?b.a(0):b.call(null,0),b.a?b.a(1):b.call(null,1));a=M(b);for(b=this;;){var c=P(a);if(z(c))a=Q(a),b=b.Ka(null,ve.a?ve.a(c):ve.call(null,c),we.a?we.a(c):we.call(null,c));else return b}}else throw Error("conj! after persistent!");};
f.Za=function(){if(z(this.Na))return this.Na=!1,new Oa(null,gd(this.len),this.c,null);throw Error("persistent! called twice");};f.Ka=function(a,b,c){if(z(this.Na)){a=Lc(this.c,b);if(-1===a){if(this.len+2<=2*te)return this.len+=2,this.c.push(b),this.c.push(c),this;a=xe.b?xe.b(this.len,this.c):xe.call(null,this.len,this.c);return Mb(a,b,c)}c!==this.c[a+1]&&(this.c[a+1]=c);return this}throw Error("assoc! after persistent!");};
f.call=function(){var a=null;a=function(a,c,d){switch(arguments.length){case 2:return this.u(null,c,null);case 3:return this.u(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(a,c){return this.u(null,c,null)};a.g=function(a,c,d){return this.u(null,c,d)};return a}();f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.a=function(a){return this.u(null,a,null)};f.b=function(a,b){return this.u(null,a,b)};
function xe(a,b){for(var c=Ib(ue),d=0;;)if(d<a)c=Mb(c,b[d],b[d+1]),d+=2;else return c}function ye(){this.G=!1}function ze(a,b){return a===b?!0:a===b||a instanceof W&&b instanceof W&&a.Ha===b.Ha?!0:kc.b(a,b)}function Ae(a,b,c){a=ab(a);a[b]=c;return a}function Be(a,b,c,d){a=a.La(b);a.c[c]=d;return a}function Ce(a,b,c){for(var d=a.length,e=0,g=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.g?b.g(g,c,h):b.call(null,g,c,h)}else c=a[e+1],c=null!=c?c.Sa(b,g):g;if(sc(c))return c;e+=2;g=c}else return g}
function De(a){this.c=a;this.j=0;this.ka=this.Ta=null}De.prototype.advance=function(){for(var a=this.c.length;;)if(this.j<a){var b=this.c[this.j],c=this.c[this.j+1];null!=b?b=this.Ta=new me(b,c):null!=c?(b=Tb(c),b=b.ea()?this.ka=b:!1):b=!1;this.j+=2;if(b)return!0}else return!1};De.prototype.ea=function(){var a=null!=this.Ta;return a?a:(a=null!=this.ka)?a:this.advance()};
De.prototype.next=function(){if(null!=this.Ta){var a=this.Ta;this.Ta=null;return a}if(null!=this.ka)return a=this.ka.next(),this.ka.ea()||(this.ka=null),a;if(this.advance())return this.next();throw Error("No such element");};De.prototype.remove=function(){return Error("Unsupported operation")};function Fe(a,b,c){this.B=a;this.bitmap=b;this.c=c;this.o=131072;this.h=0}f=Fe.prototype;
f.La=function(a){if(a===this.B)return this;var b=hd(this.bitmap),c=Array(0>b?4:2*(b+1));Vc(this.c,0,c,0,2*b);return new Fe(a,this.bitmap,c)};f.Ra=function(){return Ge?Ge(this.c):He.call(null,this.c)};f.Sa=function(a,b){return Ce(this.c,a,b)};f.Ma=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var g=hd(this.bitmap&e-1);e=this.c[2*g];g=this.c[2*g+1];return null==e?g.Ma(a+5,b,c,d):ze(c,e)?g:d};
f.ia=function(a,b,c,d,e,g){var h=1<<(c>>>b&31),k=hd(this.bitmap&h-1);if(0===(this.bitmap&h)){var l=hd(this.bitmap);if(2*l<this.c.length){a=this.La(a);b=a.c;g.G=!0;c=2*(l-k);g=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[g],--l,--c,--g;b[2*k]=d;b[2*k+1]=e;a.bitmap|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Ie.ia(a,b+5,c,d,e,g);for(e=d=0;;)if(32>d)0===
(this.bitmap>>>d&1)?d+=1:(k[d]=null!=this.c[e]?Ie.ia(a,b+5,ec(this.c[e]),this.c[e],this.c[e+1],g):this.c[e+1],e+=2,d+=1);else break;return new Je(a,l+1,k)}b=Array(2*(l+4));Vc(this.c,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;Vc(this.c,2*k,b,2*(k+1),2*(l-k));g.G=!0;a=this.La(a);a.c=b;a.bitmap|=h;return a}l=this.c[2*k];h=this.c[2*k+1];if(null==l)return l=h.ia(a,b+5,c,d,e,g),l===h?this:Be(this,a,2*k+1,l);if(ze(d,l))return e===h?this:Be(this,a,2*k+1,e);g.G=!0;g=b+5;d=Ke?Ke(a,g,l,h,c,d,e):Le.call(null,a,g,l,h,c,d,
e);e=2*k;k=2*k+1;a=this.La(a);a.c[e]=null;a.c[k]=d;return a};
f.ha=function(a,b,c,d,e){var g=1<<(b>>>a&31),h=hd(this.bitmap&g-1);if(0===(this.bitmap&g)){var k=hd(this.bitmap);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=Ie.ha(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.bitmap>>>c&1)?c+=1:(h[c]=null!=this.c[d]?Ie.ha(a+5,ec(this.c[d]),this.c[d],this.c[d+1],e):this.c[d+1],d+=2,c+=1);else break;return new Je(null,k+1,h)}a=Array(2*
(k+1));Vc(this.c,0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;Vc(this.c,2*h,a,2*(h+1),2*(k-h));e.G=!0;return new Fe(null,this.bitmap|g,a)}var l=this.c[2*h];g=this.c[2*h+1];if(null==l)return k=g.ha(a+5,b,c,d,e),k===g?this:new Fe(null,this.bitmap,Ae(this.c,2*h+1,k));if(ze(c,l))return d===g?this:new Fe(null,this.bitmap,Ae(this.c,2*h+1,d));e.G=!0;e=this.bitmap;k=this.c;a+=5;a=Me?Me(a,l,g,b,c,d):Le.call(null,a,l,g,b,c,d);c=2*h;h=2*h+1;d=ab(k);d[c]=null;d[h]=a;return new Fe(null,e,d)};f.Ea=function(){return new De(this.c)};
var Ie=new Fe(null,0,[]);function Ne(a){this.c=a;this.j=0;this.ka=null}Ne.prototype.ea=function(){for(var a=this.c.length;;){if(null!=this.ka&&this.ka.ea())return!0;if(this.j<a){var b=this.c[this.j];this.j+=1;null!=b&&(this.ka=Tb(b))}else return!1}};Ne.prototype.next=function(){if(this.ea())return this.ka.next();throw Error("No such element");};Ne.prototype.remove=function(){return Error("Unsupported operation")};function Je(a,b,c){this.B=a;this.i=b;this.c=c;this.o=131072;this.h=0}f=Je.prototype;
f.La=function(a){return a===this.B?this:new Je(a,this.i,ab(this.c))};f.Ra=function(){return Oe?Oe(this.c):Pe.call(null,this.c)};f.Sa=function(a,b){for(var c=this.c.length,d=0;;)if(d<c){var e=this.c[d];if(null!=e){b=e.Sa(a,b);if(sc(b))return b;d+=1}else d+=1}else return b};f.Ma=function(a,b,c,d){var e=this.c[b>>>a&31];return null!=e?e.Ma(a+5,b,c,d):d};
f.ia=function(a,b,c,d,e,g){var h=c>>>b&31,k=this.c[h];if(null==k)return a=Be(this,a,h,Ie.ia(a,b+5,c,d,e,g)),a.i+=1,a;b=k.ia(a,b+5,c,d,e,g);return b===k?this:Be(this,a,h,b)};f.ha=function(a,b,c,d,e){var g=b>>>a&31,h=this.c[g];if(null==h)return new Je(null,this.i+1,Ae(this.c,g,Ie.ha(a+5,b,c,d,e)));a=h.ha(a+5,b,c,d,e);return a===h?this:new Je(null,this.i,Ae(this.c,g,a))};f.Ea=function(){return new Ne(this.c)};function Qe(a,b,c){b*=2;for(var d=0;;)if(d<b){if(ze(c,a[d]))return d;d+=2}else return-1}
function Re(a,b,c,d){this.B=a;this.Ga=b;this.i=c;this.c=d;this.o=131072;this.h=0}f=Re.prototype;f.La=function(a){if(a===this.B)return this;var b=Array(2*(this.i+1));Vc(this.c,0,b,0,2*this.i);return new Re(a,this.Ga,this.i,b)};f.Ra=function(){return Ge?Ge(this.c):He.call(null,this.c)};f.Sa=function(a,b){return Ce(this.c,a,b)};f.Ma=function(a,b,c,d){a=Qe(this.c,this.i,c);return 0>a?d:ze(c,this.c[a])?this.c[a+1]:d};
f.ia=function(a,b,c,d,e,g){if(c===this.Ga){b=Qe(this.c,this.i,d);if(-1===b){if(this.c.length>2*this.i)return b=2*this.i,c=2*this.i+1,a=this.La(a),a.c[b]=d,a.c[c]=e,g.G=!0,a.i+=1,a;c=this.c.length;b=Array(c+2);Vc(this.c,0,b,0,c);b[c]=d;b[c+1]=e;g.G=!0;d=this.i+1;a===this.B?(this.c=b,this.i=d,a=this):a=new Re(this.B,this.Ga,d,b);return a}return this.c[b+1]===e?this:Be(this,a,b+1,e)}return(new Fe(a,1<<(this.Ga>>>b&31),[null,this,null,null])).ia(a,b,c,d,e,g)};
f.ha=function(a,b,c,d,e){return b===this.Ga?(a=Qe(this.c,this.i,c),-1===a?(a=2*this.i,b=Array(a+2),Vc(this.c,0,b,0,a),b[a]=c,b[a+1]=d,e.G=!0,new Re(null,this.Ga,this.i+1,b)):kc.b(this.c[a+1],d)?this:new Re(null,this.Ga,this.i,Ae(this.c,a+1,d))):(new Fe(null,1<<(this.Ga>>>a&31),[null,this])).ha(a,b,c,d,e)};f.Ea=function(){return new De(this.c)};
function Le(a){switch(arguments.length){case 6:return Me(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Ke(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}}function Me(a,b,c,d,e,g){var h=ec(b);if(h===d)return new Re(null,h,2,[b,c,e,g]);var k=new ye;return Ie.ha(a,h,b,c,k).ha(a,d,e,g,k)}
function Ke(a,b,c,d,e,g,h){var k=ec(c);if(k===e)return new Re(null,k,2,[c,d,g,h]);var l=new ye;return Ie.ia(a,b,k,c,d,l).ia(a,b,e,g,h,l)}function Se(a,b,c,d,e){this.m=a;this.la=b;this.j=c;this.v=d;this.l=e;this.h=32374988;this.o=0}f=Se.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.m};f.ba=function(){if(null==this.v){var a=this.la,b=this.j+2;return Te?Te(a,b,null):He.call(null,a,b,null)}a=this.la;b=this.j;var c=Q(this.v);return Te?Te(a,b,c):He.call(null,a,b,c)};
f.J=function(){var a=this.l;return null!=a?a:this.l=a=nc(this)};f.H=function(a,b){return Dc(this,b)};f.X=function(a,b){return Yc(b,this)};f.Y=function(a,b,c){return bd(b,c,this)};f.ca=function(){return null==this.v?new me(this.la[this.j],this.la[this.j+1]):P(this.v)};f.da=function(){var a=this,b=null==a.v?function(){var b=a.la,d=a.j+2;return Te?Te(b,d,null):He.call(null,b,d,null)}():function(){var b=a.la,d=a.j,e=Q(a.v);return Te?Te(b,d,e):He.call(null,b,d,e)}();return null!=b?b:jc};f.I=function(){return this};
f.S=function(a,b){return new Se(b,this.la,this.j,this.v,this.l)};f.T=function(a,b){return V(b,this)};Se.prototype[$a]=function(){return mc(this)};function He(a){switch(arguments.length){case 1:return Ge(arguments[0]);case 3:return Te(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}}function Ge(a){return Te(a,0,null)}
function Te(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new Se(null,a,b,null,null);var d=a[b+1];if(z(d)&&(d=d.Ra(),z(d)))return new Se(null,a,b+2,d,null);b+=2}else return null;else return new Se(null,a,b,c,null)}function Ue(a,b,c,d,e){this.m=a;this.la=b;this.j=c;this.v=d;this.l=e;this.h=32374988;this.o=0}f=Ue.prototype;f.toString=function(){return Vb(this)};
f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.m};f.ba=function(){var a=this.la,b=this.j,c=Q(this.v);return Ve?Ve(null,a,b,c):Pe.call(null,null,a,b,c)};f.J=function(){var a=this.l;return null!=a?a:this.l=a=nc(this)};
f.H=function(a,b){return Dc(this,b)};f.X=function(a,b){return Yc(b,this)};f.Y=function(a,b,c){return bd(b,c,this)};f.ca=function(){return P(this.v)};f.da=function(){var a=this.la;var b=this.j,c=Q(this.v);a=Ve?Ve(null,a,b,c):Pe.call(null,null,a,b,c);return null!=a?a:jc};f.I=function(){return this};f.S=function(a,b){return new Ue(b,this.la,this.j,this.v,this.l)};f.T=function(a,b){return V(b,this)};Ue.prototype[$a]=function(){return mc(this)};
function Pe(a){switch(arguments.length){case 1:return Oe(arguments[0]);case 4:return Ve(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",F.a(arguments.length)].join(""));}}function Oe(a){return Ve(null,a,0,null)}function Ve(a,b,c,d){if(null==d)for(d=b.length;;)if(c<d){var e=b[c];if(z(e)&&(e=e.Ra(),z(e)))return new Ue(a,b,c+1,e,null);c+=1}else return null;else return new Ue(a,b,c,d,null)}function We(a,b){this.Z=a;this.ob=b;this.gb=!1}
We.prototype.ea=function(){return!this.gb||this.ob.ea()};We.prototype.next=function(){if(this.gb)return this.ob.next();this.gb=!0;return new me(null,this.Z)};We.prototype.remove=function(){return Error("Unsupported operation")};function Xe(a,b,c,d,e,g){this.m=a;this.i=b;this.root=c;this.fa=d;this.Z=e;this.l=g;this.h=16123663;this.o=139268}f=Xe.prototype;f.toString=function(){return Vb(this)};f.keys=function(){return mc(qe.a?qe.a(this):qe.call(null,this))};f.entries=function(){return new le(M(M(this)))};
f.values=function(){return mc(re.a?re.a(this):re.call(null,this))};f.has=function(a){return K.g(this,a,Wc)===Wc?!1:!0};f.get=function(a,b){return this.u(null,a,b)};f.forEach=function(a){for(var b=M(this),c=null,d=0,e=0;;)if(e<d){var g=c.K(null,e),h=Jc(g,0,null);g=Jc(g,1,null);a.b?a.b(g,h):a.call(null,g,h);e+=1}else if(b=M(b))Uc(b)?(c=Ob(b),b=Pb(b),h=c,d=S(c),c=h):(c=P(b),h=Jc(c,0,null),g=Jc(c,1,null),a.b?a.b(g,h):a.call(null,g,h),b=Q(b),c=null,d=0),e=0;else return null};
f.M=function(a,b){return this.u(null,b,null)};f.u=function(a,b,c){return null==b?this.fa?this.Z:c:null==this.root?c:this.root.Ma(0,ec(b),b,c)};f.Xa=function(a,b,c){a=this.fa?b.g?b.g(c,null,this.Z):b.call(null,c,null,this.Z):c;sc(a)?b=pb(a):null!=this.root?(b=this.root.Sa(b,a),b=sc(b)?tc.a?tc.a(b):tc.call(null,b):b):b=a;return b};f.Ea=function(){var a=this.root?Tb(this.root):Fd();return this.fa?new We(this.Z,a):a};f.N=function(){return this.m};f.aa=function(){return this.i};
f.J=function(){var a=this.l;return null!=a?a:this.l=a=pc(this)};f.H=function(a,b){return ke(this,b)};f.Oa=function(){return new Ye(this.root,this.i,this.fa,this.Z)};f.oa=function(a,b,c){if(null==b)return this.fa&&c===this.Z?this:new Xe(this.m,this.fa?this.i:this.i+1,this.root,!0,c,null);a=new ye;b=(null==this.root?Ie:this.root).ha(0,ec(b),b,c,a);return b===this.root?this:new Xe(this.m,a.G?this.i+1:this.i,b,this.fa,this.Z,null)};
f.I=function(){if(0<this.i){var a=null!=this.root?this.root.Ra():null;return this.fa?V(new me(null,this.Z),a):a}return null};f.S=function(a,b){return new Xe(b,this.i,this.root,this.fa,this.Z,this.l)};f.T=function(a,b){if(Tc(b))return this.oa(null,G.b(b,0),G.b(b,1));a=this;for(b=M(b);;){if(null==b)return a;var c=P(b);if(Tc(c))a=a.oa(null,G.b(c,0),G.b(c,1)),b=Q(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
f.call=function(){var a=null;a=function(a,c,d){switch(arguments.length){case 2:return this.M(null,c);case 3:return this.u(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(a,c){return this.M(null,c)};a.g=function(a,c,d){return this.u(null,c,d)};return a}();f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.a=function(a){return this.M(null,a)};f.b=function(a,b){return this.u(null,a,b)};var ue=new Xe(null,0,null,!1,null,qc);Xe.prototype[$a]=function(){return mc(this)};
function Ye(a,b,c,d){this.B={};this.root=a;this.count=b;this.fa=c;this.Z=d;this.h=259;this.o=56}function Ze(a,b,c){if(a.B){if(null==b)a.Z!==c&&(a.Z=c),a.fa||(a.count+=1,a.fa=!0);else{var d=new ye;b=(null==a.root?Ie:a.root).ia(a.B,0,ec(b),b,c,d);b!==a.root&&(a.root=b);d.G&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}f=Ye.prototype;f.aa=function(){if(this.B)return this.count;throw Error("count after persistent!");};
f.M=function(a,b){return null==b?this.fa?this.Z:null:null==this.root?null:this.root.Ma(0,ec(b),b)};f.u=function(a,b,c){return null==b?this.fa?this.Z:c:null==this.root?c:this.root.Ma(0,ec(b),b,c)};f.Pa=function(a,b){a:if(this.B)if(ne(b))a=Ze(this,mb(b),nb(b));else if(Tc(b))a=Ze(this,b.a?b.a(0):b.call(null,0),b.a?b.a(1):b.call(null,1));else for(a=M(b),b=this;;){var c=P(a);if(z(c))a=Q(a),b=Ze(b,mb(c),nb(c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
f.Za=function(){if(this.B){this.B=null;var a=new Xe(null,this.count,this.root,this.fa,this.Z,null)}else throw Error("persistent! called twice");return a};f.Ka=function(a,b,c){return Ze(this,b,c)};f.call=function(){var a=null;a=function(a,c,d){switch(arguments.length){case 2:return this.M(null,c);case 3:return this.u(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(a,c){return this.M(null,c)};a.g=function(a,c,d){return this.u(null,c,d)};return a}();
f.apply=function(a,b){return this.call.apply(this,[this].concat(ab(b)))};f.a=function(a){return this.M(null,a)};f.b=function(a,b){return this.u(null,a,b)};var $e=function $e(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return $e.A(0<c.length?new O(c.slice(0),0,null):null)};$e.A=function(a){for(var b=M(a),c=Ib(ue);;)if(b){a=Q(Q(b));var d=P(b);b=P(Q(b));c=Mb(c,d,b);b=a}else return Kb(c)};$e.R=0;$e.P=function(a){return this.A(M(a))};
function af(a,b){this.s=a;this.ga=b;this.h=32374988;this.o=0}f=af.prototype;f.toString=function(){return Vb(this)};f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.ga};f.ba=function(){var a=(null!=this.s?this.s.h&128||y===this.s.Ya||(this.s.h?0:B(gb,this.s)):B(gb,this.s))?this.s.ba():Q(this.s);return null==a?null:new af(a,this.ga)};f.J=function(){return nc(this)};
f.H=function(a,b){return Dc(this,b)};f.X=function(a,b){return Yc(b,this)};f.Y=function(a,b,c){return bd(b,c,this)};f.ca=function(){return this.s.ca(null).key};f.da=function(){var a=(null!=this.s?this.s.h&128||y===this.s.Ya||(this.s.h?0:B(gb,this.s)):B(gb,this.s))?this.s.ba():Q(this.s);return null!=a?new af(a,this.ga):jc};f.I=function(){return this};f.S=function(a,b){return new af(this.s,b)};f.T=function(a,b){return V(b,this)};af.prototype[$a]=function(){return mc(this)};
function qe(a){return(a=M(a))?new af(a,null):null}function ve(a){return mb(a)}function bf(a,b){this.s=a;this.ga=b;this.h=32374988;this.o=0}f=bf.prototype;f.toString=function(){return Vb(this)};f.indexOf=function(){var a=null;a=function(a,c){switch(arguments.length){case 1:return R(this,a,0);case 2:return R(this,a,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(a){return R(this,a,0)};a.b=function(a,c){return R(this,a,c)};return a}();
f.lastIndexOf=function(){function a(a){return T(this,a,S(this))}var b=null;b=function(b,d){switch(arguments.length){case 1:return a.call(this,b);case 2:return T(this,b,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(a,b){return T(this,a,b)};return b}();f.N=function(){return this.ga};f.ba=function(){var a=(null!=this.s?this.s.h&128||y===this.s.Ya||(this.s.h?0:B(gb,this.s)):B(gb,this.s))?this.s.ba():Q(this.s);return null==a?null:new bf(a,this.ga)};f.J=function(){return nc(this)};
f.H=function(a,b){return Dc(this,b)};f.X=function(a,b){return Yc(b,this)};f.Y=function(a,b,c){return bd(b,c,this)};f.ca=function(){return this.s.ca(null).G};f.da=function(){var a=(null!=this.s?this.s.h&128||y===this.s.Ya||(this.s.h?0:B(gb,this.s)):B(gb,this.s))?this.s.ba():Q(this.s);return null!=a?new bf(a,this.ga):jc};f.I=function(){return this};f.S=function(a,b){return new bf(this.s,b)};f.T=function(a,b){return V(b,this)};bf.prototype[$a]=function(){return mc(this)};
function re(a){return(a=M(a))?new bf(a,null):null}function we(a){return nb(a)}function ld(a){if(null!=a&&(a.o&4096||y===a.yb))return a.name;if("string"===typeof a)return a;throw Error(["Doesn't support name: ",F.a(a)].join(""));}
function cf(a,b,c,d,e,g,h){var k=La;La=null==La?null:La-1;try{if(null!=La&&0>La)return J(a,"#");J(a,c);if(0===Ua.a(g))M(h)&&J(a,function(){var a=df.a(g);return z(a)?a:"..."}());else{if(M(h)){var l=P(h);b.g?b.g(l,a,g):b.call(null,l,a,g)}for(var m=Q(h),n=Ua.a(g)-1;;)if(!m||null!=n&&0===n){M(m)&&0===n&&(J(a,d),J(a,function(){var a=df.a(g);return z(a)?a:"..."}()));break}else{J(a,d);var p=P(m);c=a;h=g;b.g?b.g(p,c,h):b.call(null,p,c,h);var q=Q(m);c=n-1;m=q;n=c}}return J(a,e)}finally{La=k}}
function ef(a,b){b=M(b);for(var c=null,d=0,e=0;;)if(e<d){var g=c.K(null,e);J(a,g);e+=1}else if(b=M(b))c=b,Uc(c)?(b=Ob(c),d=Pb(c),c=b,g=S(b),b=d,d=g):(g=P(c),J(a,g),b=Q(c),c=null,d=0),e=0;else return null}var ff={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function gf(a){return[F.a('"'),F.a(a.replace(/[\\"\b\f\n\r\t]/g,function(a){return ff[a]})),F.a('"')].join("")}function hf(a,b){return(a=Xc(K.b(a,Sa)))?(a=null!=b?b.h&131072||y===b.xb?!0:!1:!1)?null!=Pc(b):a:a}
function jf(a,b,c){if(null==a)return J(b,"nil");if(hf(c,a)){J(b,"^");var d=Pc(a);Y.g?Y.g(d,b,c):Y.call(null,d,b,c);J(b," ")}if(a.nb)return a.Gb(b);if(null!=a?a.h&2147483648||y===a.W||(a.h?0:B(Fb,a)):B(Fb,a))return Gb(a,b,c);if(!0===a||!1===a)return J(b,F.a(a));if("number"===typeof a)return J(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":F.a(a));if(null!=a&&a.constructor===Object)return J(b,"#js "),d=X.b(function(b){var c=/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/;
if("string"===typeof b)if(c=c.exec(b),kc.b(P(c),b))if(1===S(c))c=P(c);else if(z(ne.a?ne.a(c):ne.call(null,c)))c=new Gd(null,2,5,Hd,[ve.a?ve.a(c):ve.call(null,c),we.a?we.a(c):we.call(null,c)],null);else if(Tc(c))c=Oc(c,null);else if(Xa(c))b:{var d=c.length;if(32>d)c=new Gd(null,d,5,Hd,c,null);else for(var e=32,g=(new Gd(null,32,5,Hd,c.slice(0,32),null)).Oa(null);;)if(e<d){var n=e+1;g=vd.b(g,c[e]);e=n}else{c=Kb(g);break b}}else c=Kb($c(Jb,Ib(Gc),c));else c=null;else throw new TypeError("re-matches must match against a string.");
return new me(null!=c?kd.a(b):b,a[b])},Ba(a)),kf.w?kf.w(d,Y,b,c):kf.call(null,d,Y,b,c);if(Xa(a))return cf(b,Y,"#js ["," ","]",c,a);if("string"==typeof a)return z(Ra.a(c))?J(b,gf(a)):J(b,a);if("function"==t(a)){var e=a.name;c=z(function(){var a=null==e;return a?a:/^[\s\xa0]*$/.test(e)}())?"Function":e;return ef(b,Ec(["#object[",c,"","]"]))}if(a instanceof Date)return c=function(a,b){for(a=F.a(a);;)if(S(a)<b)a=["0",F.a(a)].join("");else return a},ef(b,Ec(['#inst "',F.a(a.getUTCFullYear()),"-",c(a.getUTCMonth()+
1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return ef(b,Ec(['#"',a.source,'"']));if(z(function(){var b=null==a?null:a.constructor;return null==b?null:b.$a}()))return ef(b,Ec(["#object[",a.constructor.$a.replace(/\//g,"."),"]"]));e=function(){var b=null==a?null:a.constructor;return null==b?null:b.name}();c=z(function(){var a=null==e;return a?a:/^[\s\xa0]*$/.test(e)}())?
"Object":e;return null==a.constructor?ef(b,Ec(["#object[",c,"]"])):ef(b,Ec(["#object[",c," ",F.a(a),"]"]))}function Y(a,b,c){var d=lf.a(c);return z(d)?(c=Kc.g(c,mf,jf),d.g?d.g(a,b,c):d.call(null,a,b,c)):jf(a,b,c)}function nf(a,b){var c=new Da;a:{var d=new Ub(c);Y(P(a),d,b);a=M(Q(a));for(var e=null,g=0,h=0;;)if(h<g){var k=e.K(null,h);J(d," ");Y(k,d,b);h+=1}else if(a=M(a))e=a,Uc(e)?(a=Ob(e),g=Pb(e),e=a,k=S(a),a=g,g=k):(k=P(e),J(d," "),Y(k,d,b),a=Q(e),e=null,g=0),h=0;else break a}return c}
function of(a,b,c,d,e){return cf(d,function(a,b,d){var e=mb(a);c.g?c.g(e,b,d):c.call(null,e,b,d);J(b," ");a=nb(a);return c.g?c.g(a,b,d):c.call(null,a,b,d)},[F.a(a),"{"].join(""),", ","}",e,M(b))}function kf(a,b,c,d){var e=(Rc(a),null),g=Jc(e,0,null);e=Jc(e,1,null);return z(g)?of(["#:",F.a(g)].join(""),e,b,c,d):of(null,a,b,c,d)}O.prototype.W=y;O.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};md.prototype.W=y;md.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};
me.prototype.W=y;me.prototype.O=function(a,b,c){return cf(b,Y,"["," ","]",c,this)};Se.prototype.W=y;Se.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};oe.prototype.W=y;oe.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};de.prototype.W=y;de.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};jd.prototype.W=y;jd.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};Xe.prototype.W=y;Xe.prototype.O=function(a,b,c){return kf(this,Y,b,c)};
Ue.prototype.W=y;Ue.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};qd.prototype.W=y;qd.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};Ld.prototype.W=y;Ld.prototype.O=function(a,b,c){J(b,"#object [cljs.core.Atom ");Y(new Oa(null,1,[pf,this.state],null),b,c);return J(b,"]")};bf.prototype.W=y;bf.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};Gd.prototype.W=y;Gd.prototype.O=function(a,b,c){return cf(b,Y,"["," ","]",c,this)};id.prototype.W=y;
id.prototype.O=function(a,b){return J(b,"()")};Oa.prototype.W=y;Oa.prototype.O=function(a,b,c){return kf(this,Y,b,c)};af.prototype.W=y;af.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};Hc.prototype.W=y;Hc.prototype.O=function(a,b,c){return cf(b,Y,"("," ",")",c,this)};function qf(){}
var rf=function rf(a){if(null!=a&&null!=a.sb)return a.sb(a);var c=rf[t(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=rf._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw D("IEncodeJS.-clj-\x3ejs",a);},sf=function sf(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return sf.A(arguments[0],1<c.length?new O(c.slice(1),0,null):null)};
sf.A=function(a,b){var c=null!=b&&(b.h&64||y===b.ma)?Bd($e,b):b,d=K.g(c,tf,ld),e=function(){return function(a){var b=g;(null!=a?y===a.rb||(a.Hb?0:B(qf,a)):B(qf,a))?a=rf(a):"string"===typeof a||"number"===typeof a||a instanceof W||a instanceof gc?a=b.a?b.a(a):b.call(null,a):(a=Ec([a]),b=Na(),a=null==a||Ya(M(a))?"":F.a(nf(a,b)));return a}}(b,c,c,d),g=function(a,b,c,d){return function q(a){if(null==a)return null;if(null!=a?y===a.rb||(a.Hb?0:B(qf,a)):B(qf,a))return rf(a);if(a instanceof W)return d.a?
d.a(a):d.call(null,a);if(a instanceof gc)return F.a(a);if(Rc(a)){var b={};a=M(a);for(var c=null,g=0,h=0;;)if(h<g){var k=c.K(null,h),l=Jc(k,0,null),m=Jc(k,1,null);k=b;l=e(l);m=q(m);k[l]=m;h+=1}else if(a=M(a))Uc(a)?(g=Ob(a),a=Pb(a),c=g,g=S(g)):(c=P(a),g=Jc(c,0,null),h=Jc(c,1,null),c=b,g=e(g),h=q(h),c[g]=h,a=Q(a),c=null,g=0),h=0;else break;return b}if(null==a?0:null!=a?a.h&8||y===a.Nb||(a.h?0:B(db,a)):B(db,a)){b=[];a=M(X.b(q,a));c=null;for(h=g=0;;)if(h<g)k=c.K(null,h),b.push(k),h+=1;else if(a=M(a))c=
a,Uc(c)?(a=Ob(c),h=Pb(c),c=a,g=S(a),a=h):(a=P(c),b.push(a),a=Q(c),c=null,g=0),h=0;else break;return b}return a}}(b,c,c,d);return g(a)};sf.R=1;sf.P=function(a){var b=P(a);a=Q(a);return this.A(b,a)};if("undefined"===typeof Fa||"undefined"===typeof Ga||"undefined"===typeof uf)var uf=null;"undefined"!==typeof console&&Wa();if("undefined"===typeof Fa||"undefined"===typeof Ga||"undefined"===typeof wf)var wf=function(){throw Error("cljs.core/*eval* not bound");};Wa();var Ua=new W(null,"print-length","print-length",1931866356),xf=new W(null,"zoom","zoom",-1827487038),yf=new W(null,"lng","lng",1667213918),Pa=new W(null,"flush-on-newline","flush-on-newline",-151457939),pf=new W(null,"val","val",128701612),Sa=new W(null,"meta","meta",1499536964),zf=new W(null,"map","map",1371690461),Af=new W(null,"dom-node","dom-node",452283727),Id=new gc(null,"meta12290","meta12290",-799115997,null),Bf=new W(null,"position","position",-2011731912),mf=new W(null,"fallback-impl","fallback-impl",
-1501286995),Cf=new W(null,"lat","lat",-580793929),Ra=new W(null,"readably","readably",1129599760),tf=new W(null,"keyword-fn","keyword-fn",-64566675),lf=new W(null,"alt-impl","alt-impl",670969595),Df=new W(null,"center","center",-748944368),Ef=new W(null,"style","style",-496642736),Ta=new W(null,"dup","dup",556298533),df=new W(null,"more-marker","more-marker",-14717935);var Ff=function Ff(a,b){if(null!=a&&null!=a.eb)return a.eb(a,b);var d=Ff[t(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=Ff._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw D("MapLike.add-marker!",a);},Gf=function Gf(a,b){if(null!=a&&null!=a.fb)return a.fb(a,b);var d=Gf[t(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=Gf._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw D("MapSingleEntity.set-position!",a);};google.maps.Marker.prototype.fb=function(a,b){this.setPosition(b);return this};google.maps.Map.prototype.eb=function(a,b){return new google.maps.Marker(sf(Kc.g(b,zf,this)))};var Z={},Hf={};Z.process={};Z.process.browser=!0;var If={};Z.process.title="browser";Z.process.argv=[];Z.process.cwd=function(){return"/"};Z.process.version="";Z.process.versions={};Z.process.env={NODE_ENV:"development"};function Jf(){}Z.process.on=Jf;Z.process.addListener=Jf;Z.process.once=Jf;Z.process.off=Jf;Z.process.removeListener=Jf;Z.process.removeAllListeners=Jf;Z.process.emit=Jf;Z.process.prependListener=Jf;Z.process.prependOnceListener=Jf;Z.process.listeners=function(){return[]};
Z.process.binding=function(){throw Error("process.binding is not supported");};Z.process.cwd=function(){return"/"};Z.process.chdir=function(){throw Error("process.chdir is not supported");};Z.process.umask=function(){return 0};
function Kf(a,b){var c=Hf[a];void 0===c&&(c=Hf[a]={exports:{}});var d=shadow$provide[a];if(d){delete shadow$provide[a];var e=aa.process||Z.process;try{d.call(c,aa,e,Kf,c,c.exports,If)}catch(g){throw console.warn("shadow-cljs - failed to load",a),g;}if(b&&(a=b.globals))for(b=0;b<a.length;b++)window[a[b]]=c.exports}return c.exports};var module$node_modules$mapbox_gl$dist$mapbox_gl=Kf("module$node_modules$mapbox_gl$dist$mapbox_gl",{});module$node_modules$mapbox_gl$dist$mapbox_gl.Marker.prototype.fb=function(a,b){b=null!=b&&(b.h&64||y===b.ma)?Bd($e,b):b;a=K.b(b,Cf);b=K.b(b,yf);this.setLngLat({lon:b,lat:a});return this};module$node_modules$mapbox_gl$dist$mapbox_gl.Map.prototype.eb=function(a,b){a=null!=b&&(b.h&64||y===b.ma)?Bd($e,b):b;a=K.b(a,Bf);return Gf(new module$node_modules$mapbox_gl$dist$mapbox_gl.Marker({}),a).addTo(this)};var Lf=new Ld(!1),Mf=new Ld(null);
function Nf(){var a=new Oa(null,3,[Af,document.getElementById("map"),xf,12,Df,new Oa(null,2,[Cf,14.6091,yf,121.0223],null)],null);if(z(pb(Lf))){var b=null!=a&&(a.h&64||y===a.ma)?Bd($e,a):a;a=K.b(b,Af);var c=K.b(b,Df);b=K.b(b,xf);a=new google.maps.Map(a,{center:sf(c),zoom:b})}else{b=null!=a&&(a.h&64||y===a.ma)?Bd($e,a):a;a=K.b(b,Af);var d=K.b(b,Df);c=K.b(b,xf);K.b(b,Ef);d=null!=d&&(d.h&64||y===d.ma)?Bd($e,d):d;b=K.b(d,Cf);d=K.b(d,yf);a=new module$node_modules$mapbox_gl$dist$mapbox_gl.Map({container:a,center:[d,
b],zoom:c,style:"https://tiles.stadiamaps.com/styles/alidade_smooth.json"})}Md(Mf,a);return Ff(pb(Mf),new Oa(null,1,[Bf,new Oa(null,2,[Cf,14.6091,yf,121.0223],null)],null))}function Of(){Nd.b(Lf,Ya);return Nf()}function Pf(){document.getElementById("switch-button").addEventListener("click",Of);return Nf()}var Qf=["sanity","core","init"],Rf=aa;Qf[0]in Rf||!Rf.execScript||Rf.execScript("var "+Qf[0]);
for(var Sf;Qf.length&&(Sf=Qf.shift());){var Tf;if(Tf=!Qf.length)Tf=void 0!==Pf;Tf?Rf[Sf]=Pf:Rf=Rf[Sf]&&Rf[Sf]!==Object.prototype[Sf]?Rf[Sf]:Rf[Sf]={}};
}).call(this);